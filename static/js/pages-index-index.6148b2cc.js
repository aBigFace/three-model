(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"00c5":function(e,t,n){var i=n("5712");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("38aaa527",i,!0,{sourceMap:!1,shadowMode:!1})},"021d":function(e,t,n){"use strict";n.r(t);var i=n("4577"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"0c50":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-icon",class:["u-icon--"+e.labelPos],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickHandler.apply(void 0,arguments)}}},[e.isImg?n("v-uni-image",{staticClass:"u-icon__img",style:[e.imgStyle,e.$u.addStyle(e.customStyle)],attrs:{src:e.name,mode:e.imgMode}}):n("v-uni-text",{staticClass:"u-icon__icon",class:e.uClasses,style:[e.iconStyle,e.$u.addStyle(e.customStyle)],attrs:{"hover-class":e.hoverClass}},[e._v(e._s(e.icon))]),""!==e.label?n("v-uni-text",{staticClass:"u-icon__label",style:{color:e.labelColor,fontSize:e.$u.addUnit(e.labelSize),marginLeft:"right"==e.labelPos?e.$u.addUnit(e.space):0,marginTop:"bottom"==e.labelPos?e.$u.addUnit(e.space):0,marginRight:"left"==e.labelPos?e.$u.addUnit(e.space):0,marginBottom:"top"==e.labelPos?e.$u.addUnit(e.space):0}},[e._v(e._s(e.label))]):e._e()],1)},a=[]},"11cd":function(e,t,n){"use strict";var i=n("4ea4");n("d81d"),n("13d5"),n("fb6a"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("3835")),a=i(n("5530"));n("96cf");var o=i(n("1da1")),s=i(n("93cb")),l={name:"u-tabs",mixins:[uni.$u.mpMixin,uni.$u.mixin,s.default],data:function(){return{firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}},watch:{current:{immediate:!0,handler:function(e,t){var n=this;e!==this.innerCurrent&&(this.innerCurrent=e,this.$nextTick((function(){n.resize()})))}},list:function(){var e=this;this.$nextTick((function(){e.resize()}))}},computed:{textStyle:function(){var e=this;return function(t){var n={},i=t===e.innerCurrent?uni.$u.addStyle(e.activeStyle):uni.$u.addStyle(e.inactiveStyle);return e.list[t].disabled&&(n.color="#c8c9cc"),uni.$u.deepMerge(i,n)}},propsBadge:function(){return uni.$u.props.badge}},mounted:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},methods:{setLineLeft:function(){var e=this,t=this.list[this.innerCurrent];if(t){var n=this.list.slice(0,this.innerCurrent).reduce((function(e,t){return e+t.rect.width}),0),i=uni.$u.getPx(this.lineWidth);this.lineOffsetLeft=n+(t.rect.width-i)/2,this.firstTime&&setTimeout((function(){e.firstTime=!1}),10)}},animation:function(e){},clickHandler:function(e,t){this.$emit("click",(0,a.default)((0,a.default)({},e),{},{index:t})),e.disabled||(this.innerCurrent=t,this.resize(),this.$emit("change",(0,a.default)((0,a.default)({},e),{},{index:t})))},init:function(){var e=this;uni.$u.sleep().then((function(){e.resize()}))},setScrollLeft:function(){var e=this.list[this.innerCurrent],t=this.list.slice(0,this.innerCurrent).reduce((function(e,t){return e+t.rect.width}),0),n=uni.$u.sys().windowWidth,i=t-(this.tabsRect.width-e.rect.width)/2-(n-this.tabsRect.right)/2+this.tabsRect.left/2;i=Math.min(i,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,i)},resize:function(){var e=this;0!==this.list.length&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then((function(t){var n=(0,r.default)(t,2),i=n[0],a=n[1],o=void 0===a?[]:a;e.tabsRect=i,e.scrollViewWidth=0,o.map((function(t,n){e.scrollViewWidth+=t.width,e.list[n].rect=t})),e.setLineLeft(),e.setScrollLeft()}))},getTabsRect:function(){var e=this;return new Promise((function(t){e.queryRect("u-tabs__wrapper__scroll-view").then((function(e){return t(e)}))}))},getAllItemRect:function(){var e=this;return new Promise((function(t){var n=e.list.map((function(t,n){return e.queryRect("u-tabs__wrapper__nav__item-".concat(n),!0)}));Promise.all(n).then((function(e){return t(e)}))}))},queryRect:function(e,t){var n=this;return new Promise((function(t){n.$uGetRect(".".concat(e)).then((function(e){t(e)}))}))}}};t.default=l},"12c4":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uToast:n("ad5c").default,uTabs:n("ce95").default,uCellGroup:n("fc78").default,uCell:n("b089").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content",attrs:{id:"content"}},[n("u-toast",{ref:"uToast"}),n("u-tabs",{attrs:{current:e.activeIndex,list:e.list4,lineWidth:30,scrollable:!1,lineHeight:10,activeStyle:{color:"#303133",fontWeight:"bold",transform:"scale(1.05)"},inactiveStyle:{color:"#606266",transform:"scale(1)"}},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onTabChange.apply(void 0,arguments)}}}),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==e.activeIndex,expression:"activeIndex == 0"}],key:"three-model",attrs:{id:"three-model"}}),1==e.activeIndex?n("v-uni-view",{key:"model-info",staticClass:"model-info"},[n("u-cell-group",e._l(Object.keys(e.getBasicInfo),(function(t,i){return n("u-cell",{key:i,attrs:{title:t,value:e.getBasicInfo[t]}})})),1)],1):n("v-uni-view",{key:"model-bed-info",staticClass:"model-bed-info"},[n("u-cell-group",e._l(Object.keys(e.getMineralBedInfo),(function(t,i){return n("u-cell",{key:i,attrs:{title:t,value:e.getMineralBedInfo[t]}})})),1)],1)],1)},a=[]},"136f":function(e,t,n){"use strict";n.r(t);var i=n("2481"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"143c":function(e,t,n){var i=n("74e8");i("Int32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},1490:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-gap",style:[e.gapStyle]})},a=[]},"153e":function(e,t,n){var i=n("587a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("45474e6e",i,!0,{sourceMap:!1,shadowMode:!1})},1913:function(e,t,n){var i=n("b5e1");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("1483ec19",i,!0,{sourceMap:!1,shadowMode:!1})},"1dc5":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{color:{type:String,default:uni.$u.props.line.color},length:{type:[String,Number],default:uni.$u.props.line.length},direction:{type:String,default:uni.$u.props.line.direction},hairline:{type:Boolean,default:uni.$u.props.line.hairline},margin:{type:[String,Number],default:uni.$u.props.line.margin},dashed:{type:Boolean,default:uni.$u.props.line.dashed}}};t.default=i},"21ff":function(e,t,n){"use strict";var i=n("4ea4");n("a434"),n("d3b7"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.MapControls=t.OrbitControls=void 0;var r=i(n("d4ec")),a=i(n("257e")),o=i(n("262e")),s=i(n("2caf")),l=n("e67e"),u={type:"change"},c={type:"start"},h={type:"end"},d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,i){var o;(0,r.default)(this,n),o=t.call(this),void 0===i&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.object=e,o.domElement=i,o.domElement.style.touchAction="none",o.enabled=!0,o.target=new l.Vector3,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:l.MOUSE.ROTATE,MIDDLE:l.MOUSE.DOLLY,RIGHT:l.MOUSE.PAN},o.touches={ONE:l.TOUCH.ROTATE,TWO:l.TOUCH.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return v.phi},o.getAzimuthalAngle=function(){return v.theta},o.getDistance=function(){return this.object.position.distanceTo(this.target)},o.listenToKeyEvents=function(e){e.addEventListener("keydown",he),this._domElementKeyEvents=e},o.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},o.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(u),s.update(),f=d.NONE},o.update=function(){var t=new l.Vector3,n=(new l.Quaternion).setFromUnitVectors(e.up,new l.Vector3(0,1,0)),i=n.clone().invert(),r=new l.Vector3,a=new l.Quaternion,o=2*Math.PI;return function(){var e=s.object.position;t.copy(e).sub(s.target),t.applyQuaternion(n),v.setFromVector3(t),s.autoRotate&&f===d.NONE&&P(R()),s.enableDamping?(v.theta+=m.theta*s.dampingFactor,v.phi+=m.phi*s.dampingFactor):(v.theta+=m.theta,v.phi+=m.phi);var l=s.minAzimuthAngle,c=s.maxAzimuthAngle;return isFinite(l)&&isFinite(c)&&(l<-Math.PI?l+=o:l>Math.PI&&(l-=o),c<-Math.PI?c+=o:c>Math.PI&&(c-=o),v.theta=l<=c?Math.max(l,Math.min(c,v.theta)):v.theta>(l+c)/2?Math.max(l,v.theta):Math.min(c,v.theta)),v.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=g,v.radius=Math.max(s.minDistance,Math.min(s.maxDistance,v.radius)),!0===s.enableDamping?s.target.addScaledVector(y,s.dampingFactor):s.target.add(y),t.setFromSpherical(v),t.applyQuaternion(i),e.copy(s.target).add(t),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,y.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),g=1,!!(_||r.distanceToSquared(s.object.position)>p||8*(1-a.dot(s.object.quaternion))>p)&&(s.dispatchEvent(u),r.copy(s.object.position),a.copy(s.object.quaternion),_=!1,!0)}}(),o.dispose=function(){s.domElement.removeEventListener("contextmenu",pe),s.domElement.removeEventListener("pointerdown",re),s.domElement.removeEventListener("pointercancel",se),s.domElement.removeEventListener("wheel",ce),s.domElement.removeEventListener("pointermove",ae),s.domElement.removeEventListener("pointerup",oe),null!==s._domElementKeyEvents&&s._domElementKeyEvents.removeEventListener("keydown",he)};var s=(0,a.default)(o),d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=d.NONE,p=1e-6,v=new l.Spherical,m=new l.Spherical,g=1,y=new l.Vector3,_=!1,x=new l.Vector2,b=new l.Vector2,M=new l.Vector2,w=new l.Vector2,S=new l.Vector2,A=new l.Vector2,T=new l.Vector2,C=new l.Vector2,E=new l.Vector2,k=[],L={};function R(){return 2*Math.PI/60/60*s.autoRotateSpeed}function B(){return Math.pow(.95,s.zoomSpeed)}function P(e){m.theta-=e}function I(e){m.phi-=e}var D=function(){var e=new l.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),y.add(e)}}(),O=function(){var e=new l.Vector3;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),F=function(){var e=new l.Vector3;return function(t,n){var i=s.domElement;if(s.object.isPerspectiveCamera){var r=s.object.position;e.copy(r).sub(s.target);var a=e.length();a*=Math.tan(s.object.fov/2*Math.PI/180),D(2*t*a/i.clientHeight,s.object.matrix),O(2*n*a/i.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(D(t*(s.object.right-s.object.left)/s.object.zoom/i.clientWidth,s.object.matrix),O(n*(s.object.top-s.object.bottom)/s.object.zoom/i.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function N(e){s.object.isPerspectiveCamera?g/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function G(e){s.object.isPerspectiveCamera?g*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function U(e){x.set(e.clientX,e.clientY)}function z(e){T.set(e.clientX,e.clientY)}function H(e){w.set(e.clientX,e.clientY)}function V(e){b.set(e.clientX,e.clientY),M.subVectors(b,x).multiplyScalar(s.rotateSpeed);var t=s.domElement;P(2*Math.PI*M.x/t.clientHeight),I(2*Math.PI*M.y/t.clientHeight),x.copy(b),s.update()}function W(e){C.set(e.clientX,e.clientY),E.subVectors(C,T),E.y>0?N(B()):E.y<0&&G(B()),T.copy(C),s.update()}function j(e){S.set(e.clientX,e.clientY),A.subVectors(S,w).multiplyScalar(s.panSpeed),F(A.x,A.y),w.copy(S),s.update()}function J(e){e.deltaY<0?G(B()):e.deltaY>0&&N(B()),s.update()}function X(e){var t=!1;switch(e.code){case s.keys.UP:F(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:F(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:F(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:F(-s.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),s.update())}function q(){if(1===k.length)x.set(k[0].pageX,k[0].pageY);else{var e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);x.set(e,t)}}function Y(){if(1===k.length)w.set(k[0].pageX,k[0].pageY);else{var e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);w.set(e,t)}}function Z(){var e=k[0].pageX-k[1].pageX,t=k[0].pageY-k[1].pageY,n=Math.sqrt(e*e+t*t);T.set(0,n)}function K(){s.enableZoom&&Z(),s.enablePan&&Y()}function Q(){s.enableZoom&&Z(),s.enableRotate&&q()}function $(e){if(1==k.length)b.set(e.pageX,e.pageY);else{var t=ye(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);b.set(n,i)}M.subVectors(b,x).multiplyScalar(s.rotateSpeed);var r=s.domElement;P(2*Math.PI*M.x/r.clientHeight),I(2*Math.PI*M.y/r.clientHeight),x.copy(b)}function ee(e){if(1===k.length)S.set(e.pageX,e.pageY);else{var t=ye(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);S.set(n,i)}A.subVectors(S,w).multiplyScalar(s.panSpeed),F(A.x,A.y),w.copy(S)}function te(e){var t=ye(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);C.set(0,r),E.set(0,Math.pow(C.y/T.y,s.zoomSpeed)),N(E.y),T.copy(C)}function ne(e){s.enableZoom&&te(e),s.enablePan&&ee(e)}function ie(e){s.enableZoom&&te(e),s.enableRotate&&$(e)}function re(e){!1!==s.enabled&&(0===k.length&&(s.domElement.setPointerCapture(e.pointerId),s.domElement.addEventListener("pointermove",ae),s.domElement.addEventListener("pointerup",oe)),ve(e),"touch"===e.pointerType?de(e):le(e))}function ae(e){!1!==s.enabled&&("touch"===e.pointerType?fe(e):ue(e))}function oe(e){me(e),0===k.length&&(s.domElement.releasePointerCapture(e.pointerId),s.domElement.removeEventListener("pointermove",ae),s.domElement.removeEventListener("pointerup",oe)),s.dispatchEvent(h),f=d.NONE}function se(e){me(e)}function le(e){var t;switch(e.button){case 0:t=s.mouseButtons.LEFT;break;case 1:t=s.mouseButtons.MIDDLE;break;case 2:t=s.mouseButtons.RIGHT;break;default:t=-1}switch(t){case l.MOUSE.DOLLY:if(!1===s.enableZoom)return;z(e),f=d.DOLLY;break;case l.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;H(e),f=d.PAN}else{if(!1===s.enableRotate)return;U(e),f=d.ROTATE}break;case l.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;U(e),f=d.ROTATE}else{if(!1===s.enablePan)return;H(e),f=d.PAN}break;default:f=d.NONE}f!==d.NONE&&s.dispatchEvent(c)}function ue(e){if(!1!==s.enabled)switch(f){case d.ROTATE:if(!1===s.enableRotate)return;V(e);break;case d.DOLLY:if(!1===s.enableZoom)return;W(e);break;case d.PAN:if(!1===s.enablePan)return;j(e);break}}function ce(e){!1!==s.enabled&&!1!==s.enableZoom&&f===d.NONE&&(e.preventDefault(),s.dispatchEvent(c),J(e),s.dispatchEvent(h))}function he(e){!1!==s.enabled&&!1!==s.enablePan&&X(e)}function de(e){switch(ge(e),k.length){case 1:switch(s.touches.ONE){case l.TOUCH.ROTATE:if(!1===s.enableRotate)return;q(),f=d.TOUCH_ROTATE;break;case l.TOUCH.PAN:if(!1===s.enablePan)return;Y(),f=d.TOUCH_PAN;break;default:f=d.NONE}break;case 2:switch(s.touches.TWO){case l.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;K(),f=d.TOUCH_DOLLY_PAN;break;case l.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;Q(),f=d.TOUCH_DOLLY_ROTATE;break;default:f=d.NONE}break;default:f=d.NONE}f!==d.NONE&&s.dispatchEvent(c)}function fe(e){switch(ge(e),f){case d.TOUCH_ROTATE:if(!1===s.enableRotate)return;$(e),s.update();break;case d.TOUCH_PAN:if(!1===s.enablePan)return;ee(e),s.update();break;case d.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;ne(e),s.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;ie(e),s.update();break;default:f=d.NONE}}function pe(e){!1!==s.enabled&&e.preventDefault()}function ve(e){k.push(e)}function me(e){delete L[e.pointerId];for(var t=0;t<k.length;t++)if(k[t].pointerId==e.pointerId)return void k.splice(t,1)}function ge(e){var t=L[e.pointerId];void 0===t&&(t=new l.Vector2,L[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ye(e){var t=e.pointerId===k[0].pointerId?k[1]:k[0];return L[t.pointerId]}return s.domElement.addEventListener("contextmenu",pe),s.domElement.addEventListener("pointerdown",re),s.domElement.addEventListener("pointercancel",se),s.domElement.addEventListener("wheel",ce,{passive:!1}),o.update(),o}return n}(l.EventDispatcher);t.OrbitControls=d;var f=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,i){var a;return(0,r.default)(this,n),a=t.call(this,e,i),a.screenSpacePanning=!1,a.mouseButtons.LEFT=l.MOUSE.PAN,a.mouseButtons.RIGHT=l.MOUSE.ROTATE,a.touches.ONE=l.TOUCH.PAN,a.touches.TWO=l.TOUCH.DOLLY_ROTATE,a}return n}(d);t.MapControls=f},2318:function(e,t,n){var i=n("9fd0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("08554b19",i,!0,{sourceMap:!1,shadowMode:!1})},"240a":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{title:{type:[String,Number],default:uni.$u.props.cell.title},label:{type:[String,Number],default:uni.$u.props.cell.label},value:{type:[String,Number],default:uni.$u.props.cell.value},icon:{type:String,default:uni.$u.props.cell.icon},disabled:{type:Boolean,default:uni.$u.props.cell.disabled},border:{type:Boolean,default:uni.$u.props.cell.border},center:{type:Boolean,default:uni.$u.props.cell.center},url:{type:String,default:uni.$u.props.cell.url},linkType:{type:String,default:uni.$u.props.cell.linkType},clickable:{type:Boolean,default:uni.$u.props.cell.clickable},isLink:{type:Boolean,default:uni.$u.props.cell.isLink},required:{type:Boolean,default:uni.$u.props.cell.required},rightIcon:{type:String,default:uni.$u.props.cell.rightIcon},arrowDirection:{type:String,default:uni.$u.props.cell.arrowDirection},iconStyle:{type:[Object,String],default:function(){return uni.$u.props.cell.iconStyle}},rightIconStyle:{type:[Object,String],default:function(){return uni.$u.props.cell.rightIconStyle}},titleStyle:{type:[Object,String],default:function(){return uni.$u.props.cell.titleStyle}},size:{type:String,default:uni.$u.props.cell.size},stop:{type:Boolean,default:uni.$u.props.cell.stop},name:{type:[Number,String],default:uni.$u.props.cell.name}}};t.default=i},"245e":function(e,t,n){"use strict";n.r(t);var i=n("bd86"),r=n("949e");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("410d");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"a75f7a08",null,!1,i["a"],o);t["default"]=l.exports},2481:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("4bfa")),a={name:"u-overlay",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{overlayStyle:function(){var e={position:"fixed",top:0,left:0,right:0,zIndex:this.zIndex,bottom:0,"background-color":"rgba(0, 0, 0, ".concat(this.opacity,")")};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},methods:{clickHandler:function(){this.$emit("click")}}};t.default=a},"257e":function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"262e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("b380"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,i.default)(e,t)}},"26b0":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-59765974], uni-scroll-view[data-v-59765974], uni-swiper-item[data-v-59765974]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}@font-face{font-family:uicon-iconfont;src:url(https://at.alicdn.com/t/font_2225171_8kdcwk4po24.ttf) format("truetype")}.u-icon[data-v-59765974]{display:flex;align-items:center}.u-icon--left[data-v-59765974]{flex-direction:row-reverse;align-items:center}.u-icon--right[data-v-59765974]{flex-direction:row;align-items:center}.u-icon--top[data-v-59765974]{flex-direction:column-reverse;justify-content:center}.u-icon--bottom[data-v-59765974]{flex-direction:column;justify-content:center}.u-icon__icon[data-v-59765974]{font-family:uicon-iconfont;position:relative;display:flex;flex-direction:row;align-items:center}.u-icon__icon--primary[data-v-59765974]{color:#3c9cff}.u-icon__icon--success[data-v-59765974]{color:#5ac725}.u-icon__icon--error[data-v-59765974]{color:#f56c6c}.u-icon__icon--warning[data-v-59765974]{color:#f9ae3d}.u-icon__icon--info[data-v-59765974]{color:#909399}.u-icon__img[data-v-59765974]{height:auto;will-change:transform}.u-icon__label[data-v-59765974]{line-height:1}',""]),e.exports=t},2909:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(n("6005")),r=s(n("db90")),a=s(n("06c5")),o=s(n("3427"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(0,i.default)(e)||(0,r.default)(e)||(0,a.default)(e)||(0,o.default)()}},"2af1":function(e,t,n){var i=n("23e7"),r=n("f748");i({target:"Math",stat:!0},{sign:r})},"2caf":function(e,t,n){"use strict";n("4ae1"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=o(n("7e84")),r=o(n("d967")),a=o(n("99de"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=(0,r.default)();return function(){var n,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}},"2d8e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={fade:{enter:{opacity:0},"enter-to":{opacity:1},leave:{opacity:1},"leave-to":{opacity:0}},"fade-up":{enter:{opacity:0,transform:"translateY(100%)"},"enter-to":{opacity:1,transform:"translateY(0)"},leave:{opacity:1,transform:"translateY(0)"},"leave-to":{opacity:0,transform:"translateY(100%)"}},"fade-down":{enter:{opacity:0,transform:"translateY(-100%)"},"enter-to":{opacity:1,transform:"translateY(0)"},leave:{opacity:1,transform:"translateY(0)"},"leave-to":{opacity:0,transform:"translateY(-100%)"}},"fade-left":{enter:{opacity:0,transform:"translateX(-100%)"},"enter-to":{opacity:1,transform:"translateY(0)"},leave:{opacity:1,transform:"translateY(0)"},"leave-to":{opacity:0,transform:"translateX(-100%)"}},"fade-right":{enter:{opacity:0,transform:"translateX(100%)"},"enter-to":{opacity:1,transform:"translateY(0)"},leave:{opacity:1,transform:"translateY(0)"},"leave-to":{opacity:0,transform:"translateX(100%)"}},"slide-up":{enter:{transform:"translateY(100%)"},"enter-to":{transform:"translateY(0)"},leave:{transform:"translateY(0)"},"leave-to":{transform:"translateY(100%)"}},"slide-down":{enter:{transform:"translateY(-100%)"},"enter-to":{transform:"translateY(0)"},leave:{transform:"translateY(0)"},"leave-to":{transform:"translateY(-100%)"}},"slide-left":{enter:{transform:"translateX(-100%)"},"enter-to":{transform:"translateY(0)"},leave:{transform:"translateY(0)"},"leave-to":{transform:"translateX(-100%)"}},"slide-right":{enter:{transform:"translateX(100%)"},"enter-to":{transform:"translateY(0)"},leave:{transform:"translateY(0)"},"leave-to":{transform:"translateX(100%)"}},zoom:{enter:{transform:"scale(0.95)"},"enter-to":{transform:"scale(1)"},leave:{transform:"scale(1)"},"leave-to":{transform:"scale(0.95)"}},"fade-zoom":{enter:{opacity:0,transform:"scale(0.95)"},"enter-to":{opacity:1,transform:"scale(1)"},leave:{opacity:1,transform:"scale(1)"},"leave-to":{opacity:0,transform:"scale(0.95)"}}};t.default=i},3171:function(e,t,n){"use strict";var i=n("153e"),r=n.n(i);r.a},"326f":function(e,t,n){"use strict";n.r(t);var i=n("39f8"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},3427:function(e,t,n){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"35b3":function(e,t,n){var i=n("23e7");i({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},"373b":function(e,t,n){"use strict";var i=n("1913"),r=n.n(i);r.a},"38cf":function(e,t,n){var i=n("23e7"),r=n("1148");i({target:"String",proto:!0},{repeat:r})},"39f8":function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("acbd")),a={name:"u-cell-group",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default]};t.default=a},"3b31":function(e,t,n){var i=n("7e73");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("617a6896",i,!0,{sourceMap:!1,shadowMode:!1})},"3e32":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={"uicon-level":"","uicon-column-line":"","uicon-checkbox-mark":"","uicon-folder":"","uicon-movie":"","uicon-star-fill":"","uicon-star":"","uicon-phone-fill":"","uicon-phone":"","uicon-apple-fill":"","uicon-chrome-circle-fill":"","uicon-backspace":"","uicon-attach":"","uicon-cut":"","uicon-empty-car":"","uicon-empty-coupon":"","uicon-empty-address":"","uicon-empty-favor":"","uicon-empty-permission":"","uicon-empty-news":"","uicon-empty-search":"","uicon-github-circle-fill":"","uicon-rmb":"","uicon-person-delete-fill":"","uicon-reload":"","uicon-order":"","uicon-server-man":"","uicon-search":"","uicon-fingerprint":"","uicon-more-dot-fill":"","uicon-scan":"","uicon-share-square":"","uicon-map":"","uicon-map-fill":"","uicon-tags":"","uicon-tags-fill":"","uicon-bookmark-fill":"","uicon-bookmark":"","uicon-eye":"","uicon-eye-fill":"","uicon-mic":"","uicon-mic-off":"","uicon-calendar":"","uicon-calendar-fill":"","uicon-trash":"","uicon-trash-fill":"","uicon-play-left":"","uicon-play-right":"","uicon-minus":"","uicon-plus":"","uicon-info":"","uicon-info-circle":"","uicon-info-circle-fill":"","uicon-question":"","uicon-error":"","uicon-close":"","uicon-checkmark":"","uicon-android-circle-fill":"","uicon-android-fill":"","uicon-ie":"","uicon-IE-circle-fill":"","uicon-google":"","uicon-google-circle-fill":"","uicon-setting-fill":"","uicon-setting":"","uicon-minus-square-fill":"","uicon-plus-square-fill":"","uicon-heart":"","uicon-heart-fill":"","uicon-camera":"","uicon-camera-fill":"","uicon-more-circle":"","uicon-more-circle-fill":"","uicon-chat":"","uicon-chat-fill":"","uicon-bag-fill":"","uicon-bag":"","uicon-error-circle-fill":"","uicon-error-circle":"","uicon-close-circle":"","uicon-close-circle-fill":"","uicon-checkmark-circle":"","uicon-checkmark-circle-fill":"","uicon-question-circle-fill":"","uicon-question-circle":"","uicon-share":"","uicon-share-fill":"","uicon-shopping-cart":"","uicon-shopping-cart-fill":"","uicon-bell":"","uicon-bell-fill":"","uicon-list":"","uicon-list-dot":"","uicon-zhihu":"","uicon-zhihu-circle-fill":"","uicon-zhifubao":"","uicon-zhifubao-circle-fill":"","uicon-weixin-circle-fill":"","uicon-weixin-fill":"","uicon-twitter-circle-fill":"","uicon-twitter":"","uicon-taobao-circle-fill":"","uicon-taobao":"","uicon-weibo-circle-fill":"","uicon-weibo":"","uicon-qq-fill":"","uicon-qq-circle-fill":"","uicon-moments-circel-fill":"","uicon-moments":"","uicon-qzone":"","uicon-qzone-circle-fill":"","uicon-baidu-circle-fill":"","uicon-baidu":"","uicon-facebook-circle-fill":"","uicon-facebook":"","uicon-car":"","uicon-car-fill":"","uicon-warning-fill":"","uicon-warning":"","uicon-clock-fill":"","uicon-clock":"","uicon-edit-pen":"","uicon-edit-pen-fill":"","uicon-email":"","uicon-email-fill":"","uicon-minus-circle":"","uicon-minus-circle-fill":"","uicon-plus-circle":"","uicon-plus-circle-fill":"","uicon-file-text":"","uicon-file-text-fill":"","uicon-pushpin":"","uicon-pushpin-fill":"","uicon-grid":"","uicon-grid-fill":"","uicon-play-circle":"","uicon-play-circle-fill":"","uicon-pause-circle-fill":"","uicon-pause":"","uicon-pause-circle":"","uicon-eye-off":"","uicon-eye-off-outline":"","uicon-gift-fill":"","uicon-gift":"","uicon-rmb-circle-fill":"","uicon-rmb-circle":"","uicon-kefu-ermai":"","uicon-server-fill":"","uicon-coupon-fill":"","uicon-coupon":"","uicon-integral":"","uicon-integral-fill":"","uicon-home-fill":"","uicon-home":"","uicon-hourglass-half-fill":"","uicon-hourglass":"","uicon-account":"","uicon-plus-people-fill":"","uicon-minus-people-fill":"","uicon-account-fill":"","uicon-thumb-down-fill":"","uicon-thumb-down":"","uicon-thumb-up":"","uicon-thumb-up-fill":"","uicon-lock-fill":"","uicon-lock-open":"","uicon-lock-opened-fill":"","uicon-lock":"","uicon-red-packet-fill":"","uicon-photo-fill":"","uicon-photo":"","uicon-volume-off-fill":"","uicon-volume-off":"","uicon-volume-fill":"","uicon-volume":"","uicon-red-packet":"","uicon-download":"","uicon-arrow-up-fill":"","uicon-arrow-down-fill":"","uicon-play-left-fill":"","uicon-play-right-fill":"","uicon-rewind-left-fill":"","uicon-rewind-right-fill":"","uicon-arrow-downward":"","uicon-arrow-leftward":"","uicon-arrow-rightward":"","uicon-arrow-upward":"","uicon-arrow-down":"","uicon-arrow-right":"","uicon-arrow-left":"","uicon-arrow-up":"","uicon-skip-back-left":"","uicon-skip-forward-right":"","uicon-rewind-right":"","uicon-rewind-left":"","uicon-arrow-right-double":"","uicon-arrow-left-double":"","uicon-wifi-off":"","uicon-wifi":"","uicon-empty-data":"","uicon-empty-history":"","uicon-empty-list":"","uicon-empty-page":"","uicon-empty-order":"","uicon-man":"","uicon-woman":"","uicon-man-add":"","uicon-man-add-fill":"","uicon-man-delete":"","uicon-man-delete-fill":"","uicon-zh":"","uicon-en":""};t.default=i},"410d":function(e,t,n){"use strict";var i=n("a4f5"),r=n.n(i);r.a},"41b8":function(e,t,n){"use strict";n.r(t);var i=n("6745"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"441f":function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("240a")),a={name:"u-cell",data:function(){return{}},mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{titleTextStyle:function(){return uni.$u.addStyle(this.titleStyle)}},methods:{clickHandler:function(e){this.disabled||(this.$emit("click",{name:this.name}),this.openPage(),this.stop&&this.preventEvent(e))}}};t.default=a},4478:function(e,t,n){"use strict";n("4ae1"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(n("b380")),r=a(n("d967"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,n,a){return(0,r.default)()?t.default=o=Reflect.construct:t.default=o=function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&(0,i.default)(o,n.prototype),o},o.apply(null,arguments)}},4577:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("893b")),a={name:"u-gap",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{gapStyle:function(){var e={backgroundColor:this.bgColor,height:uni.$u.addUnit(this.height),marginTop:uni.$u.addUnit(this.marginTop),marginBottom:uni.$u.addUnit(this.marginBottom)};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}}};t.default=a},"45eb":function(e,t,n){"use strict";n("e439"),n("5d41"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("5d34"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n,r){return"undefined"!==typeof Reflect&&Reflect.get?t.default=a=Reflect.get:t.default=a=function(e,t,n){var r=(0,i.default)(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},a(e,n,r||e)}},4878:function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{show:{type:Boolean,default:uni.$u.props.transition.show},mode:{type:String,default:uni.$u.props.transition.mode},duration:{type:[String,Number],default:uni.$u.props.transition.duration},timingFunction:{type:String,default:uni.$u.props.transition.timingFunction}}};t.default=i},"4a9b":function(e,t,n){var i=n("74e8");i("Float64",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},"4b21":function(e,t,n){var i=n("ad02");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("c2932454",i,!0,{sourceMap:!1,shadowMode:!1})},"4b91":function(e,t,n){"use strict";n.r(t);var i=n("0c50"),r=n("c53d");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("c876");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"59765974",null,!1,i["a"],o);t["default"]=l.exports},"4bfa":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{show:{type:Boolean,default:uni.$u.props.overlay.show},zIndex:{type:[String,Number],default:uni.$u.props.overlay.zIndex},duration:{type:[String,Number],default:uni.$u.props.overlay.duration},opacity:{type:[String,Number],default:uni.$u.props.overlay.opacity}}};t.default=i},"4e5b":function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("1dc5")),a={name:"u-line",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],computed:{lineStyle:function(){var e={};return e.margin=this.margin,"row"===this.direction?(e.borderBottomWidth="1px",e.borderBottomStyle=this.dashed?"dashed":"solid",e.width=uni.$u.addUnit(this.length),this.hairline&&(e.transform="scaleY(0.5)")):(e.borderLeftWidth="1px",e.borderLeftStyle=this.dashed?"dashed":"solid",e.height=uni.$u.addUnit(this.length),this.hairline&&(e.transform="scaleX(0.5)")),e.borderColor=this.color,uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}}};t.default=a},"53ca":function(e,t,n){"use strict";function i(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.default=i=function(e){return typeof e}:t.default=i=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},5622:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-c496bc48], uni-scroll-view[data-v-c496bc48], uni-swiper-item[data-v-c496bc48]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-cell-group[data-v-c496bc48]{flex:1}.u-cell-group__title[data-v-c496bc48]{padding:16px 16px 8px}.u-cell-group__title__text[data-v-c496bc48]{font-size:15px;line-height:16px;color:#303133}.u-cell-group__wrapper[data-v-c496bc48]{position:relative}',""]),e.exports=t},5712:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-55cfca04], uni-scroll-view[data-v-55cfca04], uni-swiper-item[data-v-55cfca04]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-badge[data-v-55cfca04]{border-top-right-radius:100px;border-top-left-radius:100px;border-bottom-left-radius:100px;border-bottom-right-radius:100px;display:flex;flex-direction:row;line-height:11px;text-align:center;font-size:11px;color:#fff}.u-badge--dot[data-v-55cfca04]{height:8px;width:8px}.u-badge--inverted[data-v-55cfca04]{font-size:13px}.u-badge--not-dot[data-v-55cfca04]{padding:2px 5px}.u-badge--horn[data-v-55cfca04]{border-bottom-left-radius:0}.u-badge--primary[data-v-55cfca04]{background-color:#3c9cff}.u-badge--primary--inverted[data-v-55cfca04]{color:#3c9cff}.u-badge--error[data-v-55cfca04]{background-color:#f56c6c}.u-badge--error--inverted[data-v-55cfca04]{color:#f56c6c}.u-badge--success[data-v-55cfca04]{background-color:#5ac725}.u-badge--success--inverted[data-v-55cfca04]{color:#5ac725}.u-badge--info[data-v-55cfca04]{background-color:#909399}.u-badge--info--inverted[data-v-55cfca04]{color:#909399}.u-badge--warning[data-v-55cfca04]{background-color:#f9ae3d}.u-badge--warning--inverted[data-v-55cfca04]{color:#f9ae3d}',""]),e.exports=t},"587a":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-7a78d4df], uni-scroll-view[data-v-7a78d4df], uni-swiper-item[data-v-7a78d4df]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-tabs__wrapper[data-v-7a78d4df]{display:flex;flex-direction:row;align-items:center}.u-tabs__wrapper__scroll-view-wrapper[data-v-7a78d4df]{flex:1;overflow:auto hidden}.u-tabs__wrapper__scroll-view[data-v-7a78d4df]{display:flex;flex-direction:row;flex:1}.u-tabs__wrapper__nav[data-v-7a78d4df]{display:flex;flex-direction:row;position:relative}.u-tabs__wrapper__nav__item[data-v-7a78d4df]{padding:0 11px;display:flex;flex-direction:row;align-items:center;justify-content:center}.u-tabs__wrapper__nav__item--disabled[data-v-7a78d4df]{cursor:not-allowed}.u-tabs__wrapper__nav__item__text[data-v-7a78d4df]{font-size:15px;color:#606266}.u-tabs__wrapper__nav__item__text--disabled[data-v-7a78d4df]{color:#c8c9cc!important}.u-tabs__wrapper__nav__line[data-v-7a78d4df]{height:3px;background:#3c9cff;width:30px;position:absolute;bottom:2px;border-radius:100px;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;transition-duration:.3s}',""]),e.exports=t},"5d34":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("7e84"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=(0,i.default)(e),null===e)break;return e}},"5e89":function(e,t,n){var i=n("861d"),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},6005:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("6b75"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e))return(0,i.default)(e)}},"619d":function(e,t,n){var i=n("ad7d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("3c761edf",i,!0,{sourceMap:!1,shadowMode:!1})},"61de":function(e,t,n){var i=n("a7fa");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("e959f9b8",i,!0,{sourceMap:!1,shadowMode:!1})},6609:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uBadge:n("c037").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-tabs"},[n("v-uni-view",{staticClass:"u-tabs__wrapper"},[e._t("left"),n("v-uni-view",{staticClass:"u-tabs__wrapper__scroll-view-wrapper"},[n("v-uni-scroll-view",{ref:"u-tabs__wrapper__scroll-view",staticClass:"u-tabs__wrapper__scroll-view",attrs:{"scroll-x":e.scrollable,"scroll-left":e.scrollLeft,"scroll-with-animation":!0,"show-scrollbar":!1}},[n("v-uni-view",{ref:"u-tabs__wrapper__nav",staticClass:"u-tabs__wrapper__nav"},[e._l(e.list,(function(t,i){return n("v-uni-view",{key:i,ref:"u-tabs__wrapper__nav__item-"+i,refInFor:!0,staticClass:"u-tabs__wrapper__nav__item",class:["u-tabs__wrapper__nav__item-"+i,t.disabled&&"u-tabs__wrapper__nav__item--disabled"],style:[e.$u.addStyle(e.itemStyle),{flex:e.scrollable?"":1}],on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.clickHandler(t,i)}}},[n("v-uni-text",{staticClass:"u-tabs__wrapper__nav__item__text",class:[t.disabled&&"u-tabs__wrapper__nav__item__text--disabled"],style:[e.textStyle(i)]},[e._v(e._s(t[e.keyName]))]),n("u-badge",{attrs:{show:!(!t.badge||!(t.badge.show||t.badge.isDot||t.badge.value)),isDot:t.badge&&t.badge.isDot||e.propsBadge.isDot,value:t.badge&&t.badge.value||e.propsBadge.value,max:t.badge&&t.badge.max||e.propsBadge.max,type:t.badge&&t.badge.type||e.propsBadge.type,showZero:t.badge&&t.badge.showZero||e.propsBadge.showZero,bgColor:t.badge&&t.badge.bgColor||e.propsBadge.bgColor,color:t.badge&&t.badge.color||e.propsBadge.color,shape:t.badge&&t.badge.shape||e.propsBadge.shape,numberType:t.badge&&t.badge.numberType||e.propsBadge.numberType,inverted:t.badge&&t.badge.inverted||e.propsBadge.inverted,customStyle:"margin-left: 4px;"}})],1)})),n("v-uni-view",{ref:"u-tabs__wrapper__nav__line",staticClass:"u-tabs__wrapper__nav__line",style:[{width:e.$u.addUnit(e.lineWidth),transform:"translate("+e.lineOffsetLeft+"px)",transitionDuration:(e.firstTime?0:e.duration)+"ms",height:e.$u.addUnit(e.lineHeight),background:e.lineColor,backgroundSize:e.lineBgSize}]})],2)],1)],1),e._t("right")],2)],1)},a=[]},6745:function(e,t,n){"use strict";var i=n("4ea4");n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("fcf8")),a={name:"u-badge",mixins:[uni.$u.mpMixin,r.default,uni.$u.mixin],computed:{boxStyle:function(){var e={};return e},badgeStyle:function(){var e={};if(this.color&&(e.color=this.color),this.bgColor&&!this.inverted&&(e.backgroundColor=this.bgColor),this.absolute&&(e.position="absolute",this.offset.length)){var t=this.offset[0],n=this.offset[1]||t;e.top=uni.$u.addUnit(t),e.right=uni.$u.addUnit(n)}return e},showValue:function(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}}}};t.default=a},"6ac0":function(e,t,n){"use strict";var i=n("4ea4");n("a630"),n("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("728c")),a={name:"u-loading-icon",mixins:[uni.$u.mpMixin,uni.$u.mixin,r.default],data:function(){return{array12:Array.from({length:12}),aniAngel:360,webviewHide:!1,loading:!1}},computed:{otherBorderColor:function(){var e=uni.$u.colorGradient(this.color,"#ffffff",100)[80];return"circle"===this.mode?this.inactiveColor?this.inactiveColor:e:"transparent"}},watch:{show:function(e){}},mounted:function(){this.init()},methods:{init:function(){setTimeout((function(){}),20)},addEventListenerToWebview:function(){var e=this,t=getCurrentPages(),n=t[t.length-1],i=n.$getAppWebview();i.addEventListener("hide",(function(){e.webviewHide=!0})),i.addEventListener("show",(function(){e.webviewHide=!1}))}}};t.default=a},"6dbc":function(e,t,n){"use strict";var i=n("2318"),r=n.n(i);r.a},"728c":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{show:{type:Boolean,default:uni.$u.props.loadingIcon.show},color:{type:String,default:uni.$u.props.loadingIcon.color},textColor:{type:String,default:uni.$u.props.loadingIcon.textColor},vertical:{type:Boolean,default:uni.$u.props.loadingIcon.vertical},mode:{type:String,default:uni.$u.props.loadingIcon.mode},size:{type:[String,Number],default:uni.$u.props.loadingIcon.size},textSize:{type:[String,Number],default:uni.$u.props.loadingIcon.textSize},text:{type:[String,Number],default:uni.$u.props.loadingIcon.text},timingFunction:{type:String,default:uni.$u.props.loadingIcon.timingFunction},duration:{type:[String,Number],default:uni.$u.props.loadingIcon.duration},inactiveColor:{type:String,default:uni.$u.props.loadingIcon.inactiveColor}}};t.default=i},7358:function(e,t,n){"use strict";n("fb6a"),n("ace4"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),Object.defineProperty(t,"__esModule",{value:!0}),t.MeshoptDecoder=void 0;var i=function(){var e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var r,a=e;WebAssembly.validate(n)&&(a=t,console.log("Warning: meshopt_decoder is using experimental SIMD support"));var o=WebAssembly.instantiate(s(a),{}).then((function(e){r=e.instance,r.exports.__wasm_call_ctors()}));function s(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;++n){var r=e.charCodeAt(n);t[n]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}var a=0;for(n=0;n<e.length;++n)t[a++]=t[n]<60?i[t[n]]:64*(t[n]-60)+t[++n];return t.buffer.slice(0,a)}function l(e,t,n,i,a,o){var s=r.exports.sbrk,l=n+3&-4,u=s(l*i),c=s(a.length),h=new Uint8Array(r.exports.memory.buffer);h.set(a,c);var d=e(u,n,i,c,a.length);if(0==d&&o&&o(u,l,i),t.set(h.subarray(u,u+n*i)),s(u-s(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:o,supported:!0,decodeVertexBuffer:function(e,t,n,i,a){l(r.exports.meshopt_decodeVertexBuffer,e,t,n,i,r.exports[u[a]])},decodeIndexBuffer:function(e,t,n,i){l(r.exports.meshopt_decodeIndexBuffer,e,t,n,i)},decodeIndexSequence:function(e,t,n,i){l(r.exports.meshopt_decodeIndexSequence,e,t,n,i)},decodeGltfBuffer:function(e,t,n,i,a,o){l(r.exports[c[a]],e,t,n,i,r.exports[u[o]])}}}();t.MeshoptDecoder=i},"74a1":function(e,t,n){"use strict";var i=n("4ea4");n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("4de4"),n("7db0"),n("4160"),n("a630"),n("c975"),n("baa5"),n("d81d"),n("26e9"),n("fb6a"),n("4e82"),n("a434"),n("c19f"),n("82da"),n("ace4"),n("f4b3"),n("4ec9"),n("90d7"),n("2af1"),n("a9e3"),n("35b3"),n("8ba4"),n("aff5"),n("dca8"),n("b64b"),n("d3b7"),n("acd8"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("466d"),n("38cf"),n("5319"),n("1276"),n("498a"),n("cfc3"),n("4a9b"),n("fd87"),n("8b09"),n("143c"),n("5cc6"),n("8a59"),n("84c3"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("10d1"),n("159b"),n("ddb0"),n("bf19"),Object.defineProperty(t,"__esModule",{value:!0}),t.ImmediateRenderObject=Hg,t.WebGLRenderer=Fh,t.WebGLUtils=Ch,t.DstColorFactor=t.DstAlphaFactor=t.DoubleSide=t.DodecahedronGeometry=t.DodecahedronBufferGeometry=t.DiscreteInterpolant=t.DirectionalLightHelper=t.DirectionalLight=t.DepthTexture=t.DepthStencilFormat=t.DepthFormat=t.DefaultLoadingManager=t.DecrementWrapStencilOp=t.DecrementStencilOp=t.DataUtils=t.DataTextureLoader=t.DataTexture3D=t.DataTexture2DArray=t.DataTexture=t.DataArrayTexture=t.Data3DTexture=t.Cylindrical=t.CylinderGeometry=t.CylinderBufferGeometry=t.CustomToneMapping=t.CustomBlending=t.CurvePath=t.Curve=t.CullFaceNone=t.CullFaceFrontBack=t.CullFaceFront=t.CullFaceBack=t.CubicInterpolant=t.CubicBezierCurve3=t.CubicBezierCurve=t.CubeUVReflectionMapping=t.CubeTextureLoader=t.CubeTexture=t.CubeRefractionMapping=t.CubeReflectionMapping=t.CubeCamera=t.ConeGeometry=t.ConeBufferGeometry=t.CompressedTextureLoader=t.CompressedTexture=t.CompressedArrayTexture=t.ColorManagement=t.ColorKeyframeTrack=t.Color=t.Clock=t.ClampToEdgeWrapping=t.CircleGeometry=t.CircleBufferGeometry=t.CineonToneMapping=t.CatmullRomCurve3=t.CapsuleGeometry=t.CapsuleBufferGeometry=t.CanvasTexture=t.CameraHelper=t.Camera=t.Cache=t.ByteType=t.BufferGeometryLoader=t.BufferGeometry=t.BufferAttribute=t.BoxHelper=t.BoxGeometry=t.BoxBufferGeometry=t.Box3Helper=t.Box3=t.Box2=t.BooleanKeyframeTrack=t.Bone=t.BasicShadowMap=t.BasicDepthPacking=t.BackSide=t.AxesHelper=t.AudioLoader=t.AudioListener=t.AudioContext=t.AudioAnalyser=t.Audio=t.ArrowHelper=t.ArrayCamera=t.ArcCurve=t.AnimationUtils=t.AnimationObjectGroup=t.AnimationMixer=t.AnimationLoader=t.AnimationClip=t.AmbientLightProbe=t.AmbientLight=t.AlwaysStencilFunc=t.AlwaysDepth=t.AlphaFormat=t.AdditiveBlending=t.AdditiveAnimationBlendMode=t.AddOperation=t.AddEquation=t.ACESFilmicToneMapping=void 0,t.Matrix3=t.MathUtils=t.MaterialLoader=t.Material=t.MOUSE=t.LuminanceFormat=t.LuminanceAlphaFormat=t.LoopRepeat=t.LoopPingPong=t.LoopOnce=t.LoadingManager=t.LoaderUtils=t.Loader=t.LinearToneMapping=t.LinearSRGBColorSpace=t.LinearMipmapNearestFilter=t.LinearMipmapLinearFilter=t.LinearMipMapNearestFilter=t.LinearMipMapLinearFilter=t.LinearInterpolant=t.LinearFilter=t.LinearEncoding=t.LineSegments=t.LineLoop=t.LineDashedMaterial=t.LineCurve3=t.LineCurve=t.LineBasicMaterial=t.Line3=t.Line=t.LightProbe=t.Light=t.LessStencilFunc=t.LessEqualStencilFunc=t.LessEqualDepth=t.LessDepth=t.Layers=t.LatheGeometry=t.LatheBufferGeometry=t.LOD=t.KeyframeTrack=t.KeepStencilOp=t.InvertStencilOp=t.InterpolateSmooth=t.InterpolateLinear=t.InterpolateDiscrete=t.Interpolant=t.InterleavedBufferAttribute=t.InterleavedBuffer=t.IntType=t.Int8BufferAttribute=t.Int32BufferAttribute=t.Int16BufferAttribute=t.InstancedMesh=t.InstancedInterleavedBuffer=t.InstancedBufferGeometry=t.InstancedBufferAttribute=t.IncrementWrapStencilOp=t.IncrementStencilOp=t.ImageUtils=t.ImageLoader=t.ImageBitmapLoader=t.IcosahedronGeometry=t.IcosahedronBufferGeometry=t.HemisphereLightProbe=t.HemisphereLightHelper=t.HemisphereLight=t.HalfFloatType=t.Group=t.GridHelper=t.GreaterStencilFunc=t.GreaterEqualStencilFunc=t.GreaterEqualDepth=t.GreaterDepth=t.GLSL3=t.GLSL1=t.GLBufferAttribute=t.Frustum=t.FrontSide=t.FramebufferTexture=t.FogExp2=t.Fog=t.FloatType=t.Float64BufferAttribute=t.Float32BufferAttribute=t.Float16BufferAttribute=t.FileLoader=t.ExtrudeGeometry=t.ExtrudeBufferGeometry=t.EventDispatcher=t.Euler=t.EquirectangularRefractionMapping=t.EquirectangularReflectionMapping=t.EqualStencilFunc=t.EqualDepth=t.EllipseCurve=t.EdgesGeometry=t.DynamicReadUsage=t.DynamicDrawUsage=t.DynamicCopyUsage=void 0,t.RGFormat=t.RGB_S3TC_DXT1_Format=t.RGB_PVRTC_4BPPV1_Format=t.RGB_PVRTC_2BPPV1_Format=t.RGB_ETC2_Format=t.RGB_ETC1_Format=t.RGBFormat=t.RGBA_S3TC_DXT5_Format=t.RGBA_S3TC_DXT3_Format=t.RGBA_S3TC_DXT1_Format=t.RGBA_PVRTC_4BPPV1_Format=t.RGBA_PVRTC_2BPPV1_Format=t.RGBA_ETC2_EAC_Format=t.RGBA_BPTC_Format=t.RGBA_ASTC_8x8_Format=t.RGBA_ASTC_8x6_Format=t.RGBA_ASTC_8x5_Format=t.RGBA_ASTC_6x6_Format=t.RGBA_ASTC_6x5_Format=t.RGBA_ASTC_5x5_Format=t.RGBA_ASTC_5x4_Format=t.RGBA_ASTC_4x4_Format=t.RGBA_ASTC_12x12_Format=t.RGBA_ASTC_12x10_Format=t.RGBA_ASTC_10x8_Format=t.RGBA_ASTC_10x6_Format=t.RGBA_ASTC_10x5_Format=t.RGBA_ASTC_10x10_Format=t.RGBAIntegerFormat=t.RGBAFormat=t.RGBADepthPacking=t.REVISION=t.QuaternionLinearInterpolant=t.QuaternionKeyframeTrack=t.Quaternion=t.QuadraticBezierCurve3=t.QuadraticBezierCurve=t.PropertyMixer=t.PropertyBinding=t.PositionalAudio=t.PolyhedronGeometry=t.PolyhedronBufferGeometry=t.PolarGridHelper=t.PointsMaterial=t.Points=t.PointLightHelper=t.PointLight=t.PlaneHelper=t.PlaneGeometry=t.PlaneBufferGeometry=t.Plane=t.PerspectiveCamera=t.Path=t.PMREMGenerator=t.PCFSoftShadowMap=t.PCFShadowMap=t.OrthographicCamera=t.OneMinusSrcColorFactor=t.OneMinusSrcAlphaFactor=t.OneMinusDstColorFactor=t.OneMinusDstAlphaFactor=t.OneFactor=t.OctahedronGeometry=t.OctahedronBufferGeometry=t.ObjectSpaceNormalMap=t.ObjectLoader=t.Object3D=t.NumberKeyframeTrack=t.NotEqualStencilFunc=t.NotEqualDepth=t.NormalBlending=t.NormalAnimationBlendMode=t.NoToneMapping=t.NoColorSpace=t.NoBlending=t.NeverStencilFunc=t.NeverDepth=t.NearestMipmapNearestFilter=t.NearestMipmapLinearFilter=t.NearestMipMapNearestFilter=t.NearestMipMapLinearFilter=t.NearestFilter=t.MultiplyOperation=t.MultiplyBlending=t.MixOperation=t.MirroredRepeatWrapping=t.MinEquation=t.MeshToonMaterial=t.MeshStandardMaterial=t.MeshPhysicalMaterial=t.MeshPhongMaterial=t.MeshNormalMaterial=t.MeshMatcapMaterial=t.MeshLambertMaterial=t.MeshDistanceMaterial=t.MeshDepthMaterial=t.MeshBasicMaterial=t.Mesh=t.MaxEquation=t.Matrix4=void 0,t.ZeroFactor=t.ZeroCurvatureEnding=t.WrapAroundEnding=t.WireframeGeometry=t.WebGLRenderTarget=t.WebGLMultisampleRenderTarget=t.WebGLMultipleRenderTargets=t.WebGLCubeRenderTarget=t.WebGLArrayRenderTarget=t.WebGL3DRenderTarget=t.WebGL1Renderer=t.VideoTexture=t.VectorKeyframeTrack=t.Vector4=t.Vector3=t.Vector2=t.VSMShadowMap=t.UnsignedShortType=t.UnsignedShort5551Type=t.UnsignedShort4444Type=t.UnsignedIntType=t.UnsignedInt248Type=t.UnsignedByteType=t.UniformsUtils=t.UniformsLib=t.UniformsGroup=t.Uniform=t.Uint8ClampedBufferAttribute=t.Uint8BufferAttribute=t.Uint32BufferAttribute=t.Uint16BufferAttribute=t.UVMapping=t.TubeGeometry=t.TubeBufferGeometry=t.TrianglesDrawMode=t.TriangleStripDrawMode=t.TriangleFanDrawMode=t.Triangle=t.TorusKnotGeometry=t.TorusKnotBufferGeometry=t.TorusGeometry=t.TorusBufferGeometry=t.TextureLoader=t.Texture=t.TetrahedronGeometry=t.TetrahedronBufferGeometry=t.TangentSpaceNormalMap=t.TOUCH=t.SubtractiveBlending=t.SubtractEquation=t.StringKeyframeTrack=t.StreamReadUsage=t.StreamDrawUsage=t.StreamCopyUsage=t.StereoCamera=t.StaticReadUsage=t.StaticDrawUsage=t.StaticCopyUsage=t.SrcColorFactor=t.SrcAlphaSaturateFactor=t.SrcAlphaFactor=t.SpriteMaterial=t.Sprite=t.SpotLightHelper=t.SpotLight=t.SplineCurve=t.SphericalHarmonics3=t.Spherical=t.SphereGeometry=t.SphereBufferGeometry=t.Sphere=t.Source=t.SkinnedMesh=t.SkeletonHelper=t.Skeleton=t.ShortType=t.ShapeUtils=t.ShapePath=t.ShapeGeometry=t.ShapeBufferGeometry=t.Shape=t.ShadowMaterial=t.ShaderMaterial=t.ShaderLib=t.ShaderChunk=t.Scene=t.SRGBColorSpace=t.RingGeometry=t.RingBufferGeometry=t.ReverseSubtractEquation=t.ReplaceStencilOp=t.RepeatWrapping=t.ReinhardToneMapping=t.RedIntegerFormat=t.RedFormat=t.RectAreaLight=t.Raycaster=t.Ray=t.RawShaderMaterial=t.RGIntegerFormat=void 0,t.sRGBEncoding=t._SRGBAFormat=t.ZeroStencilOp=t.ZeroSlopeEnding=void 0;var r=i(n("9072")),a=i(n("2909")),o=i(n("1da1")),s=i(n("b85c")),l=i(n("3835")),u=i(n("45eb")),c=i(n("7e84")),h=i(n("257e")),d=i(n("262e")),f=i(n("2caf")),p=i(n("ade3"));n("96cf");var v,m=i(n("d4ec")),g=i(n("bee2")),y="147";t.REVISION=y;var _={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};t.MOUSE=_;var x={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};t.TOUCH=x;var b=0;t.CullFaceNone=b;var M=1;t.CullFaceBack=M;var w=2;t.CullFaceFront=w;var S=3;t.CullFaceFrontBack=S;var A=0;t.BasicShadowMap=A;var T=1;t.PCFShadowMap=T;var C=2;t.PCFSoftShadowMap=C;var E=3;t.VSMShadowMap=E;var k=0;t.FrontSide=k;var L=1;t.BackSide=L;var R=2;t.DoubleSide=R;var B=0;t.NoBlending=B;var P=1;t.NormalBlending=P;var I=2;t.AdditiveBlending=I;var D=3;t.SubtractiveBlending=D;var O=4;t.MultiplyBlending=O;var F=5;t.CustomBlending=F;var N=100;t.AddEquation=N;var G=101;t.SubtractEquation=G;var U=102;t.ReverseSubtractEquation=U;var z=103;t.MinEquation=z;var H=104;t.MaxEquation=H;var V=200;t.ZeroFactor=V;var W=201;t.OneFactor=W;var j=202;t.SrcColorFactor=j;var J=203;t.OneMinusSrcColorFactor=J;var X=204;t.SrcAlphaFactor=X;var q=205;t.OneMinusSrcAlphaFactor=q;var Y=206;t.DstAlphaFactor=Y;var Z=207;t.OneMinusDstAlphaFactor=Z;var K=208;t.DstColorFactor=K;var Q=209;t.OneMinusDstColorFactor=Q;var $=210;t.SrcAlphaSaturateFactor=$;var ee=0;t.NeverDepth=ee;var te=1;t.AlwaysDepth=te;var ne=2;t.LessDepth=ne;var ie=3;t.LessEqualDepth=ie;var re=4;t.EqualDepth=re;var ae=5;t.GreaterEqualDepth=ae;var oe=6;t.GreaterDepth=oe;var se=7;t.NotEqualDepth=se;var le=0;t.MultiplyOperation=le;var ue=1;t.MixOperation=ue;var ce=2;t.AddOperation=ce;var he=0;t.NoToneMapping=he;var de=1;t.LinearToneMapping=de;var fe=2;t.ReinhardToneMapping=fe;var pe=3;t.CineonToneMapping=pe;var ve=4;t.ACESFilmicToneMapping=ve;var me=5;t.CustomToneMapping=me;var ge=300;t.UVMapping=ge;var ye=301;t.CubeReflectionMapping=ye;var _e=302;t.CubeRefractionMapping=_e;var xe=303;t.EquirectangularReflectionMapping=xe;var be=304;t.EquirectangularRefractionMapping=be;var Me=306;t.CubeUVReflectionMapping=Me;var we=1e3;t.RepeatWrapping=we;var Se=1001;t.ClampToEdgeWrapping=Se;var Ae=1002;t.MirroredRepeatWrapping=Ae;var Te=1003;t.NearestFilter=Te;var Ce=1004;t.NearestMipmapNearestFilter=Ce;var Ee=1004;t.NearestMipMapNearestFilter=Ee;var ke=1005;t.NearestMipmapLinearFilter=ke;var Le=1005;t.NearestMipMapLinearFilter=Le;var Re=1006;t.LinearFilter=Re;var Be=1007;t.LinearMipmapNearestFilter=Be;var Pe=1007;t.LinearMipMapNearestFilter=Pe;var Ie=1008;t.LinearMipmapLinearFilter=Ie;var De=1008;t.LinearMipMapLinearFilter=De;var Oe=1009;t.UnsignedByteType=Oe;var Fe=1010;t.ByteType=Fe;var Ne=1011;t.ShortType=Ne;var Ge=1012;t.UnsignedShortType=Ge;var Ue=1013;t.IntType=Ue;var ze=1014;t.UnsignedIntType=ze;var He=1015;t.FloatType=He;var Ve=1016;t.HalfFloatType=Ve;var We=1017;t.UnsignedShort4444Type=We;var je=1018;t.UnsignedShort5551Type=je;var Je=1020;t.UnsignedInt248Type=Je;var Xe=1021;t.AlphaFormat=Xe;var qe=1022;t.RGBFormat=qe;var Ye=1023;t.RGBAFormat=Ye;var Ze=1024;t.LuminanceFormat=Ze;var Ke=1025;t.LuminanceAlphaFormat=Ke;var Qe=1026;t.DepthFormat=Qe;var $e=1027;t.DepthStencilFormat=$e;var et=1028;t.RedFormat=et;var tt=1029;t.RedIntegerFormat=tt;var nt=1030;t.RGFormat=nt;var it=1031;t.RGIntegerFormat=it;var rt=1033;t.RGBAIntegerFormat=rt;var at=33776;t.RGB_S3TC_DXT1_Format=at;var ot=33777;t.RGBA_S3TC_DXT1_Format=ot;var st=33778;t.RGBA_S3TC_DXT3_Format=st;var lt=33779;t.RGBA_S3TC_DXT5_Format=lt;var ut=35840;t.RGB_PVRTC_4BPPV1_Format=ut;var ct=35841;t.RGB_PVRTC_2BPPV1_Format=ct;var ht=35842;t.RGBA_PVRTC_4BPPV1_Format=ht;var dt=35843;t.RGBA_PVRTC_2BPPV1_Format=dt;var ft=36196;t.RGB_ETC1_Format=ft;var pt=37492;t.RGB_ETC2_Format=pt;var vt=37496;t.RGBA_ETC2_EAC_Format=vt;var mt=37808;t.RGBA_ASTC_4x4_Format=mt;var gt=37809;t.RGBA_ASTC_5x4_Format=gt;var yt=37810;t.RGBA_ASTC_5x5_Format=yt;var _t=37811;t.RGBA_ASTC_6x5_Format=_t;var xt=37812;t.RGBA_ASTC_6x6_Format=xt;var bt=37813;t.RGBA_ASTC_8x5_Format=bt;var Mt=37814;t.RGBA_ASTC_8x6_Format=Mt;var wt=37815;t.RGBA_ASTC_8x8_Format=wt;var St=37816;t.RGBA_ASTC_10x5_Format=St;var At=37817;t.RGBA_ASTC_10x6_Format=At;var Tt=37818;t.RGBA_ASTC_10x8_Format=Tt;var Ct=37819;t.RGBA_ASTC_10x10_Format=Ct;var Et=37820;t.RGBA_ASTC_12x10_Format=Et;var kt=37821;t.RGBA_ASTC_12x12_Format=kt;var Lt=36492;t.RGBA_BPTC_Format=Lt;var Rt=2200;t.LoopOnce=Rt;var Bt=2201;t.LoopRepeat=Bt;var Pt=2202;t.LoopPingPong=Pt;var It=2300;t.InterpolateDiscrete=It;var Dt=2301;t.InterpolateLinear=Dt;var Ot=2302;t.InterpolateSmooth=Ot;var Ft=2400;t.ZeroCurvatureEnding=Ft;var Nt=2401;t.ZeroSlopeEnding=Nt;var Gt=2402;t.WrapAroundEnding=Gt;var Ut=2500;t.NormalAnimationBlendMode=Ut;var zt=2501;t.AdditiveAnimationBlendMode=zt;var Ht=0;t.TrianglesDrawMode=Ht;var Vt=1;t.TriangleStripDrawMode=Vt;var Wt=2;t.TriangleFanDrawMode=Wt;var jt=3e3;t.LinearEncoding=jt;var Jt=3001;t.sRGBEncoding=Jt;var Xt=3200;t.BasicDepthPacking=Xt;var qt=3201;t.RGBADepthPacking=qt;var Yt=0;t.TangentSpaceNormalMap=Yt;var Zt=1;t.ObjectSpaceNormalMap=Zt;var Kt="";t.NoColorSpace=Kt;var Qt="srgb";t.SRGBColorSpace=Qt;var $t="srgb-linear";t.LinearSRGBColorSpace=$t;var en=0;t.ZeroStencilOp=en;var tn=7680;t.KeepStencilOp=tn;var nn=7681;t.ReplaceStencilOp=nn;var rn=7682;t.IncrementStencilOp=rn;var an=7683;t.DecrementStencilOp=an;var on=34055;t.IncrementWrapStencilOp=on;var sn=34056;t.DecrementWrapStencilOp=sn;var ln=5386;t.InvertStencilOp=ln;var un=512;t.NeverStencilFunc=un;var cn=513;t.LessStencilFunc=cn;var hn=514;t.EqualStencilFunc=hn;var dn=515;t.LessEqualStencilFunc=dn;var fn=516;t.GreaterStencilFunc=fn;var pn=517;t.NotEqualStencilFunc=pn;var vn=518;t.GreaterEqualStencilFunc=vn;var mn=519;t.AlwaysStencilFunc=mn;var gn=35044;t.StaticDrawUsage=gn;var yn=35048;t.DynamicDrawUsage=yn;var _n=35040;t.StreamDrawUsage=_n;var xn=35045;t.StaticReadUsage=xn;var bn=35049;t.DynamicReadUsage=bn;var Mn=35041;t.StreamReadUsage=Mn;var wn=35046;t.StaticCopyUsage=wn;var Sn=35050;t.DynamicCopyUsage=Sn;var An=35042;t.StreamCopyUsage=An;var Tn="100";t.GLSL1=Tn;var Cn="300 es";t.GLSL3=Cn;var En=1035;t._SRGBAFormat=En;var kn=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=n.slice(0),r=0,a=i.length;r<a;r++)i[r].call(this,e);e.target=null}}}}]),e}();t.EventDispatcher=kn;var Ln=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Rn=1234567,Bn=Math.PI/180,Pn=180/Math.PI;function In(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=Ln[255&e]+Ln[e>>8&255]+Ln[e>>16&255]+Ln[e>>24&255]+"-"+Ln[255&t]+Ln[t>>8&255]+"-"+Ln[t>>16&15|64]+Ln[t>>24&255]+"-"+Ln[63&n|128]+Ln[n>>8&255]+"-"+Ln[n>>16&255]+Ln[n>>24&255]+Ln[255&i]+Ln[i>>8&255]+Ln[i>>16&255]+Ln[i>>24&255];return r.toLowerCase()}function Dn(e,t,n){return Math.max(t,Math.min(n,e))}function On(e,t){return(e%t+t)%t}function Fn(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)}function Nn(e,t,n){return e!==t?(n-e)/(t-e):0}function Gn(e,t,n){return(1-n)*e+n*t}function Un(e,t,n,i){return Gn(e,t,1-Math.exp(-n*i))}function zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(On(e,2*t)-t)}function Hn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function Vn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function Wn(e,t){return e+Math.floor(Math.random()*(t-e+1))}function jn(e,t){return e+Math.random()*(t-e)}function Jn(e){return e*(.5-Math.random())}function Xn(e){void 0!==e&&(Rn=e);var t=Rn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function qn(e){return e*Bn}function Yn(e){return e*Pn}function Zn(e){return 0===(e&e-1)&&0!==e}function Kn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Qn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function $n(e,t,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+i)/2),c=o((t+i)/2),h=a((t-i)/2),d=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ei(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ti(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var ni=Object.freeze({__proto__:null,DEG2RAD:Bn,RAD2DEG:Pn,generateUUID:In,clamp:Dn,euclideanModulo:On,mapLinear:Fn,inverseLerp:Nn,lerp:Gn,damp:Un,pingpong:zn,smoothstep:Hn,smootherstep:Vn,randInt:Wn,randFloat:jn,randFloatSpread:Jn,seededRandom:Xn,degToRad:qn,radToDeg:Yn,isPowerOfTwo:Zn,ceilPowerOfTwo:Kn,floorPowerOfTwo:Qn,setQuaternionFromProperEuler:$n,normalize:ti,denormalize:ei});t.MathUtils=ni;var ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,e),e.prototype.isVector2=!0,this.x=t,this.y=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))},{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),e}();t.Vector2=ii;var ri=function(){function e(){(0,m.default)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=i[0],v=i[3],m=i[6],g=i[1],y=i[4],_=i[7],x=i[2],b=i[5],M=i[8];return r[0]=a*p+o*g+s*x,r[3]=a*v+o*y+s*b,r[6]=a*m+o*_+s*M,r[1]=l*p+u*g+c*x,r[4]=l*v+u*y+c*b,r[7]=l*m+u*_+c*M,r[2]=h*p+d*g+f*x,r[5]=h*v+d*y+f*b,r[8]=h*m+d*_+f*M,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*r*u+n*o*s+i*r*l-i*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*r,d=l*r-a*s,f=t*c+n*h+i*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(i*l-u*n)*p,e[2]=(o*n-i*a)*p,e[3]=h*p,e[4]=(u*t-i*s)*p,e[5]=(i*r-o*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*r)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(ai.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(ai.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(ai.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();t.Matrix3=ri;var ai=new ri;function oi(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var si={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function li(e,t){return new si[e](t)}function ui(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ci(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function hi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var di=(v={},(0,p.default)(v,Qt,(0,p.default)({},$t,ci)),(0,p.default)(v,$t,(0,p.default)({},Qt,hi)),v),fi={legacyMode:!0,get workingColorSpace(){return $t},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(di[t]&&void 0!==di[t][n]){var i=di[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};t.ColorManagement=fi;var pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vi={r:0,g:0,b:0},mi={h:0,s:0,l:0},gi={h:0,s:0,l:0};function yi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function _i(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var xi,bi=function(){function e(t,n,i){return(0,m.default)(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(t):this.setRGB(t,n,i)}return(0,g.default)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,fi.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fi.workingColorSpace;return this.r=e,this.g=t,this.b=n,fi.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fi.workingColorSpace;if(e=On(e,1),t=Dn(t,0,1),n=Dn(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=yi(a,r,e+1/3),this.g=yi(a,r,e),this.b=yi(a,r,e-1/3)}return fi.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,fi.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,fi.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(r[1])/360,l=parseFloat(r[2])/100,u=parseFloat(r[3])/100;return i(r[4]),this.setHSL(s,l,u,n)}break}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,fi.toWorkingColorSpace(this,n),this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,fi.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt,n=pi[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ci(e.r),this.g=ci(e.g),this.b=ci(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=hi(e.r),this.g=hi(e.g),this.b=hi(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return fi.fromWorkingColorSpace(_i(this,vi),e),Dn(255*vi.r,0,255)<<16^Dn(255*vi.g,0,255)<<8^Dn(255*vi.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi.workingColorSpace;fi.fromWorkingColorSpace(_i(this,vi),t);var n,i,r=vi.r,a=vi.g,o=vi.b,s=Math.max(r,a,o),l=Math.min(r,a,o),u=(l+s)/2;if(l===s)n=0,i=0;else{var c=s-l;switch(i=u<=.5?c/(s+l):c/(2-s-l),s){case r:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-r)/c+2;break;case o:n=(r-a)/c+4;break}n/=6}return e.h=n,e.s=i,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi.workingColorSpace;return fi.fromWorkingColorSpace(_i(this,vi),t),e.r=vi.r,e.g=vi.g,e.b=vi.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return fi.fromWorkingColorSpace(_i(this,vi),e),e!==Qt?"color(".concat(e," ").concat(vi.r," ").concat(vi.g," ").concat(vi.b,")"):"rgb(".concat(255*vi.r|0,",").concat(255*vi.g|0,",").concat(255*vi.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(mi),mi.h+=e,mi.s+=t,mi.l+=n,this.setHSL(mi.h,mi.s,mi.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(mi),e.getHSL(gi);var n=Gn(mi.h,gi.h,t),i=Gn(mi.s,gi.s,t),r=Gn(mi.l,gi.l,t);return this.setHSL(n,i,r),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),e}();t.Color=bi,bi.NAMES=pi;var Mi=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===xi&&(xi=ui("canvas")),xi.width=e.width,xi.height=e.height;var n=xi.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=xi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=ui("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),r=i.data,a=0;a<r.length;a++)r[a]=255*ci(r[a]/255);return n.putImageData(i,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*ci(o[s]/255)):o[s]=ci(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}();t.ImageUtils=Mi;var wi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,m.default)(this,e),this.isSource=!0,this.uuid=In(),this.data=t,this.version=0}return(0,g.default)(e,[{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)i[a].isDataTexture?r.push(Si(i[a].image)):r.push(Si(i[a]))}else r=Si(i);n.url=r}return t||(e.images[this.uuid]=n),n}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();function Si(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Mi.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}t.Source=wi;var Ai=0,Ti=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Re,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ie,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ye,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Oe,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:jt;return(0,m.default)(this,n),e=t.call(this),e.isTexture=!0,Object.defineProperty((0,h.default)(e),"id",{value:Ai++}),e.uuid=In(),e.name="",e.source=new wi(i),e.mipmaps=[],e.mapping=r,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=d,e.format=u,e.internalFormat=null,e.type=c,e.offset=new ii(0,0),e.repeat=new ii(1,1),e.center=new ii(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new ri,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,g.default)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==ge)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case we:e.x=e.x-Math.floor(e.x);break;case Se:e.x=e.x<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case we:e.y=e.y-Math.floor(e.y);break;case Se:e.y=e.y<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}},{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(kn);t.Texture=Ti,Ti.DEFAULT_IMAGE=null,Ti.DEFAULT_MAPPING=ge,Ti.DEFAULT_ANISOTROPY=1;var Ci=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.default)(this,e),e.prototype.isVector4=!0,this.x=t,this.y=n,this.z=i,this.w=r}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,r,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(f-v)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(f+v)<o&&Math.abs(l+d+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,_=(m+1)/2,x=(u+h)/4,b=(c+p)/4,M=(f+v)/4;return g>y&&g>_?g<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=x/n,r=b/n):y>_?y<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=x/i,r=M/i):_<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=b/r,i=M/r),this.set(n,i,r,t),this}var w=Math.sqrt((v-f)*(v-f)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(w)<.001&&(w=1),this.x=(v-f)/w,this.y=(c-p)/w,this.z=(h-u)/w,this.w=Math.acos((l+d+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))},{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}}]),e}();t.Vector4=Ci;var Ei=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,m.default)(this,n),e=t.call(this),e.isWebGLRenderTarget=!0,e.width=i,e.height=r,e.depth=1,e.scissor=new Ci(0,0,i,r),e.scissorTest=!1,e.viewport=new Ci(0,0,i,r);var o={width:i,height:r,depth:1};return e.texture=new Ti(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:Re,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return(0,g.default)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new wi(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(kn);t.WebGLRenderTarget=Ei;var ki=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),e=t.call(this,null),e.isDataArrayTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=Te,e.minFilter=Te,e.wrapR=Se,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return n}(Ti);t.DataArrayTexture=ki;var Li=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.default)(this,n),e=t.call(this,i,r),e.isWebGLArrayRenderTarget=!0,e.depth=a,e.texture=new ki(null,i,r,a),e.texture.isRenderTargetTexture=!0,e}return n}(Ei);t.WebGLArrayRenderTarget=Li;var Ri=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),e=t.call(this,null),e.isData3DTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=Te,e.minFilter=Te,e.wrapR=Se,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return n}(Ti);t.Data3DTexture=Ri;var Bi=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.default)(this,n),e=t.call(this,i,r),e.isWebGL3DRenderTarget=!0,e.depth=a,e.texture=new Ri(null,i,r,a),e.texture.isRenderTargetTexture=!0,e}return n}(Ei);t.WebGL3DRenderTarget=Bi;var Pi=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,m.default)(this,n),e=t.call(this,i,r,o),e.isWebGLMultipleRenderTargets=!0;var s=e.texture;e.texture=[];for(var l=0;l<a;l++)e.texture[l]=s.clone(),e.texture[l].isRenderTargetTexture=!0;return e}return(0,g.default)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(Ei);t.WebGLMultipleRenderTargets=Pi;var Ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.default)(this,e),this.isQuaternion=!0,this._x=t,this._y=n,this._z=i,this._w=r}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),h=s(n/2),d=s(i/2),f=s(r/2);switch(a){case"XYZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"YXZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"ZXY":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"ZYX":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"YZX":this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f;break;case"XZY":this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-s)*d,this._y=(r-l)*d,this._z=(a-i)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(u-s)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(r+l)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(r-l)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-i)/v,this._x=(r+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Dn(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}],[{key:"slerpFlat",value:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||l!==d||u!==f){var v=1-o,m=s*h+l*d+u*f+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,m*g);v=Math.sin(v*x)/_,o=Math.sin(o*x)/_}var b=o*g;if(s=s*v+h*b,l=l*v+d*b,u=u*v+f*b,c=c*v+p*b,v===1-o){var M=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=M,l*=M,u*=M,c*=M}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],u=n[i+3],c=r[a],h=r[a+1],d=r[a+2],f=r[a+3];return e[t]=o*f+u*c+s*d-l*h,e[t+1]=s*f+u*h+l*c-o*d,e[t+2]=l*f+u*d+o*h-s*c,e[t+3]=u*f-o*c-s*h-l*d,e}}]),e}();t.Quaternion=Ii;var Di=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,m.default)(this,e),e.prototype.isVector3=!0,this.x=t,this.y=n,this.z=i}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Fi.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Fi.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,u=s*n+o*t-r*i,c=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=l*s+h*-r+u*-o-c*-a,this.y=u*s+h*-a+c*-r-l*-o,this.z=c*s+h*-o+l*-a-u*-r,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Oi.copy(this).projectOnVector(e),this.sub(Oi)}},{key:"reflect",value:function(e){return this.sub(Oi.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Dn(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),e}();t.Vector3=Di;var Oi=new Di,Fi=new Ii,Ni=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di(-1/0,-1/0,-1/0);(0,m.default)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Ui.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,r=0,a=i.count;r<a;r++)Ui.fromBufferAttribute(i,r).applyMatrix4(e.matrixWorld),this.expandByPoint(Ui);else null===n.boundingBox&&n.computeBoundingBox(),zi.copy(n.boundingBox),zi.applyMatrix4(e.matrixWorld),this.union(zi);for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Ui),Ui.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(qi),Yi.subVectors(this.max,qi),Hi.subVectors(e.a,qi),Vi.subVectors(e.b,qi),Wi.subVectors(e.c,qi),ji.subVectors(Vi,Hi),Ji.subVectors(Wi,Vi),Xi.subVectors(Hi,Wi);var t=[0,-ji.z,ji.y,0,-Ji.z,Ji.y,0,-Xi.z,Xi.y,ji.z,0,-ji.x,Ji.z,0,-Ji.x,Xi.z,0,-Xi.x,-ji.y,ji.x,0,-Ji.y,Ji.x,0,-Xi.y,Xi.x,0];return!!Qi(t,Hi,Vi,Wi,Yi)&&(t=[1,0,0,0,1,0,0,0,1],!!Qi(t,Hi,Vi,Wi,Yi)&&(Zi.crossVectors(ji,Ji),t=[Zi.x,Zi.y,Zi.z],Qi(t,Hi,Vi,Wi,Yi)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=Ui.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Ui).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Gi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gi)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();t.Box3=Ni;var Gi=[new Di,new Di,new Di,new Di,new Di,new Di,new Di,new Di],Ui=new Di,zi=new Ni,Hi=new Di,Vi=new Di,Wi=new Di,ji=new Di,Ji=new Di,Xi=new Di,qi=new Di,Yi=new Di,Zi=new Di,Ki=new Di;function Qi(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){Ki.fromArray(e,a);var s=r.x*Math.abs(Ki.x)+r.y*Math.abs(Ki.y)+r.z*Math.abs(Ki.z),l=t.dot(Ki),u=n.dot(Ki),c=i.dot(Ki);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var $i=new Ni,er=new Di,tr=new Di,nr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,m.default)(this,e),this.center=t,this.radius=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):$i.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;er.subVectors(e,this.center);var t=er.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.addScaledVector(er,i/n),this.radius+=i}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(er.copy(e.center).add(tr)),this.expandByPoint(er.copy(e.center).sub(tr))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Sphere=nr;var ir=new Di,rr=new Di,ar=new Di,or=new Di,sr=new Di,lr=new Di,ur=new Di,cr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di(0,0,-1);(0,m.default)(this,e),this.origin=t,this.direction=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ir)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ir.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ir.copy(this.direction).multiplyScalar(t).add(this.origin),ir.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){rr.copy(e).add(t).multiplyScalar(.5),ar.copy(t).sub(e).normalize(),or.copy(this.origin).sub(rr);var r,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(ar),c=or.dot(this.direction),h=-or.dot(ar),d=or.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(r=u*h-c,a=u*c-h,s=l*f,r>=0)if(a>=-s)if(a<=s){var p=1/f;r*=p,a*=p,o=r*(r+u*a+2*c)+a*(u*r+a+2*h)+d}else a=l,r=Math.max(0,-(u*a+c)),o=-r*r+a*(a+2*h)+d;else a=-l,r=Math.max(0,-(u*a+c)),o=-r*r+a*(a+2*h)+d;else a<=-s?(r=Math.max(0,-(-u*l+c)),a=r>0?-l:Math.min(Math.max(-l,-h),l),o=-r*r+a*(a+2*h)+d):a<=s?(r=0,a=Math.min(Math.max(-l,-h),l),o=a*(a+2*h)+d):(r=Math.max(0,-(u*l+c)),a=r>0?l:Math.min(Math.max(-l,-h),l),o=-r*r+a*(a+2*h)+d);else a=u>0?-l:l,r=Math.max(0,-(u*a+c)),o=-r*r+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(ar).multiplyScalar(a).add(rr),o}},{key:"intersectSphere",value:function(e,t){ir.subVectors(e.center,this.origin);var n=ir.dot(this.direction),i=ir.dot(ir)-n*n,r=e.radius*e.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0}},{key:"intersectBox",value:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ir)}},{key:"intersectTriangle",value:function(e,t,n,i,r){sr.subVectors(t,e),lr.subVectors(n,e),ur.crossVectors(sr,lr);var a,o=this.direction.dot(ur);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}or.subVectors(this.origin,e);var s=a*this.direction.dot(lr.crossVectors(or,lr));if(s<0)return null;var l=a*this.direction.dot(sr.cross(or));if(l<0)return null;if(s+l>o)return null;var u=-a*or.dot(ur);return u<0?null:this.at(u/o,r)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Ray=cr;var hr=function(){function e(){(0,m.default)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/dr.setFromMatrixColumn(e,0).length(),r=1/dr.setFromMatrixColumn(e,1).length(),a=1/dr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*u,m=s*c,g=l*u,y=l*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var _=s*u,x=s*c,b=l*u,M=l*c;t[0]=_-M*o,t[4]=-a*c,t[8]=b+x*o,t[1]=x+b*o,t[5]=a*u,t[9]=M-_*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*u,S=a*c,A=o*u,T=o*c;t[0]=s*u,t[4]=A*l-S,t[8]=w*l+T,t[1]=s*c,t[5]=T*l+w,t[9]=S*l-A,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var C=a*s,E=a*l,k=o*s,L=o*l;t[0]=s*u,t[4]=L-C*c,t[8]=k*c+E,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=E*c+k,t[10]=C-L*c}else if("XZY"===e.order){var R=a*s,B=a*l,P=o*s,I=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=R*c+I,t[5]=a*u,t[9]=B*c-P,t[2]=P*c-B,t[6]=o*u,t[10]=I*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(pr,e,vr)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return yr.subVectors(e,t),0===yr.lengthSq()&&(yr.z=1),yr.normalize(),mr.crossVectors(n,yr),0===mr.lengthSq()&&(1===Math.abs(n.z)?yr.x+=1e-4:yr.z+=1e-4,yr.normalize(),mr.crossVectors(n,yr)),mr.normalize(),gr.crossVectors(yr,mr),i[0]=mr.x,i[4]=gr.x,i[8]=yr.x,i[1]=mr.y,i[5]=gr.y,i[9]=yr.y,i[2]=mr.z,i[6]=gr.z,i[10]=yr.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=i[0],M=i[4],w=i[8],S=i[12],A=i[1],T=i[5],C=i[9],E=i[13],k=i[2],L=i[6],R=i[10],B=i[14],P=i[3],I=i[7],D=i[11],O=i[15];return r[0]=a*b+o*A+s*k+l*P,r[4]=a*M+o*T+s*L+l*I,r[8]=a*w+o*C+s*R+l*D,r[12]=a*S+o*E+s*B+l*O,r[1]=u*b+c*A+h*k+d*P,r[5]=u*M+c*T+h*L+d*I,r[9]=u*w+c*C+h*R+d*D,r[13]=u*S+c*E+h*B+d*O,r[2]=f*b+p*A+v*k+m*P,r[6]=f*M+p*T+v*L+m*I,r[10]=f*w+p*C+v*R+m*D,r[14]=f*S+p*E+v*B+m*O,r[3]=g*b+y*A+_*k+x*P,r[7]=g*M+y*T+_*L+x*I,r[11]=g*w+y*C+_*R+x*D,r[15]=g*S+y*E+_*B+x*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14],f=e[3],p=e[7],v=e[11],m=e[15];return f*(+r*s*c-i*l*c-r*o*h+n*l*h+i*o*d-n*s*d)+p*(+t*s*d-t*l*h+r*a*h-i*a*d+i*l*u-r*s*u)+v*(+t*l*c-t*o*d-r*a*c+n*a*d+r*o*u-n*l*u)+m*(-i*o*u-t*s*c+t*o*h+i*a*c-n*a*h+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*h*l+p*s*d-o*v*d-c*s*m+o*h*m,y=f*h*l-u*v*l-f*s*d+a*v*d+u*s*m-a*h*m,_=u*p*l-f*c*l+f*o*d-a*p*d-u*o*m+a*c*m,x=f*c*s-u*p*s-f*o*h+a*p*h+u*o*v-a*c*v,b=t*g+n*y+i*_+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/b;return e[0]=g*M,e[1]=(p*h*r-c*v*r-p*i*d+n*v*d+c*i*m-n*h*m)*M,e[2]=(o*v*r-p*s*r+p*i*l-n*v*l-o*i*m+n*s*m)*M,e[3]=(c*s*r-o*h*r-c*i*l+n*h*l+o*i*d-n*s*d)*M,e[4]=y*M,e[5]=(u*v*r-f*h*r+f*i*d-t*v*d-u*i*m+t*h*m)*M,e[6]=(f*s*r-a*v*r-f*i*l+t*v*l+a*i*m-t*s*m)*M,e[7]=(a*h*r-u*s*r+u*i*l-t*h*l-a*i*d+t*s*d)*M,e[8]=_*M,e[9]=(f*c*r-u*p*r-f*n*d+t*p*d+u*n*m-t*c*m)*M,e[10]=(a*p*r-f*o*r+f*n*l-t*p*l-a*n*m+t*o*m)*M,e[11]=(u*o*r-a*c*r-u*n*l+t*c*l+a*n*d-t*o*d)*M,e[12]=x*M,e[13]=(u*p*i-f*c*i+f*n*h-t*p*h-u*n*v+t*c*v)*M,e[14]=(f*o*i-a*p*i-f*n*s+t*p*s+a*n*v-t*o*v)*M,e[15]=(a*c*i-u*o*i+u*n*s-t*c*s-a*n*h+t*o*h)*M,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,u=a+a,c=o+o,h=r*l,d=r*u,f=r*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,_=s*c,x=n.x,b=n.y,M=n.z;return i[0]=(1-(p+m))*x,i[1]=(d+_)*x,i[2]=(f-y)*x,i[3]=0,i[4]=(d-_)*b,i[5]=(1-(h+m))*b,i[6]=(v+g)*b,i[7]=0,i[8]=(f+y)*M,i[9]=(v-g)*M,i[10]=(1-(h+p))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,r=dr.set(i[0],i[1],i[2]).length(),a=dr.set(i[4],i[5],i[6]).length(),o=dr.set(i[8],i[9],i[10]).length(),s=this.determinant();s<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],fr.copy(this);var l=1/r,u=1/a,c=1/o;return fr.elements[0]*=l,fr.elements[1]*=l,fr.elements[2]*=l,fr.elements[4]*=u,fr.elements[5]*=u,fr.elements[6]*=u,fr.elements[8]*=c,fr.elements[9]*=c,fr.elements[10]*=c,t.setFromRotationMatrix(fr),n.x=r,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,i,r,a){var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*s,h=(n+i)*l,d=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();t.Matrix4=hr;var dr=new Di,fr=new hr,pr=new Di(0,0,0),vr=new Di(1,1,1),mr=new Di,gr=new Di,yr=new Di,_r=new hr,xr=new Ii,br=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;(0,m.default)(this,e),this.isEuler=!0,this._x=t,this._y=n,this._z=i,this._order=r}return(0,g.default)(e,[{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,r=i[0],a=i[4],o=i[8],s=i[1],l=i[5],u=i[9],c=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Dn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(Dn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-Dn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Dn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return _r.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_r,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return xr.setFromEuler(this),this.setFromQuaternion(xr,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}]),e}();t.Euler=br,br.DefaultOrder="XYZ",br.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Mr=function(){function e(){(0,m.default)(this,e),this.mask=1}return(0,g.default)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}();t.Layers=Mr;var wr=0,Sr=new Di,Ar=new Ii,Tr=new hr,Cr=new Di,Er=new Di,kr=new Di,Lr=new Ii,Rr=new Di(1,0,0),Br=new Di(0,1,0),Pr=new Di(0,0,1),Ir={type:"added"},Dr={type:"removed"},Or=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,m.default)(this,n),e=t.call(this),e.isObject3D=!0,Object.defineProperty((0,h.default)(e),"id",{value:wr++}),e.uuid=In(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var i=new Di,r=new br,a=new Ii,o=new Di(1,1,1);function s(){a.setFromEuler(r,!1)}function l(){r.setFromQuaternion(a,void 0,!1)}return r._onChange(s),a._onChange(l),Object.defineProperties((0,h.default)(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new hr},normalMatrix:{value:new ri}}),e.matrix=new hr,e.matrixWorld=new hr,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,e.layers=new Mr,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,g.default)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.multiply(Ar),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.premultiply(Ar),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Rr,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Br,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Pr,e)}},{key:"translateOnAxis",value:function(e,t){return Sr.copy(e).applyQuaternion(this.quaternion),this.position.add(Sr.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Rr,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Br,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Pr,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Tr.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Cr.copy(e):Cr.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Er.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Tr.lookAt(Er,Cr,this.up):Tr.lookAt(Cr,Er,this.up),this.quaternion.setFromRotationMatrix(Tr),i&&(Tr.extractRotation(i.matrixWorld),Ar.setFromRotationMatrix(Tr),this.quaternion.premultiply(Ar.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ir)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Dr)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Dr)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Tr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Tr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Tr),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],a=r.getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Er,e,kr),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Er,Lr,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++){var r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++){var o=i[r];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];r(e.shapes,u)}else r(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(r(e.materials,this.material[h]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(var f=0;f<this.children.length;f++)i.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];i.animations.push(r(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),y=S(e.textures),_=S(e.images),x=S(e.shapes),b=S(e.skeletons),M=S(e.animations),w=S(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),x.length>0&&(n.shapes=x),b.length>0&&(n.skeletons=b),M.length>0&&(n.animations=M),w.length>0&&(n.nodes=w)}return n.object=i,n;function S(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(kn);t.Object3D=Or,Or.DefaultUp=new Di(0,1,0),Or.DefaultMatrixAutoUpdate=!0,Or.DefaultMatrixWorldAutoUpdate=!0;var Fr=new Di,Nr=new Di,Gr=new Di,Ur=new Di,zr=new Di,Hr=new Di,Vr=new Di,Wr=new Di,jr=new Di,Jr=new Di,Xr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Di;(0,m.default)(this,e),this.a=t,this.b=n,this.c=i}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Fr.subVectors(this.c,this.b),Nr.subVectors(this.a,this.b),.5*Fr.cross(Nr).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,r,a){return e.getUV(t,this.a,this.b,this.c,n,i,r,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,r=this.a,a=this.b,o=this.c;zr.subVectors(a,r),Hr.subVectors(o,r),Wr.subVectors(e,r);var s=zr.dot(Wr),l=Hr.dot(Wr);if(s<=0&&l<=0)return t.copy(r);jr.subVectors(e,a);var u=zr.dot(jr),c=Hr.dot(jr);if(u>=0&&c<=u)return t.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(r).addScaledVector(zr,n);Jr.subVectors(e,o);var d=zr.dot(Jr),f=Hr.dot(Jr);if(f>=0&&d<=f)return t.copy(o);var p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return i=l/(l-f),t.copy(r).addScaledVector(Hr,i);var v=u*f-d*c;if(v<=0&&c-u>=0&&d-f>=0)return Vr.subVectors(o,a),i=(c-u)/(c-u+(d-f)),t.copy(a).addScaledVector(Vr,i);var m=1/(v+p+h);return n=p*m,i=h*m,t.copy(r).addScaledVector(zr,n).addScaledVector(Hr,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),Fr.subVectors(e,t),i.cross(Fr);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,r){Fr.subVectors(i,t),Nr.subVectors(n,t),Gr.subVectors(e,t);var a=Fr.dot(Fr),o=Fr.dot(Nr),s=Fr.dot(Gr),l=Nr.dot(Nr),u=Nr.dot(Gr),c=a*l-o*o;if(0===c)return r.set(-2,-1,-1);var h=1/c,d=(l*s-o*u)*h,f=(a*u-o*s)*h;return r.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,Ur),Ur.x>=0&&Ur.y>=0&&Ur.x+Ur.y<=1}},{key:"getUV",value:function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,Ur),s.set(0,0),s.addScaledVector(r,Ur.x),s.addScaledVector(a,Ur.y),s.addScaledVector(o,Ur.z),s}},{key:"isFrontFacing",value:function(e,t,n,i){return Fr.subVectors(n,t),Nr.subVectors(e,t),Fr.cross(Nr).dot(i)<0}}]),e}();t.Triangle=Xr;var qr=0,Yr=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isMaterial=!0,Object.defineProperty((0,h.default)(e),"id",{value:qr++}),e.uuid=In(),e.name="",e.type="Material",e.blending=P,e.side=k,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=X,e.blendDst=q,e.blendEquation=N,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=ie,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=mn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=tn,e.stencilZFail=tn,e.stencilZPass=tn,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,g.default)(n,[{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==P&&(n.blending=this.blending),this.side!==k&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(kn);t.Material=Yr;var Zr=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new bi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=le,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yr);t.MeshBasicMaterial=Zr;var Kr=new Di,Qr=new ii,$r=function(){function e(t,n,i){if((0,m.default)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===i,this.usage=gn,this.updateRange={offset:0,count:-1},this.version=0}return(0,g.default)(e,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Qr.fromBufferAttribute(this,t),Qr.applyMatrix3(e),this.setXY(t,Qr.x,Qr.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Kr.fromBufferAttribute(this,i),Kr.applyMatrix3(e),this.setXYZ(i,Kr.x,Kr.y,Kr.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Kr.fromBufferAttribute(this,t),Kr.applyMatrix4(e),this.setXYZ(t,Kr.x,Kr.y,Kr.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Kr.fromBufferAttribute(this,t),Kr.applyNormalMatrix(e),this.setXYZ(t,Kr.x,Kr.y,Kr.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Kr.fromBufferAttribute(this,t),Kr.transformDirection(e),this.setXYZ(t,Kr.x,Kr.y,Kr.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array),r=ti(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==gn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();t.BufferAttribute=$r;var ea=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Int8Array(e),i,r)}return n}($r);t.Int8BufferAttribute=ea;var ta=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint8Array(e),i,r)}return n}($r);t.Uint8BufferAttribute=ta;var na=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint8ClampedArray(e),i,r)}return n}($r);t.Uint8ClampedBufferAttribute=na;var ia=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Int16Array(e),i,r)}return n}($r);t.Int16BufferAttribute=ia;var ra=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint16Array(e),i,r)}return n}($r);t.Uint16BufferAttribute=ra;var aa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Int32Array(e),i,r)}return n}($r);t.Int32BufferAttribute=aa;var oa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint32Array(e),i,r)}return n}($r);t.Uint32BufferAttribute=oa;var sa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,new Uint16Array(e),i,r),a.isFloat16BufferAttribute=!0,a}return n}($r);t.Float16BufferAttribute=sa;var la=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Float32Array(e),i,r)}return n}($r);t.Float32BufferAttribute=la;var ua=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Float64Array(e),i,r)}return n}($r);t.Float64BufferAttribute=ua;var ca=0,ha=new hr,da=new Or,fa=new Di,pa=new Ni,va=new Ni,ma=new Di,ga=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isBufferGeometry=!0,Object.defineProperty((0,h.default)(e),"id",{value:ca++}),e.uuid=In(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,g.default)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(oi(e)?oa:ra)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new ri).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return ha.makeRotationFromQuaternion(e),this.applyMatrix4(ha),this}},{key:"rotateX",value:function(e){return ha.makeRotationX(e),this.applyMatrix4(ha),this}},{key:"rotateY",value:function(e){return ha.makeRotationY(e),this.applyMatrix4(ha),this}},{key:"rotateZ",value:function(e){return ha.makeRotationZ(e),this.applyMatrix4(ha),this}},{key:"translate",value:function(e,t,n){return ha.makeTranslation(e,t,n),this.applyMatrix4(ha),this}},{key:"scale",value:function(e,t,n){return ha.makeScale(e,t,n),this.applyMatrix4(ha),this}},{key:"lookAt",value:function(e){return da.lookAt(e),da.updateMatrix(),this.applyMatrix4(da.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fa).negate(),this.translate(fa.x,fa.y,fa.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new la(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ni);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Di(-1/0,-1/0,-1/0),new Di(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];pa.setFromBufferAttribute(r),this.morphTargetsRelative?(ma.addVectors(this.boundingBox.min,pa.min),this.boundingBox.expandByPoint(ma),ma.addVectors(this.boundingBox.max,pa.max),this.boundingBox.expandByPoint(ma)):(this.boundingBox.expandByPoint(pa.min),this.boundingBox.expandByPoint(pa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new nr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Di,1/0);if(e){var n=this.boundingSphere.center;if(pa.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];va.setFromBufferAttribute(a),this.morphTargetsRelative?(ma.addVectors(pa.min,va.min),pa.expandByPoint(ma),ma.addVectors(pa.max,va.max),pa.expandByPoint(ma)):(pa.expandByPoint(va.min),pa.expandByPoint(va.max))}pa.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)ma.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(ma));if(t)for(var u=0,c=t.length;u<c;u++)for(var h=t[u],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)ma.fromBufferAttribute(h,f),d&&(fa.fromBufferAttribute(e,f),ma.add(fa)),o=Math.max(o,n.distanceToSquared(ma));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new $r(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new Di,u[c]=new Di;var h=new Di,d=new Di,f=new Di,p=new ii,v=new ii,m=new ii,g=new Di,y=new Di,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var x=0,b=_.length;x<b;++x)for(var M=_[x],w=M.start,S=M.count,A=w,T=w+S;A<T;A+=3)N(n[A+0],n[A+1],n[A+2]);for(var C=new Di,E=new Di,k=new Di,L=new Di,R=0,B=_.length;R<B;++R)for(var P=_[R],I=P.start,D=P.count,O=I,F=I+D;O<F;O+=3)G(n[O+0]),G(n[O+1]),G(n[O+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function N(e,t,n){h.fromArray(i,3*e),d.fromArray(i,3*t),f.fromArray(i,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(h),f.sub(h),v.sub(p),m.sub(p);var r=1/(v.x*m.y-m.x*v.y);isFinite(r)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(r),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(y),u[t].add(y),u[n].add(y))}function G(e){k.fromArray(r,3*e),L.copy(k);var t=l[e];C.copy(t),C.sub(k.multiplyScalar(k.dot(t))).normalize(),E.crossVectors(L,t);var n=E.dot(u[e]),i=n<0?-1:1;s[4*e]=C.x,s[4*e+1]=C.y,s[4*e+2]=C.z,s[4*e+3]=i}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new $r(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Di,o=new Di,s=new Di,l=new Di,u=new Di,c=new Di,h=new Di,d=new Di;if(e)for(var f=0,p=e.count;f<p;f+=3){var v=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(h),u.add(h),c.add(h),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ma.fromBufferAttribute(e,t),ma.normalize(),e.setXYZ(t,ma.x,ma.y,ma.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(var c=0;c<i;c++)a[s++]=n[o++]}return new $r(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,r=this.attributes;for(var a in r){var o=r[a],s=e(o,i);t.setAttribute(a,s)}var l=this.morphAttributes;for(var u in l){for(var c=[],h=l[u],d=0,f=h.length;d<f;d++){var p=h[d],v=e(p,i);c.push(v)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,g=0,y=m.length;g<y;g++){var _=m[g];t.addGroup(_.start,_.count,_.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[u]=h,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,h=u.length;c<h;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var v=d[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(kn);t.BufferGeometry=ga;var ya=new hr,_a=new cr,xa=new nr,ba=new Di,Ma=new Di,wa=new Di,Sa=new Di,Aa=new Di,Ta=new Di,Ca=new Di,Ea=new Di,ka=new Di,La=new ii,Ra=new ii,Ba=new ii,Pa=new Di,Ia=new Di,Da=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zr;return(0,m.default)(this,n),e=t.call(this),e.isMesh=!0,e.type="Mesh",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),xa.copy(n.boundingSphere),xa.applyMatrix4(r),!1!==e.ray.intersectsSphere(xa)&&(ya.copy(r).invert(),_a.copy(e.ray).applyMatrix4(ya),null===n.boundingBox||!1!==_a.intersectsBox(n.boundingBox)))){var a,o=n.index,s=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,d=n.groups,f=n.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=d.length;p<v;p++)for(var m=d[p],g=i[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(o.count,Math.min(m.start+m.count,f.start+f.count)),x=y,b=_;x<b;x+=3){var M=o.getX(x),w=o.getX(x+1),S=o.getX(x+2);a=Fa(this,g,e,_a,s,l,u,c,h,M,w,S),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=m.materialIndex,t.push(a))}else for(var A=Math.max(0,f.start),T=Math.min(o.count,f.start+f.count),C=A,E=T;C<E;C+=3){var k=o.getX(C),L=o.getX(C+1),R=o.getX(C+2);a=Fa(this,i,e,_a,s,l,u,c,h,k,L,R),a&&(a.faceIndex=Math.floor(C/3),t.push(a))}else if(void 0!==s)if(Array.isArray(i))for(var B=0,P=d.length;B<P;B++)for(var I=d[B],D=i[I.materialIndex],O=Math.max(I.start,f.start),F=Math.min(s.count,Math.min(I.start+I.count,f.start+f.count)),N=O,G=F;N<G;N+=3){var U=N,z=N+1,H=N+2;a=Fa(this,D,e,_a,s,l,u,c,h,U,z,H),a&&(a.faceIndex=Math.floor(N/3),a.face.materialIndex=I.materialIndex,t.push(a))}else for(var V=Math.max(0,f.start),W=Math.min(s.count,f.start+f.count),j=V,J=W;j<J;j+=3){var X=j,q=j+1,Y=j+2;a=Fa(this,i,e,_a,s,l,u,c,h,X,q,Y),a&&(a.faceIndex=Math.floor(j/3),t.push(a))}}}}]),n}(Or);function Oa(e,t,n,i,r,a,o,s){var l;if(l=t.side===L?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==R,s),null===l)return null;Ia.copy(s),Ia.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Ia);return u<n.near||u>n.far?null:{distance:u,point:Ia.clone(),object:e}}function Fa(e,t,n,i,r,a,o,s,l,u,c,h){ba.fromBufferAttribute(r,u),Ma.fromBufferAttribute(r,c),wa.fromBufferAttribute(r,h);var d=e.morphTargetInfluences;if(a&&d){Ca.set(0,0,0),Ea.set(0,0,0),ka.set(0,0,0);for(var f=0,p=a.length;f<p;f++){var v=d[f],m=a[f];0!==v&&(Sa.fromBufferAttribute(m,u),Aa.fromBufferAttribute(m,c),Ta.fromBufferAttribute(m,h),o?(Ca.addScaledVector(Sa,v),Ea.addScaledVector(Aa,v),ka.addScaledVector(Ta,v)):(Ca.addScaledVector(Sa.sub(ba),v),Ea.addScaledVector(Aa.sub(Ma),v),ka.addScaledVector(Ta.sub(wa),v)))}ba.add(Ca),Ma.add(Ea),wa.add(ka)}e.isSkinnedMesh&&(e.boneTransform(u,ba),e.boneTransform(c,Ma),e.boneTransform(h,wa));var g=Oa(e,t,n,i,ba,Ma,wa,Pa);if(g){s&&(La.fromBufferAttribute(s,u),Ra.fromBufferAttribute(s,c),Ba.fromBufferAttribute(s,h),g.uv=Xr.getUV(Pa,ba,Ma,wa,La,Ra,Ba,new ii)),l&&(La.fromBufferAttribute(l,u),Ra.fromBufferAttribute(l,c),Ba.fromBufferAttribute(l,h),g.uv2=Xr.getUV(Pa,ba,Ma,wa,La,Ra,Ba,new ii));var y={a:u,b:c,c:h,normal:new Di,materialIndex:0};Xr.getNormal(ba,Ma,wa,y.normal),g.face=y}return g}t.Mesh=Da;var Na=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,m.default)(this,n),e=t.call(this),e.type="BoxGeometry",e.parameters={width:i,height:r,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var u=(0,h.default)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var c=[],d=[],f=[],p=[],v=0,g=0;function y(e,t,n,i,r,a,o,s,l,h,m){for(var y=a/l,_=o/h,x=a/2,b=o/2,M=s/2,w=l+1,S=h+1,A=0,T=0,C=new Di,E=0;E<S;E++)for(var k=E*_-b,L=0;L<w;L++){var R=L*y-x;C[e]=R*i,C[t]=k*r,C[n]=M,d.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),p.push(L/l),p.push(1-E/h),A+=1}for(var B=0;B<h;B++)for(var P=0;P<l;P++){var I=v+P+w*B,D=v+P+w*(B+1),O=v+(P+1)+w*(B+1),F=v+(P+1)+w*B;c.push(I,D,F),c.push(D,O,F),T+=6}u.addGroup(g,T,m),g+=T,v+=A}return y("z","y","x",-1,-1,a,r,i,l,s,0),y("z","y","x",1,-1,a,r,-i,l,s,1),y("x","z","y",1,1,i,a,r,o,l,2),y("x","z","y",1,-1,i,a,-r,o,l,3),y("x","y","z",1,-1,i,r,a,o,s,4),y("x","y","z",-1,-1,i,r,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new la(d,3)),e.setAttribute("normal",new la(f,3)),e.setAttribute("uv",new la(p,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(ga);function Ga(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function Ua(e){for(var t={},n=0;n<e.length;n++){var i=Ga(e[n]);for(var r in i)t[r]=i[r]}return t}function za(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}function Ha(e){return null===e.getRenderTarget()&&e.outputEncoding===Jt?Qt:$t}t.BoxGeometry=Na;var Va={clone:Ga,merge:Ua};t.UniformsUtils=Va;var Wa="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ja="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",Ja=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.uniformsGroups=[],i.vertexShader=Wa,i.fragmentShader=ja,i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ga(e.uniforms),this.uniformsGroups=za(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var r=this.uniforms[i],a=r.value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var s in this.extensions)!0===this.extensions[s]&&(o[s]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}]),n}(Yr);t.ShaderMaterial=Ja;var Xa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isCamera=!0,e.type="Camera",e.matrixWorldInverse=new hr,e.projectionMatrix=new hr,e.projectionMatrixInverse=new hr,e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){(0,u.default)((0,c.default)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Or);t.Camera=Xa;var qa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,m.default)(this,n),e=t.call(this),e.isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Pn*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Bn*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Pn*Math.atan(Math.tan(.5*Bn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Bn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Xa);t.PerspectiveCamera=qa;var Ya=-90,Za=1,Ka=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this),a.type="CubeCamera",a.renderTarget=r;var o=new qa(Ya,Za,e,i);o.layers=a.layers,o.up.set(0,1,0),o.lookAt(1,0,0),a.add(o);var s=new qa(Ya,Za,e,i);s.layers=a.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),a.add(s);var l=new qa(Ya,Za,e,i);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),a.add(l);var u=new qa(Ya,Za,e,i);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(0,-1,0),a.add(u);var c=new qa(Ya,Za,e,i);c.layers=a.layers,c.up.set(0,1,0),c.lookAt(0,0,1),a.add(c);var h=new qa(Ya,Za,e,i);return h.layers=a.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),a.add(h),a}return(0,g.default)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=(0,l.default)(this.children,6),r=i[0],a=i[1],o=i[2],s=i[3],u=i[4],c=i[5],h=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=he,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),n}(Or);t.CubeCamera=Ka;var Qa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c,h){var d;return(0,m.default)(this,n),e=void 0!==e?e:[],i=void 0!==i?i:ye,d=t.call(this,e,i,r,a,o,s,l,u,c,h),d.isCubeTexture=!0,d.flipY=!1,d}return(0,g.default)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Ti);t.CubeTexture=Qa;var $a=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.default)(this,n),e=t.call(this,i,i,r),e.isWebGLCubeRenderTarget=!0;var a={width:i,height:i,depth:1},o=[a,a,a,a,a,a];return e.texture=new Qa(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,e.texture.minFilter=void 0!==r.minFilter?r.minFilter:Re,e}return(0,g.default)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Na(5,5,5),r=new Ja({name:"CubemapFromEquirect",uniforms:Ga(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:L,blending:B});r.uniforms.tEquirect.value=t;var a=new Da(i,r),o=t.minFilter;t.minFilter===Ie&&(t.minFilter=Re);var s=new Ka(1,10,this);return s.update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var r=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}]),n}(Ei);t.WebGLCubeRenderTarget=$a;var eo=new Di,to=new Di,no=new ri,io=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=eo.subVectors(n,t).cross(to.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(eo),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||no.getNormalMatrix(e),i=this.coplanarPoint(eo).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Plane=io;var ro=new nr,ao=new Di,oo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new io,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new io,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new io,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new io,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new io,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new io;(0,m.default)(this,e),this.planes=[t,n,i,r,a,o]}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-i,c-s,p-h,y-v).normalize(),t[1].setComponents(o+i,c+s,p+h,y+v).normalize(),t[2].setComponents(o+r,c+l,p+d,y+m).normalize(),t[3].setComponents(o-r,c-l,p-d,y-m).normalize(),t[4].setComponents(o-a,c-u,p-f,y-g).normalize(),t[5].setComponents(o+a,c+u,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ro.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ro)}},{key:"intersectsSprite",value:function(e){return ro.center.set(0,0,0),ro.radius=.7071067811865476,ro.applyMatrix4(e.matrixWorld),this.intersectsSphere(ro)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){var a=t[r].distanceToPoint(n);if(a<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(ao.x=i.normal.x>0?e.max.x:e.min.x,ao.y=i.normal.y>0?e.max.y:e.min.y,ao.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ao)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function so(){var e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function lo(e,t){var n=t.isWebGL2,i=new WeakMap;function r(t,i){var r,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(i,s),e.bufferData(i,a,o),t.onUploadCallback(),a instanceof Float32Array)r=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(a instanceof Int16Array)r=5122;else if(a instanceof Uint32Array)r=5125;else if(a instanceof Int32Array)r=5124;else if(a instanceof Int8Array)r=5120;else if(a instanceof Uint8Array)r=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);r=5121}return{buffer:s,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}function a(t,i,r){var a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),i.onUploadCallback()}function o(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)}function s(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))}function l(e,t){if(e.isGLBufferAttribute){var n=i.get(e);(!n||n.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var o=i.get(e);void 0===o?i.set(e,r(e,t)):o.version<e.version&&(a(o.buffer,e,t),o.version=e.version)}}return{get:o,remove:s,update:l}}t.Frustum=oo;var uo=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.default)(this,n),e=t.call(this),e.type="PlaneGeometry",e.parameters={width:i,height:r,widthSegments:a,heightSegments:o};for(var s=i/2,l=r/2,u=Math.floor(a),c=Math.floor(o),h=u+1,d=c+1,f=i/u,p=r/c,v=[],g=[],y=[],_=[],x=0;x<d;x++)for(var b=x*p-l,M=0;M<h;M++){var w=M*f-s;g.push(w,-b,0),y.push(0,0,1),_.push(M/u),_.push(1-x/c)}for(var S=0;S<c;S++)for(var A=0;A<u;A++){var T=A+h*S,C=A+h*(S+1),E=A+1+h*(S+1),k=A+1+h*S;v.push(T,C,k),v.push(C,E,k)}return e.setIndex(v),e.setAttribute("position",new la(g,3)),e.setAttribute("normal",new la(y,3)),e.setAttribute("uv",new la(_,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(ga);t.PlaneGeometry=uo;var co="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",ho="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",fo="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",po="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",vo="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",mo="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",go="vec3 transformed = vec3( position );",yo="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",_o="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",xo="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Mo="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",wo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",So="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Ao="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",To="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Co="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Eo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",ko="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Lo="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Ro="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Bo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Po="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Io="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Do="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Oo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Fo="gl_FragColor = linearToOutputTexel( gl_FragColor );",No="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Go="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Uo="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",zo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Ho="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Vo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Wo="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",jo="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",Jo="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Xo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",qo="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",Yo="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",Zo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Ko="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",Qo="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",$o="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",es="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",ts="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",ns="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",is="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",rs="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",as="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",os="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",ss="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",ls="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",us="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",cs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",hs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",ds="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",fs="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",ps="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",vs="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",ms="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",gs="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ys="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",_s="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",xs="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",bs="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Ms="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",ws="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Ss="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",As="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Ts="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Cs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Es="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",ks="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",Ls="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Rs="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",Bs="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Ps="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",Is="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Ds="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Os="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Fs="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Ns="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Gs="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Us="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",zs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Hs="#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Vs="#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Ws="#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",js="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Js="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Xs="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",qs="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Ys="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Zs="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Ks="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Qs="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",$s="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",el="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",tl="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",nl="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",il="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",rl="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",al="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",ol="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",sl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",ll="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",ul="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cl="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",hl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",dl="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",fl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",pl="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",vl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",ml="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",gl="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",yl="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",_l="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",xl="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",bl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ml="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",wl="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Sl="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Al="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Tl="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Cl="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",El="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",kl="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Ll="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",Rl="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Bl="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Pl="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Il="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Dl="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ol="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Nl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Gl="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ul="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",zl="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Hl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Vl={alphamap_fragment:co,alphamap_pars_fragment:ho,alphatest_fragment:fo,alphatest_pars_fragment:po,aomap_fragment:vo,aomap_pars_fragment:mo,begin_vertex:go,beginnormal_vertex:yo,bsdfs:_o,iridescence_fragment:xo,bumpmap_pars_fragment:bo,clipping_planes_fragment:Mo,clipping_planes_pars_fragment:wo,clipping_planes_pars_vertex:So,clipping_planes_vertex:Ao,color_fragment:To,color_pars_fragment:Co,color_pars_vertex:Eo,color_vertex:ko,common:Lo,cube_uv_reflection_fragment:Ro,defaultnormal_vertex:Bo,displacementmap_pars_vertex:Po,displacementmap_vertex:Io,emissivemap_fragment:Do,emissivemap_pars_fragment:Oo,encodings_fragment:Fo,encodings_pars_fragment:No,envmap_fragment:Go,envmap_common_pars_fragment:Uo,envmap_pars_fragment:zo,envmap_pars_vertex:Ho,envmap_physical_pars_fragment:es,envmap_vertex:Vo,fog_vertex:Wo,fog_pars_vertex:jo,fog_fragment:Jo,fog_pars_fragment:Xo,gradientmap_pars_fragment:qo,lightmap_fragment:Yo,lightmap_pars_fragment:Zo,lights_lambert_fragment:Ko,lights_lambert_pars_fragment:Qo,lights_pars_begin:$o,lights_toon_fragment:ts,lights_toon_pars_fragment:ns,lights_phong_fragment:is,lights_phong_pars_fragment:rs,lights_physical_fragment:as,lights_physical_pars_fragment:os,lights_fragment_begin:ss,lights_fragment_maps:ls,lights_fragment_end:us,logdepthbuf_fragment:cs,logdepthbuf_pars_fragment:hs,logdepthbuf_pars_vertex:ds,logdepthbuf_vertex:fs,map_fragment:ps,map_pars_fragment:vs,map_particle_fragment:ms,map_particle_pars_fragment:gs,metalnessmap_fragment:ys,metalnessmap_pars_fragment:_s,morphcolor_vertex:xs,morphnormal_vertex:bs,morphtarget_pars_vertex:Ms,morphtarget_vertex:ws,normal_fragment_begin:Ss,normal_fragment_maps:As,normal_pars_fragment:Ts,normal_pars_vertex:Cs,normal_vertex:Es,normalmap_pars_fragment:ks,clearcoat_normal_fragment_begin:Ls,clearcoat_normal_fragment_maps:Rs,clearcoat_pars_fragment:Bs,iridescence_pars_fragment:Ps,output_fragment:Is,packing:Ds,premultiplied_alpha_fragment:Os,project_vertex:Fs,dithering_fragment:Ns,dithering_pars_fragment:Gs,roughnessmap_fragment:Us,roughnessmap_pars_fragment:zs,shadowmap_pars_fragment:Hs,shadowmap_pars_vertex:Vs,shadowmap_vertex:Ws,shadowmask_pars_fragment:js,skinbase_vertex:Js,skinning_pars_vertex:Xs,skinning_vertex:qs,skinnormal_vertex:Ys,specularmap_fragment:Zs,specularmap_pars_fragment:Ks,tonemapping_fragment:Qs,tonemapping_pars_fragment:$s,transmission_fragment:el,transmission_pars_fragment:tl,uv_pars_fragment:nl,uv_pars_vertex:il,uv_vertex:rl,uv2_pars_fragment:al,uv2_pars_vertex:ol,uv2_vertex:sl,worldpos_vertex:ll,background_vert:ul,background_frag:cl,backgroundCube_vert:hl,backgroundCube_frag:dl,cube_vert:fl,cube_frag:pl,depth_vert:vl,depth_frag:ml,distanceRGBA_vert:gl,distanceRGBA_frag:yl,equirect_vert:_l,equirect_frag:xl,linedashed_vert:bl,linedashed_frag:Ml,meshbasic_vert:wl,meshbasic_frag:Sl,meshlambert_vert:Al,meshlambert_frag:Tl,meshmatcap_vert:Cl,meshmatcap_frag:El,meshnormal_vert:kl,meshnormal_frag:Ll,meshphong_vert:Rl,meshphong_frag:Bl,meshphysical_vert:Pl,meshphysical_frag:Il,meshtoon_vert:Dl,meshtoon_frag:Ol,points_vert:Fl,points_frag:Nl,shadow_vert:Gl,shadow_frag:Ul,sprite_vert:zl,sprite_frag:Hl};t.ShaderChunk=Vl;var Wl={common:{diffuse:{value:new bi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ri},uv2Transform:{value:new ri},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ii(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ri}},sprite:{diffuse:{value:new bi(16777215)},opacity:{value:1},center:{value:new ii(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ri}}};t.UniformsLib=Wl;var jl={basic:{uniforms:Ua([Wl.common,Wl.specularmap,Wl.envmap,Wl.aomap,Wl.lightmap,Wl.fog]),vertexShader:Vl.meshbasic_vert,fragmentShader:Vl.meshbasic_frag},lambert:{uniforms:Ua([Wl.common,Wl.specularmap,Wl.envmap,Wl.aomap,Wl.lightmap,Wl.emissivemap,Wl.bumpmap,Wl.normalmap,Wl.displacementmap,Wl.fog,Wl.lights,{emissive:{value:new bi(0)}}]),vertexShader:Vl.meshlambert_vert,fragmentShader:Vl.meshlambert_frag},phong:{uniforms:Ua([Wl.common,Wl.specularmap,Wl.envmap,Wl.aomap,Wl.lightmap,Wl.emissivemap,Wl.bumpmap,Wl.normalmap,Wl.displacementmap,Wl.fog,Wl.lights,{emissive:{value:new bi(0)},specular:{value:new bi(1118481)},shininess:{value:30}}]),vertexShader:Vl.meshphong_vert,fragmentShader:Vl.meshphong_frag},standard:{uniforms:Ua([Wl.common,Wl.envmap,Wl.aomap,Wl.lightmap,Wl.emissivemap,Wl.bumpmap,Wl.normalmap,Wl.displacementmap,Wl.roughnessmap,Wl.metalnessmap,Wl.fog,Wl.lights,{emissive:{value:new bi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vl.meshphysical_vert,fragmentShader:Vl.meshphysical_frag},toon:{uniforms:Ua([Wl.common,Wl.aomap,Wl.lightmap,Wl.emissivemap,Wl.bumpmap,Wl.normalmap,Wl.displacementmap,Wl.gradientmap,Wl.fog,Wl.lights,{emissive:{value:new bi(0)}}]),vertexShader:Vl.meshtoon_vert,fragmentShader:Vl.meshtoon_frag},matcap:{uniforms:Ua([Wl.common,Wl.bumpmap,Wl.normalmap,Wl.displacementmap,Wl.fog,{matcap:{value:null}}]),vertexShader:Vl.meshmatcap_vert,fragmentShader:Vl.meshmatcap_frag},points:{uniforms:Ua([Wl.points,Wl.fog]),vertexShader:Vl.points_vert,fragmentShader:Vl.points_frag},dashed:{uniforms:Ua([Wl.common,Wl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vl.linedashed_vert,fragmentShader:Vl.linedashed_frag},depth:{uniforms:Ua([Wl.common,Wl.displacementmap]),vertexShader:Vl.depth_vert,fragmentShader:Vl.depth_frag},normal:{uniforms:Ua([Wl.common,Wl.bumpmap,Wl.normalmap,Wl.displacementmap,{opacity:{value:1}}]),vertexShader:Vl.meshnormal_vert,fragmentShader:Vl.meshnormal_frag},sprite:{uniforms:Ua([Wl.sprite,Wl.fog]),vertexShader:Vl.sprite_vert,fragmentShader:Vl.sprite_frag},background:{uniforms:{uvTransform:{value:new ri},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vl.background_vert,fragmentShader:Vl.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Vl.backgroundCube_vert,fragmentShader:Vl.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vl.cube_vert,fragmentShader:Vl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vl.equirect_vert,fragmentShader:Vl.equirect_frag},distanceRGBA:{uniforms:Ua([Wl.common,Wl.displacementmap,{referencePosition:{value:new Di},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vl.distanceRGBA_vert,fragmentShader:Vl.distanceRGBA_frag},shadow:{uniforms:Ua([Wl.lights,Wl.fog,{color:{value:new bi(0)},opacity:{value:1}}]),vertexShader:Vl.shadow_vert,fragmentShader:Vl.shadow_frag}};t.ShaderLib=jl,jl.physical={uniforms:Ua([jl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ii(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new bi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ii},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new bi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new bi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Vl.meshphysical_vert,fragmentShader:Vl.meshphysical_frag};var Jl={r:0,b:0,g:0};function Xl(e,t,n,i,r,a,o){var s,l,u=new bi(0),c=!0===a?0:1,h=null,d=0,f=null;function p(i,a){var o=!1,p=!0===a.isScene?a.background:null;if(p&&p.isTexture){var m=a.backgroundBlurriness>0;p=(m?n:t).get(p)}var g=e.xr,y=g.getSession&&g.getSession();y&&"additive"===y.environmentBlendMode&&(p=null),null===p?v(u,c):p&&p.isColor&&(v(p,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Me)?(void 0===l&&(l=new Da(new Na(1,1,1),new Ja({name:"BackgroundCubeMaterial",uniforms:Ga(jl.backgroundCube.uniforms),vertexShader:jl.backgroundCube.vertexShader,fragmentShader:jl.backgroundCube.fragmentShader,side:L,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,h===p&&d===p.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=p,d=p.version,f=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(void 0===s&&(s=new Da(new uo(2,2),new Ja({name:"BackgroundMaterial",uniforms:Ga(jl.background.uniforms),vertexShader:jl.background.vertexShader,fragmentShader:jl.background.fragmentShader,side:k,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=p,s.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,!0===p.matrixAutoUpdate&&p.updateMatrix(),s.material.uniforms.uvTransform.value.copy(p.matrix),h===p&&d===p.version&&f===e.toneMapping||(s.material.needsUpdate=!0,h=p,d=p.version,f=e.toneMapping),s.layers.enableAll(),i.unshift(s,s.geometry,s.material,0,0,null))}function v(t,n){t.getRGB(Jl,Ha(e)),i.buffers.color.setClear(Jl.r,Jl.g,Jl.b,n,o)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),c=t,v(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,v(u,c)},render:p}}function ql(e,t,n,i){var r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},l=m(null),u=l,c=!1;function h(t,i,r,a,s){var l=!1;if(o){var h=v(a,r,i);u!==h&&(u=h,f(u.object)),l=g(t,a,r,s),l&&y(t,a,r,s)}else{var d=!0===i.wireframe;u.geometry===a.id&&u.program===r.id&&u.wireframe===d||(u.geometry=a.id,u.program=r.id,u.wireframe=d,l=!0)}null!==s&&n.update(s,34963),(l||c)&&(c=!1,S(t,i,r,a),null!==s&&e.bindBuffer(34963,n.get(s).buffer))}function d(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function p(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function v(e,t,n){var i=!0===n.wireframe,r=s[e.id];void 0===r&&(r={},s[e.id]=r);var a=r[t.id];void 0===a&&(a={},r[t.id]=a);var o=a[i];return void 0===o&&(o=m(d()),a[i]=o),o}function m(e){for(var t=[],n=[],i=[],a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function g(e,t,n,i){var r=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s){var c=s[l];if(c.location>=0){var h=r[l],d=a[l];if(void 0===d&&("instanceMatrix"===l&&e.instanceMatrix&&(d=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(d=e.instanceColor)),void 0===h)return!0;if(h.attribute!==d)return!0;if(d&&h.data!==d.data)return!0;o++}}return u.attributesNum!==o||u.index!==i}function y(e,t,n,i){var r={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s){var c=s[l];if(c.location>=0){var h=a[l];void 0===h&&("instanceMatrix"===l&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(h=e.instanceColor));var d={};d.attribute=h,h&&h.data&&(d.data=h.data),r[l]=d,o++}}u.attributes=r,u.attributesNum=o,u.index=i}function _(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function x(e){b(e,0)}function b(n,r){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r){var l=i.isWebGL2?e:t.get("ANGLE_instanced_arrays");l[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function M(){for(var t=u.newAttributes,n=u.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function w(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function S(r,a,o,s){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){_();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var h in u){var d=u[h];if(d.location>=0){var f=l[h];if(void 0===f&&("instanceMatrix"===h&&r.instanceMatrix&&(f=r.instanceMatrix),"instanceColor"===h&&r.instanceColor&&(f=r.instanceColor)),void 0!==f){var p=f.normalized,v=f.itemSize,m=n.get(f);if(void 0===m)continue;var g=m.buffer,y=m.type,S=m.bytesPerElement;if(f.isInterleavedBufferAttribute){var A=f.data,T=A.stride,C=f.offset;if(A.isInstancedInterleavedBuffer){for(var E=0;E<d.locationSize;E++)b(d.location+E,A.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)}else for(var k=0;k<d.locationSize;k++)x(d.location+k);e.bindBuffer(34962,g);for(var L=0;L<d.locationSize;L++)w(d.location+L,v/d.locationSize,y,p,T*S,(C+v/d.locationSize*L)*S)}else{if(f.isInstancedBufferAttribute){for(var R=0;R<d.locationSize;R++)b(d.location+R,f.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count)}else for(var B=0;B<d.locationSize;B++)x(d.location+B);e.bindBuffer(34962,g);for(var P=0;P<d.locationSize;P++)w(d.location+P,v/d.locationSize,y,p,v*S,v/d.locationSize*P*S)}}else if(void 0!==c){var I=c[h];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(d.location,I);break;case 3:e.vertexAttrib3fv(d.location,I);break;case 4:e.vertexAttrib4fv(d.location,I);break;default:e.vertexAttrib1fv(d.location,I)}}}}M()}}function A(){for(var e in E(),s){var t=s[e];for(var n in t){var i=t[n];for(var r in i)p(i[r].object),delete i[r];delete t[n]}delete s[e]}}function T(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var i=t[n];for(var r in i)p(i[r].object),delete i[r];delete t[n]}delete s[e.id]}}function C(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var i=n[e.id];for(var r in i)p(i[r].object),delete i[r];delete n[e.id]}}}function E(){k(),c=!0,u!==l&&(u=l,f(u.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:E,resetDefaultState:k,dispose:A,releaseStatesOfGeometry:T,releaseStatesOfProgram:C,initAttributes:_,enableAttribute:x,disableUnusedAttributes:M}}function Yl(e,t,n,i){var r,a=i.isWebGL2;function o(e){r=e}function s(t,i){e.drawArrays(r,t,i),n.update(i,r,1)}function l(i,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](r,i,o,s),n.update(o,r,s)}}this.setMode=o,this.render=s,this.renderInstances=l}function Zl(e,t,n){var i;function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),p=e.getParameter(34076),v=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),_=d>0,x=o||t.has("OES_texture_float"),b=_&&x,M=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:b,maxSamples:M}}function Kl(e){var t=this,n=null,i=0,r=!1,a=!1,o=new io,s=new ri,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(e,n,i,r){var a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==r||null===u){var c=i+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,f=i;d!==a;++d,f+=4)o.copy(e[d]).applyMatrix4(h,s),o.normal.toArray(u,f),u[f+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==i||r;return r=t,n=c(e,a,0),i=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(t,o,s){var h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!r||null===h||0===h.length||a&&!f)a?c(null):u();else{var v=a?0:i,m=4*v,g=p.clippingState||null;l.value=g,g=c(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function Ql(e){var t=new WeakMap;function n(e,t){return t===xe?e.mapping=ye:t===be&&(e.mapping=_e),e}function i(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===xe||a===be){if(t.has(i)){var o=t.get(i).texture;return n(o,i.mapping)}var s=i.image;if(s&&s.height>0){var l=new $a(s.height/2);return l.fromEquirectangularTexture(e,i),t.set(i,l),i.addEventListener("dispose",r),n(l.texture,i.mapping)}return null}}return i}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}var $l=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,m.default)(this,n),e=t.call(this),e.isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=r,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,a=r+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Xa);t.OrthographicCamera=$l;var eu=4,tu=[.125,.215,.35,.446,.526,.582],nu=20,iu=new $l,ru=new bi,au=null,ou=(1+Math.sqrt(5))/2,su=1/ou,lu=[new Di(1,1,1),new Di(-1,1,1),new Di(1,1,-1),new Di(-1,1,-1),new Di(0,ou,su),new Di(0,ou,-su),new Di(su,0,ou),new Di(-su,0,ou),new Di(ou,su,0),new Di(-ou,su,0)],uu=function(){function e(t){(0,m.default)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,g.default)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;au=this._renderer.getRenderTarget(),this._setSize(256);var r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=vu(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=pu(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(au),e.scissorTest=!1,du(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===ye||e.mapping===_e?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),au=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Re,minFilter:Re,generateMipmaps:!1,type:Ve,format:Ye,encoding:jt,depthBuffer:!1},i=hu(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=hu(e,t,n);var r=this._lodMax,a=cu(r);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=fu(r,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new Da(this._lodPlanes[0],e);this._renderer.compile(t,iu)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var r=90,a=1,o=new qa(r,a,t,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,h=u.toneMapping;u.getClearColor(ru),u.toneMapping=he,u.autoClear=!1;var d=new Zr({name:"PMREM.Background",side:L,depthWrite:!1,depthTest:!1}),f=new Da(new Na,d),p=!1,v=e.background;v?v.isColor&&(d.color.copy(v),e.background=null,p=!0):(d.color.copy(ru),p=!0);for(var m=0;m<6;m++){var g=m%3;0===g?(o.up.set(0,s[m],0),o.lookAt(l[m],0,0)):1===g?(o.up.set(0,0,s[m]),o.lookAt(0,l[m],0)):(o.up.set(0,s[m],0),o.lookAt(0,0,l[m]));var y=this._cubeSize;du(i,g*y,m>2?y:0,y,y),u.setRenderTarget(i),p&&u.render(f,o),u.render(e,o)}f.geometry.dispose(),f.material.dispose(),u.toneMapping=h,u.autoClear=c,e.background=v}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===ye||e.mapping===_e;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=vu()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=pu());var r=i?this._cubemapMaterial:this._equirectMaterial,a=new Da(this._lodPlanes[0],r),o=r.uniforms;o["envMap"].value=e;var s=this._cubeSize;du(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,iu)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=lu[(i-1)%lu.length];this._blur(e,i-1,i,r,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(e,t,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=3,c=new Da(this._lodPlanes[i],l),h=l.uniforms,d=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*d):2*Math.PI/(2*nu-1),p=r/f,v=isFinite(r)?1+Math.floor(u*p):nu;v>nu&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(v," samples when the maximum is set to ").concat(nu));for(var m=[],g=0,y=0;y<nu;++y){var _=y/p,x=Math.exp(-_*_/2);m.push(x),0===y?g+=x:y<v&&(g+=2*x)}for(var b=0;b<m.length;b++)m[b]=m[b]/g;h["envMap"].value=e.texture,h["samples"].value=v,h["weights"].value=m,h["latitudinal"].value="latitudinal"===a,o&&(h["poleAxis"].value=o);var M=this._lodMax;h["dTheta"].value=f,h["mipInt"].value=M-n;var w=this._sizeLods[i],S=3*w*(i>M-eu?i-M+eu:0),A=4*(this._cubeSize-w);du(t,S,A,3*w,2*w),s.setRenderTarget(t),s.render(c,iu)}}]),e}();function cu(e){for(var t=[],n=[],i=[],r=e,a=e-eu+1+tu.length,o=0;o<a;o++){var s=Math.pow(2,r);n.push(s);var l=1/s;o>e-eu?l=tu[o-e+eu-1]:0===o&&(l=0),i.push(l);for(var u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*f),_=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=0;b<f;b++){var M=b%3*2/3-1,w=b>2?0:-1,S=[M,w,0,M+2/3,w,0,M+2/3,w+1,0,M,w,0,M+2/3,w+1,0,M,w+1,0];y.set(S,v*p*b),_.set(d,m*p*b);var A=[b,b,b,b,b,b];x.set(A,g*p*b)}var T=new ga;T.setAttribute("position",new $r(y,v)),T.setAttribute("uv",new $r(_,m)),T.setAttribute("faceIndex",new $r(x,g)),t.push(T),r>eu&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}function hu(e,t,n){var i=new Ei(e,t,n);return i.texture.mapping=Me,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function du(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function fu(e,t,n){var i=new Float32Array(nu),r=new Di(0,1,0),a=new Ja({name:"SphericalGaussianBlur",defines:{n:nu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:mu(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:B,depthTest:!1,depthWrite:!1});return a}function pu(){return new Ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mu(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:B,depthTest:!1,depthWrite:!1})}function vu(){return new Ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mu(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:B,depthTest:!1,depthWrite:!1})}function mu(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function gu(e){var t=new WeakMap,n=null;function i(i){if(i&&i.isTexture){var o=i.mapping,s=o===xe||o===be,l=o===ye||o===_e;if(s||l){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new uu(e)),u=s?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var c=i.image;if(s&&c&&c.height>0||l&&c&&r(c)){null===n&&(n=new uu(e));var h=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,h),i.addEventListener("dispose",a),h.texture}return null}}return i}function r(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}function a(e){var n=e.target;n.removeEventListener("dispose",a);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function o(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:i,dispose:o}}function yu(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function _u(e,t,n,i){var r={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete r[s.id];var u=a.get(s);u&&(t.remove(u),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e,t){return!0===r[t.id]||(t.addEventListener("dispose",o),r[t.id]=!0,n.memory.geometries++),t}function l(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var r=e.morphAttributes;for(var a in r)for(var o=r[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)}function u(e){var n=[],i=e.index,r=e.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],d=s[l+2];n.push(c,h,h,d,d,c)}}else{var f=r.array;o=r.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(oi(n)?oa:ra)(n,1);_.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,_)}function c(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&u(e)}else u(e);return a.get(e)}return{get:s,update:l,getWireframeAttribute:c}}function xu(e,t,n,i){var r,a,o,s=i.isWebGL2;function l(e){r=e}function u(e){a=e.type,o=e.bytesPerElement}function c(t,i){e.drawElements(r,i,a,t*o),n.update(i,r,1)}function h(i,l,u){if(0!==u){var c,h;if(s)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](r,l,a,i*o,u),n.update(l,r,u)}}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function bu(e){var t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(e,t,i){switch(n.calls++,t){case 4:n.triangles+=i*(e/3);break;case 1:n.lines+=i*(e/2);break;case 3:n.lines+=i*(e-1);break;case 2:n.lines+=i*e;break;case 0:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Mu(e,t){return e[0]-t[0]}function wu(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Su(e,t,n){for(var i={},r=new Float32Array(8),a=new WeakMap,o=new Ci,s=[],l=0;l<8;l++)s[l]=[l,0];function u(l,u,c,h){var d=l.morphTargetInfluences;if(!0===t.isWebGL2){var f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0,v=a.get(u);if(void 0===v||v.count!==p){var m=function e(){C.dispose(),a.delete(u),u.removeEventListener("dispose",e)};void 0!==v&&v.texture.dispose();var g=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,_=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],M=u.morphAttributes.color||[],w=0;!0===g&&(w=1),!0===y&&(w=2),!0===_&&(w=3);var S=u.attributes.position.count*w,A=1;S>t.maxTextureSize&&(A=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);var T=new Float32Array(S*A*4*p),C=new ki(T,S,A,p);C.type=He,C.needsUpdate=!0;for(var E=4*w,k=0;k<p;k++)for(var L=x[k],R=b[k],B=M[k],P=S*A*4*k,I=0;I<L.count;I++){var D=I*E;!0===g&&(o.fromBufferAttribute(L,I),T[P+D+0]=o.x,T[P+D+1]=o.y,T[P+D+2]=o.z,T[P+D+3]=0),!0===y&&(o.fromBufferAttribute(R,I),T[P+D+4]=o.x,T[P+D+5]=o.y,T[P+D+6]=o.z,T[P+D+7]=0),!0===_&&(o.fromBufferAttribute(B,I),T[P+D+8]=o.x,T[P+D+9]=o.y,T[P+D+10]=o.z,T[P+D+11]=4===B.itemSize?o.w:1)}v={count:p,texture:C,size:new ii(S,A)},a.set(u,v),u.addEventListener("dispose",m)}for(var O=0,F=0;F<d.length;F++)O+=d[F];var N=u.morphTargetsRelative?1:1-O;h.getUniforms().setValue(e,"morphTargetBaseInfluence",N),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var G=void 0===d?0:d.length,U=i[u.id];if(void 0===U||U.length!==G){U=[];for(var z=0;z<G;z++)U[z]=[z,0];i[u.id]=U}for(var H=0;H<G;H++){var V=U[H];V[0]=H,V[1]=d[H]}U.sort(wu);for(var W=0;W<8;W++)W<G&&U[W][1]?(s[W][0]=U[W][0],s[W][1]=U[W][1]):(s[W][0]=Number.MAX_SAFE_INTEGER,s[W][1]=0);s.sort(Mu);for(var j=u.morphAttributes.position,J=u.morphAttributes.normal,X=0,q=0;q<8;q++){var Y=s[q],Z=Y[0],K=Y[1];Z!==Number.MAX_SAFE_INTEGER&&K?(j&&u.getAttribute("morphTarget"+q)!==j[Z]&&u.setAttribute("morphTarget"+q,j[Z]),J&&u.getAttribute("morphNormal"+q)!==J[Z]&&u.setAttribute("morphNormal"+q,J[Z]),r[q]=K,X+=K):(j&&!0===u.hasAttribute("morphTarget"+q)&&u.deleteAttribute("morphTarget"+q),J&&!0===u.hasAttribute("morphNormal"+q)&&u.deleteAttribute("morphNormal"+q),r[q]=0)}var Q=u.morphTargetsRelative?1:1-X;h.getUniforms().setValue(e,"morphTargetBaseInfluence",Q),h.getUniforms().setValue(e,"morphTargetInfluences",r)}}return{update:u}}function Au(e,t,n,i){var r=new WeakMap;function a(e){var a=i.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==a&&(t.update(l),r.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l}function o(){r=new WeakMap}function s(e){var t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:a,dispose:o}}t.PMREMGenerator=uu;var Tu=new Ti,Cu=new ki,Eu=new Ri,ku=new Qa,Lu=[],Ru=[],Bu=new Float32Array(16),Pu=new Float32Array(9),Iu=new Float32Array(4);function Du(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=Lu[r];if(void 0===a&&(a=new Float32Array(r),Lu[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Ou(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Fu(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Nu(e,t){var n=Ru[t];void 0===n&&(n=new Int32Array(t),Ru[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Gu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Uu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ou(n,t))return;e.uniform2fv(this.addr,t),Fu(n,t)}}function zu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ou(n,t))return;e.uniform3fv(this.addr,t),Fu(n,t)}}function Hu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ou(n,t))return;e.uniform4fv(this.addr,t),Fu(n,t)}}function Vu(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ou(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Fu(n,t)}else{if(Ou(n,i))return;Iu.set(i),e.uniformMatrix2fv(this.addr,!1,Iu),Fu(n,i)}}function Wu(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ou(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Fu(n,t)}else{if(Ou(n,i))return;Pu.set(i),e.uniformMatrix3fv(this.addr,!1,Pu),Fu(n,i)}}function ju(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ou(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Fu(n,t)}else{if(Ou(n,i))return;Bu.set(i),e.uniformMatrix4fv(this.addr,!1,Bu),Fu(n,i)}}function Ju(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Xu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ou(n,t))return;e.uniform2iv(this.addr,t),Fu(n,t)}}function qu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ou(n,t))return;e.uniform3iv(this.addr,t),Fu(n,t)}}function Yu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ou(n,t))return;e.uniform4iv(this.addr,t),Fu(n,t)}}function Zu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ku(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ou(n,t))return;e.uniform2uiv(this.addr,t),Fu(n,t)}}function Qu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ou(n,t))return;e.uniform3uiv(this.addr,t),Fu(n,t)}}function $u(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ou(n,t))return;e.uniform4uiv(this.addr,t),Fu(n,t)}}function ec(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Tu,r)}function tc(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Eu,r)}function nc(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||ku,r)}function ic(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Cu,r)}function rc(e){switch(e){case 5126:return Gu;case 35664:return Uu;case 35665:return zu;case 35666:return Hu;case 35674:return Vu;case 35675:return Wu;case 35676:return ju;case 5124:case 35670:return Ju;case 35667:case 35671:return Xu;case 35668:case 35672:return qu;case 35669:case 35673:return Yu;case 5125:return Zu;case 36294:return Ku;case 36295:return Qu;case 36296:return $u;case 35678:case 36198:case 36298:case 36306:case 35682:return ec;case 35679:case 36299:case 36307:return tc;case 35680:case 36300:case 36308:case 36293:return nc;case 36289:case 36303:case 36311:case 36292:return ic}}function ac(e,t){e.uniform1fv(this.addr,t)}function oc(e,t){var n=Du(t,this.size,2);e.uniform2fv(this.addr,n)}function sc(e,t){var n=Du(t,this.size,3);e.uniform3fv(this.addr,n)}function lc(e,t){var n=Du(t,this.size,4);e.uniform4fv(this.addr,n)}function uc(e,t){var n=Du(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cc(e,t){var n=Du(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function hc(e,t){var n=Du(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function dc(e,t){e.uniform1iv(this.addr,t)}function fc(e,t){e.uniform2iv(this.addr,t)}function pc(e,t){e.uniform3iv(this.addr,t)}function vc(e,t){e.uniform4iv(this.addr,t)}function mc(e,t){e.uniform1uiv(this.addr,t)}function gc(e,t){e.uniform2uiv(this.addr,t)}function yc(e,t){e.uniform3uiv(this.addr,t)}function _c(e,t){e.uniform4uiv(this.addr,t)}function xc(e,t,n){var i=this.cache,r=t.length,a=Nu(n,r);Ou(i,a)||(e.uniform1iv(this.addr,a),Fu(i,a));for(var o=0;o!==r;++o)n.setTexture2D(t[o]||Tu,a[o])}function bc(e,t,n){var i=this.cache,r=t.length,a=Nu(n,r);Ou(i,a)||(e.uniform1iv(this.addr,a),Fu(i,a));for(var o=0;o!==r;++o)n.setTexture3D(t[o]||Eu,a[o])}function Mc(e,t,n){var i=this.cache,r=t.length,a=Nu(n,r);Ou(i,a)||(e.uniform1iv(this.addr,a),Fu(i,a));for(var o=0;o!==r;++o)n.setTextureCube(t[o]||ku,a[o])}function wc(e,t,n){var i=this.cache,r=t.length,a=Nu(n,r);Ou(i,a)||(e.uniform1iv(this.addr,a),Fu(i,a));for(var o=0;o!==r;++o)n.setTexture2DArray(t[o]||Cu,a[o])}function Sc(e){switch(e){case 5126:return ac;case 35664:return oc;case 35665:return sc;case 35666:return lc;case 35674:return uc;case 35675:return cc;case 35676:return hc;case 5124:case 35670:return dc;case 35667:case 35671:return fc;case 35668:case 35672:return pc;case 35669:case 35673:return vc;case 5125:return mc;case 36294:return gc;case 36295:return yc;case 36296:return _c;case 35678:case 36198:case 36298:case 36306:case 35682:return xc;case 35679:case 36299:case 36307:return bc;case 35680:case 36300:case 36308:case 36293:return Mc;case 36289:case 36303:case 36311:case 36292:return wc}}var Ac=function e(t,n,i){(0,m.default)(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=rc(n.type)},Tc=function e(t,n,i){(0,m.default)(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=Sc(n.type)},Cc=function(){function e(t){(0,m.default)(this,e),this.id=t,this.seq=[],this.map={}}return(0,g.default)(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}}}]),e}(),Ec=/(\w+)(\])?(\[|\.)?/g;function kc(e,t){e.seq.push(t),e.map[t.id]=t}function Lc(e,t,n){var i=e.name,r=i.length;Ec.lastIndex=0;while(1){var a=Ec.exec(i),o=Ec.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){kc(n,void 0===u?new Ac(s,e,t):new Tc(s,e,t));break}var c=n.map,h=c[s];void 0===h&&(h=new Cc(s),kc(n,h)),n=h}}var Rc=function(){function e(t,n){(0,m.default)(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),r=0;r<i;++r){var a=t.getActiveUniform(n,r),o=t.getUniformLocation(n,a.name);Lc(a,o,this)}}return(0,g.default)(e,[{key:"setValue",value:function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n}}]),e}();function Bc(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var Pc=0;function Ic(e,t){for(var n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length),o=r;o<a;o++){var s=o+1;i.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return i.join("\n")}function Dc(e){switch(e){case jt:return["Linear","( value )"];case Jt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Oc(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";var a=/ERROR: 0:(\d+)/.exec(r);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+Ic(e.getShaderSource(t),o)}return r}function Fc(e,t){var n=Dc(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Nc(e,t){var n;switch(t){case de:n="Linear";break;case fe:n="Reinhard";break;case pe:n="OptimizedCineon";break;case ve:n="ACESFilmic";break;case me:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Gc(e){var t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(Hc).join("\n")}function Uc(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function zc(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}function Hc(e){return""!==e}function Vc(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Wc(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var jc=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jc(e){return e.replace(jc,Xc)}function Xc(e,t){var n=Vl[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Jc(n)}var qc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Yc(e){return e.replace(qc,Zc)}function Zc(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Kc(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Qc(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===T?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===C?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===E&&(t="SHADOWMAP_TYPE_VSM"),t}function $c(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ye:case _e:t="ENVMAP_TYPE_CUBE";break;case Me:t="ENVMAP_TYPE_CUBE_UV";break}return t}function eh(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case _e:t="ENVMAP_MODE_REFRACTION";break}return t}function th(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case le:t="ENVMAP_BLENDING_MULTIPLY";break;case ue:t="ENVMAP_BLENDING_MIX";break;case ce:t="ENVMAP_BLENDING_ADD";break}return t}function nh(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t,r=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:r,texelHeight:i,maxMip:n}}function ih(e,t,n,i){var r,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=Qc(n),h=$c(n),d=eh(n),f=th(n),p=nh(n),v=n.isWebGL2?"":Gc(n),m=Uc(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(r=[m].filter(Hc).join("\n"),r.length>0&&(r+="\n"),a=[v,m].filter(Hc).join("\n"),a.length>0&&(a+="\n")):(r=[Kc(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Hc).join("\n"),a=[v,Kc(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==he?"#define TONE_MAPPING":"",n.toneMapping!==he?Vl["tonemapping_pars_fragment"]:"",n.toneMapping!==he?Nc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Vl["encodings_pars_fragment"],Fc("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Hc).join("\n")),l=Jc(l),l=Vc(l,n),l=Wc(l,n),u=Jc(u),u=Vc(u,n),u=Wc(u,n),l=Yc(l),u=Yc(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",n.glslVersion===Cn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Cn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,x,b=y+r+l,M=y+a+u,w=Bc(o,35633,b),S=Bc(o,35632,M);if(o.attachShader(g,w),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var A=o.getProgramInfoLog(g).trim(),T=o.getShaderInfoLog(w).trim(),C=o.getShaderInfoLog(S).trim(),E=!0,k=!0;if(!1===o.getProgramParameter(g,35714)){E=!1;var L=Oc(o,w,"vertex"),R=Oc(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+A+"\n"+L+"\n"+R)}else""!==A?console.warn("THREE.WebGLProgram: Program Info Log:",A):""!==T&&""!==C||(k=!1);k&&(this.diagnostics={runnable:E,programLog:A,vertexShader:{log:T,prefix:r},fragmentShader:{log:C,prefix:a}})}return o.deleteShader(w),o.deleteShader(S),this.getUniforms=function(){return void 0===_&&(_=new Rc(o,g)),_},this.getAttributes=function(){return void 0===x&&(x=zc(o,g)),x},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Pc++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=S,this}var rh=0,ah=function(){function e(){(0,m.default)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,g.default)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),i=(0,s.default)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(a){i.e(a)}finally{i.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new oh(e),t.set(e,n)),n}}]),e}(),oh=function e(t){(0,m.default)(this,e),this.id=rh++,this.code=t,this.usedTimes=0};function sh(e,t,n,i,r,a,o){var s=new Mr,l=new ah,u=[],c=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(a,s,u,v,m){var g=v.fog,y=m.geometry,_=a.isMeshStandardMaterial?v.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||_),b=x&&x.mapping===Me?x.image.height:null,M=p[a.type];null!==a.precision&&(f=r.getMaxPrecision(a.precision),f!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."));var w,S,A,T,C=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,E=void 0!==C?C.length:0,k=0;if(void 0!==y.morphAttributes.position&&(k=1),void 0!==y.morphAttributes.normal&&(k=2),void 0!==y.morphAttributes.color&&(k=3),M){var B=jl[M];w=B.vertexShader,S=B.fragmentShader}else w=a.vertexShader,S=a.fragmentShader,l.update(a),A=l.getVertexShaderID(a),T=l.getFragmentShaderID(a);var I=e.getRenderTarget(),D=a.alphaTest>0,O=a.clearcoat>0,F=a.iridescence>0,N={isWebGL2:c,shaderID:M,shaderName:a.type,vertexShader:w,fragmentShader:S,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:T,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:d,outputEncoding:null===I?e.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:jt,map:!!a.map,matcap:!!a.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:b,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Zt,tangentSpaceNormalMap:a.normalMapType===Yt,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===Jt,clearcoat:O,clearcoatMap:O&&!!a.clearcoatMap,clearcoatRoughnessMap:O&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!a.clearcoatNormalMap,iridescence:F,iridescenceMap:F&&!!a.iridescenceMap,iridescenceThicknessMap:F&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===P,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:E,morphTextureStride:k,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:he,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===R,flipSided:a.side===L,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()};return N}function m(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(g(n,t),y(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()}function g(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function y(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}function _(e){var t,n=p[e.type];if(n){var i=jl[n];t=Va.clone(i.uniforms)}else t=e.uniforms;return t}function x(t,n){for(var i,r=0,o=u.length;r<o;r++){var s=u[r];if(s.cacheKey===n){i=s,++i.usedTimes;break}}return void 0===i&&(i=new ih(e,n,t,a),u.push(i)),i}function b(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}}function M(e){l.remove(e)}function w(){l.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:_,acquireProgram:x,releaseProgram:b,releaseShaderCache:M,programs:u,dispose:w}}function lh(){var e=new WeakMap;function t(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function i(t,n,i){e.get(t)[n]=i}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function uh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ch(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function hh(){var e=[],t=0,n=[],i=[],r=[];function a(){t=0,n.length=0,i.length=0,r.length=0}function o(n,i,r,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}function s(e,t,a,s,l,u){var c=o(e,t,a,s,l,u);a.transmission>0?i.push(c):!0===a.transparent?r.push(c):n.push(c)}function l(e,t,a,s,l,u){var c=o(e,t,a,s,l,u);a.transmission>0?i.unshift(c):!0===a.transparent?r.unshift(c):n.unshift(c)}function u(e,t){n.length>1&&n.sort(e||uh),i.length>1&&i.sort(t||ch),r.length>1&&r.sort(t||ch)}function c(){for(var n=t,i=e.length;n<i;n++){var r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:s,unshift:l,finish:c,sort:u}}function dh(){var e=new WeakMap;function t(t,n){var i,r=e.get(t);return void 0===r?(i=new hh,e.set(t,[i])):n>=r.length?(i=new hh,r.push(i)):i=r[n],i}function n(){e=new WeakMap}return{get:t,dispose:n}}function fh(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Di,color:new bi};break;case"SpotLight":n={position:new Di,direction:new Di,color:new bi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Di,color:new bi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Di,skyColor:new bi,groundColor:new bi};break;case"RectAreaLight":n={color:new bi,position:new Di,halfWidth:new Di,halfHeight:new Di};break}return e[t.id]=n,n}}}function ph(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}var vh=0;function mh(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function gh(e,t){for(var n=new fh,i=ph(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)r.probe.push(new Di);var o=new Di,s=new hr,l=new hr;function u(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)r.probe[c].set(0,0,0);var h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,_=0,x=0;a.sort(mh);for(var b=!0!==o?Math.PI:1,M=0,w=a.length;M<w;M++){var S=a[M],A=S.color,T=S.intensity,C=S.distance,E=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=A.r*T*b,l+=A.g*T*b,u+=A.b*T*b;else if(S.isLightProbe)for(var k=0;k<9;k++)r.probe[k].addScaledVector(S.sh.coefficients[k],T);else if(S.isDirectionalLight){var L=n.get(S);if(L.color.copy(S.color).multiplyScalar(S.intensity*b),S.castShadow){var R=S.shadow,B=i.get(S);B.shadowBias=R.bias,B.shadowNormalBias=R.normalBias,B.shadowRadius=R.radius,B.shadowMapSize=R.mapSize,r.directionalShadow[h]=B,r.directionalShadowMap[h]=E,r.directionalShadowMatrix[h]=S.shadow.matrix,m++}r.directional[h]=L,h++}else if(S.isSpotLight){var P=n.get(S);P.position.setFromMatrixPosition(S.matrixWorld),P.color.copy(A).multiplyScalar(T*b),P.distance=C,P.coneCos=Math.cos(S.angle),P.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),P.decay=S.decay,r.spot[f]=P;var I=S.shadow;if(S.map&&(r.spotLightMap[_]=S.map,_++,I.updateMatrices(S),S.castShadow&&x++),r.spotLightMatrix[f]=I.matrix,S.castShadow){var D=i.get(S);D.shadowBias=I.bias,D.shadowNormalBias=I.normalBias,D.shadowRadius=I.radius,D.shadowMapSize=I.mapSize,r.spotShadow[f]=D,r.spotShadowMap[f]=E,y++}f++}else if(S.isRectAreaLight){var O=n.get(S);O.color.copy(A).multiplyScalar(T),O.halfWidth.set(.5*S.width,0,0),O.halfHeight.set(0,.5*S.height,0),r.rectArea[p]=O,p++}else if(S.isPointLight){var F=n.get(S);if(F.color.copy(S.color).multiplyScalar(S.intensity*b),F.distance=S.distance,F.decay=S.decay,S.castShadow){var N=S.shadow,G=i.get(S);G.shadowBias=N.bias,G.shadowNormalBias=N.normalBias,G.shadowRadius=N.radius,G.shadowMapSize=N.mapSize,G.shadowCameraNear=N.camera.near,G.shadowCameraFar=N.camera.far,r.pointShadow[d]=G,r.pointShadowMap[d]=E,r.pointShadowMatrix[d]=S.shadow.matrix,g++}r.point[d]=F,d++}else if(S.isHemisphereLight){var U=n.get(S);U.skyColor.copy(S.color).multiplyScalar(T*b),U.groundColor.copy(S.groundColor).multiplyScalar(T*b),r.hemi[v]=U,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Wl.LTC_FLOAT_1,r.rectAreaLTC2=Wl.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Wl.LTC_HALF_1,r.rectAreaLTC2=Wl.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=u;var z=r.hash;z.directionalLength===h&&z.pointLength===d&&z.spotLength===f&&z.rectAreaLength===p&&z.hemiLength===v&&z.numDirectionalShadows===m&&z.numPointShadows===g&&z.numSpotShadows===y&&z.numSpotMaps===_||(r.directional.length=h,r.spot.length=f,r.rectArea.length=p,r.point.length=d,r.hemi.length=v,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=y+_-x,r.spotLightMap.length=_,r.numSpotLightShadowsWithMaps=x,z.directionalLength=h,z.pointLength=d,z.spotLength=f,z.rectAreaLength=p,z.hemiLength=v,z.numDirectionalShadows=m,z.numPointShadows=g,z.numSpotShadows=y,z.numSpotMaps=_,r.version=vh++)}function c(e,t){for(var n=0,i=0,a=0,u=0,c=0,h=t.matrixWorldInverse,d=0,f=e.length;d<f;d++){var p=e[d];if(p.isDirectionalLight){var v=r.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=r.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=r.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),s.copy(p.matrixWorld),s.premultiply(h),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=r.point[i];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),i++}else if(p.isHemisphereLight){var _=r.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),c++}}}return{setup:u,setupView:c,state:r}}function yh(e,t){var n=new gh(e,t),i=[],r=[];function a(){i.length=0,r.length=0}function o(e){i.push(e)}function s(e){r.push(e)}function l(e){n.setup(i,e)}function u(e){n.setupView(i,e)}var c={lightsArray:i,shadowsArray:r,lights:n};return{init:a,state:c,setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function _h(e,t){var n=new WeakMap;function i(i){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(i);return void 0===o?(r=new yh(e,t),n.set(i,[r])):a>=o.length?(r=new yh(e,t),o.push(r)):r=o[a],r}function r(){n=new WeakMap}return{get:i,dispose:r}}var xh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=Xt,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Yr);t.MeshDepthMaterial=xh;var bh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.referencePosition=new Di,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Yr);t.MeshDistanceMaterial=bh;var Mh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",wh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Sh(e,t,n){var i=new oo,r=new ii,a=new ii,o=new Ci,s=new xh({depthPacking:qt}),l=new bh,u={},c=n.maxTextureSize,h={0:L,1:k,2:R},d=new Ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ii},radius:{value:4}},vertexShader:Mh,fragmentShader:wh}),f=d.clone();f.defines.HORIZONTAL_PASS=1;var p=new ga;p.setAttribute("position",new $r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Da(p,d),m=this;function g(n,i){var a=t.update(v);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ei(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,d,v,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,f,v,null)}function y(t,n,i,r,a,o){var c=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==d?d:!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var f=c.uuid,p=n.uuid,v=u[f];void 0===v&&(v={},u[f]=v);var m=v[p];void 0===m&&(m=c.clone(),v[p]=m),c=m}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=o===E?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.map=n.map,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=r,c.farDistance=a),c}function _(n,r,a,o,s){if(!1!==n.visible){var l=n.layers.test(r.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===E)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var h=u.groups,d=0,f=h.length;d<f;d++){var p=h[d],v=c[p.materialIndex];if(v&&v.visible){var m=y(n,v,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,p)}}else if(c.visible){var g=y(n,c,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,g,n,null)}}for(var x=n.children,b=0,M=x.length;b<M;b++)_(x[b],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=T,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(B),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var v=t[f],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){r.copy(y.mapSize);var x=y.getFrameExtents();if(r.multiply(x),a.copy(y.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(a.x=Math.floor(c/x.x),r.x=a.x*x.x,y.mapSize.x=a.x),r.y>c&&(a.y=Math.floor(c/x.y),r.y=a.y*x.y,y.mapSize.y=a.y)),null===y.map){var b=this.type!==E?{minFilter:Te,magFilter:Te}:{};y.map=new Ei(r.x,r.y,b),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),w=0;w<M;w++){var S=y.getViewport(w);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),d.viewport(o),y.updateMatrices(v,w),i=y.getFrustum(),_(n,s,y.camera,v,this.type)}!0!==y.isPointLightShadow&&this.type===E&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(l,u,h)}}}function Ah(e,t,n){var i,r,a=n.isWebGL2;function o(){var t=!1,n=new Ci,i=null,r=new Ci(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function s(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?Ce(2929):Ee(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case ee:e.depthFunc(512);break;case te:e.depthFunc(519);break;case ne:e.depthFunc(513);break;case ie:e.depthFunc(515);break;case re:e.depthFunc(514);break;case ae:e.depthFunc(518);break;case oe:e.depthFunc(516);break;case se:e.depthFunc(517);break;default:e.depthFunc(515)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function l(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?Ce(2960):Ee(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}}var u=new o,c=new s,h=new l,d=new WeakMap,f=new WeakMap,v={},m={},g=new WeakMap,y=[],_=null,x=!1,S=null,A=null,T=null,C=null,E=null,k=null,le=null,ue=!1,ce=null,he=null,de=null,fe=null,pe=null,ve=e.getParameter(35661),me=!1,ge=0,ye=e.getParameter(7938);-1!==ye.indexOf("WebGL")?(ge=parseFloat(/^WebGL (\d)/.exec(ye)[1]),me=ge>=1):-1!==ye.indexOf("OpenGL ES")&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(ye)[1]),me=ge>=2);var _e=null,xe={},be=e.getParameter(3088),Me=e.getParameter(2978),we=(new Ci).fromArray(be),Se=(new Ci).fromArray(Me);function Ae(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var Te={};function Ce(t){!0!==v[t]&&(e.enable(t),v[t]=!0)}function Ee(t){!1!==v[t]&&(e.disable(t),v[t]=!1)}function ke(t,n){return m[t]!==n&&(e.bindFramebuffer(t,n),m[t]=n,a&&(36009===t&&(m[36160]=n),36160===t&&(m[36009]=n)),!0)}function Le(i,r){var a=y,o=!1;if(i)if(a=g.get(r),void 0===a&&(a=[],g.set(r,a)),i.isWebGLMultipleRenderTargets){var s=i.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))}function Re(t){return _!==t&&(e.useProgram(t),_=t,!0)}Te[3553]=Ae(3553,3553,1),Te[34067]=Ae(34067,34069,6),u.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Ce(2929),c.setFunc(ie),Fe(!1),Ne(M),Ce(2884),De(B);var Be=(i={},(0,p.default)(i,N,32774),(0,p.default)(i,G,32778),(0,p.default)(i,U,32779),i);if(a)Be[z]=32775,Be[H]=32776;else{var Pe=t.get("EXT_blend_minmax");null!==Pe&&(Be[z]=Pe.MIN_EXT,Be[H]=Pe.MAX_EXT)}var Ie=(r={},(0,p.default)(r,V,0),(0,p.default)(r,W,1),(0,p.default)(r,j,768),(0,p.default)(r,X,770),(0,p.default)(r,$,776),(0,p.default)(r,K,774),(0,p.default)(r,Y,772),(0,p.default)(r,J,769),(0,p.default)(r,q,771),(0,p.default)(r,Q,775),(0,p.default)(r,Z,773),r);function De(t,n,i,r,a,o,s,l){if(t!==B){if(!1===x&&(Ce(3042),x=!0),t===F)a=a||n,o=o||i,s=s||r,n===A&&a===E||(e.blendEquationSeparate(Be[n],Be[a]),A=n,E=a),i===T&&r===C&&o===k&&s===le||(e.blendFuncSeparate(Ie[i],Ie[r],Ie[o],Ie[s]),T=i,C=r,k=o,le=s),S=t,ue=!1;else if(t!==S||l!==ue){if(A===N&&E===N||(e.blendEquation(32774),A=N,E=N),l)switch(t){case P:e.blendFuncSeparate(1,771,1,771);break;case I:e.blendFunc(1,1);break;case D:e.blendFuncSeparate(0,769,0,1);break;case O:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case P:e.blendFuncSeparate(770,771,1,771);break;case I:e.blendFunc(770,1);break;case D:e.blendFuncSeparate(0,769,0,1);break;case O:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}T=null,C=null,k=null,le=null,S=t,ue=l}}else!0===x&&(Ee(3042),x=!1)}function Oe(e,t){e.side===R?Ee(2884):Ce(2884);var n=e.side===L;t&&(n=!n),Fe(n),e.blending===P&&!1===e.transparent?De(B):De(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),c.setFunc(e.depthFunc),c.setTest(e.depthTest),c.setMask(e.depthWrite),u.setMask(e.colorWrite);var i=e.stencilWrite;h.setTest(i),i&&(h.setMask(e.stencilWriteMask),h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ue(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Ce(32926):Ee(32926)}function Fe(t){ce!==t&&(t?e.frontFace(2304):e.frontFace(2305),ce=t)}function Ne(t){t!==b?(Ce(2884),t!==he&&(t===M?e.cullFace(1029):t===w?e.cullFace(1028):e.cullFace(1032))):Ee(2884),he=t}function Ge(t){t!==de&&(me&&e.lineWidth(t),de=t)}function Ue(t,n,i){t?(Ce(32823),fe===n&&pe===i||(e.polygonOffset(n,i),fe=n,pe=i)):Ee(32823)}function ze(e){e?Ce(3089):Ee(3089)}function He(t){void 0===t&&(t=33984+ve-1),_e!==t&&(e.activeTexture(t),_e=t)}function Ve(t,n,i){void 0===i&&(i=null===_e?33984+ve-1:_e);var r=xe[i];void 0===r&&(r={type:void 0,texture:void 0},xe[i]=r),r.type===t&&r.texture===n||(_e!==i&&(e.activeTexture(i),_e=i),e.bindTexture(t,n||Te[t]),r.type=t,r.texture=n)}function We(){var t=xe[_e];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function je(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Je(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Xe(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function qe(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ye(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ze(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ke(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Qe(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function $e(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function et(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function tt(t){!1===we.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),we.copy(t))}function nt(t){!1===Se.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Se.copy(t))}function it(t,n){var i=f.get(n);void 0===i&&(i=new WeakMap,f.set(n,i));var r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))}function rt(t,n){var i=f.get(n),r=i.get(t);d.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),d.set(t,r))}function at(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),v={},_e=null,xe={},m={},g=new WeakMap,y=[],_=null,x=!1,S=null,A=null,T=null,C=null,E=null,k=null,le=null,ue=!1,ce=null,he=null,de=null,fe=null,pe=null,we.set(0,0,e.canvas.width,e.canvas.height),Se.set(0,0,e.canvas.width,e.canvas.height),u.reset(),c.reset(),h.reset()}return{buffers:{color:u,depth:c,stencil:h},enable:Ce,disable:Ee,bindFramebuffer:ke,drawBuffers:Le,useProgram:Re,setBlending:De,setMaterial:Oe,setFlipSided:Fe,setCullFace:Ne,setLineWidth:Ge,setPolygonOffset:Ue,setScissorTest:ze,activeTexture:He,bindTexture:Ve,unbindTexture:We,compressedTexImage2D:je,compressedTexImage3D:Je,texImage2D:$e,texImage3D:et,updateUBOMapping:it,uniformBlockBinding:rt,texStorage2D:Ke,texStorage3D:Qe,texSubImage2D:Xe,texSubImage3D:qe,compressedTexSubImage2D:Ye,compressedTexSubImage3D:Ze,scissor:tt,viewport:nt,reset:at}}function Th(e,t,n,i,r,a,o){var s,l,u,c=r.isWebGL2,h=r.maxTextures,d=r.maxCubemapSize,f=r.maxTextureSize,v=r.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap,_=new WeakMap,x=!1;try{x="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(se){}function b(e,t){return x?new OffscreenCanvas(e,t):ui("canvas")}function M(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Qn:Math.floor,o=a(r*e.width),s=a(r*e.height);void 0===u&&(u=b(o,s));var l=n?b(o,s):u;l.width=o,l.height=s;var c=l.getContext("2d");return c.drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return Zn(e.width)&&Zn(e.height)}function S(e){return!c&&(e.wrapS!==Se||e.wrapT!==Se||e.minFilter!==Te&&e.minFilter!==Re)}function A(e,t){return e.generateMipmaps&&t&&e.minFilter!==Te&&e.minFilter!==Re}function T(t){e.generateMipmap(t)}function C(n,i,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),33319===i&&(5126===r&&(s=33328),5131===r&&(s=33327),5121===r&&(s=33323)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=a===Jt&&!1===o?35907:32856),32819===r&&(s=32854),32820===r&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function E(e,t,n){return!0===A(e,n)||e.isFramebufferTexture&&e.minFilter!==Te&&e.minFilter!==Re?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(e){return e===Te||e===Ce||e===ke?9728:9729}function L(e){var t=e.target;t.removeEventListener("dispose",L),B(t),t.isVideoTexture&&y.delete(t)}function R(e){var t=e.target;t.removeEventListener("dispose",R),I(t)}function B(e){var t=i.get(e);if(void 0!==t.__webglInit){var n=e.source,r=_.get(n);if(r){var a=r[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&P(e),0===Object.keys(r).length&&_.delete(n)}i.remove(e)}}function P(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var r=t.source,a=_.get(r);delete a[n.__cacheKey],o.memory.textures--}function I(t){var n=t.texture,r=i.get(t),a=i.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(r.__webglFramebuffer[s]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(var l=0;l<r.__webglColorRenderbuffer.length;l++)r.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[l]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var h=i.get(n[u]);h.__webglTexture&&(e.deleteTexture(h.__webglTexture),o.memory.textures--),i.remove(n[u])}i.remove(n),i.remove(t)}var D=0;function O(){D=0}function F(){var e=D;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),D+=1,e}function N(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}function G(e,t){var r=i.get(e);if(e.isVideoTexture&&ae(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void X(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,r.__webglTexture,33984+t)}function U(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?X(r,e,t):n.bindTexture(35866,r.__webglTexture,33984+t)}function z(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?X(r,e,t):n.bindTexture(32879,r.__webglTexture,33984+t)}function H(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?q(r,e,t):n.bindTexture(34067,r.__webglTexture,33984+t)}var V=(s={},(0,p.default)(s,we,10497),(0,p.default)(s,Se,33071),(0,p.default)(s,Ae,33648),s),W=(l={},(0,p.default)(l,Te,9728),(0,p.default)(l,Ce,9984),(0,p.default)(l,ke,9986),(0,p.default)(l,Re,9729),(0,p.default)(l,Be,9985),(0,p.default)(l,Ie,9987),l);function j(n,a,o){if(o?(e.texParameteri(n,10242,V[a.wrapS]),e.texParameteri(n,10243,V[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,V[a.wrapR]),e.texParameteri(n,10240,W[a.magFilter]),e.texParameteri(n,10241,W[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Se&&a.wrapT===Se||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,k(a.magFilter)),e.texParameteri(n,10241,k(a.minFilter)),a.minFilter!==Te&&a.minFilter!==Re&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===He&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===Ve&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function J(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",L));var r=n.source,a=_.get(r);void 0===a&&(a={},_.set(r,a));var s=N(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&P(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return i}function X(t,r,o){var s=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(s=35866),r.isData3DTexture&&(s=32879);var l=J(t,r),u=r.source;n.bindTexture(s,t.__webglTexture,33984+o);var h=i.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var d=S(r)&&!1===w(r.image),p=M(r.image,d,!1,f);p=oe(r,p);var v,m=w(p)||c,g=a.convert(r.format,r.encoding),y=a.convert(r.type),_=C(r.internalFormat,g,y,r.encoding,r.isVideoTexture);j(s,r,m);var x=r.mipmaps,b=c&&!0!==r.isVideoTexture,k=void 0===h.__version||!0===l,L=E(r,p,m);if(r.isDepthTexture)_=6402,c?_=r.type===He?36012:r.type===ze?33190:r.type===Je?35056:33189:r.type===He&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Qe&&6402===_&&r.type!==Ge&&r.type!==ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=ze,y=a.convert(r.type)),r.format===$e&&6402===_&&(_=34041,r.type!==Je&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Je,y=a.convert(r.type))),k&&(b?n.texStorage2D(3553,1,_,p.width,p.height):n.texImage2D(3553,0,_,p.width,p.height,0,g,y,null));else if(r.isDataTexture)if(x.length>0&&m){b&&k&&n.texStorage2D(3553,L,_,x[0].width,x[0].height);for(var R=0,B=x.length;R<B;R++)v=x[R],b?n.texSubImage2D(3553,R,0,0,v.width,v.height,g,y,v.data):n.texImage2D(3553,R,_,v.width,v.height,0,g,y,v.data);r.generateMipmaps=!1}else b?(k&&n.texStorage2D(3553,L,_,p.width,p.height),n.texSubImage2D(3553,0,0,0,p.width,p.height,g,y,p.data)):n.texImage2D(3553,0,_,p.width,p.height,0,g,y,p.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){b&&k&&n.texStorage3D(35866,L,_,x[0].width,x[0].height,p.depth);for(var P=0,I=x.length;P<I;P++)v=x[P],r.format!==Ye?null!==g?b?n.compressedTexSubImage3D(35866,P,0,0,0,v.width,v.height,p.depth,g,v.data,0,0):n.compressedTexImage3D(35866,P,_,v.width,v.height,p.depth,0,v.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage3D(35866,P,0,0,0,v.width,v.height,p.depth,g,y,v.data):n.texImage3D(35866,P,_,v.width,v.height,p.depth,0,g,y,v.data)}else{b&&k&&n.texStorage2D(3553,L,_,x[0].width,x[0].height);for(var D=0,O=x.length;D<O;D++)v=x[D],r.format!==Ye?null!==g?b?n.compressedTexSubImage2D(3553,D,0,0,v.width,v.height,g,v.data):n.compressedTexImage2D(3553,D,_,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(3553,D,0,0,v.width,v.height,g,y,v.data):n.texImage2D(3553,D,_,v.width,v.height,0,g,y,v.data)}else if(r.isDataArrayTexture)b?(k&&n.texStorage3D(35866,L,_,p.width,p.height,p.depth),n.texSubImage3D(35866,0,0,0,0,p.width,p.height,p.depth,g,y,p.data)):n.texImage3D(35866,0,_,p.width,p.height,p.depth,0,g,y,p.data);else if(r.isData3DTexture)b?(k&&n.texStorage3D(32879,L,_,p.width,p.height,p.depth),n.texSubImage3D(32879,0,0,0,0,p.width,p.height,p.depth,g,y,p.data)):n.texImage3D(32879,0,_,p.width,p.height,p.depth,0,g,y,p.data);else if(r.isFramebufferTexture){if(k)if(b)n.texStorage2D(3553,L,_,p.width,p.height);else for(var F=p.width,N=p.height,G=0;G<L;G++)n.texImage2D(3553,G,_,F,N,0,g,y,null),F>>=1,N>>=1}else if(x.length>0&&m){b&&k&&n.texStorage2D(3553,L,_,x[0].width,x[0].height);for(var U=0,z=x.length;U<z;U++)v=x[U],b?n.texSubImage2D(3553,U,0,0,g,y,v):n.texImage2D(3553,U,_,g,y,v);r.generateMipmaps=!1}else b?(k&&n.texStorage2D(3553,L,_,p.width,p.height),n.texSubImage2D(3553,0,0,0,g,y,p)):n.texImage2D(3553,0,_,g,y,p);A(r,m)&&T(s),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function q(t,r,o){if(6===r.image.length){var s=J(t,r),l=r.source;n.bindTexture(34067,t.__webglTexture,33984+o);var u=i.get(l);if(l.version!==u.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var h=r.isCompressedTexture||r.image[0].isCompressedTexture,f=r.image[0]&&r.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=h||f?f?r.image[v].image:r.image[v]:M(r.image[v],!1,!0,d),p[v]=oe(r,p[v]);var m,g=p[0],y=w(g)||c,_=a.convert(r.format,r.encoding),x=a.convert(r.type),b=C(r.internalFormat,_,x,r.encoding),S=c&&!0!==r.isVideoTexture,k=void 0===u.__version||!0===s,L=E(r,g,y);if(j(34067,r,y),h){S&&k&&n.texStorage2D(34067,L,b,g.width,g.height);for(var R=0;R<6;R++){m=p[R].mipmaps;for(var B=0;B<m.length;B++){var P=m[B];r.format!==Ye?null!==_?S?n.compressedTexSubImage2D(34069+R,B,0,0,P.width,P.height,_,P.data):n.compressedTexImage2D(34069+R,B,b,P.width,P.height,0,P.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):S?n.texSubImage2D(34069+R,B,0,0,P.width,P.height,_,x,P.data):n.texImage2D(34069+R,B,b,P.width,P.height,0,_,x,P.data)}}}else{m=r.mipmaps,S&&k&&(m.length>0&&L++,n.texStorage2D(34067,L,b,p[0].width,p[0].height));for(var I=0;I<6;I++)if(f){S?n.texSubImage2D(34069+I,0,0,0,p[I].width,p[I].height,_,x,p[I].data):n.texImage2D(34069+I,0,b,p[I].width,p[I].height,0,_,x,p[I].data);for(var D=0;D<m.length;D++){var O=m[D],F=O.image[I].image;S?n.texSubImage2D(34069+I,D+1,0,0,F.width,F.height,_,x,F.data):n.texImage2D(34069+I,D+1,b,F.width,F.height,0,_,x,F.data)}}else{S?n.texSubImage2D(34069+I,0,0,0,_,x,p[I]):n.texImage2D(34069+I,0,b,_,x,p[I]);for(var N=0;N<m.length;N++){var G=m[N];S?n.texSubImage2D(34069+I,N+1,0,0,_,x,G.image[I]):n.texImage2D(34069+I,N+1,b,_,x,G.image[I])}}}A(r,y)&&T(34067),u.__version=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}}function Y(t,r,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),h=C(o.internalFormat,u,c,o.encoding),d=i.get(r);d.__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,h,r.width,r.height,0,u,c,null)),n.bindFramebuffer(36160,t),re(r)?m.framebufferTexture2DMultisampleEXT(36160,s,l,i.get(o).__webglTexture,0,ie(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function Z(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i||re(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===He?r=36012:o.type===ze&&(r=33190));var s=ie(n);re(n)?m.renderbufferStorageMultisampleEXT(36161,s,r,n.width,n.height):e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=ie(n);i&&!1===re(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):re(n)?m.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var h=u[c],d=a.convert(h.format,h.encoding),f=a.convert(h.type),p=C(h.internalFormat,d,f,h.encoding),v=ie(n);i&&!1===re(n)?e.renderbufferStorageMultisample(36161,v,p,n.width,n.height):re(n)?m.renderbufferStorageMultisampleEXT(36161,v,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function K(t,r){var a=r&&r.isWebGLCubeRenderTarget;if(a)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),G(r.depthTexture,0);var o=i.get(r.depthTexture).__webglTexture,s=ie(r);if(r.depthTexture.format===Qe)re(r)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(r.depthTexture.format!==$e)throw new Error("Unknown depthTexture format");re(r)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):e.framebufferTexture2D(36160,33306,3553,o,0)}}function Q(t){var r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");K(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),Z(r.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),Z(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function $(e,t,n){var r=i.get(e);void 0!==t&&Y(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&Q(e)}function ee(t){var s=t.texture,l=i.get(t),u=i.get(s);t.addEventListener("dispose",R),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=w(t)||c;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=i.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===re(t)){var _=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var x=0;x<_.length;x++){var b=_[x];l.__webglColorRenderbuffer[x]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[x]);var M=a.convert(b.format,b.encoding),S=a.convert(b.type),E=C(b.internalFormat,M,S,b.encoding,!0===t.isXRRenderTarget),k=ie(t);e.renderbufferStorageMultisample(36161,k,E,t.width,t.height),e.framebufferRenderbuffer(36160,36064+x,36161,l.__webglColorRenderbuffer[x])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),Z(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),j(34067,s,f);for(var L=0;L<6;L++)Y(l.__webglFramebuffer[L],t,s,36064,34069+L);A(s,f)&&T(34067),n.unbindTexture()}else if(d){for(var B=t.texture,P=0,I=B.length;P<I;P++){var D=B[P],O=i.get(D);n.bindTexture(3553,O.__webglTexture),j(3553,D,f),Y(l.__webglFramebuffer,t,D,36064+P,3553),A(D,f)&&T(3553)}n.unbindTexture()}else{var F=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?F=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(F,u.__webglTexture),j(F,s,f),Y(l.__webglFramebuffer,t,s,36064,F),A(s,f)&&T(F),n.unbindTexture()}t.depthBuffer&&Q(t)}function te(e){for(var t=w(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=r.length;a<o;a++){var s=r[a];if(A(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=i.get(s).__webglTexture;n.bindTexture(l,u),T(l),n.unbindTexture()}}}function ne(t){if(c&&t.samples>0&&!1===re(t)){var r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],u=t.stencilBuffer?33306:36096,h=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var f=0;f<r.length;f++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+f,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+f,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(var p=0;p<r.length;p++){l.push(36064+p),t.depthBuffer&&l.push(u);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),d){var m=i.get(r[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,m,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),g&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(var y=0;y<r.length;y++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,h.__webglColorRenderbuffer[y]);var _=i.get(r[y]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,_,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}}function ie(e){return Math.min(v,e.samples)}function re(e){var n=i.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ae(e){var t=o.render.frame;y.get(e)!==t&&(y.set(e,t),e.update())}function oe(e,n){var i=e.encoding,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===En||i!==jt&&(i===Jt?!1===c?!0===t.has("EXT_sRGB")&&r===Ye?(e.format=En,e.minFilter=Re,e.generateMipmaps=!1):n=Mi.sRGBToLinear(n):r===Ye&&a===Oe||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=F,this.resetTextureUnits=O,this.setTexture2D=G,this.setTexture2DArray=U,this.setTexture3D=z,this.setTextureCube=H,this.rebindTextures=$,this.setupRenderTarget=ee,this.updateRenderTargetMipmap=te,this.updateMultisampleRenderTarget=ne,this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=Y,this.useMultisampledRTT=re}function Ch(e,t,n){var i=n.isWebGL2;function r(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Oe)return 5121;if(n===We)return 32819;if(n===je)return 32820;if(n===Fe)return 5120;if(n===Ne)return 5122;if(n===Ge)return 5123;if(n===Ue)return 5124;if(n===ze)return 5125;if(n===He)return 5126;if(n===Ve)return i?5131:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===Xe)return 6406;if(n===Ye)return 6408;if(n===Ze)return 6409;if(n===Ke)return 6410;if(n===Qe)return 6402;if(n===$e)return 34041;if(n===qe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===En)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===et)return 6403;if(n===tt)return 36244;if(n===nt)return 33319;if(n===it)return 33320;if(n===rt)return 36249;if(n===at||n===ot||n===st||n===lt)if(a===Jt){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===at)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ot)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===st)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===lt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===at)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ot)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===st)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===lt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===ut||n===ct||n===ht||n===dt){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===ut)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ct)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ht)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===dt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ft)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===pt||n===vt){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===pt)return a===Jt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===vt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===mt||n===gt||n===yt||n===_t||n===xt||n===bt||n===Mt||n===wt||n===St||n===At||n===Tt||n===Ct||n===Et||n===kt){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===mt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===gt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===yt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_t)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===xt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===bt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Mt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===wt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===St)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===At)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Tt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ct)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Et)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===kt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Lt){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Lt)return a===Jt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Je?i?34042:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}return{convert:r}}var Eh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.default)(this,n),e=t.call(this),e.isArrayCamera=!0,e.cameras=i,e}return n}(qa);t.ArrayCamera=Eh;var kh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isGroup=!0,e.type="Group",e}return n}(Or);t.Group=kh;var Lh={type:"move"},Rh=function(){function e(){(0,m.default)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,g.default)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new kh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new kh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Di,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Di),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new kh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Di,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Di),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,i=(0,s.default)(e.hand.values());try{for(i.s();!(n=i.n()).done;){var r=n.value;this._getHandJoint(t,r)}}catch(a){i.e(a)}finally{i.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,r=null,a=null,o=this._targetRay,l=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var c,h=(0,s.default)(e.hand.values());try{for(h.s();!(c=h.n()).done;){var d=c.value,f=t.getJointPose(d,n),p=this._getHandJoint(u,d);null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(x){h.e(x)}finally{h.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=v.position.distanceTo(m.position),y=.02,_=.005;u.inputState.pinching&&g>y+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=y-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));null!==o&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Lh)))}return null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new kh;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),Bh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c,h){var d;if((0,m.default)(this,n),h=void 0!==h?h:Qe,h!==Qe&&h!==$e)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&h===Qe&&(r=ze),void 0===r&&h===$e&&(r=Je),d=t.call(this,null,a,o,s,l,u,h,r,c),d.isDepthTexture=!0,d.image={width:e,height:i},d.magFilter=void 0!==l?l:Te,d.minFilter=void 0!==u?u:Te,d.flipY=!1,d.generateMipmaps=!1,d}return n}(Ti);t.DepthTexture=Bh;var Ph=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;(0,m.default)(this,n),r=t.call(this);var a=(0,h.default)(r),l=null,u=1,c=null,d="local-floor",f=null,p=null,v=null,g=null,y=null,_=null,x=i.getContextAttributes(),b=null,M=null,w=[],S=[],A=new Set,T=new Map,C=new qa;C.layers.enable(1),C.viewport=new Ci;var E=new qa;E.layers.enable(2),E.viewport=new Ci;var k=[C,E],L=new Eh;L.layers.enable(1),L.layers.enable(2);var R=null,B=null;function P(e){var t=S.indexOf(e.inputSource);if(-1!==t){var n=w[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function I(){l.removeEventListener("select",P),l.removeEventListener("selectstart",P),l.removeEventListener("selectend",P),l.removeEventListener("squeeze",P),l.removeEventListener("squeezestart",P),l.removeEventListener("squeezeend",P),l.removeEventListener("end",I),l.removeEventListener("inputsourceschange",D);for(var t=0;t<w.length;t++){var n=S[t];null!==n&&(S[t]=null,w[t].disconnect(n))}R=null,B=null,e.setRenderTarget(b),y=null,g=null,v=null,l=null,M=null,H.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function D(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=S.indexOf(n);i>=0&&(S[i]=null,w[i].disconnect(n))}for(var r=0;r<e.added.length;r++){var a=e.added[r],o=S.indexOf(a);if(-1===o){for(var s=0;s<w.length;s++){if(s>=S.length){S.push(a),o=s;break}if(null===S[s]){S[s]=a,o=s;break}}if(-1===o)break}var l=w[o];l&&l.connect(a)}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=w[e];return void 0===t&&(t=new Rh,w[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=w[e];return void 0===t&&(t=new Rh,w[e]=t),t.getGripSpace()},r.getHand=function(e){var t=w[e];return void 0===t&&(t=new Rh,w[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){u=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){d=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return f||c},r.setReferenceSpace=function(e){f=e},r.getBaseLayer=function(){return null!==g?g:y},r.getBinding=function(){return v},r.getFrame=function(){return _},r.getSession=function(){return l},r.setSession=function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(n){var r,o,s,h,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l=n,null===l){t.next=25;break}if(b=e.getRenderTarget(),l.addEventListener("select",P),l.addEventListener("selectstart",P),l.addEventListener("selectend",P),l.addEventListener("squeeze",P),l.addEventListener("squeezestart",P),l.addEventListener("squeezeend",P),l.addEventListener("end",I),l.addEventListener("inputsourceschange",D),!0===x.xrCompatible){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:return void 0===l.renderState.layers||!1===e.capabilities.isWebGL2?(r={antialias:void 0!==l.renderState.layers||x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:u},y=new XRWebGLLayer(l,i,r),l.updateRenderState({baseLayer:y}),M=new Ei(y.framebufferWidth,y.framebufferHeight,{format:Ye,type:Oe,encoding:e.outputEncoding,stencilBuffer:x.stencil})):(o=null,s=null,h=null,x.depth&&(h=x.stencil?35056:33190,o=x.stencil?$e:Qe,s=x.stencil?Je:ze),p={colorFormat:32856,depthFormat:h,scaleFactor:u},v=new XRWebGLBinding(l,i),g=v.createProjectionLayer(p),l.updateRenderState({layers:[g]}),M=new Ei(g.textureWidth,g.textureHeight,{format:Ye,type:Oe,depthTexture:new Bh(g.textureWidth,g.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:x.stencil,encoding:e.outputEncoding,samples:x.antialias?4:0}),m=e.properties.get(M),m.__ignoreDepthValues=g.ignoreDepthValues),M.isXRRenderTarget=!0,this.setFoveation(1),f=null,t.next=20,l.requestReferenceSpace(d);case 20:c=t.sent,H.setContext(l),H.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var O=new Di,F=new Di;function N(e,t,n){O.setFromMatrixPosition(t.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);var i=O.distanceTo(F),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=i/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=d-v,_=f+(i-v),x=l*s/g*m,b=u*s/g*m;e.projectionMatrix.makePerspective(y,_,x,b,m,g)}function G(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==l){L.near=E.near=C.near=e.near,L.far=E.far=C.far=e.far,R===L.near&&B===L.far||(l.updateRenderState({depthNear:L.near,depthFar:L.far}),R=L.near,B=L.far);var t=e.parent,n=L.cameras;G(L,t);for(var i=0;i<n.length;i++)G(n[i],t);L.matrixWorld.decompose(L.position,L.quaternion,L.scale),e.matrix.copy(L.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var r=e.children,a=0,o=r.length;a<o;a++)r[a].updateMatrixWorld(!0);2===n.length?N(L,C,E):L.projectionMatrix.copy(C.projectionMatrix)}},r.getCamera=function(){return L},r.getFoveation=function(){return null!==g?g.fixedFoveation:null!==y?y.fixedFoveation:void 0},r.setFoveation=function(e){null!==g&&(g.fixedFoveation=e),null!==y&&void 0!==y.fixedFoveation&&(y.fixedFoveation=e)},r.getPlanes=function(){return A};var U=null;function z(t,n){if(p=n.getViewerPose(f||c),_=n,null!==p){var i=p.views;null!==y&&(e.setRenderTargetFramebuffer(M,y.framebuffer),e.setRenderTarget(M));var r=!1;i.length!==L.cameras.length&&(L.cameras.length=0,r=!0);for(var o=0;o<i.length;o++){var l=i[o],u=null;if(null!==y)u=y.getViewport(l);else{var h=v.getViewSubImage(g,l);u=h.viewport,0===o&&(e.setRenderTargetTextures(M,h.colorTexture,g.ignoreDepthValues?void 0:h.depthStencilTexture),e.setRenderTarget(M))}var d=k[o];void 0===d&&(d=new qa,d.layers.enable(o),d.viewport=new Ci,k[o]=d),d.matrix.fromArray(l.transform.matrix),d.projectionMatrix.fromArray(l.projectionMatrix),d.viewport.set(u.x,u.y,u.width,u.height),0===o&&L.matrix.copy(d.matrix),!0===r&&L.cameras.push(d)}}for(var m=0;m<w.length;m++){var x=S[m],b=w[m];null!==x&&void 0!==b&&b.update(x,n,f||c)}if(U&&U(t,n),n.detectedPlanes){a.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var C,E=null,R=(0,s.default)(A);try{for(R.s();!(C=R.n()).done;){var B=C.value;n.detectedPlanes.has(B)||(null===E&&(E=[]),E.push(B))}}catch(z){R.e(z)}finally{R.f()}if(null!==E){var P,I=(0,s.default)(E);try{for(I.s();!(P=I.n()).done;){var D=P.value;A.delete(D),T.delete(D),a.dispatchEvent({type:"planeremoved",data:D})}}catch(z){I.e(z)}finally{I.f()}}var O,F=(0,s.default)(n.detectedPlanes);try{for(F.s();!(O=F.n()).done;){var N=O.value;if(A.has(N)){var G=T.get(N);N.lastChangedTime>G&&(T.set(N,N.lastChangedTime),a.dispatchEvent({type:"planechanged",data:N}))}else A.add(N),T.set(N,n.lastChangedTime),a.dispatchEvent({type:"planeadded",data:N})}}catch(z){F.e(z)}finally{F.f()}}_=null}var H=new so;return H.setAnimationLoop(z),r.setAnimationLoop=function(e){U=e},r.dispose=function(){},r}return n}(kn);function Ih(e,t){function n(t,n){n.color.getRGB(t.fogColor.value,Ha(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)}function i(e,t,n,i,v){t.isMeshBasicMaterial||t.isMeshLambertMaterial?r(e,t):t.isMeshToonMaterial?(r(e,t),c(e,t)):t.isMeshPhongMaterial?(r(e,t),u(e,t)):t.isMeshStandardMaterial?(r(e,t),h(e,t),t.isMeshPhysicalMaterial&&d(e,t,v)):t.isMeshMatcapMaterial?(r(e,t),f(e,t)):t.isMeshDepthMaterial?r(e,t):t.isMeshDistanceMaterial?(r(e,t),p(e,t)):t.isMeshNormalMaterial?r(e,t):t.isLineBasicMaterial?(a(e,t),t.isLineDashedMaterial&&o(e,t)):t.isPointsMaterial?s(e,t,n,i):t.isSpriteMaterial?l(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function r(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===L&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===L&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);var r,a,o=t.get(i).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*s}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap?r=i.clearcoatRoughnessMap:i.iridescenceMap?r=i.iridescenceMap:i.iridescenceThicknessMap?r=i.iridescenceThicknessMap:i.specularIntensityMap?r=i.specularIntensityMap:i.specularColorMap?r=i.specularColorMap:i.transmissionMap?r=i.transmissionMap:i.thicknessMap?r=i.thicknessMap:i.sheenColorMap?r=i.sheenColorMap:i.sheenRoughnessMap&&(r=i.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),n.uvTransform.value.copy(r.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}function a(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function o(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function s(e,t,n,i){var r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}function l(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function u(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function c(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function h(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);var i=t.get(n).envMap;i&&(e.envMapIntensity.value=n.envMapIntensity)}function d(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===L&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}function f(e,t){t.matcap&&(e.matcap.value=t.matcap)}function p(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Dh(e,t,n,i){var r={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t){var n=t.program;i.uniformBlockBinding(e,n)}function u(e,n){var o=r[e.id];void 0===o&&(p(e),o=c(e),r[e.id]=o,e.addEventListener("dispose",m));var s=n.program;i.updateUBOMapping(e,s);var l=t.render.frame;a[e.id]!==l&&(d(e),a[e.id]=l)}function c(t){var n=h();t.__bindingPointIndex=n;var i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}function h(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(t){var n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=i.length;o<s;o++){var l=i[o];if(!0===f(l,o,a)){var u=l.value,c=l.__offset;"number"===typeof u?(l.__data[0]=u,e.bufferSubData(35345,c,l.__data)):(l.value.isMatrix3?(l.__data[0]=l.value.elements[0],l.__data[1]=l.value.elements[1],l.__data[2]=l.value.elements[2],l.__data[3]=l.value.elements[0],l.__data[4]=l.value.elements[3],l.__data[5]=l.value.elements[4],l.__data[6]=l.value.elements[5],l.__data[7]=l.value.elements[0],l.__data[8]=l.value.elements[6],l.__data[9]=l.value.elements[7],l.__data[10]=l.value.elements[8],l.__data[11]=l.value.elements[0]):u.toArray(l.__data),e.bufferSubData(35345,c,l.__data))}}e.bindBuffer(35345,null)}function f(e,t,n){var i=e.value;if(void 0===n[t])return n[t]="number"===typeof i?i:i.clone(),!0;if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{var r=n[t];if(!1===r.equals(i))return r.copy(i),!0}return!1}function p(e){for(var t=e.uniforms,n=0,i=16,r=0,a=0,o=t.length;a<o;a++){var s=t[a],l=v(s);if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0){r=n%i;var u=i-r;0!==r&&u-l.boundary<0&&(n+=i-r,s.__offset=n)}n+=l.storage}return r=n%i,r>0&&(n+=i-r),e.__size=n,e.__cache={},this}function v(e){var t=e.value,n={boundary:0,storage:0};return"number"===typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function m(t){var n=t.target;n.removeEventListener("dispose",m);var i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}function g(){for(var t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}return{bind:l,update:u,dispose:g}}function Oh(){var e=ui("canvas");return e.style.display="block",e}function Fh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:Oh(),i=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var h=null,d=null,f=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=jt,this.physicallyCorrectLights=!1,this.toneMapping=he,this.toneMappingExposure=1;var v=this,m=!1,g=0,_=0,x=null,b=-1,M=null,w=new Ci,S=new Ci,A=null,T=n.width,C=n.height,E=1,B=null,P=null,I=new Ci(0,0,T,C),D=new Ci(0,0,T,C),O=!1,F=new oo,N=!1,G=!1,U=null,z=new hr,H=new ii,V=new Di,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===x?E:1}var J,X,q,Y,Z,K,Q,$,ee,te,ne,ie,re,ae,oe,se,le,ue,ce,de,fe,pe,ve,me,ge=i;function ye(e,t){for(var i=0;i<e.length;i++){var r=e[i],a=n.getContext(r,t);if(null!==a)return a}return null}try{var _e={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(y)),n.addEventListener("webglcontextlost",we,!1),n.addEventListener("webglcontextrestored",Se,!1),n.addEventListener("webglcontextcreationerror",Ae,!1),null===ge){var xe=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&xe.shift(),ge=ye(xe,_e),null===ge)throw ye(xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(qe){throw console.error("THREE.WebGLRenderer: "+qe.message),qe}function be(){J=new yu(ge),X=new Zl(ge,J,e),J.init(X),pe=new Ch(ge,J,X),q=new Ah(ge,J,X),Y=new bu,Z=new lh,K=new Th(ge,J,q,Z,X,pe,Y),Q=new Ql(v),$=new gu(v),ee=new lo(ge,X),ve=new ql(ge,J,ee,X),te=new _u(ge,ee,Y,ve),ne=new Au(ge,te,ee,Y),ce=new Su(ge,X,K),se=new Kl(Z),ie=new sh(v,Q,$,J,X,ve,se),re=new Ih(v,Z),ae=new dh,oe=new _h(J,X),ue=new Xl(v,Q,$,q,ne,t,s),le=new Sh(v,ne,X),me=new Dh(ge,Y,X,q),de=new Yl(ge,J,Y,X),fe=new xu(ge,J,Y,X),Y.programs=ie.programs,v.capabilities=X,v.extensions=J,v.properties=Z,v.renderLists=ae,v.shadowMap=le,v.state=q,v.info=Y}be();var Me=new Ph(v,ge);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=Y.autoReset,t=le.enabled,n=le.autoUpdate,i=le.needsUpdate,r=le.type;be(),Y.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=i,le.type=r}function Ae(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Te(e){var t=e.target;t.removeEventListener("dispose",Te),Ce(t)}function Ce(e){Ee(e),Z.remove(e)}function Ee(e){var t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))}this.xr=Me,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){var e=J.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=J.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(T,C,!1))},this.getSize=function(e){return e.set(T,C)},this.setSize=function(e,t,i){Me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,C=t,n.width=Math.floor(e*E),n.height=Math.floor(t*E),!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(T*E,C*E).floor()},this.setDrawingBufferSize=function(e,t,i){T=e,C=t,E=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,i),q.viewport(w.copy(I).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,i){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,i),q.scissor(S.copy(D).multiplyScalar(E).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){q.setScissorTest(O=e)},this.setOpaqueSort=function(e){B=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;e&&(i|=16384),t&&(i|=256),n&&(i|=1024),ge.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",we,!1),n.removeEventListener("webglcontextrestored",Se,!1),n.removeEventListener("webglcontextcreationerror",Ae,!1),ae.dispose(),oe.dispose(),Z.dispose(),Q.dispose(),$.dispose(),ne.dispose(),ve.dispose(),me.dispose(),ie.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Re),Me.removeEventListener("sessionend",Be),U&&(U.dispose(),U=null),Pe.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=W);var o=r.isMesh&&r.matrixWorld.determinant()<0,s=je(e,t,n,i,r);q.setMaterial(i,o);var l=n.index,u=1;!0===i.wireframe&&(l=te.getWireframeAttribute(n),u=2);var c=n.drawRange,h=n.attributes.position,d=c.start*u,f=(c.start+c.count)*u;null!==a&&(d=Math.max(d,a.start*u),f=Math.min(f,(a.start+a.count)*u)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));var p=f-d;if(!(p<0||p===1/0)){var v;ve.setup(r,i,s,n,l);var m=de;if(null!==l&&(v=ee.get(l),m=fe,m.setIndex(v)),r.isMesh)!0===i.wireframe?(q.setLineWidth(i.wireframeLinewidth*j()),m.setMode(1)):m.setMode(4);else if(r.isLine){var g=i.linewidth;void 0===g&&(g=1),q.setLineWidth(g*j()),r.isLineSegments?m.setMode(1):r.isLineLoop?m.setMode(2):m.setMode(3)}else r.isPoints?m.setMode(0):r.isSprite&&m.setMode(4);if(r.isInstancedMesh)m.renderInstances(d,p,r.count);else if(n.isInstancedBufferGeometry){var y=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,_=Math.min(n.instanceCount,y);m.renderInstances(d,p,_)}else m.render(d,p)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===R?(e.side=L,e.needsUpdate=!0,ze(e,t,n),e.side=k,e.needsUpdate=!0,ze(e,t,n),e.side=R):ze(e,t,n)}d=oe.get(e),d.init(),p.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];n(a,e,t)}else n(i,e,t)})),p.pop(),d=null};var ke=null;function Le(e){ke&&ke(e)}function Re(){Pe.stop()}function Be(){Pe.start()}var Pe=new so;function De(e,t,n,i){if(!1!==e.visible){var r=e.layers.test(t.layers);if(r)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){i&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var a=ne.update(e),o=e.material;o.visible&&h.push(e,a,o,n,V.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Y.render.frame&&(e.skeleton.update(),e.skeleton.frame=Y.render.frame),!e.frustumCulled||F.intersectsObject(e))){i&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var s=ne.update(e),l=e.material;if(Array.isArray(l))for(var u=s.groups,c=0,f=u.length;c<f;c++){var p=u[c],v=l[p.materialIndex];v&&v.visible&&h.push(e,s,v,n,V.z,p)}else l.visible&&h.push(e,s,l,n,V.z,null)}for(var m=e.children,g=0,y=m.length;g<y;g++)De(m[g],t,n,i)}}function Fe(e,t,n,i){var r=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(n),a.length>0&&Ne(r,t,n),i&&q.viewport(w.copy(i)),r.length>0&&Ge(r,t,n),a.length>0&&Ge(a,t,n),o.length>0&&Ge(o,t,n),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Ne(e,t,n){var i=X.isWebGL2;null===U&&(U=new Ei(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?Ve:Oe,minFilter:Ie,samples:i&&!0===o?4:0})),v.getDrawingBufferSize(H),i?U.setSize(H.x,H.y):U.setSize(Qn(H.x),Qn(H.y));var r=v.getRenderTarget();v.setRenderTarget(U),v.clear();var a=v.toneMapping;v.toneMapping=he,Ge(e,t,n),v.toneMapping=a,K.updateMultisampleRenderTarget(U),K.updateRenderTargetMipmap(U),v.setRenderTarget(r)}function Ge(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,u=null===i?o.material:i,c=o.group;s.layers.test(n.layers)&&Ue(s,t,n,l,u,c)}}function Ue(e,t,n,i,r,a){e.onBeforeRender(v,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(v,t,n,i,e,a),!0===r.transparent&&r.side===R?(r.side=L,r.needsUpdate=!0,v.renderBufferDirect(n,t,i,r,e,a),r.side=k,r.needsUpdate=!0,v.renderBufferDirect(n,t,i,r,e,a),r.side=R):v.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(v,t,n,i,r,a)}function ze(e,t,n){!0!==t.isScene&&(t=W);var i=Z.get(e),r=d.state.lights,a=d.state.shadowsArray,o=r.state.version,s=ie.getParameters(e,r.state,a,t,n),l=ie.getProgramCacheKey(s),u=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?$:Q).get(e.envMap||i.environment),void 0===u&&(e.addEventListener("dispose",Te),u=new Map,i.programs=u);var c=u.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return We(e,s),c}else s.uniforms=ie.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=ie.acquireProgram(s,l),u.set(l,c),i.uniforms=s.uniforms;var h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=se.uniform),We(e,s),i.needsLights=Xe(e),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);var f=c.getUniforms(),p=Rc.seqWithValue(f.seq,h);return i.currentProgram=c,i.uniformsList=p,c}function We(e,t){var n=Z.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function je(e,t,n,i,r){!0!==t.isScene&&(t=W),K.resetTextureUnits();var a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,s=null===x?v.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:jt,l=(i.isMeshStandardMaterial?$:Q).get(i.envMap||o),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=i.toneMapped?v.toneMapping:he,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,_=Z.get(i),w=d.state.lights;if(!0===N&&(!0===G||e!==M)){var S=e===M&&i.id===b;se.setState(i,e,S)}var A=!1;i.version===_.__version?_.needsLights&&_.lightsStateVersion!==w.state.version||_.outputEncoding!==s||r.isInstancedMesh&&!1===_.instancing?A=!0:r.isInstancedMesh||!0!==_.instancing?r.isSkinnedMesh&&!1===_.skinning?A=!0:r.isSkinnedMesh||!0!==_.skinning?_.envMap!==l||!0===i.fog&&_.fog!==a?A=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===se.numPlanes&&_.numIntersection===se.numIntersection?(_.vertexAlphas!==u||_.vertexTangents!==c||_.morphTargets!==h||_.morphNormals!==f||_.morphColors!==p||_.toneMapping!==m||!0===X.isWebGL2&&_.morphTargetsCount!==y)&&(A=!0):A=!0:A=!0:A=!0:(A=!0,_.__version=i.version);var T=_.currentProgram;!0===A&&(T=ze(i,t,r));var k=!1,L=!1,R=!1,B=T.getUniforms(),P=_.uniforms;if(q.useProgram(T.program)&&(k=!0,L=!0,R=!0),i.id!==b&&(b=i.id,L=!0),k||M!==e){if(B.setValue(ge,"projectionMatrix",e.projectionMatrix),X.logarithmicDepthBuffer&&B.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),M!==e&&(M=e,L=!0,R=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var I=B.map.cameraPosition;void 0!==I&&I.setValue(ge,V.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&B.setValue(ge,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&B.setValue(ge,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){B.setOptional(ge,r,"bindMatrix"),B.setOptional(ge,r,"bindMatrixInverse");var D=r.skeleton;D&&(X.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),B.setValue(ge,"boneTexture",D.boneTexture,K),B.setValue(ge,"boneTextureSize",D.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var O=n.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===X.isWebGL2)&&ce.update(r,n,i,T),(L||_.receiveShadow!==r.receiveShadow)&&(_.receiveShadow=r.receiveShadow,B.setValue(ge,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),L&&(B.setValue(ge,"toneMappingExposure",v.toneMappingExposure),_.needsLights&&Je(P,R),a&&!0===i.fog&&re.refreshFogUniforms(P,a),re.refreshMaterialUniforms(P,i,E,C,U),Rc.upload(ge,_.uniformsList,P,K)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Rc.upload(ge,_.uniformsList,P,K),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&B.setValue(ge,"center",r.center),B.setValue(ge,"modelViewMatrix",r.modelViewMatrix),B.setValue(ge,"normalMatrix",r.normalMatrix),B.setValue(ge,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial)for(var F=i.uniformsGroups,z=0,H=F.length;z<H;z++)if(X.isWebGL2){var j=F[z];me.update(j,T),me.bind(j,T)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return T}function Je(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Xe(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Pe.setAnimationLoop(Le),"undefined"!==typeof self&&Pe.setContext(self),this.setAnimationLoop=function(e){ke=e,Me.setAnimationLoop(e),null===e?Pe.stop():Pe.start()},Me.addEventListener("sessionstart",Re),Me.addEventListener("sessionend",Be),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Me.enabled&&!0===Me.isPresenting&&(!0===Me.cameraAutoUpdate&&Me.updateCamera(t),t=Me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,x),d=oe.get(e,p.length),d.init(),p.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(z),G=this.localClippingEnabled,N=se.init(this.clippingPlanes,G,t),h=ae.get(e,f.length),h.init(),f.push(h),De(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(B,P),!0===N&&se.beginShadows();var n=d.state.shadowsArray;if(le.render(n,e,t),!0===N&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(h,e),d.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var i=t.cameras,r=0,a=i.length;r<a;r++){var o=i[r];Fe(h,e,o,o.viewport)}else Fe(h,e,t);null!==x&&(K.updateMultisampleRenderTarget(x),K.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(v,e,t),ve.resetDefaultState(),b=-1,M=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;var i=Z.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,g=t,_=n;var i=!0,r=null,a=!1,o=!1;if(e){var s=Z.get(e);void 0!==s.__useDefaultFramebuffer?(q.bindFramebuffer(36160,null),i=!1):void 0===s.__webglFramebuffer?K.setupRenderTarget(e):s.__hasExternalTextures&&K.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var u=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=u[t],a=!0):r=X.isWebGL2&&e.samples>0&&!1===K.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:u,w.copy(e.viewport),S.copy(e.scissor),A=e.scissorTest}else w.copy(I).multiplyScalar(E).floor(),S.copy(D).multiplyScalar(E).floor(),A=O;var c=q.bindFramebuffer(36160,r);if(c&&X.drawBuffers&&i&&q.drawBuffers(e,r),q.viewport(w),q.scissor(S),q.setScissorTest(A),a){var h=Z.get(e.texture);ge.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(o){var d=Z.get(e.texture),f=t||0;ge.framebufferTextureLayer(36160,36064,d.__webglTexture,n||0,f)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){q.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ye&&pe.convert(u)!==ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===Ve&&(J.has("EXT_color_buffer_half_float")||X.isWebGL2&&J.has("EXT_color_buffer_float"));if(c!==Oe&&pe.convert(c)!==ge.getParameter(35738)&&(c!==He||!(X.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ge.readPixels(t,n,i,r,pe.convert(u),pe.convert(c),a)}finally{var d=null!==x?Z.get(x).__webglFramebuffer:null;q.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);K.setTexture2D(t,0),ge.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,a),q.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,o=pe.convert(n.format),s=pe.convert(n.type);K.setTexture2D(n,0),ge.pixelStorei(37440,n.flipY),ge.pixelStorei(37441,n.premultiplyAlpha),ge.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ge.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?ge.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ge.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&ge.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=pe.convert(i.format),c=pe.convert(i.type);if(i.isData3DTexture)K.setTexture3D(i,0),a=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(i,0),a=35866}ge.pixelStorei(37440,i.flipY),ge.pixelStorei(37441,i.premultiplyAlpha),ge.pixelStorei(3317,i.unpackAlignment);var h=ge.getParameter(3314),d=ge.getParameter(32878),f=ge.getParameter(3316),p=ge.getParameter(3315),m=ge.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ge.pixelStorei(3314,g.width),ge.pixelStorei(32878,g.height),ge.pixelStorei(3316,e.min.x),ge.pixelStorei(3315,e.min.y),ge.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ge.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ge.compressedTexSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,g.data)):ge.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,c,g),ge.pixelStorei(3314,h),ge.pixelStorei(32878,d),ge.pixelStorei(3316,f),ge.pixelStorei(3315,p),ge.pixelStorei(32877,m),0===r&&i.generateMipmaps&&ge.generateMipmap(a),q.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?K.setTextureCube(e,0):e.isData3DTexture?K.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?K.setTexture2DArray(e,0):K.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){g=0,_=0,x=null,q.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Nh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(Fh);t.WebGL1Renderer=Nh,Nh.prototype.isWebGL1Renderer=!0;var Gh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,m.default)(this,e),this.isFogExp2=!0,this.name="",this.color=new bi(t),this.density=n}return(0,g.default)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();t.FogExp2=Gh;var Uh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,m.default)(this,e),this.isFog=!0,this.name="",this.color=new bi(t),this.near=n,this.far=i}return(0,g.default)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();t.Fog=Uh;var zh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,h.default)(e)})),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(Or);t.Scene=zh;var Hh=function(){function e(t,n){(0,m.default)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=gn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=In()}return(0,g.default)(e,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=In()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=In()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();t.InterleavedBuffer=Hh;var Vh=new Di,Wh=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,m.default)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=!0===r}return(0,g.default)(e,[{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Vh.fromBufferAttribute(this,t),Vh.applyMatrix4(e),this.setXYZ(t,Vh.x,Vh.y,Vh.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Vh.fromBufferAttribute(this,t),Vh.applyNormalMatrix(e),this.setXYZ(t,Vh.x,Vh.y,Vh.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Vh.fromBufferAttribute(this,t),Vh.transformDirection(e),this.setXYZ(t,Vh.x,Vh.y,Vh.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ei(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ei(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ei(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array),r=ti(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new $r(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}}]),e}();t.InterleavedBufferAttribute=Wh;var jh,Jh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isSpriteMaterial=!0,i.type="SpriteMaterial",i.color=new bi(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Yr);t.SpriteMaterial=Jh;var Xh=new Di,qh=new Di,Yh=new Di,Zh=new ii,Kh=new ii,Qh=new hr,$h=new Di,ed=new Di,td=new Di,nd=new ii,id=new ii,rd=new ii,ad=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;if((0,m.default)(this,n),i=t.call(this),i.isSprite=!0,i.type="Sprite",void 0===jh){jh=new ga;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Hh(r,5);jh.setIndex([0,1,2,0,2,3]),jh.setAttribute("position",new Wh(a,3,0,!1)),jh.setAttribute("uv",new Wh(a,2,3,!1))}return i.geometry=jh,i.material=void 0!==e?e:new Jh,i.center=new ii(.5,.5),i}return(0,g.default)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),qh.setFromMatrixScale(this.matrixWorld),Qh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Yh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&qh.multiplyScalar(-Yh.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;od($h.set(-.5,-.5,0),Yh,a,qh,n,i),od(ed.set(.5,-.5,0),Yh,a,qh,n,i),od(td.set(.5,.5,0),Yh,a,qh,n,i),nd.set(0,0),id.set(1,0),rd.set(1,1);var o=e.ray.intersectTriangle($h,ed,td,!1,Xh);if(null!==o||(od(ed.set(-.5,.5,0),Yh,a,qh,n,i),id.set(0,1),o=e.ray.intersectTriangle($h,td,ed,!1,Xh),null!==o)){var s=e.ray.origin.distanceTo(Xh);s<e.near||s>e.far||t.push({distance:s,point:Xh.clone(),uv:Xr.getUV(Xh,$h,ed,td,nd,id,rd,new ii),face:null,object:this})}}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Or);function od(e,t,n,i,r,a){Zh.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Kh.x=a*Zh.x-r*Zh.y,Kh.y=r*Zh.x+a*Zh.y):Kh.copy(Zh),e.copy(t),e.x+=Kh.x,e.y+=Kh.y,e.applyMatrix4(Qh)}t.Sprite=ad;var sd=new Di,ld=new Di,ud=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e._currentLevel=0,e.type="LOD",Object.defineProperties((0,h.default)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,g.default)(n,[{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var i,r=this.levels;for(i=0;i<r.length;i++)if(t<r[i].distance)break;return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i;n++){var r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}},{key:"raycast",value:function(e,t){var n=this.levels;if(n.length>0){sd.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(sd);this.getObjectForDistance(i).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){sd.setFromMatrixPosition(e.matrixWorld),ld.setFromMatrixPosition(this.matrixWorld);var n,i,r=sd.distanceTo(ld)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i;n++){var a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),!(r>=a))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,r=0,a=i.length;r<a;r++){var o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}]),n}(Or);t.LOD=ud;var cd=new Di,hd=new Ci,dd=new Ci,fd=new Di,pd=new hr,vd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isSkinnedMesh=!0,r.type="SkinnedMesh",r.bindMode="attached",r.bindMatrix=new hr,r.bindMatrixInverse=new hr,r}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Ci,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,i=this.geometry;hd.fromBufferAttribute(i.attributes.skinIndex,e),dd.fromBufferAttribute(i.attributes.skinWeight,e),cd.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var r=0;r<4;r++){var a=dd.getComponent(r);if(0!==a){var o=hd.getComponent(r);pd.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(fd.copy(cd).applyMatrix4(pd),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Da);t.SkinnedMesh=vd;var md=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isBone=!0,e.type="Bone",e}return n}(Or);t.Bone=md;var gd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Te,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Te,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return(0,m.default)(this,n),e=t.call(this,null,l,u,c,h,d,o,s,f,p),e.isDataTexture=!0,e.image={data:i,width:r,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return n}(Ti);t.DataTexture=gd;var yd=new hr,_d=new hr,xd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,m.default)(this,e),this.uuid=In(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,g.default)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new hr)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new hr;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:_d;yd.multiplyMatrices(o,t[r]),yd.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Kn(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new gd(t,e,e,Ye,He);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var r=e.bones[n],a=t[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new md),this.bones.push(a),this.boneInverses.push((new hr).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,r=t.length;i<r;i++){var a=t[i];e.bones.push(a.uuid);var o=n[i];e.boneInverses.push(o.toArray())}return e}}]),e}();t.Skeleton=xd;var bd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),a=t.call(this,e,i,r),a.isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}($r);t.InstancedBufferAttribute=bd;var Md=new hr,wd=new hr,Sd=[],Ad=new hr,Td=new Da,Cd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this,e,i),a.isInstancedMesh=!0,a.instanceMatrix=new bd(new Float32Array(16*r),16),a.instanceColor=null,a.count=r,a.frustumCulled=!1;for(var o=0;o<r;o++)a.setMatrixAt(o,Ad);return a}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,i=this.count;if(Td.geometry=this.geometry,Td.material=this.material,void 0!==Td.material)for(var r=0;r<i;r++){this.getMatrixAt(r,Md),wd.multiplyMatrices(n,Md),Td.matrixWorld=wd,Td.raycast(e,Sd);for(var a=0,o=Sd.length;a<o;a++){var s=Sd[a];s.instanceId=r,s.object=this,t.push(s)}Sd.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new bd(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Da);t.InstancedMesh=Cd;var Ed=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new bi(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Yr);t.LineBasicMaterial=Ed;var kd=new Di,Ld=new Di,Rd=new hr,Bd=new cr,Pd=new nr,Id=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ed;return(0,m.default)(this,n),e=t.call(this),e.isLine=!0,e.type="Line",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)kd.fromBufferAttribute(t,i-1),Ld.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=kd.distanceTo(Ld);e.setAttribute("lineDistance",new la(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pd.copy(n.boundingSphere),Pd.applyMatrix4(i),Pd.radius+=r,!1!==e.ray.intersectsSphere(Pd)){Rd.copy(i).invert(),Bd.copy(e.ray).applyMatrix4(Rd);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Di,u=new Di,c=new Di,h=new Di,d=this.isLineSegments?2:1,f=n.index,p=n.attributes,v=p.position;if(null!==f)for(var m=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count),y=m,_=g-1;y<_;y+=d){var x=f.getX(y),b=f.getX(y+1);l.fromBufferAttribute(v,x),u.fromBufferAttribute(v,b);var M=Bd.distanceSqToSegment(l,u,h,c);if(!(M>s)){h.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var S=Math.max(0,a.start),A=Math.min(v.count,a.start+a.count),T=S,C=A-1;T<C;T+=d){l.fromBufferAttribute(v,T),u.fromBufferAttribute(v,T+1);var E=Bd.distanceSqToSegment(l,u,h,c);if(!(E>s)){h.applyMatrix4(this.matrixWorld);var k=e.ray.origin.distanceTo(h);k<e.near||k>e.far||t.push({distance:k,point:c.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}]),n}(Or);t.Line=Id;var Dd=new Di,Od=new Di,Fd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isLineSegments=!0,r.type="LineSegments",r}return(0,g.default)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)Dd.fromBufferAttribute(t,i),Od.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Dd.distanceTo(Od);e.setAttribute("lineDistance",new la(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(Id);t.LineSegments=Fd;var Nd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isLineLoop=!0,r.type="LineLoop",r}return n}(Id);t.LineLoop=Nd;var Gd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isPointsMaterial=!0,i.type="PointsMaterial",i.color=new bi(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Yr);t.PointsMaterial=Gd;var Ud=new hr,zd=new cr,Hd=new nr,Vd=new Di,Wd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gd;return(0,m.default)(this,n),e=t.call(this),e.isPoints=!0,e.type="Points",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hd.copy(n.boundingSphere),Hd.applyMatrix4(i),Hd.radius+=r,!1!==e.ray.intersectsSphere(Hd)){Ud.copy(i).invert(),zd.copy(e.ray).applyMatrix4(Ud);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes,c=u.position;if(null!==l)for(var h=Math.max(0,a.start),d=Math.min(l.count,a.start+a.count),f=h,p=d;f<p;f++){var v=l.getX(f);Vd.fromBufferAttribute(c,v),jd(Vd,v,s,i,e,t,this)}else for(var m=Math.max(0,a.start),g=Math.min(c.count,a.start+a.count),y=m,_=g;y<_;y++)Vd.fromBufferAttribute(c,y),jd(Vd,y,s,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}]),n}(Or);function jd(e,t,n,i,r,a,o){var s=zd.distanceSqToPoint(e);if(s<n){var l=new Di;zd.closestPointToPoint(e,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}t.Points=Wd;var Jd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c){var d;(0,m.default)(this,n),d=t.call(this,e,i,r,a,o,s,l,u,c),d.isVideoTexture=!0,d.minFilter=void 0!==s?s:Re,d.magFilter=void 0!==o?o:Re,d.generateMipmaps=!1;var f=(0,h.default)(d);function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p),d}return(0,g.default)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Ti);t.VideoTexture=Jd;var Xd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,{width:e,height:i}),a.isFramebufferTexture=!0,a.format=r,a.magFilter=Te,a.minFilter=Te,a.generateMipmaps=!1,a.needsUpdate=!0,a}return n}(Ti);t.FramebufferTexture=Xd;var qd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c,h,d,f){var p;return(0,m.default)(this,n),p=t.call(this,null,s,l,u,c,h,a,o,d,f),p.isCompressedTexture=!0,p.image={width:i,height:r},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return n}(Ti);t.CompressedTexture=qd;var Yd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){var l;return(0,m.default)(this,n),l=t.call(this,e,i,r,o,s),l.isCompressedArrayTexture=!0,l.image.depth=a,l.wrapR=Se,l}return n}(qd);t.CompressedArrayTexture=Yd;var Zd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c){var h;return(0,m.default)(this,n),h=t.call(this,e,i,r,a,o,s,l,u,c),h.isCanvasTexture=!0,h.needsUpdate=!0,h}return n}(Ti);t.CanvasTexture=Zd;var Kd=function(){function e(){(0,m.default)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,g.default)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=e;a++)t=this.getPoint(a/e),r+=t.distanceTo(i),n.push(r),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];var o,s=0,l=a-1;while(s<=l)if(r=Math.floor(s+(l-s)/2),o=i[r]-n,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,i[r]===n)return r/(a-1);var u=i[r],c=i[r+1],h=c-u,d=(n-u)/h,f=(r+d)/(a-1);return f}},{key:"getTangent",value:function(e,t){var n=1e-4,i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);var a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new ii:new Di);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Di,i=[],r=[],a=[],o=new Di,s=new hr,l=0;l<=e;l++){var u=l/e;i[l]=this.getTangentAt(u,new Di)}r[0]=new Di,a[0]=new Di;var c=Number.MAX_VALUE,h=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var p=1;p<=e;p++){if(r[p]=r[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Dn(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(i[p],r[p])}if(!0===t){var m=Math.acos(Dn(r[0].dot(r[e]),-1,1));m/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(m=-m);for(var g=1;g<=e;g++)r[g].applyMatrix4(s.makeRotationAxis(i[g],m*g)),a[g].crossVectors(i[g],r[g])}return{tangents:i,normals:r,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}();t.Curve=Kd;var Qd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,m.default)(this,n),e=t.call(this),e.isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=r,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=u,e.aRotation=c,e}return(0,g.default)(n,[{key:"getPoint",value:function(e,t){var n=t||new ii,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;while(r<0)r+=i;while(r>i)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Kd);t.EllipseCurve=Qd;var $d=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){var l;return(0,m.default)(this,n),l=t.call(this,e,i,r,r,a,o,s),l.isArcCurve=!0,l.type="ArcCurve",l}return n}(Qd);function ef(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(i-t)/(o+s)+(i-n)/s;l*=o,u*=o,r(t,n,l,u)},calc:function(r){var a=r*r,o=a*r;return e+t*r+n*a+i*o}}}t.ArcCurve=$d;var tf=new Di,nf=new ef,rf=new ef,af=new ef,of=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,m.default)(this,n),e=t.call(this),e.isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=r,e.curveType=a,e.tension=o,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,r=i,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,l=Math.floor(s),u=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:0===u&&l===o-1&&(l=o-2,u=1),this.closed||l>0?t=a[(l-1)%o]:(tf.subVectors(a[0],a[1]).add(a[0]),t=tf);var c=a[l%o],h=a[(l+1)%o];if(this.closed||l+2<o?n=a[(l+2)%o]:(tf.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=tf),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(t.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(n),d);p<1e-4&&(p=1),f<1e-4&&(f=p),v<1e-4&&(v=p),nf.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,f,p,v),rf.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,f,p,v),af.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,f,p,v)}else"catmullrom"===this.curveType&&(nf.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),rf.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),af.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return r.set(nf.calc(u),rf.calc(u),af.calc(u)),r}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Di).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Kd);function sf(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e,l=e*s;return(2*n-2*i+a+o)*l+(-3*n+3*i-2*a-o)*s+a*e+n}function lf(e,t){var n=1-e;return n*n*t}function uf(e,t){return 2*(1-e)*e*t}function cf(e,t){return e*e*t}function hf(e,t,n,i){return lf(e,t)+uf(e,n)+cf(e,i)}function df(e,t){var n=1-e;return n*n*n*t}function ff(e,t){var n=1-e;return 3*n*n*e*t}function pf(e,t){return 3*(1-e)*e*e*t}function vf(e,t){return e*e*e*t}function mf(e,t,n,i,r){return df(e,t)+ff(e,n)+pf(e,i)+vf(e,r)}t.CatmullRomCurve3=of;var gf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ii,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ii;return(0,m.default)(this,n),e=t.call(this),e.isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(mf(e,i.x,r.x,a.x,o.x),mf(e,i.y,r.y,a.y,o.y)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Kd);t.CubicBezierCurve=gf;var yf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Di,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Di;return(0,m.default)(this,n),e=t.call(this),e.isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,n=t,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(mf(e,i.x,r.x,a.x,o.x),mf(e,i.y,r.y,a.y,o.y),mf(e,i.z,r.z,a.z,o.z)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Kd);t.CubicBezierCurve3=yf;var _f=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii;return(0,m.default)(this,n),e=t.call(this),e.isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=r,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new ii;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kd);t.LineCurve=_f;var xf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di;return(0,m.default)(this,n),e=t.call(this),e.isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=r,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kd);t.LineCurve3=xf;var bf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ii;return(0,m.default)(this,n),e=t.call(this),e.isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=r,e.v2=a,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(hf(e,i.x,r.x,a.x),hf(e,i.y,r.y,a.y)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kd);t.QuadraticBezierCurve=bf;var Mf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Di;return(0,m.default)(this,n),e=t.call(this),e.isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di,n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(hf(e,i.x,r.x,a.x),hf(e,i.y,r.y,a.y),hf(e,i.z,r.z,a.z)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Kd);t.QuadraticBezierCurve3=Mf;var wf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.default)(this,n),e=t.call(this),e.isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(sf(o,s.x,l.x,u.x,c.x),sf(o,s.y,l.y,u.y,c.y)),n}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new ii).fromArray(r))}return this}}]),n}(Kd);t.SplineCurve=wf;var Sf=Object.freeze({__proto__:null,ArcCurve:$d,CatmullRomCurve3:of,CubicBezierCurve:gf,CubicBezierCurve3:yf,EllipseCurve:Qd,LineCurve:_f,LineCurve3:xf,QuadraticBezierCurve:bf,QuadraticBezierCurve3:Mf,SplineCurve:wf}),Af=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,g.default)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new _f(t,e))}},{key:"getPoint",value:function(e,t){var n=e*this.getLength(),i=this.getCurveLengths(),r=0;while(r<i.length){if(i[r]>=n){var a=i[r]-n,o=this.curves[r],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,t)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new Sf[r.type]).fromJSON(r))}return this}}]),n}(Kd);t.CurvePath=Af;var Tf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.type="Path",i.currentPoint=new ii,e&&i.setFromPoints(e),i}return(0,g.default)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new _f(this.currentPoint.clone(),new ii(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var r=new bf(this.currentPoint.clone(),new ii(e,t),new ii(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){var o=new gf(this.currentPoint.clone(),new ii(e,t),new ii(n,i),new ii(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new wf(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this}},{key:"absarc",value:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}},{key:"ellipse",value:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,a,o,s),this}},{key:"absellipse",value:function(e,t,n,i,r,a,o,s){var l=new Qd(e,t,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Af);t.Path=Tf;var Cf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ii(0,-.5),new ii(.5,0),new ii(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="LatheGeometry",e.parameters={points:i,segments:r,phiStart:a,phiLength:o},r=Math.floor(r),o=Dn(o,0,2*Math.PI);for(var s=[],l=[],u=[],c=[],h=[],d=1/r,f=new Di,p=new ii,v=new Di,g=new Di,y=new Di,_=0,x=0,b=0;b<=i.length-1;b++)switch(b){case 0:_=i[b+1].x-i[b].x,x=i[b+1].y-i[b].y,v.x=1*x,v.y=-_,v.z=0*x,y.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case i.length-1:c.push(y.x,y.y,y.z);break;default:_=i[b+1].x-i[b].x,x=i[b+1].y-i[b].y,v.x=1*x,v.y=-_,v.z=0*x,g.copy(v),v.x+=y.x,v.y+=y.y,v.z+=y.z,v.normalize(),c.push(v.x,v.y,v.z),y.copy(g)}for(var M=0;M<=r;M++)for(var w=a+M*d*o,S=Math.sin(w),A=Math.cos(w),T=0;T<=i.length-1;T++){f.x=i[T].x*S,f.y=i[T].y,f.z=i[T].x*A,l.push(f.x,f.y,f.z),p.x=M/r,p.y=T/(i.length-1),u.push(p.x,p.y);var C=c[3*T+0]*S,E=c[3*T+1],k=c[3*T+0]*A;h.push(C,E,k)}for(var L=0;L<r;L++)for(var R=0;R<i.length-1;R++){var B=R+L*i.length,P=B,I=B+i.length,D=B+i.length+1,O=B+1;s.push(P,I,O),s.push(D,O,I)}return e.setIndex(s),e.setAttribute("position",new la(l,3)),e.setAttribute("uv",new la(u,2)),e.setAttribute("normal",new la(h,3)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(ga);t.LatheGeometry=Cf;var Ef=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;(0,m.default)(this,n);var s=new Tf;return s.absarc(0,-r/2,i,1.5*Math.PI,0),s.absarc(0,r/2,i,0,.5*Math.PI),e=t.call(this,s.getPoints(a),o),e.type="CapsuleGeometry",e.parameters={radius:i,height:r,capSegments:a,radialSegments:o},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(Cf);t.CapsuleGeometry=Ef;var kf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="CircleGeometry",e.parameters={radius:i,segments:r,thetaStart:a,thetaLength:o},r=Math.max(3,r);var s=[],l=[],u=[],c=[],h=new Di,d=new ii;l.push(0,0,0),u.push(0,0,1),c.push(.5,.5);for(var f=0,p=3;f<=r;f++,p+=3){var v=a+f/r*o;h.x=i*Math.cos(v),h.y=i*Math.sin(v),l.push(h.x,h.y,h.z),u.push(0,0,1),d.x=(l[p]/i+1)/2,d.y=(l[p+1]/i+1)/2,c.push(d.x,d.y)}for(var g=1;g<=r;g++)s.push(g,g+1,0);return e.setIndex(s),e.setAttribute("position",new la(l,3)),e.setAttribute("normal",new la(u,3)),e.setAttribute("uv",new la(c,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(ga);t.CircleGeometry=kf;var Lf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:r,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:c};var d=(0,h.default)(e);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],v=[],g=[],y=0,_=[],x=a/2,b=0;function M(){for(var e=new Di,t=new Di,n=0,l=(r-i)/a,h=0;h<=s;h++){for(var m=[],M=h/s,w=M*(r-i)+i,S=0;S<=o;S++){var A=S/o,T=A*c+u,C=Math.sin(T),E=Math.cos(T);t.x=w*C,t.y=-M*a+x,t.z=w*E,p.push(t.x,t.y,t.z),e.set(C,l,E).normalize(),v.push(e.x,e.y,e.z),g.push(A,1-M),m.push(y++)}_.push(m)}for(var k=0;k<o;k++)for(var L=0;L<s;L++){var R=_[L][k],B=_[L+1][k],P=_[L+1][k+1],I=_[L][k+1];f.push(R,B,I),f.push(B,P,I),n+=6}d.addGroup(b,n,0),b+=n}function w(e){for(var t=y,n=new ii,a=new Di,s=0,l=!0===e?i:r,h=!0===e?1:-1,m=1;m<=o;m++)p.push(0,x*h,0),v.push(0,h,0),g.push(.5,.5),y++;for(var _=y,M=0;M<=o;M++){var w=M/o,S=w*c+u,A=Math.cos(S),T=Math.sin(S);a.x=l*T,a.y=x*h,a.z=l*A,p.push(a.x,a.y,a.z),v.push(0,h,0),n.x=.5*A+.5,n.y=.5*T*h+.5,g.push(n.x,n.y),y++}for(var C=0;C<o;C++){var E=t+C,k=_+C;!0===e?f.push(k,k+1,E):f.push(k+1,k,E),s+=3}d.addGroup(b,s,!0===e?1:2),b+=s}return M(),!1===l&&(i>0&&w(!0),r>0&&w(!1)),e.setIndex(f),e.setAttribute("position",new la(p,3)),e.setAttribute("normal",new la(v,3)),e.setAttribute("uv",new la(g,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(ga);t.CylinderGeometry=Lf;var Rf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,m.default)(this,n),e=t.call(this,0,i,r,a,o,s,l,u),e.type="ConeGeometry",e.parameters={radius:i,height:r,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Lf);t.ConeGeometry=Rf;var Bf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,m.default)(this,n),e=t.call(this),e.type="PolyhedronGeometry",e.parameters={vertices:i,indices:r,radius:a,detail:o};var s=[],l=[];function u(e){for(var t=new Di,n=new Di,i=new Di,a=0;a<r.length;a+=3)v(r[a+0],t),v(r[a+1],n),v(r[a+2],i),c(t,n,i,e)}function c(e,t,n,i){for(var r=i+1,a=[],o=0;o<=r;o++){a[o]=[];for(var s=e.clone().lerp(n,o/r),l=t.clone().lerp(n,o/r),u=r-o,c=0;c<=u;c++)a[o][c]=0===c&&o===r?s:s.clone().lerp(l,c/u)}for(var h=0;h<r;h++)for(var d=0;d<2*(r-h)-1;d++){var f=Math.floor(d/2);d%2===0?(p(a[h][f+1]),p(a[h+1][f]),p(a[h][f])):(p(a[h][f+1]),p(a[h+1][f+1]),p(a[h+1][f]))}}function h(e){for(var t=new Di,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function d(){for(var e=new Di,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=_(e)/2/Math.PI+.5,i=x(e)/Math.PI+.5;l.push(n,1-i)}g(),f()}function f(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],i=l[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),i<.2&&(l[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function v(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function g(){for(var e=new Di,t=new Di,n=new Di,i=new Di,r=new ii,a=new ii,o=new ii,u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),r.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var h=_(i);y(r,c+0,e,h),y(a,c+2,t,h),y(o,c+4,n,h)}}function y(e,t,n,i){i<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=i/2/Math.PI+.5)}function _(e){return Math.atan2(e.z,-e.x)}function x(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return u(o),h(a),d(),e.setAttribute("position",new la(s,3)),e.setAttribute("normal",new la(s.slice(),3)),e.setAttribute("uv",new la(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(ga);t.PolyhedronGeometry=Bf;var Pf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return e=t.call(this,s,l,i,r),e.type="DodecahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Bf);t.DodecahedronGeometry=Pf;var If=new Di,Df=new Di,Of=new Di,Ff=new Xr,Nf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,m.default)(this,n),e=t.call(this),e.type="EdgesGeometry",e.parameters={geometry:i,thresholdAngle:r},null!==i){for(var a=4,o=Math.pow(10,a),s=Math.cos(Bn*r),l=i.getIndex(),u=i.getAttribute("position"),c=l?l.count:u.count,h=[0,0,0],d=["a","b","c"],f=new Array(3),p={},v=[],g=0;g<c;g+=3){l?(h[0]=l.getX(g),h[1]=l.getX(g+1),h[2]=l.getX(g+2)):(h[0]=g,h[1]=g+1,h[2]=g+2);var y=Ff.a,_=Ff.b,x=Ff.c;if(y.fromBufferAttribute(u,h[0]),_.fromBufferAttribute(u,h[1]),x.fromBufferAttribute(u,h[2]),Ff.getNormal(Of),f[0]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),f[1]="".concat(Math.round(_.x*o),",").concat(Math.round(_.y*o),",").concat(Math.round(_.z*o)),f[2]="".concat(Math.round(x.x*o),",").concat(Math.round(x.y*o),",").concat(Math.round(x.z*o)),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var b=0;b<3;b++){var M=(b+1)%3,w=f[b],S=f[M],A=Ff[d[b]],T=Ff[d[M]],C="".concat(w,"_").concat(S),E="".concat(S,"_").concat(w);E in p&&p[E]?(Of.dot(p[E].normal)<=s&&(v.push(A.x,A.y,A.z),v.push(T.x,T.y,T.z)),p[E]=null):C in p||(p[C]={index0:h[b],index1:h[M],normal:Of.clone()})}}for(var k in p)if(p[k]){var L=p[k],R=L.index0,B=L.index1;If.fromBufferAttribute(u,R),Df.fromBufferAttribute(u,B),v.push(If.x,If.y,If.z),v.push(Df.x,Df.y,Df.z)}e.setAttribute("position",new la(v,3))}return e}return n}(ga);t.EdgesGeometry=Nf;var Gf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.uuid=In(),i.type="Shape",i.holes=[],i}return(0,g.default)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new Tf).fromJSON(r))}return this}}]),n}(Tf);t.Shape=Gf;var Uf={triangulate:function(e,t){var n,i,r,a,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*u:e.length,d=zf(e,0,h,u,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=qf(e,t,d,u)),e.length>80*u){n=r=e[0],i=a=e[1];for(var p=u;p<h;p+=u)o=e[p],s=e[p+1],o<n&&(n=o),s<i&&(i=s),o>r&&(r=o),s>a&&(a=s);l=Math.max(r-n,a-i),l=0!==l?32767/l:0}return Vf(d,f,u,n,i,l,0),f}};function zf(e,t,n,i,r){var a,o;if(r===gp(e,t,n,i)>0)for(a=t;a<n;a+=i)o=pp(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=pp(a,e[a],e[a+1],o);return o&&op(o,o.next)&&(vp(o),o=o.next),o}function Hf(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!op(i,i.next)&&0!==ap(i.prev,i,i.next))i=i.next;else{if(vp(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Vf(e,t,n,i,r,a,o){if(e){!o&&a&&$f(e,i,r,a);var s,l,u=e;while(e.prev!==e.next)if(s=e.prev,l=e.next,a?jf(e,i,r,a):Wf(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),vp(e),e=l.next,u=l.next;else if(e=l,e===u){o?1===o?(e=Jf(Hf(e),t,n),Vf(e,t,n,i,r,a,2)):2===o&&Xf(e,t,n,i,r,a):Vf(Hf(e),t,n,i,r,a,1);break}}}function Wf(e){var t=e.prev,n=e,i=e.next;if(ap(t,n,i)>=0)return!1;var r=t.x,a=n.x,o=i.x,s=t.y,l=n.y,u=i.y,c=r<a?r<o?r:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=r>a?r>o?r:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,p=i.next;while(p!==t){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&ip(r,s,a,l,o,u,p.x,p.y)&&ap(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function jf(e,t,n,i){var r=e.prev,a=e,o=e.next;if(ap(r,a,o)>=0)return!1;var s=r.x,l=a.x,u=o.x,c=r.y,h=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,v=s>l?s>u?s:u:l>u?l:u,m=c>h?c>d?c:d:h>d?h:d,g=tp(f,p,t,n,i),y=tp(v,m,t,n,i),_=e.prevZ,x=e.nextZ;while(_&&_.z>=g&&x&&x.z<=y){if(_.x>=f&&_.x<=v&&_.y>=p&&_.y<=m&&_!==r&&_!==o&&ip(s,c,l,h,u,d,_.x,_.y)&&ap(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=f&&x.x<=v&&x.y>=p&&x.y<=m&&x!==r&&x!==o&&ip(s,c,l,h,u,d,x.x,x.y)&&ap(x.prev,x,x.next)>=0)return!1;x=x.nextZ}while(_&&_.z>=g){if(_.x>=f&&_.x<=v&&_.y>=p&&_.y<=m&&_!==r&&_!==o&&ip(s,c,l,h,u,d,_.x,_.y)&&ap(_.prev,_,_.next)>=0)return!1;_=_.prevZ}while(x&&x.z<=y){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=m&&x!==r&&x!==o&&ip(s,c,l,h,u,d,x.x,x.y)&&ap(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Jf(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!op(r,a)&&sp(r,i,i.next,a)&&hp(r,a)&&hp(a,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),vp(i),vp(i.next),i=e=a),i=i.next}while(i!==e);return Hf(i)}function Xf(e,t,n,i,r,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&rp(o,s)){var l=fp(o,s);return o=Hf(o,o.next),l=Hf(l,l.next),Vf(o,t,n,i,r,a,0),void Vf(l,t,n,i,r,a,0)}s=s.next}o=o.next}while(o!==e)}function qf(e,t,n,i){var r,a,o,s,l,u=[];for(r=0,a=t.length;r<a;r++)o=t[r]*i,s=r<a-1?t[r+1]*i:e.length,l=zf(e,o,s,i,!1),l===l.next&&(l.steiner=!0),u.push(np(l));for(u.sort(Yf),r=0;r<u.length;r++)n=Zf(u[r],n);return n}function Yf(e,t){return e.x-t.x}function Zf(e,t){var n=Kf(e,t);if(!n)return t;var i=fp(n,e);return Hf(i,i.next),Hf(n,n.next)}function Kf(e,t){var n,i=t,r=-1/0,a=e.x,o=e.y;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=a&&s>r&&(r=s,n=i.x<i.next.x?i:i.next,s===a))return n}i=i.next}while(i!==t);if(!n)return null;var l,u=n,c=n.x,h=n.y,d=1/0;i=n;do{a>=i.x&&i.x>=c&&a!==i.x&&ip(o<h?a:r,o,c,h,o<h?r:a,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(a-i.x),hp(i,e)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&Qf(n,i)))&&(n=i,d=l)),i=i.next}while(i!==u);return n}function Qf(e,t){return ap(e.prev,e,t.prev)<0&&ap(t.next,e,e.next)<0}function $f(e,t,n,i){var r=e;do{0===r.z&&(r.z=tp(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,ep(r)}function ep(e){var t,n,i,r,a,o,s,l,u=1;do{n=e,e=null,a=null,o=0;while(n){for(o++,i=n,s=0,t=0;t<u;t++)if(s++,i=i.nextZ,!i)break;l=u;while(s>0||l>0&&i)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1);return e}function tp(e,t,n,i,r){return e=(e-n)*r|0,t=(t-i)*r|0,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function np(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ip(e,t,n,i,r,a,o,s){return(r-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(r-o)*(i-s)}function rp(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!cp(e,t)&&(hp(e,t)&&hp(t,e)&&dp(e,t)&&(ap(e.prev,e,t.prev)||ap(e,t.prev,t))||op(e,t)&&ap(e.prev,e,e.next)>0&&ap(t.prev,t,t.next)>0)}function ap(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function op(e,t){return e.x===t.x&&e.y===t.y}function sp(e,t,n,i){var r=up(ap(e,t,n)),a=up(ap(e,t,i)),o=up(ap(n,i,e)),s=up(ap(n,i,t));return r!==a&&o!==s||(!(0!==r||!lp(e,n,t))||(!(0!==a||!lp(e,i,t))||(!(0!==o||!lp(n,e,i))||!(0!==s||!lp(n,t,i)))))}function lp(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function up(e){return e>0?1:e<0?-1:0}function cp(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&sp(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function hp(e,t){return ap(e.prev,e,e.next)<0?ap(e,t,e.next)>=0&&ap(e,e.prev,t)>=0:ap(e,t,e.prev)<0||ap(e,e.next,t)<0}function dp(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}function fp(e,t){var n=new mp(e.i,e.x,e.y),i=new mp(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function pp(e,t,n,i){var r=new mp(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function vp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function mp(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gp(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}var yp=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],r=[];_p(e),xp(n,e);var a=e.length;t.forEach(_p);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,xp(n,t[o]);for(var s=Uf.triangulate(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}}]),e}();function _p(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function xp(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}t.ShapeUtils=yp;var bp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gf([new ii(.5,.5),new ii(-.5,.5),new ii(-.5,-.5),new ii(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.default)(this,n),e=t.call(this),e.type="ExtrudeGeometry",e.parameters={shapes:i,options:r},i=Array.isArray(i)?i:[i];for(var a=(0,h.default)(e),o=[],s=[],l=0,u=i.length;l<u;l++){var c=i[l];d(c)}function d(e){var t,n,i,l,u,c=[],h=void 0!==r.curveSegments?r.curveSegments:12,d=void 0!==r.steps?r.steps:1,f=void 0!==r.depth?r.depth:1,p=void 0===r.bevelEnabled||r.bevelEnabled,v=void 0!==r.bevelThickness?r.bevelThickness:.2,m=void 0!==r.bevelSize?r.bevelSize:v-.1,g=void 0!==r.bevelOffset?r.bevelOffset:0,y=void 0!==r.bevelSegments?r.bevelSegments:3,_=r.extrudePath,x=void 0!==r.UVGenerator?r.UVGenerator:Mp,b=!1;_&&(t=_.getSpacedPoints(d),b=!0,p=!1,n=_.computeFrenetFrames(d,!1),i=new Di,l=new Di,u=new Di),p||(y=0,v=0,m=0,g=0);var M=e.extractPoints(h),w=M.shape,S=M.holes,A=!yp.isClockWise(w);if(A){w=w.reverse();for(var T=0,C=S.length;T<C;T++){var E=S[T];yp.isClockWise(E)&&(S[T]=E.reverse())}}for(var k=yp.triangulateShape(w,S),L=w,R=0,B=S.length;R<B;R++){var P=S[R];w=w.concat(P)}function I(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var D=w.length,O=k.length;function F(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-s/d,v=t.y+o/d,m=n.x-u/f,g=n.y+l/f,y=((m-p)*u-(g-v)*l)/(o*u-s*l);i=p+o*y-e.x,r=v+s*y-e.y;var _=i*i+r*r;if(_<=2)return new ii(i,r);a=Math.sqrt(_/2)}else{var x=!1;o>Number.EPSILON?l>Number.EPSILON&&(x=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(u)&&(x=!0),x?(i=-s,r=o,a=Math.sqrt(c)):(i=o,r=s,a=Math.sqrt(c/2))}return new ii(i/a,r/a)}for(var N=[],G=0,U=L.length,z=U-1,H=G+1;G<U;G++,z++,H++)z===U&&(z=0),H===U&&(H=0),N[G]=F(L[G],L[z],L[H]);for(var V,W=[],j=N.concat(),J=0,X=S.length;J<X;J++){var q=S[J];V=[];for(var Y=0,Z=q.length,K=Z-1,Q=Y+1;Y<Z;Y++,K++,Q++)K===Z&&(K=0),Q===Z&&(Q=0),V[Y]=F(q[Y],q[K],q[Q]);W.push(V),j=j.concat(V)}for(var $=0;$<y;$++){for(var ee=$/y,te=v*Math.cos(ee*Math.PI/2),ne=m*Math.sin(ee*Math.PI/2)+g,ie=0,re=L.length;ie<re;ie++){var ae=I(L[ie],N[ie],ne);Ie(ae.x,ae.y,-te)}for(var oe=0,se=S.length;oe<se;oe++){var le=S[oe];V=W[oe];for(var ue=0,ce=le.length;ue<ce;ue++){var he=I(le[ue],V[ue],ne);Ie(he.x,he.y,-te)}}}for(var de=m+g,fe=0;fe<D;fe++){var pe=p?I(w[fe],j[fe],de):w[fe];b?(l.copy(n.normals[0]).multiplyScalar(pe.x),i.copy(n.binormals[0]).multiplyScalar(pe.y),u.copy(t[0]).add(l).add(i),Ie(u.x,u.y,u.z)):Ie(pe.x,pe.y,0)}for(var ve=1;ve<=d;ve++)for(var me=0;me<D;me++){var ge=p?I(w[me],j[me],de):w[me];b?(l.copy(n.normals[ve]).multiplyScalar(ge.x),i.copy(n.binormals[ve]).multiplyScalar(ge.y),u.copy(t[ve]).add(l).add(i),Ie(u.x,u.y,u.z)):Ie(ge.x,ge.y,f/d*ve)}for(var ye=y-1;ye>=0;ye--){for(var _e=ye/y,xe=v*Math.cos(_e*Math.PI/2),be=m*Math.sin(_e*Math.PI/2)+g,Me=0,we=L.length;Me<we;Me++){var Se=I(L[Me],N[Me],be);Ie(Se.x,Se.y,f+xe)}for(var Ae=0,Te=S.length;Ae<Te;Ae++){var Ce=S[Ae];V=W[Ae];for(var Ee=0,ke=Ce.length;Ee<ke;Ee++){var Le=I(Ce[Ee],V[Ee],be);b?Ie(Le.x,Le.y+t[d-1].y,t[d-1].x+xe):Ie(Le.x,Le.y,f+xe)}}}function Re(){var e=o.length/3;if(p){for(var t=0,n=D*t,i=0;i<O;i++){var r=k[i];De(r[2]+n,r[1]+n,r[0]+n)}t=d+2*y,n=D*t;for(var s=0;s<O;s++){var l=k[s];De(l[0]+n,l[1]+n,l[2]+n)}}else{for(var u=0;u<O;u++){var c=k[u];De(c[2],c[1],c[0])}for(var h=0;h<O;h++){var f=k[h];De(f[0]+D*d,f[1]+D*d,f[2]+D*d)}}a.addGroup(e,o.length/3-e,0)}function Be(){var e=o.length/3,t=0;Pe(L,t),t+=L.length;for(var n=0,i=S.length;n<i;n++){var r=S[n];Pe(r,t),t+=r.length}a.addGroup(e,o.length/3-e,1)}function Pe(e,t){var n=e.length;while(--n>=0){var i=n,r=n-1;r<0&&(r=e.length-1);for(var a=0,o=d+2*y;a<o;a++){var s=D*a,l=D*(a+1),u=t+i+s,c=t+r+s,h=t+r+l,f=t+i+l;Oe(u,c,h,f)}}}function Ie(e,t,n){c.push(e),c.push(t),c.push(n)}function De(e,t,n){Fe(e),Fe(t),Fe(n);var i=o.length/3,r=x.generateTopUV(a,o,i-3,i-2,i-1);Ne(r[0]),Ne(r[1]),Ne(r[2])}function Oe(e,t,n,i){Fe(e),Fe(t),Fe(i),Fe(t),Fe(n),Fe(i);var r=o.length/3,s=x.generateSideWallUV(a,o,r-6,r-3,r-2,r-1);Ne(s[0]),Ne(s[1]),Ne(s[3]),Ne(s[1]),Ne(s[2]),Ne(s[3])}function Fe(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function Ne(e){s.push(e.x),s.push(e.y)}Re(),Be()}return e.setAttribute("position",new la(o,3)),e.setAttribute("uv",new la(s,2)),e.computeVertexNormals(),e}return(0,g.default)(n,[{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes,i=this.parameters.options;return wp(t,i,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new Sf[s.type]).fromJSON(s)),new n(i,e.options)}}]),n}(ga);t.ExtrudeGeometry=bp;var Mp={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new ii(a,o),new ii(s,l),new ii(u,c)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new ii(o,1-l),new ii(u,1-h),new ii(d,1-p),new ii(v,1-g)]:[new ii(s,1-l),new ii(c,1-h),new ii(f,1-p),new ii(m,1-g)]}};function wp(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}var Sp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return e=t.call(this,o,s,i,r),e.type="IcosahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Bf);t.IcosahedronGeometry=Sp;var Ap=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return e=t.call(this,a,o,i,r),e.type="OctahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Bf);t.OctahedronGeometry=Ap;var Tp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="RingGeometry",e.parameters={innerRadius:i,outerRadius:r,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a),o=Math.max(1,o);for(var u=[],c=[],h=[],d=[],f=i,p=(r-i)/o,v=new Di,g=new ii,y=0;y<=o;y++){for(var _=0;_<=a;_++){var x=s+_/a*l;v.x=f*Math.cos(x),v.y=f*Math.sin(x),c.push(v.x,v.y,v.z),h.push(0,0,1),g.x=(v.x/r+1)/2,g.y=(v.y/r+1)/2,d.push(g.x,g.y)}f+=p}for(var b=0;b<o;b++)for(var M=b*(a+1),w=0;w<a;w++){var S=w+M,A=S,T=S+a+1,C=S+a+2,E=S+1;u.push(A,T,E),u.push(T,C,E)}return e.setIndex(u),e.setAttribute("position",new la(c,3)),e.setAttribute("normal",new la(h,3)),e.setAttribute("uv",new la(d,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(ga);t.RingGeometry=Tp;var Cp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gf([new ii(0,.5),new ii(-.5,-.5),new ii(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,m.default)(this,n),e=t.call(this),e.type="ShapeGeometry",e.parameters={shapes:i,curveSegments:r};var a=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(i))d(i);else for(var h=0;h<i.length;h++)d(i[h]),e.addGroup(u,c,h),u+=c,c=0;function d(e){var t=o.length/3,n=e.extractPoints(r),i=n.shape,u=n.holes;!1===yp.isClockWise(i)&&(i=i.reverse());for(var h=0,d=u.length;h<d;h++){var f=u[h];!0===yp.isClockWise(f)&&(u[h]=f.reverse())}for(var p=yp.triangulateShape(i,u),v=0,m=u.length;v<m;v++){var g=u[v];i=i.concat(g)}for(var y=0,_=i.length;y<_;y++){var x=i[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var b=0,M=p.length;b<M;b++){var w=p[b],S=w[0]+t,A=w[1]+t,T=w[2]+t;a.push(S,A,T),c+=3}}return e.setIndex(a),e.setAttribute("position",new la(o,3)),e.setAttribute("normal",new la(s,3)),e.setAttribute("uv",new la(l,2)),e}return(0,g.default)(n,[{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes;return Ep(t,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}return new n(i,e.curveSegments)}}]),n}(ga);function Ep(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}t.ShapeGeometry=Cp;var kp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="SphereGeometry",e.parameters={radius:i,widthSegments:r,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u},r=Math.max(3,Math.floor(r)),a=Math.max(2,Math.floor(a));for(var c=Math.min(l+u,Math.PI),h=0,d=[],f=new Di,p=new Di,v=[],g=[],y=[],_=[],x=0;x<=a;x++){var b=[],M=x/a,w=0;0==x&&0==l?w=.5/r:x==a&&c==Math.PI&&(w=-.5/r);for(var S=0;S<=r;S++){var A=S/r;f.x=-i*Math.cos(o+A*s)*Math.sin(l+M*u),f.y=i*Math.cos(l+M*u),f.z=i*Math.sin(o+A*s)*Math.sin(l+M*u),g.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),_.push(A+w,1-M),b.push(h++)}d.push(b)}for(var T=0;T<a;T++)for(var C=0;C<r;C++){var E=d[T][C+1],k=d[T][C],L=d[T+1][C],R=d[T+1][C+1];(0!==T||l>0)&&v.push(E,k,R),(T!==a-1||c<Math.PI)&&v.push(k,L,R)}return e.setIndex(v),e.setAttribute("position",new la(g,3)),e.setAttribute("normal",new la(y,3)),e.setAttribute("uv",new la(_,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(ga);t.SphereGeometry=kp;var Lp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return e=t.call(this,a,o,i,r),e.type="TetrahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Bf);t.TetrahedronGeometry=Lp;var Rp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="TorusGeometry",e.parameters={radius:i,tube:r,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],u=[],c=[],h=[],d=new Di,f=new Di,p=new Di,v=0;v<=a;v++)for(var g=0;g<=o;g++){var y=g/o*s,_=v/a*Math.PI*2;f.x=(i+r*Math.cos(_))*Math.cos(y),f.y=(i+r*Math.cos(_))*Math.sin(y),f.z=r*Math.sin(_),u.push(f.x,f.y,f.z),d.x=i*Math.cos(y),d.y=i*Math.sin(y),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(g/o),h.push(v/a)}for(var x=1;x<=a;x++)for(var b=1;b<=o;b++){var M=(o+1)*x+b-1,w=(o+1)*(x-1)+b-1,S=(o+1)*(x-1)+b,A=(o+1)*x+b;l.push(M,w,A),l.push(w,S,A)}return e.setIndex(l),e.setAttribute("position",new la(u,3)),e.setAttribute("normal",new la(c,3)),e.setAttribute("uv",new la(h,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(ga);t.TorusGeometry=Rp;var Bp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,m.default)(this,n),e=t.call(this),e.type="TorusKnotGeometry",e.parameters={radius:i,tube:r,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var u=[],c=[],h=[],d=[],f=new Di,p=new Di,v=new Di,g=new Di,y=new Di,_=new Di,x=new Di,b=0;b<=a;++b){var M=b/a*s*Math.PI*2;P(M,s,l,i,v),P(M+.01,s,l,i,g),_.subVectors(g,v),x.addVectors(g,v),y.crossVectors(_,x),x.crossVectors(y,_),y.normalize(),x.normalize();for(var w=0;w<=o;++w){var S=w/o*Math.PI*2,A=-r*Math.cos(S),T=r*Math.sin(S);f.x=v.x+(A*x.x+T*y.x),f.y=v.y+(A*x.y+T*y.y),f.z=v.z+(A*x.z+T*y.z),c.push(f.x,f.y,f.z),p.subVectors(f,v).normalize(),h.push(p.x,p.y,p.z),d.push(b/a),d.push(w/o)}}for(var C=1;C<=a;C++)for(var E=1;E<=o;E++){var k=(o+1)*(C-1)+(E-1),L=(o+1)*C+(E-1),R=(o+1)*C+E,B=(o+1)*(C-1)+E;u.push(k,L,B),u.push(L,R,B)}function P(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}return e.setIndex(u),e.setAttribute("position",new la(c,3)),e.setAttribute("normal",new la(h,3)),e.setAttribute("uv",new la(d,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(ga);t.TorusKnotGeometry=Bp;var Pp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mf(new Di(-1,-1,0),new Di(-1,1,0),new Di(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,m.default)(this,n),e=t.call(this),e.type="TubeGeometry",e.parameters={path:i,tubularSegments:r,radius:a,radialSegments:o,closed:s};var l=i.computeFrenetFrames(r,s);e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals;var u=new Di,c=new Di,h=new ii,d=new Di,f=[],p=[],v=[],g=[];function y(){for(var e=0;e<r;e++)_(e);_(!1===s?r:0),b(),x()}function _(e){d=i.getPointAt(e/r,d);for(var t=l.normals[e],n=l.binormals[e],s=0;s<=o;s++){var h=s/o*Math.PI*2,v=Math.sin(h),m=-Math.cos(h);c.x=m*t.x+v*n.x,c.y=m*t.y+v*n.y,c.z=m*t.z+v*n.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=d.x+a*c.x,u.y=d.y+a*c.y,u.z=d.z+a*c.z,f.push(u.x,u.y,u.z)}}function x(){for(var e=1;e<=r;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),i=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;g.push(n,i,s),g.push(i,a,s)}}function b(){for(var e=0;e<=r;e++)for(var t=0;t<=o;t++)h.x=e/r,h.y=t/o,v.push(h.x,h.y)}return y(),e.setIndex(g),e.setAttribute("position",new la(f,3)),e.setAttribute("normal",new la(p,3)),e.setAttribute("uv",new la(v,2)),e}return(0,g.default)(n,[{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new Sf[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(ga);t.TubeGeometry=Pp;var Ip=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,m.default)(this,n),e=t.call(this),e.type="WireframeGeometry",e.parameters={geometry:i},null!==i){var r=[],a=new Set,o=new Di,s=new Di;if(null!==i.index){var l=i.attributes.position,u=i.index,c=i.groups;0===c.length&&(c=[{start:0,count:u.count,materialIndex:0}]);for(var h=0,d=c.length;h<d;++h)for(var f=c[h],p=f.start,v=f.count,g=p,y=p+v;g<y;g+=3)for(var _=0;_<3;_++){var x=u.getX(g+_),b=u.getX(g+(_+1)%3);o.fromBufferAttribute(l,x),s.fromBufferAttribute(l,b),!0===Dp(o,s,a)&&(r.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z))}}else for(var M=i.attributes.position,w=0,S=M.count/3;w<S;w++)for(var A=0;A<3;A++){var T=3*w+A,C=3*w+(A+1)%3;o.fromBufferAttribute(M,T),s.fromBufferAttribute(M,C),!0===Dp(o,s,a)&&(r.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z))}e.setAttribute("position",new la(r,3))}return e}return n}(ga);function Dp(e,t,n){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}t.WireframeGeometry=Ip;var Op=Object.freeze({__proto__:null,BoxGeometry:Na,CapsuleGeometry:Ef,CircleGeometry:kf,ConeGeometry:Rf,CylinderGeometry:Lf,DodecahedronGeometry:Pf,EdgesGeometry:Nf,ExtrudeGeometry:bp,IcosahedronGeometry:Sp,LatheGeometry:Cf,OctahedronGeometry:Ap,PlaneGeometry:uo,PolyhedronGeometry:Bf,RingGeometry:Tp,ShapeGeometry:Cp,SphereGeometry:kp,TetrahedronGeometry:Lp,TorusGeometry:Rp,TorusKnotGeometry:Bp,TubeGeometry:Pp,WireframeGeometry:Ip}),Fp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isShadowMaterial=!0,i.type="ShadowMaterial",i.color=new bi(0),i.transparent=!0,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(Yr);t.ShadowMaterial=Fp;var Np=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.isRawShaderMaterial=!0,i.type="RawShaderMaterial",i}return n}(Ja);t.RawShaderMaterial=Np;var Gp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshStandardMaterial=!0,i.defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new bi(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new bi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshStandardMaterial=Gp;var Up=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshPhysicalMaterial=!0,i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new ii(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty((0,h.default)(i),"reflectivity",{get:function(){return Dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),i.iridescenceMap=null,i.iridescenceIOR=1.3,i.iridescenceThicknessRange=[100,400],i.iridescenceThicknessMap=null,i.sheenColor=new bi(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=1/0,i.attenuationColor=new bi(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new bi(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._iridescence=0,i._transmission=0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=(0,a.default)(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}}]),n}(Gp);t.MeshPhysicalMaterial=Up;var zp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshPhongMaterial=!0,i.type="MeshPhongMaterial",i.color=new bi(16777215),i.specular=new bi(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new bi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=le,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshPhongMaterial=zp;var Hp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshToonMaterial=!0,i.defines={TOON:""},i.type="MeshToonMaterial",i.color=new bi(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new bi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yr);t.MeshToonMaterial=Hp;var Vp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshNormalMaterial=!0,i.type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.flatShading=!1,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Yr);t.MeshNormalMaterial=Vp;var Wp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshLambertMaterial=!0,i.type="MeshLambertMaterial",i.color=new bi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new bi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=le,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshLambertMaterial=Wp;var jp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshMatcapMaterial=!0,i.defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new bi(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshMatcapMaterial=jp;var Jp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isLineDashedMaterial=!0,i.type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Ed);function Xp(e,t,n){return Yp(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function qp(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Yp(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zp(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(t),i}function Kp(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r}function Qp(e,t,n,i){var r=1,a=e[0];while(void 0!==a&&void 0===a[i])a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}function $p(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var f=l.times[d]*r;if(!(f<n||f>=i)){c.push(l.times[d]);for(var p=0;p<u;++p)h.push(l.values[d*u+p])}}0!==c.length&&(l.times=qp(c,l.times.constructor),l.values=qp(h,l.values.constructor),o.push(l))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a}function ev(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var r=n.tracks.length,a=t/i,o=function(t){var i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)return"continue";var o=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===o)return"continue";var s=0,l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);var u=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var h=i.times.length-1,d=void 0;if(a<=i.times[0]){var f=s,p=l-s;d=Xp(i.values,f,p)}else if(a>=i.times[h]){var v=h*l+s,m=v+l-s;d=Xp(i.values,v,m)}else{var g=i.createInterpolant(),y=s,_=l-s;g.evaluate(a),d=Xp(g.resultBuffer,y,_)}if("quaternion"===r){var x=(new Ii).fromArray(d).normalize().conjugate();x.toArray(d)}for(var b=o.times.length,M=0;M<b;++M){var w=M*c+u;if("quaternion"===r)Ii.multiplyQuaternionsFlat(o.values,w,d,0,o.values,w);else for(var S=c-2*u,A=0;A<S;++A)o.values[w+A]-=d[A]}},s=0;s<r;++s)o(s);return e.blendMode=zt,e}t.LineDashedMaterial=Jp;var tv=Object.freeze({__proto__:null,arraySlice:Xp,convertArray:qp,isTypedArray:Yp,getKeyframeOrder:Zp,sortedArray:Kp,flattenJSON:Qp,subclip:$p,makeClipAdditive:ev});t.AnimationUtils=tv;var nv=function(){function e(t,n,i,r){(0,m.default)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return(0,g.default)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}while(n<a){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();t.Interpolant=nv;var iv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){var o;return(0,m.default)(this,n),o=t.call(this,e,i,r,a),o._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Ft,endingEnd:Ft},o}return(0,g.default)(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case Nt:r=e,o=2*t-n;break;case Gt:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Nt:a=e,s=2*n-t;break;case Gt:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,v=p*f,m=-h*v+2*h*p-h*f,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,_=d*v-d*p,x=0;x!==o;++x)r[x]=m*a[u+x]+g*a[l+x]+y*a[s+x]+_*a[c+x];return r}}]),n}(nv);t.CubicInterpolant=iv;var rv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),t.call(this,e,i,r,a)}return(0,g.default)(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(i-t),c=1-u,h=0;h!==o;++h)r[h]=a[l+h]*c+a[s+h]*u;return r}}]),n}(nv);t.LinearInterpolant=rv;var av=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),t.call(this,e,i,r,a)}return(0,g.default)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(nv);t.DiscreteInterpolant=av;var ov=function(){function e(t,n,i,r){if((0,m.default)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=qp(n,this.TimeBufferType),this.values=qp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return(0,g.default)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new av(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new rv(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new iv(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case It:t=this.InterpolantFactoryMethodDiscrete;break;case Dt:t=this.InterpolantFactoryMethodLinear;break;case Ot:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return It;case this.InterpolantFactoryMethodLinear:return Dt;case this.InterpolantFactoryMethodSmooth:return Ot}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){var n=this.times,i=n.length,r=0,a=i-1;while(r!==i&&n[r]<e)++r;while(-1!==a&&n[a]>t)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=Xp(n,r,a),this.values=Xp(this.values,r*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&Yp(i))for(var l=0,u=i.length;l!==u;++l){var c=i[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Xp(this.times),t=Xp(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ot,r=e.length-1,a=1,o=1;o<r;++o){var s=!1,l=e[o],u=e[o+1];if(l!==u&&(1!==o||l!==e[0]))if(i)s=!0;else for(var c=o*n,h=c-n,d=c+n,f=0;f!==n;++f){var p=t[c+f];if(p!==t[h+f]||p!==t[d+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var v=o*n,m=a*n,g=0;g!==n;++g)t[m+g]=t[v+g]}++a}}if(r>0){e[a]=e[r];for(var y=r*n,_=a*n,x=0;x!==n;++x)t[_+x]=t[y+x];++a}return a!==e.length?(this.times=Xp(e,0,a),this.values=Xp(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Xp(this.times,0),t=Xp(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:qp(e.times,Array),values:qp(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();t.KeyframeTrack=ov,ov.prototype.TimeBufferType=Float32Array,ov.prototype.ValueBufferType=Float32Array,ov.prototype.DefaultInterpolation=Dt;var sv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ov);t.BooleanKeyframeTrack=sv,sv.prototype.ValueTypeName="bool",sv.prototype.ValueBufferType=Array,sv.prototype.DefaultInterpolation=It,sv.prototype.InterpolantFactoryMethodLinear=void 0,sv.prototype.InterpolantFactoryMethodSmooth=void 0;var lv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ov);t.ColorKeyframeTrack=lv,lv.prototype.ValueTypeName="color";var uv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ov);t.NumberKeyframeTrack=uv,uv.prototype.ValueTypeName="number";var cv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),t.call(this,e,i,r,a)}return(0,g.default)(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t),l=e*o,u=l+o;l!==u;l+=4)Ii.slerpFlat(r,0,a,l-o,a,l,s);return r}}]),n}(nv);t.QuaternionLinearInterpolant=cv;var hv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new cv(this.times,this.values,this.getValueSize(),e)}}]),n}(ov);t.QuaternionKeyframeTrack=hv,hv.prototype.ValueTypeName="quaternion",hv.prototype.DefaultInterpolation=Dt,hv.prototype.InterpolantFactoryMethodSmooth=void 0;var dv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ov);t.StringKeyframeTrack=dv,dv.prototype.ValueTypeName="string",dv.prototype.ValueBufferType=Array,dv.prototype.DefaultInterpolation=It,dv.prototype.InterpolantFactoryMethodLinear=void 0,dv.prototype.InterpolantFactoryMethodSmooth=void 0;var fv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ov);t.VectorKeyframeTrack=fv,fv.prototype.ValueTypeName="vector";var pv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ut;(0,m.default)(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=In(),this.duration<0&&this.resetDuration()}return(0,g.default)(e,[{key:"resetDuration",value:function(){for(var e=this.tracks,t=0,n=0,i=e.length;n!==i;++n){var r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(mv(n[r]).scale(i));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,a=n.length;r!==a;++r)t.push(ov.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=Zp(s);s=Kp(s,1,u),l=Kp(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new uv(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var h=[];for(var d in i)h.push(this.CreateFromMorphTargetSequence(d,i[d],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];Qp(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var y=c[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}i.push(new uv(".morphTargetInfluence["+p+"]",v,m))}s=h.length*a}else{var _=".bones["+t[u].name+"]";n(fv,_+".position",c,"pos",i),n(hv,_+".quaternion",c,"rot",i),n(fv,_+".scale",c,"scl",i)}}if(0===i.length)return null;var x=new this(r,s,i,o);return x}}]),e}();function vv(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return uv;case"vector":case"vector2":case"vector3":case"vector4":return fv;case"color":return lv;case"quaternion":return hv;case"bool":case"boolean":return sv;case"string":return dv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function mv(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=vv(e.type);if(void 0===e.times){var n=[],i=[];Qp(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}t.AnimationClip=pv;var gv={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};t.Cache=gv;var yv=function e(t,n,i){(0,m.default)(this,e);var r=this,a=!1,o=0,s=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var i=u[t],r=u[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}};t.LoadingManager=yv;var _v=new yv;t.DefaultLoadingManager=_v;var xv=function(){function e(t){(0,m.default)(this,e),this.manager=void 0!==t?t:_v,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,g.default)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();t.Loader=xv;var bv={},Mv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e),r.response=i,r}return n}((0,r.default)(Error)),wv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=gv.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===bv[e]){bv[e]=[],bv[e].push({onLoad:t,onProgress:n,onError:i});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=bv[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){function t(){i.read().then((function(i){var r=i.done,l=i.value;if(r)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var d=n[c];d.onProgress&&d.onProgress(u)}e.enqueue(l),t()}}))}t()}});return new Response(l)}throw new Mv('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){var t=new DOMParser;return t.parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i,n=t.exec(s),i=n&&n[1]?n[1].toLowerCase():void 0,r=new TextDecoder(i);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){gv.add(e,t);var n=bv[e];delete bv[e];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=bv[e];if(void 0===n)throw r.manager.itemError(e),t;delete bv[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e)})).finally((function(){r.manager.itemEnd(e)})),this.manager.itemStart(e)}else bv[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(xv);t.FileLoader=wv;var Sv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new wv(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=pv.parse(e[n]);t.push(i)}return t}}]),n}(xv);t.AnimationLoader=Sv;var Av=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=[],o=new qd,s=new wv(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);var l=0;function u(u){s.load(e[u],(function(e){var n=r.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=Re),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)u(c);else s.load(e,(function(e){var n=r.parse(e,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Re),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o}}]),n}(xv);t.CompressedTextureLoader=Av;var Tv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=gv.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o=ui("img");function s(){u(),gv.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){u(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}]),n}(xv);t.ImageLoader=Tv;var Cv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=new Qa,a=new Tv(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,o++,6===o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)s(l);return r}}]),n}(xv);t.CubeTextureLoader=Cv;var Ev=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new gd,o=new wv(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,(function(e){var n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Se,a.wrapT=void 0!==n.wrapT?n.wrapT:Se,a.magFilter=void 0!==n.magFilter?n.magFilter:Re,a.minFilter=void 0!==n.minFilter?n.minFilter:Re,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Ie),1===n.mipmapCount&&(a.minFilter=Re),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}]),n}(xv);t.DataTextureLoader=Ev;var kv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=new Ti,a=new Tv(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}]),n}(xv);t.TextureLoader=kv;var Lv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,m.default)(this,n),i=t.call(this),i.isLight=!0,i.type="Light",i.color=new bi(e),i.intensity=r,i}return(0,g.default)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Or);t.Light=Lv;var Rv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,e,r),a.isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Or.DefaultUp),a.updateMatrix(),a.groundColor=new bi(i),a}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(Lv);t.HemisphereLight=Rv;var Bv=new hr,Pv=new Di,Iv=new Di,Dv=function(){function e(t){(0,m.default)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ii(512,512),this.map=null,this.mapPass=null,this.matrix=new hr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oo,this._frameExtents=new ii(1,1),this._viewportCount=1,this._viewports=[new Ci(0,0,1,1)]}return(0,g.default)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Pv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Pv),Iv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Iv),t.updateMatrixWorld(),Bv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Bv)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Ov=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this,new qa(50,1,.5,500)),e.isSpotLightShadow=!0,e.focus=1,e}return(0,g.default)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*Pn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;i===t.fov&&r===t.aspect&&a===t.far||(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),(0,u.default)((0,c.default)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Dv),Fv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return(0,m.default)(this,n),r=t.call(this,e,i),r.isSpotLight=!0,r.type="SpotLight",r.position.copy(Or.DefaultUp),r.updateMatrix(),r.target=new Or,r.distance=a,r.angle=o,r.penumbra=s,r.decay=l,r.map=null,r.shadow=new Ov,r}return(0,g.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}]),n}(Lv);t.SpotLight=Fv;var Nv=new hr,Gv=new Di,Uv=new Di,zv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this,new qa(90,1,.5,500)),e.isPointLightShadow=!0,e._frameExtents=new ii(4,2),e._viewportCount=6,e._viewports=[new Ci(2,1,1,1),new Ci(0,1,1,1),new Ci(3,1,1,1),new Ci(1,1,1,1),new Ci(3,0,1,1),new Ci(1,0,1,1)],e._cubeDirections=[new Di(1,0,0),new Di(-1,0,0),new Di(0,0,1),new Di(0,0,-1),new Di(0,1,0),new Di(0,-1,0)],e._cubeUps=[new Di(0,1,0),new Di(0,1,0),new Di(0,1,0),new Di(0,1,0),new Di(0,0,1),new Di(0,0,-1)],e}return(0,g.default)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Gv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Gv),Uv.copy(n.position),Uv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Uv),n.updateMatrixWorld(),i.makeTranslation(-Gv.x,-Gv.y,-Gv.z),Nv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nv)}}]),n}(Dv),Hv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return(0,m.default)(this,n),r=t.call(this,e,i),r.isPointLight=!0,r.type="PointLight",r.distance=a,r.decay=o,r.shadow=new zv,r}return(0,g.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}]),n}(Lv);t.PointLight=Hv;var Vv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this,new $l(-5,5,5,-5,.5,500)),e.isDirectionalLightShadow=!0,e}return n}(Dv),Wv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(Or.DefaultUp),r.updateMatrix(),r.target=new Or,r.shadow=new Vv,r}return(0,g.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Lv);t.DirectionalLight=Wv;var jv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isAmbientLight=!0,r.type="AmbientLight",r}return n}(Lv);t.AmbientLight=jv;var Jv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,m.default)(this,n),r=t.call(this,e,i),r.isRectAreaLight=!0,r.type="RectAreaLight",r.width=a,r.height=o,r}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}},{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}}]),n}(Lv);t.RectAreaLight=Jv;var Xv=function(){function e(){(0,m.default)(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Di)}return(0,g.default)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}]),e}();t.SphericalHarmonics3=Xv;var qv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xv,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,m.default)(this,n),e=t.call(this,void 0,r),e.isLightProbe=!0,e.sh=i,e}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Lv);t.LightProbe=qv;var Yv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.textures={},i}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new wv(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new bi).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=i(o.value);break;case"c":r.uniforms[a].value=(new bi).setHex(o.value);break;case"v2":r.uniforms[a].value=(new ii).fromArray(o.value);break;case"v3":r.uniforms[a].value=(new Di).fromArray(o.value);break;case"v4":r.uniforms[a].value=(new Ci).fromArray(o.value);break;case"m3":r.uniforms[a].value=(new ri).fromArray(o.value);break;case"m4":r.uniforms[a].value=(new hr).fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.matcap&&(r.matcap=i(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var l=e.normalScale;!1===Array.isArray(l)&&(l=[l,l]),r.normalScale=(new ii).fromArray(l)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new ii).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){var t={ShadowMaterial:Fp,SpriteMaterial:Jh,RawShaderMaterial:Np,ShaderMaterial:Ja,PointsMaterial:Gd,MeshPhysicalMaterial:Up,MeshStandardMaterial:Gp,MeshPhongMaterial:zp,MeshToonMaterial:Hp,MeshNormalMaterial:Vp,MeshLambertMaterial:Wp,MeshDepthMaterial:xh,MeshDistanceMaterial:bh,MeshBasicMaterial:Zr,MeshMatcapMaterial:jp,LineDashedMaterial:Jp,LineBasicMaterial:Ed,Material:Yr};return new t[e]}}]),n}(xv);t.MaterialLoader=Yv;var Zv=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(r){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}();t.LoaderUtils=Zv;var Kv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(ga);t.InstancedBufferGeometry=Kv;var Qv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new wv(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,n){if(void 0!==t[n])return t[n];var i=e.interleavedBuffers,a=i[n],o=r(e,a.buffer),s=li(a.type,o),l=new Hh(s,a.stride);return l.uuid=a.uuid,t[n]=l,l}function r(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}var a=e.isInstancedBufferGeometry?new Kv:new ga,o=e.data.index;if(void 0!==o){var s=li(o.type,o.array);a.setIndex(new $r(s,1))}var l=e.data.attributes;for(var u in l){var c=l[u],h=void 0;if(c.isInterleavedBufferAttribute){var d=i(e.data,c.data);h=new Wh(d,c.itemSize,c.offset,c.normalized)}else{var f=li(c.type,c.array),p=c.isInstancedBufferAttribute?bd:$r;h=new p(f,c.itemSize,c.normalized)}void 0!==c.name&&(h.name=c.name),void 0!==c.usage&&h.setUsage(c.usage),void 0!==c.updateRange&&(h.updateRange.offset=c.updateRange.offset,h.updateRange.count=c.updateRange.count),a.setAttribute(u,h)}var v=e.data.morphAttributes;if(v)for(var m in v){for(var g=v[m],y=[],_=0,x=g.length;_<x;_++){var b=g[_],M=void 0;if(b.isInterleavedBufferAttribute){var w=i(e.data,b.data);M=new Wh(w,b.itemSize,b.offset,b.normalized)}else{var S=li(b.type,b.array);M=new $r(S,b.itemSize,b.normalized)}void 0!==b.name&&(M.name=b.name),y.push(M)}a.morphAttributes[m]=y}var A=e.data.morphTargetsRelative;A&&(a.morphTargetsRelative=!0);var T=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==T)for(var C=0,E=T.length;C!==E;++C){var k=T[C];a.addGroup(k.start,k.count,k.materialIndex)}var L=e.data.boundingSphere;if(void 0!==L){var R=new Di;void 0!==L.center&&R.fromArray(L.center),a.boundingSphere=new nr(R,L.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}]),n}(xv);t.BufferGeometryLoader=Qv;var $v=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=""===this.path?Zv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new wv(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(a,t)}),n,i)}},{key:"loadAsync",value:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t,n){var i,r,a,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this,r=""===this.path?Zv.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||r,a=new wv(this.manager),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),l=s.metadata,void 0!==l&&void 0!==l.type&&"geometry"!==l.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,i.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){var c=!1;for(var h in a)if(a[h].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(l)}return l}},{key:"parseAsync",value:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){var n,i,r,a,o,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,s,o,n),u=this.parseSkeletons(t.skeletons,l),this.bindSkeletons(l,u),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new Gf).fromJSON(e[n]);t[r.uuid]=r}return t}},{key:"parseSkeletons",value:function(e,t){var n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=(new xd).fromJSON(e[r],i);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var i=new Qv,r=0,a=e.length;r<a;r++){var o=void 0,s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;default:s.type in Op?o=Op[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},i={};if(void 0!==e){var r=new Yv;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var i=e[n],r=pv.parse(i);t[r.uuid]=r}return t}},{key:"parseImages",value:function(e,t){var n,i=this,r={};function a(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}function o(e){if("string"===typeof e){var t=e,n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t;return a(n)}return e.data?{data:li(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var s=new yv(t);n=new Tv(s),n.setCrossOrigin(this.crossOrigin);for(var l=0,u=e.length;l<u;l++){var c=e[l],h=c.url;if(Array.isArray(h)){for(var d=[],f=0,p=h.length;f<p;f++){var v=h[f],m=o(v);null!==m&&(m instanceof HTMLImageElement?d.push(m):d.push(new gd(m.data,m.width,m.height)))}r[c.uuid]=new wi(d)}else{var g=o(c.url);r[c.uuid]=new wi(g)}}}return r}},{key:"parseImagesAsync",value:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){var n,i,r,a,s,l,u,c,h,d,f,p,v,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=function(){return s=(0,o.default)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return i=t,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:n.resourcePath+i,e.next=5,r.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:li(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},a=function(e){return s.apply(this,arguments)},n=this,i={},!(void 0!==t&&t.length>0)){e.next=33;break}r=new Tv(this.manager),r.setCrossOrigin(this.crossOrigin),l=0,u=t.length;case 8:if(!(l<u)){e.next=33;break}if(c=t[l],h=c.url,!Array.isArray(h)){e.next=26;break}d=[],f=0,p=h.length;case 14:if(!(f<p)){e.next=23;break}return v=h[f],e.next=18,a(v);case 18:m=e.sent,null!==m&&(m instanceof HTMLImageElement?d.push(m):d.push(new gd(m.data,m.width,m.height)));case 20:f++,e.next=14;break;case 23:i[c.uuid]=new wi(d),e.next=30;break;case 26:return e.next=28,a(c.url);case 28:g=e.sent,i[c.uuid]=new wi(g);case 30:l++,e.next=8;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],l=s.data,u=void 0;Array.isArray(l)?(u=new Qa,6===l.length&&(u.needsUpdate=!0)):(u=l&&l.data?new gd:new Ti,l&&(u.needsUpdate=!0)),u.source=s,u.uuid=o.uuid,void 0!==o.name&&(u.name=o.name),void 0!==o.mapping&&(u.mapping=n(o.mapping,tm)),void 0!==o.offset&&u.offset.fromArray(o.offset),void 0!==o.repeat&&u.repeat.fromArray(o.repeat),void 0!==o.center&&u.center.fromArray(o.center),void 0!==o.rotation&&(u.rotation=o.rotation),void 0!==o.wrap&&(u.wrapS=n(o.wrap[0],nm),u.wrapT=n(o.wrap[1],nm)),void 0!==o.format&&(u.format=o.format),void 0!==o.type&&(u.type=o.type),void 0!==o.encoding&&(u.encoding=o.encoding),void 0!==o.minFilter&&(u.minFilter=n(o.minFilter,im)),void 0!==o.magFilter&&(u.magFilter=n(o.magFilter,im)),void 0!==o.anisotropy&&(u.anisotropy=o.anisotropy),void 0!==o.flipY&&(u.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(u.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(u.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(u.userData=o.userData),i[o.uuid]=u}return i}},{key:"parseObject",value:function(e,t,n,i,r){var a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new zh,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new bi(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Uh(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Gh(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":a=new qa(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new $l(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new jv(e.color,e.intensity);break;case"DirectionalLight":a=new Wv(e.color,e.intensity);break;case"PointLight":a=new Hv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Jv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Fv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Rv(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new qv).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=u(e.material),a=new vd(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=u(e.material),a=new Da(o,s);break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);var h=e.count,d=e.instanceMatrix,f=e.instanceColor;a=new Cd(o,s,h),a.instanceMatrix=new bd(new Float32Array(d.array),16),void 0!==f&&(a.instanceColor=new bd(new Float32Array(f.array),f.itemSize));break;case"LOD":a=new ud;break;case"Line":a=new Id(l(e.geometry),u(e.material));break;case"LineLoop":a=new Nd(l(e.geometry),u(e.material));break;case"LineSegments":a=new Fd(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new Wd(l(e.geometry),u(e.material));break;case"Sprite":a=new ad(u(e.material));break;case"Group":a=new kh;break;case"Bone":a=new md;break;default:a=new Or}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,n,i,r));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];a.animations.push(r[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var _=e.levels,x=0;x<_.length;x++){var b=_[x],M=a.getObjectByProperty("uuid",b.object);void 0!==M&&a.addLevel(M,b.distance,b.hysteresis)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(xv);t.ObjectLoader=$v;var em,tm={UVMapping:ge,CubeReflectionMapping:ye,CubeRefractionMapping:_e,EquirectangularReflectionMapping:xe,EquirectangularRefractionMapping:be,CubeUVReflectionMapping:Me},nm={RepeatWrapping:we,ClampToEdgeWrapping:Se,MirroredRepeatWrapping:Ae},im={NearestFilter:Te,NearestMipmapNearestFilter:Ce,NearestMipmapLinearFilter:ke,LinearFilter:Re,LinearMipmapNearestFilter:Be,LinearMipmapLinearFilter:Ie},rm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return(0,g.default)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=gv.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){gv.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}]),n}(xv);t.ImageBitmapLoader=rm;var am=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"getContext",value:function(){return void 0===em&&(em=new(window.AudioContext||window.webkitAudioContext)),em}},{key:"setContext",value:function(e){em=e}}]),e}();t.AudioContext=am;var om=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new wv(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0),o=am.getContext();o.decodeAudioData(a,(function(e){t(e)}))}catch(s){i?i(s):console.error(s),r.manager.itemError(e)}}),n,i)}}]),n}(xv);t.AudioLoader=om;var sm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,m.default)(this,n),r=t.call(this,void 0,a),r.isHemisphereLightProbe=!0;var o=(new bi).set(e),s=(new bi).set(i),l=new Di(o.r,o.g,o.b),u=new Di(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return r.sh.coefficients[0].copy(l).add(u).multiplyScalar(c),r.sh.coefficients[1].copy(l).sub(u).multiplyScalar(h),r}return n}(qv);t.HemisphereLightProbe=sm;var lm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,m.default)(this,n),i=t.call(this,void 0,r),i.isAmbientLightProbe=!0;var a=(new bi).set(e);return i.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return n}(qv);t.AmbientLightProbe=lm;var um=new hr,cm=new hr,hm=new hr,dm=function(){function e(){(0,m.default)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,g.default)(e,[{key:"update",value:function(e){var t=this._cache,n=t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep;if(n){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hm.copy(e.projectionMatrix);var i,r,a=t.eyeSep/2,o=a*t.near/t.focus,s=t.near*Math.tan(Bn*t.fov*.5)/t.zoom;cm.elements[12]=-a,um.elements[12]=a,i=-s*t.aspect+o,r=s*t.aspect+o,hm.elements[0]=2*t.near/(r-i),hm.elements[8]=(r+i)/(r-i),this.cameraL.projectionMatrix.copy(hm),i=-s*t.aspect-o,r=s*t.aspect-o,hm.elements[0]=2*t.near/(r-i),hm.elements[8]=(r+i)/(r-i),this.cameraR.projectionMatrix.copy(hm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(um)}}]),e}();t.StereoCamera=dm;var fm=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,m.default)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,g.default)(e,[{key:"start",value:function(){this.startTime=pm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=pm();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function pm(){return("undefined"===typeof performance?Date:performance).now()}t.Clock=fm;var vm=new Di,mm=new Ii,gm=new Di,ym=new Di,_m=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.type="AudioListener",e.context=am.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new fm,e}return(0,g.default)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vm,mm,gm),ym.set(0,0,-1).applyQuaternion(mm),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vm.x,r),t.positionY.linearRampToValueAtTime(vm.y,r),t.positionZ.linearRampToValueAtTime(vm.z,r),t.forwardX.linearRampToValueAtTime(ym.x,r),t.forwardY.linearRampToValueAtTime(ym.y,r),t.forwardZ.linearRampToValueAtTime(ym.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(vm.x,vm.y,vm.z),t.setOrientation(ym.x,ym.y,ym.z,i.x,i.y,i.z)}}]),n}(Or);t.AudioListener=_m;var xm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return(0,g.default)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Or);t.Audio=xm;var bm=new Di,Mm=new Ii,wm=new Di,Sm=new Di,Am=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return(0,g.default)(n,[{key:"disconnect",value:function(){(0,u.default)((0,c.default)(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if((0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(bm,Mm,wm),Sm.set(0,0,1).applyQuaternion(Mm);var t=this.panner;if(t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bm.x,i),t.positionY.linearRampToValueAtTime(bm.y,i),t.positionZ.linearRampToValueAtTime(bm.z,i),t.orientationX.linearRampToValueAtTime(Sm.x,i),t.orientationY.linearRampToValueAtTime(Sm.y,i),t.orientationZ.linearRampToValueAtTime(Sm.z,i)}else t.setPosition(bm.x,bm.y,bm.z),t.setOrientation(Sm.x,Sm.y,Sm.z)}}}]),n}(xm);t.PositionalAudio=Am;var Tm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,m.default)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,g.default)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}();t.AudioAnalyser=Tm;var Cm=function(){function e(t,n,i){var r,a,o;switch((0,m.default)(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,g.default)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=t*this._origIndex;this._mixBufferRegion(n,i,s,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,i){Ii.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,r){var a=this._workIndex*r;Ii.multiplyQuaternionsFlat(e,a,e,t,e,n),Ii.slerpFlat(e,t,e,t,e,a,i)}},{key:"_lerp",value:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,r){for(var a=0;a!==r;++a){var o=t+a;e[o]=e[o]+e[n+a]*i}}}]),e}();t.PropertyMixer=Cm;var Em="\\[\\]\\.:\\/",km=new RegExp("["+Em+"]","g"),Lm="[^"+Em+"]",Rm="[^"+Em.replace("\\.","")+"]",Bm=/((?:WC+[\/:])*)/.source.replace("WC",Lm),Pm=/(WCOD+)?/.source.replace("WCOD",Rm),Im=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Lm),Dm=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Lm),Om=new RegExp("^"+Bm+Pm+Im+Dm+"$"),Fm=["material","materials","bones","map"],Nm=function(){function e(t,n,i){(0,m.default)(this,e);var r=i||Gm.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,r)}return(0,g.default)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),Gm=function(){function e(t,n,i){(0,m.default)(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,g.default)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[r];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(km,"")}},{key:"parseTrackName",value:function(e){var t=Om.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Fm.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}}]),e}();t.PropertyBinding=Gm,Gm.Composite=Nm,Gm.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gm.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gm.prototype.GetterByBindingType=[Gm.prototype._getValue_direct,Gm.prototype._getValue_array,Gm.prototype._getValue_arrayElement,Gm.prototype._getValue_toArray],Gm.prototype.SetterByBindingTypeAndVersioning=[[Gm.prototype._setValue_direct,Gm.prototype._setValue_direct_setNeedsUpdate,Gm.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gm.prototype._setValue_array,Gm.prototype._setValue_array_setNeedsUpdate,Gm.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gm.prototype._setValue_arrayElement,Gm.prototype._setValue_arrayElement_setNeedsUpdate,Gm.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gm.prototype._setValue_fromArray,Gm.prototype._setValue_fromArray_setNeedsUpdate,Gm.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Um=function(){function e(){(0,m.default)(this,e),this.isAnimationObjectGroup=!0,this.uuid=In(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}return(0,g.default)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=t[d];if(void 0===f){f=s++,t[d]=f,e.push(h);for(var p=0,v=a;p!==v;++p)r[p].push(new Gm(h,n[p],i[p]))}else if(f<l){o=e[f];var m=--l,g=e[m];t[g.uuid]=f,e[f]=g,t[d]=m,e[m]=h;for(var y=0,_=a;y!==_;++y){var x=r[y],b=x[m],M=x[f];x[f]=b,void 0===M&&(M=new Gm(h,n[y],i[y])),x[m]=M}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=t[l];if(void 0!==u&&u>=r){var c=r++,h=e[c];t[h.uuid]=u,e[u]=h,t[l]=c,e[c]=s;for(var d=0,f=i;d!==f;++d){var p=n[d],v=p[c],m=p[u];p[u]=v,p[c]=m}}}this.nCachedObjects_=r}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=t[u];if(void 0!==c)if(delete t[u],c<r){var h=--r,d=e[h],f=--a,p=e[f];t[d.uuid]=c,e[c]=d,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=i;v!==m;++v){var g=n[v],y=g[h],_=g[f];g[c]=y,g[h]=_,g.pop()}}else{var x=--a,b=e[x];x>0&&(t[b.uuid]=c),e[c]=b,e.pop();for(var M=0,w=i;M!==w;++M){var S=n[M];S[c]=S[x],S.pop()}}}this.nCachedObjects_=r}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new Gm(f,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}]),e}();t.AnimationObjectGroup=Um;var zm=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,m.default)(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:Ft,endingEnd:Ft},u=0;u!==o;++u){var c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Bt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,g.default)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case zt:for(var c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);break;case Ut:default:for(var d=0,f=l.length;d!==f;++d)l[d].evaluate(o),u[d].accumulate(i,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,a=n===Pt;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===Rt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=Nt,i.endingEnd=Nt):(i.endingStart=e?this.zeroSlopeAtStart?Nt:Ft:Gt,i.endingEnd=t?this.zeroSlopeAtEnd?Nt:Ft:Gt)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}]),e}(),Hm=new Float32Array(1),Vm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return(0,g.default)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],d=h.name,f=u[d];if(void 0!==f)++f.referenceCount,a[c]=f;else{if(f=a[c],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;f=new Cm(Gm.create(n,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;var c=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new rv(new Float32Array(2),new Float32Array(2),1,Hm),n.__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,r=i.uuid,a="string"===typeof e?pv.findByName(i,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:Ut),void 0!==s){var u=s.actionByRoot[r];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new zm(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?pv.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions,n=t-1;n>=0;--n)e[n].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s._update(i,e,r,a)}for(var l=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)l[c].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,a=r[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(kn);t.AnimationMixer=Vm;var Wm=function(){function e(t){(0,m.default)(this,e),this.value=t}return(0,g.default)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();t.Uniform=Wm;var jm=0,Jm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isUniformsGroup=!0,Object.defineProperty((0,h.default)(e),"id",{value:jm++}),e.name="",e.usage=gn,e.uniforms=[],e}return(0,g.default)(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(kn);t.UniformsGroup=Jm;var Xm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.default)(this,n),r=t.call(this,e,i),r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=a,r}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Hh);t.InstancedInterleavedBuffer=Xm;var qm=function(){function e(t,n,i,r,a){(0,m.default)(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}return(0,g.default)(e,[{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();t.GLBufferAttribute=qm;var Ym=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,m.default)(this,e),this.ray=new cr(t,n),this.near=i,this.far=r,this.camera=null,this.layers=new Mr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,g.default)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Km(e,this,n,t),n.sort(Zm),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=e.length;i<r;i++)Km(e[i],this,n,t);return n.sort(Zm),n}}]),e}();function Zm(e,t){return e.distance-t.distance}function Km(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,a=0,o=r.length;a<o;a++)Km(r[a],t,n,!0)}t.Raycaster=Ym;var Qm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,m.default)(this,e),this.radius=t,this.phi=n,this.theta=i,this}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Dn(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Spherical=Qm;var $m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,m.default)(this,e),this.radius=t,this.theta=n,this.y=i,this}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Cylindrical=$m;var eg=new ii,tg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii(-1/0,-1/0);(0,m.default)(this,e),this.isBox2=!0,this.min=t,this.max=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=eg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=eg.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();t.Box2=tg;var ng=new Di,ig=new Di,rg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di;(0,m.default)(this,e),this.start=t,this.end=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){ng.subVectors(e,this.start),ig.subVectors(this.end,this.start);var n=ig.dot(ig),i=ig.dot(ng),r=i/n;return t&&(r=Dn(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Line3=rg;var ag=new Di,og=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;(0,m.default)(this,n),r=t.call(this),r.light=e,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i,r.type="SpotLightHelper";for(var a=new ga,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1,u=32;s<u;s++,l++){var c=s/u*Math.PI*2,h=l/u*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}a.setAttribute("position",new la(o,3));var d=new Ed({fog:!1,toneMapped:!1});return r.cone=new Fd(a,d),r.add(r.cone),r.update(),r}return(0,g.default)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ag.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ag),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Or);t.SpotLightHelper=og;var sg=new Di,lg=new hr,ug=new hr,cg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;(0,m.default)(this,n);for(var r=hg(e),a=new ga,o=[],s=[],l=new bi(0,0,1),u=new bi(0,1,0),c=0;c<r.length;c++){var h=r[c];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(u.r,u.g,u.b))}a.setAttribute("position",new la(o,3)),a.setAttribute("color",new la(s,3));var d=new Ed({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return i=t.call(this,a,d),i.isSkeletonHelper=!0,i.type="SkeletonHelper",i.root=e,i.bones=r,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return(0,g.default)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,i=this.geometry,r=i.getAttribute("position");ug.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(lg.multiplyMatrices(ug,s.matrixWorld),sg.setFromMatrixPosition(lg),r.setXYZ(o,sg.x,sg.y,sg.z),lg.multiplyMatrices(ug,s.parent.matrixWorld),sg.setFromMatrixPosition(lg),r.setXYZ(o+1,sg.x,sg.y,sg.z),o+=2)}i.getAttribute("position").needsUpdate=!0,(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);function hg(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,hg(e.children[n]));return t}t.SkeletonHelper=cg;var dg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n);var o=new kp(i,4,2),s=new Zr({wireframe:!0,fog:!1,toneMapped:!1});return a=t.call(this,o,s),a.light=e,a.color=r,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,g.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Da);t.PointLightHelper=dg;var fg=new Di,pg=new bi,vg=new bi,mg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this),a.light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,a.type="HemisphereLightHelper";var o=new Ap(i);o.rotateY(.5*Math.PI),a.material=new Zr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),l=new Float32Array(3*s.count);return o.setAttribute("color",new $r(l,3)),a.add(new Da(o,a.material)),a.update(),a}return(0,g.default)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");pg.copy(this.light.color),vg.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?pg:vg;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(fg.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Or);t.HemisphereLightHelper=mg;var gg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,m.default)(this,n),a=new bi(a),o=new bi(o);for(var s=r/2,l=i/r,u=i/2,c=[],h=[],d=0,f=0,p=-u;d<=r;d++,p+=l){c.push(-u,0,p,u,0,p),c.push(p,0,-u,p,0,u);var v=d===s?a:o;v.toArray(h,f),f+=3,v.toArray(h,f),f+=3,v.toArray(h,f),f+=3,v.toArray(h,f),f+=3}var g=new ga;g.setAttribute("position",new la(c,3)),g.setAttribute("color",new la(h,3));var y=new Ed({vertexColors:!0,toneMapped:!1});return e=t.call(this,g,y),e.type="GridHelper",e}return(0,g.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);t.GridHelper=gg;var yg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,m.default)(this,n),s=new bi(s),l=new bi(l);var u=[],c=[];if(r>1)for(var h=0;h<r;h++){var d=h/r*(2*Math.PI),f=Math.sin(d)*i,p=Math.cos(d)*i;u.push(0,0,0),u.push(f,0,p);var v=1&h?s:l;c.push(v.r,v.g,v.b),c.push(v.r,v.g,v.b)}for(var g=0;g<a;g++)for(var y=1&g?s:l,_=i-i/a*g,x=0;x<o;x++){var b=x/o*(2*Math.PI),M=Math.sin(b)*_,w=Math.cos(b)*_;u.push(M,0,w),c.push(y.r,y.g,y.b),b=(x+1)/o*(2*Math.PI),M=Math.sin(b)*_,w=Math.cos(b)*_,u.push(M,0,w),c.push(y.r,y.g,y.b)}var S=new ga;S.setAttribute("position",new la(u,3)),S.setAttribute("color",new la(c,3));var A=new Ed({vertexColors:!0,toneMapped:!1});return e=t.call(this,S,A),e.type="PolarGridHelper",e}return(0,g.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);t.PolarGridHelper=yg;var _g=new Di,xg=new Di,bg=new Di,Mg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this),a.light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,a.type="DirectionalLightHelper",void 0===i&&(i=1);var o=new ga;o.setAttribute("position",new la([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var s=new Ed({fog:!1,toneMapped:!1});return a.lightPlane=new Id(o,s),a.add(a.lightPlane),o=new ga,o.setAttribute("position",new la([0,0,0,0,0,1],3)),a.targetLine=new Id(o,s),a.add(a.targetLine),a.update(),a}return(0,g.default)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_g.setFromMatrixPosition(this.light.matrixWorld),xg.setFromMatrixPosition(this.light.target.matrixWorld),bg.subVectors(xg,_g),this.lightPlane.lookAt(xg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xg),this.targetLine.scale.z=bg.length()}}]),n}(Or);t.DirectionalLightHelper=Mg;var wg=new Di,Sg=new Xa,Ag=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;(0,m.default)(this,n);var r=new ga,a=new Ed({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={};function u(e,t){c(e),c(t)}function c(e){o.push(0,0,0),s.push(0,0,0),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4"),r.setAttribute("position",new la(o,3)),r.setAttribute("color",new la(s,3)),i=t.call(this,r,a),i.type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=l,i.update();var h=new bi(16755200),d=new bi(16711680),f=new bi(43775),p=new bi(16777215),v=new bi(3355443);return i.setColors(h,d,f,p,v),i}return(0,g.default)(n,[{key:"setColors",value:function(e,t,n,i,r){var a=this.geometry,o=a.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap,n=1,i=1;Sg.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Tg("c",t,e,Sg,0,0,-1),Tg("t",t,e,Sg,0,0,1),Tg("n1",t,e,Sg,-n,-i,-1),Tg("n2",t,e,Sg,n,-i,-1),Tg("n3",t,e,Sg,-n,i,-1),Tg("n4",t,e,Sg,n,i,-1),Tg("f1",t,e,Sg,-n,-i,1),Tg("f2",t,e,Sg,n,-i,1),Tg("f3",t,e,Sg,-n,i,1),Tg("f4",t,e,Sg,n,i,1),Tg("u1",t,e,Sg,.7*n,1.1*i,-1),Tg("u2",t,e,Sg,.7*-n,1.1*i,-1),Tg("u3",t,e,Sg,0,2*i,-1),Tg("cf1",t,e,Sg,-n,0,1),Tg("cf2",t,e,Sg,n,0,1),Tg("cf3",t,e,Sg,0,-i,1),Tg("cf4",t,e,Sg,0,i,1),Tg("cn1",t,e,Sg,-n,0,-1),Tg("cn2",t,e,Sg,n,0,-1),Tg("cn3",t,e,Sg,0,-i,-1),Tg("cn4",t,e,Sg,0,i,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);function Tg(e,t,n,i,r,a,o){wg.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],wg.x,wg.y,wg.z)}t.CameraHelper=Ag;var Cg=new Ni,Eg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,m.default)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new ga;return s.setIndex(new $r(a,1)),s.setAttribute("position",new $r(o,3)),i=t.call(this,s,new Ed({color:r,toneMapped:!1})),i.object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return(0,g.default)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Cg.setFromObject(this.object),!Cg.isEmpty()){var t=Cg.min,n=Cg.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);t.BoxHelper=Eg;var kg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,m.default)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ga;return s.setIndex(new $r(a,1)),s.setAttribute("position",new la(o,3)),i=t.call(this,s,new Ed({color:r,toneMapped:!1})),i.box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return(0,g.default)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);t.Box3Helper=kg;var Lg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,m.default)(this,n);var o=a,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ga;l.setAttribute("position",new la(s,3)),l.computeBoundingSphere(),i=t.call(this,l,new Ed({color:o,toneMapped:!1})),i.type="PlaneHelper",i.plane=e,i.size=r;var u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new ga;return c.setAttribute("position",new la(u,3)),c.computeBoundingSphere(),i.add(new Da(c,new Zr({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return(0,g.default)(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),n}(Id);t.PlaneHelper=Lg;var Rg,Bg,Pg=new Di,Ig=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Di(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Di(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return(0,m.default)(this,n),e=t.call(this),e.type="ArrowHelper",void 0===Rg&&(Rg=new ga,Rg.setAttribute("position",new la([0,0,0,0,1,0],3)),Bg=new Lf(0,.5,1,5,1),Bg.translate(0,-.5,0)),e.position.copy(r),e.line=new Id(Rg,new Ed({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Da(Bg,new Zr({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(i),e.setLength(a,s,l),e}return(0,g.default)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Pg.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Pg,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),n}(Or);t.ArrowHelper=Ig;var Dg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,m.default)(this,n);var r=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new ga;o.setAttribute("position",new la(r,3)),o.setAttribute("color",new la(a,3));var s=new Ed({vertexColors:!0,toneMapped:!1});return e=t.call(this,o,s),e.type="AxesHelper",e}return(0,g.default)(n,[{key:"setColors",value:function(e,t,n){var i=new bi,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Fd);t.AxesHelper=Dg;var Og=function(){function e(){(0,m.default)(this,e),this.type="ShapePath",this.color=new bi,this.subPaths=[],this.currentPath=null}return(0,g.default)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new Tf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new Gf;a.curves=r.curves,t.push(a)}return t}function n(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[r],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var i,r,a,o=yp.isClockWise,s=this.subPaths;if(0===s.length)return[];var l=[];if(1===s.length)return r=s[0],a=new Gf,a.curves=r.curves,l.push(a),l;var u=!o(s[0].getPoints());u=e?!u:u;var c,h,d=[],f=[],p=[],v=0;f[v]=void 0,p[v]=[];for(var m=0,g=s.length;m<g;m++)r=s[m],c=r.getPoints(),i=o(c),i=e?!i:i,i?(!u&&f[v]&&v++,f[v]={s:new Gf,p:c},f[v].s.curves=r.curves,u&&v++,p[v]=[]):p[v].push({h:r,p:c[0]});if(!f[0])return t(s);if(f.length>1){for(var y=!1,_=0,x=0,b=f.length;x<b;x++)d[x]=[];for(var M=0,w=f.length;M<w;M++)for(var S=p[M],A=0;A<S.length;A++){for(var T=S[A],C=!0,E=0;E<f.length;E++)n(T.p,f[E].p)&&(M!==E&&_++,C?(C=!1,d[E].push(T)):y=!0);C&&d[M].push(T)}_>0&&!1===y&&(p=d)}for(var k=0,L=f.length;k<L;k++){a=f[k].s,l.push(a),h=p[k];for(var R=0,B=h.length;R<B;R++)a.holes.push(h[R].h)}return l}}]),e}();t.ShapePath=Og;var Fg=Ng();function Ng(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(i[a]=0,i[256|a]=32768,r[a]=24,r[256|a]=24):o<-14?(i[a]=1024>>-o-14,i[256|a]=1024>>-o-14|32768,r[a]=-o-1,r[256|a]=-o-1):o<=15?(i[a]=o+15<<10,i[256|a]=o+15<<10|32768,r[a]=13,r[256|a]=13):o<128?(i[a]=31744,i[256|a]=64512,r[a]=24,r[256|a]=24):(i[a]=31744,i[256|a]=64512,r[a]=13,r[256|a]=13)}for(var s=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64),c=1;c<1024;++c){var h=c<<13,d=0;while(0===(8388608&h))h<<=1,d-=8388608;h&=-8388609,d+=947912704,s[c]=h|d}for(var f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(var p=1;p<31;++p)l[p]=p<<23;l[31]=1199570944,l[32]=2147483648;for(var v=33;v<63;++v)l[v]=2147483648+(v-32<<23);l[63]=3347054592;for(var m=1;m<64;++m)32!==m&&(u[m]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:l,offsetTable:u}}function Gg(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Dn(e,-65504,65504),Fg.floatView[0]=e;var t=Fg.uint32View[0],n=t>>23&511;return Fg.baseTable[n]+((8388607&t)>>Fg.shiftTable[n])}function Ug(e){var t=e>>10;return Fg.uint32View[0]=Fg.mantissaTable[Fg.offsetTable[t]+(1023&e)]+Fg.exponentTable[t],Fg.floatView[0]}var zg=Object.freeze({__proto__:null,toHalfFloat:Gg,fromHalfFloat:Ug});function Hg(){console.error("THREE.ImmediateRenderObject has been removed.")}t.DataUtils=zg;var Vg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),a=t.call(this,e,i,r),a.samples=4,a}return n}(Ei);t.WebGLMultisampleRenderTarget=Vg;var Wg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,i,r,a)}return n}(ki);t.DataTexture2DArray=Wg;var jg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,i,r,a)}return n}(Ri);t.DataTexture3D=jg;var Jg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){return(0,m.default)(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,i,r,a,o,s)}return n}(Na);t.BoxBufferGeometry=Jg;var Xg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,i,r,a)}return n}(Ef);t.CapsuleBufferGeometry=Xg;var qg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,i,r,a)}return n}(kf);t.CircleBufferGeometry=qg;var Yg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l){return(0,m.default)(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,i,r,a,o,s,l)}return n}(Rf);t.ConeBufferGeometry=Yg;var Zg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u){return(0,m.default)(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,i,r,a,o,s,l,u)}return n}(Lf);t.CylinderBufferGeometry=Zg;var Kg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,i)}return n}(Pf);t.DodecahedronBufferGeometry=Kg;var Qg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,i)}return n}(bp);t.ExtrudeBufferGeometry=Qg;var $g=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,i)}return n}(Sp);t.IcosahedronBufferGeometry=$g;var ey=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,i,r,a)}return n}(Cf);t.LatheBufferGeometry=ey;var ty=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,i)}return n}(Ap);t.OctahedronBufferGeometry=ty;var ny=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,i,r,a)}return n}(uo);t.PlaneBufferGeometry=ny;var iy=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,i,r,a)}return n}(Bf);t.PolyhedronBufferGeometry=iy;var ry=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){return(0,m.default)(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,i,r,a,o,s)}return n}(Tp);t.RingBufferGeometry=ry;var ay=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,i)}return n}(Cp);t.ShapeBufferGeometry=ay;var oy=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l){return(0,m.default)(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,i,r,a,o,s,l)}return n}(kp);t.SphereBufferGeometry=oy;var sy=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,i)}return n}(Lp);t.TetrahedronBufferGeometry=sy;var ly=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o){return(0,m.default)(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,i,r,a,o)}return n}(Rp);t.TorusBufferGeometry=ly;var uy=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){return(0,m.default)(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,i,r,a,o,s)}return n}(Bp);t.TorusKnotBufferGeometry=uy;var cy=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o){return(0,m.default)(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,i,r,a,o)}return n}(Pp);t.TubeBufferGeometry=cy,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:y}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=y)},"762f":function(e,t,n){var i=n("26b0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("2ef6c9bc",i,!0,{sourceMap:!1,shadowMode:!1})},"7e73":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-2f0e5305], uni-scroll-view[data-v-2f0e5305], uni-swiper-item[data-v-2f0e5305]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-line[data-v-2f0e5305]{vertical-align:middle}',""]),e.exports=t},"7e84":function(e,t,n){"use strict";function i(e){return t.default=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}n("3410"),n("131a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"7ea7":function(e,t,n){var i=n("b6cd");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("820d3b50",i,!0,{sourceMap:!1,shadowMode:!1})},"7f22":function(e,t,n){"use strict";n.r(t);var i=n("441f"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"7fdb":function(e,t,n){"use strict";var i=n("4ea4");n("caad"),n("c975"),n("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("3e32")),a=i(n("b903")),o={name:"u-icon",data:function(){return{}},mixins:[uni.$u.mpMixin,uni.$u.mixin,a.default],computed:{uClasses:function(){var e=[];return e.push(this.customPrefix+"-"+this.name),this.color&&uni.$u.config.type.includes(this.color)&&e.push("u-icon__icon--"+this.color),e},iconStyle:function(){var e={};return e={fontSize:uni.$u.addUnit(this.size),lineHeight:uni.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:uni.$u.addUnit(this.top)},this.color&&!uni.$u.config.type.includes(this.color)&&(e.color=this.color),e},isImg:function(){return-1!==this.name.indexOf("/")},imgStyle:function(){var e={};return e.width=this.width?uni.$u.addUnit(this.width):uni.$u.addUnit(this.size),e.height=this.height?uni.$u.addUnit(this.height):uni.$u.addUnit(this.size),e},icon:function(){return r.default["uicon-"+this.name]||this.name}},methods:{clickHandler:function(e){this.$emit("click",this.index),this.stop&&this.preventEvent(e)}}};t.default=o},"7fe6":function(e,t,n){"use strict";var i=n("7ea7"),r=n.n(i);r.a},"82da":function(e,t,n){var i=n("23e7"),r=n("ebb5"),a=r.NATIVE_ARRAY_BUFFER_VIEWS;i({target:"ArrayBuffer",stat:!0,forced:!a},{isView:r.isView})},"842c":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("v-uni-view",{staticClass:"u-loading-icon",class:[e.vertical&&"u-loading-icon--vertical"],style:[e.$u.addStyle(e.customStyle)]},[e.webviewHide?e._e():n("v-uni-view",{ref:"ani",staticClass:"u-loading-icon__spinner",class:["u-loading-icon__spinner--"+e.mode],style:{color:e.color,width:e.$u.addUnit(e.size),height:e.$u.addUnit(e.size),borderTopColor:e.color,borderBottomColor:e.otherBorderColor,borderLeftColor:e.otherBorderColor,borderRightColor:e.otherBorderColor,"animation-duration":e.duration+"ms","animation-timing-function":"semicircle"===e.mode||"circle"===e.mode?e.timingFunction:""}},["spinner"===e.mode?e._l(e.array12,(function(e,t){return n("v-uni-view",{key:t,staticClass:"u-loading-icon__dot"})})):e._e()],2),e.text?n("v-uni-text",{staticClass:"u-loading-icon__text",style:{fontSize:e.$u.addUnit(e.textSize),color:e.textColor}},[e._v(e._s(e.text))]):e._e()],1):e._e()},a=[]},"84c3":function(e,t,n){var i=n("74e8");i("Uint16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},"893b":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{bgColor:{type:String,default:uni.$u.props.gap.bgColor},height:{type:[String,Number],default:uni.$u.props.gap.height},marginTop:{type:[String,Number],default:uni.$u.props.gap.marginTop},marginBottom:{type:[String,Number],default:uni.$u.props.gap.marginBottom}}};t.default=i},"8b05":function(e,t,n){"use strict";var i=n("4b21"),r=n.n(i);r.a},"8b09":function(e,t,n){var i=n("74e8");i("Int16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},"8ba4":function(e,t,n){var i=n("23e7"),r=n("5e89");i({target:"Number",stat:!0},{isInteger:r})},9072:function(e,t,n){"use strict";n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(n("7e84")),r=s(n("b380")),a=s(n("fa95")),o=s(n("4478"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var n="function"===typeof Map?new Map:void 0;return t.default=l=function(e){if(null===e||!(0,a.default)(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return(0,o.default)(e,arguments,(0,i.default)(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),(0,r.default)(t,e)},l(e)}},"90a9":function(e,t,n){var i=n("5622");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("ded68ba4",i,!0,{sourceMap:!1,shadowMode:!1})},"90d7":function(e,t,n){var i=n("23e7"),r=Math.log,a=Math.LN2;i({target:"Math",stat:!0},{log2:function(e){return r(e)/a}})},"90f8":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-a75f7a08], uni-scroll-view[data-v-a75f7a08], uni-swiper-item[data-v-a75f7a08]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}\r\n/**\r\n * vue版本动画内置的动画模式有如下：\r\n * fade：淡入\r\n * zoom：缩放\r\n * fade-zoom：缩放淡入\r\n * fade-up：上滑淡入\r\n * fade-down：下滑淡入\r\n * fade-left：左滑淡入\r\n * fade-right：右滑淡入\r\n * slide-up：上滑进入\r\n * slide-down：下滑进入\r\n * slide-left：左滑进入\r\n * slide-right：右滑进入\r\n */.u-fade-enter-active[data-v-a75f7a08],\r\n.u-fade-leave-active[data-v-a75f7a08]{transition-property:opacity}.u-fade-enter[data-v-a75f7a08],\r\n.u-fade-leave-to[data-v-a75f7a08]{opacity:0}.u-fade-zoom-enter[data-v-a75f7a08],\r\n.u-fade-zoom-leave-to[data-v-a75f7a08]{-webkit-transform:scale(.95);transform:scale(.95);opacity:0}.u-fade-zoom-enter-active[data-v-a75f7a08],\r\n.u-fade-zoom-leave-active[data-v-a75f7a08]{transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform}.u-fade-down-enter-active[data-v-a75f7a08],\r\n.u-fade-down-leave-active[data-v-a75f7a08],\r\n.u-fade-left-enter-active[data-v-a75f7a08],\r\n.u-fade-left-leave-active[data-v-a75f7a08],\r\n.u-fade-right-enter-active[data-v-a75f7a08],\r\n.u-fade-right-leave-active[data-v-a75f7a08],\r\n.u-fade-up-enter-active[data-v-a75f7a08],\r\n.u-fade-up-leave-active[data-v-a75f7a08]{transition-property:opacity,-webkit-transform;transition-property:opacity,transform;transition-property:opacity,transform,-webkit-transform}.u-fade-up-enter[data-v-a75f7a08],\r\n.u-fade-up-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);opacity:0}.u-fade-down-enter[data-v-a75f7a08],\r\n.u-fade-down-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0);opacity:0}.u-fade-left-enter[data-v-a75f7a08],\r\n.u-fade-left-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);opacity:0}.u-fade-right-enter[data-v-a75f7a08],\r\n.u-fade-right-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);opacity:0}.u-slide-down-enter-active[data-v-a75f7a08],\r\n.u-slide-down-leave-active[data-v-a75f7a08],\r\n.u-slide-left-enter-active[data-v-a75f7a08],\r\n.u-slide-left-leave-active[data-v-a75f7a08],\r\n.u-slide-right-enter-active[data-v-a75f7a08],\r\n.u-slide-right-leave-active[data-v-a75f7a08],\r\n.u-slide-up-enter-active[data-v-a75f7a08],\r\n.u-slide-up-leave-active[data-v-a75f7a08]{transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform}.u-slide-up-enter[data-v-a75f7a08],\r\n.u-slide-up-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.u-slide-down-enter[data-v-a75f7a08],\r\n.u-slide-down-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}.u-slide-left-enter[data-v-a75f7a08],\r\n.u-slide-left-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.u-slide-right-enter[data-v-a75f7a08],\r\n.u-slide-right-leave-to[data-v-a75f7a08]{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.u-zoom-enter-active[data-v-a75f7a08],\r\n.u-zoom-leave-active[data-v-a75f7a08]{transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform}.u-zoom-enter[data-v-a75f7a08],\r\n.u-zoom-leave-to[data-v-a75f7a08]{-webkit-transform:scale(.95);transform:scale(.95)}',""]),e.exports=t},"912d":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-line",style:[e.lineStyle]})},a=[]},9334:function(e,t,n){"use strict";n.r(t);var i=n("b3f0"),r=n("136f");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("7fe6");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"b2a05bc2",null,!1,i["a"],o);t["default"]=l.exports},"93cb":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{duration:{type:Number,default:uni.$u.props.tabs.duration},list:{type:Array,default:uni.$u.props.tabs.list},lineColor:{type:String,default:uni.$u.props.tabs.lineColor},activeStyle:{type:[String,Object],default:uni.$u.props.tabs.activeStyle},inactiveStyle:{type:[String,Object],default:uni.$u.props.tabs.inactiveStyle},lineWidth:{type:[String,Number],default:uni.$u.props.tabs.lineWidth},lineHeight:{type:[String,Number],default:uni.$u.props.tabs.lineHeight},lineBgSize:{type:String,default:uni.$u.props.tabs.lineBgSize},itemStyle:{type:[String,Object],default:uni.$u.props.tabs.itemStyle},scrollable:{type:Boolean,default:uni.$u.props.tabs.scrollable},current:{type:[Number,String],default:uni.$u.props.tabs.current},keyName:{type:String,default:uni.$u.props.tabs.keyName}}};t.default=i},"949e":function(e,t,n){"use strict";n.r(t);var i=n("dfe9"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},9839:function(e,t,n){"use strict";n.r(t);var i=n("12c4"),r=n("adeb");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("8b05");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"19bb1078",null,!1,i["a"],o);t["default"]=l.exports},"99de":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(n("53ca")),r=a(n("257e"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return!t||"object"!==(0,i.default)(t)&&"function"!==typeof t?(0,r.default)(e):t}},"9fd0":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-3927d88e], uni-scroll-view[data-v-3927d88e], uni-swiper-item[data-v-3927d88e]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}',""]),e.exports=t},a144:function(e,t,n){"use strict";n.r(t);var i=n("e715"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},a147:function(e,t,n){"use strict";var i=n("4ea4");n("c975"),n("baa5"),n("d81d"),n("fb6a"),n("4e82"),n("ace4"),n("d3b7"),n("25f0"),n("3ca3"),n("cfc3"),n("fd87"),n("8b09"),n("143c"),n("5cc6"),n("84c3"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("10d1"),n("ddb0"),n("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.DRACOLoader=void 0;var r=i(n("d4ec")),a=i(n("bee2")),o=i(n("262e")),s=i(n("2caf")),l=n("74a1"),u=new WeakMap,c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var i;return(0,r.default)(this,n),i=t.call(this,e),i.decoderPath="",i.decoderConfig={},i.decoderBinary=null,i.decoderPending=null,i.workerLimit=4,i.workerPool=[],i.workerNextTaskID=1,i.workerSourceURL="",i.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},i}return(0,a.default)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,i){var r=this,a=new l.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){r.decodeDracoFile(e,t).catch(i)}),n,i)}},{key:"decodeDracoFile",value:function(e,t,n,i){var r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,r).then(t)}},{key:"decodeGeometry",value:function(e,t){var n,i=this,r=JSON.stringify(t);if(u.has(e)){var a=u.get(e);if(a.key===r)return a.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var o=this.workerNextTaskID++,s=e.byteLength,l=this._getWorker(o,s).then((function(i){return n=i,new Promise((function(i,r){n._callbacks[o]={resolve:i,reject:r},n.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))})).then((function(e){return i._createGeometry(e.geometry)}));return l.catch((function(){return!0})).then((function(){n&&o&&i._releaseTask(n,o)})),u.set(e,{key:r,promise:l}),l}},{key:"_createGeometry",value:function(e){var t=new l.BufferGeometry;e.index&&t.setIndex(new l.BufferAttribute(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],r=i.name,a=i.array,o=i.itemSize;t.setAttribute(r,new l.BufferAttribute(a,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new l.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,i){n.load(e,t,void 0,i)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var i=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var r=h.toString(),a=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var i=new Worker(n.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:n.decoderConfig}),i.onmessage=function(e){var t=e.data;switch(t.type){case"decode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(i)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var r=n.workerPool[n.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(l.Loader);function h(){var e,t;function n(e,t,n,a){var o,s,l=a.attributeIDs,u=a.attributeTypes,c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,s=t.DecodeBufferToMesh(n,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,s=t.DecodeBufferToPointCloud(n,o)}if(!s.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+s.error_msg());var h={index:null,attributes:[]};for(var d in l){var f=self[u[d]],p=void 0,v=void 0;if(a.useUniqueIDs)v=l[d],p=t.GetAttributeByUniqueId(o,v);else{if(v=t.GetAttributeId(o,e[l[d]]),-1===v)continue;p=t.GetAttribute(o,v)}h.attributes.push(r(e,t,o,d,f,p))}return c===e.TRIANGULAR_MESH&&(h.index=i(e,t,o)),e.destroy(o),h}function i(e,t,n){var i=n.num_faces(),r=3*i,a=4*r,o=e._malloc(a);t.GetTrianglesUInt32Array(n,a,o);var s=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:s,itemSize:1}}function r(e,t,n,i,r,o){var s=o.num_components(),l=n.num_points(),u=l*s,c=u*r.BYTES_PER_ELEMENT,h=a(e,r),d=e._malloc(c);t.GetAttributeDataArrayForAllPoints(n,o,h,c,d);var f=new r(e.HEAPF32.buffer,d,u).slice();return e._free(d),{name:i,array:f,itemSize:s}}function a(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=r.buffer,o=r.taskConfig;t.then((function(e){var t=e.draco,i=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var l=n(t,i,s,o),u=l.attributes.map((function(e){return e.array.buffer}));l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:l},u)}catch(c){console.error(c),self.postMessage({type:"error",id:r.id,error:c.message})}finally{t.destroy(s),t.destroy(i)}}));break}}}t.DRACOLoader=c},a14a:function(e,t,n){"use strict";var i=n("3b31"),r=n.n(i);r.a},a4f5:function(e,t,n){var i=n("90f8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("ef2eaaee",i,!0,{sourceMap:!1,shadowMode:!1})},a695:function(e,t,n){"use strict";n.r(t);var i=n("842c"),r=n("c806");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("373b");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"26861ad0",null,!1,i["a"],o);t["default"]=l.exports},a765:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uLine:n("ba57").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-cell-group",class:[e.customClass],style:[e.$u.addStyle(e.customStyle)]},[e.title?n("v-uni-view",{staticClass:"u-cell-group__title"},[e._t("title",[n("v-uni-text",{staticClass:"u-cell-group__title__text"},[e._v(e._s(e.title))])])],2):e._e(),n("v-uni-view",{staticClass:"u-cell-group__wrapper"},[e.border?n("u-line"):e._e(),e._t("default")],2)],1)},a=[]},a7fa:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-77b16486], uni-scroll-view[data-v-77b16486], uni-swiper-item[data-v-77b16486]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-cell__body[data-v-77b16486]{display:flex;flex-direction:row;box-sizing:border-box;padding:10px 15px;font-size:15px;color:#303133;align-items:center}.u-cell__body__content[data-v-77b16486]{display:flex;flex-direction:row;align-items:center;flex:1}.u-cell__body--large[data-v-77b16486]{padding-top:13px;padding-bottom:13px}.u-cell__left-icon-wrap[data-v-77b16486], .u-cell__right-icon-wrap[data-v-77b16486]{display:flex;flex-direction:row;align-items:center;font-size:16px}.u-cell__left-icon-wrap[data-v-77b16486]{margin-right:4px}.u-cell__right-icon-wrap[data-v-77b16486]{margin-left:4px;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.u-cell__right-icon-wrap--up[data-v-77b16486]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.u-cell__right-icon-wrap--down[data-v-77b16486]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.u-cell__title[data-v-77b16486]{flex:1}.u-cell__title-text[data-v-77b16486]{font-size:15px;line-height:22px;color:#303133}.u-cell__title-text--large[data-v-77b16486]{font-size:16px}.u-cell__label[data-v-77b16486]{margin-top:5px;font-size:12px;color:#909193;line-height:18px}.u-cell__label--large[data-v-77b16486]{font-size:14px}.u-cell__value[data-v-77b16486]{text-align:right;font-size:14px;line-height:24px;color:#606266}.u-cell__value--large[data-v-77b16486]{font-size:15px}.u-cell--clickable[data-v-77b16486]{background-color:#f3f4f6}.u-cell--disabled[data-v-77b16486]{color:#c8c9cc;cursor:not-allowed}.u-cell--center[data-v-77b16486]{align-items:center}',""]),e.exports=t},ac17:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show&&(0!==Number(e.value)||e.showZero||e.isDot)?n("v-uni-text",{staticClass:"u-badge",class:[e.isDot?"u-badge--dot":"u-badge--not-dot",e.inverted&&"u-badge--inverted","horn"===e.shape&&"u-badge--horn","u-badge--"+e.type+(e.inverted?"--inverted":"")],style:[e.$u.addStyle(e.customStyle),e.badgeStyle]},[e._v(e._s(e.isDot?"":e.showValue))]):e._e()},a=[]},acbd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{title:{type:String,default:uni.$u.props.cellGroup.title},border:{type:Boolean,default:uni.$u.props.cellGroup.border}}};t.default=i},ad02:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-19bb1078] .u-cell__title-text{min-width:%?200?%}[data-v-19bb1078] .u-cell__value{text-align:justify;padding:0 %?20?%}[data-v-19bb1078] .uni-page-head__title{color:#3c9cff!important}',""]),e.exports=t},ad5c:function(e,t,n){"use strict";n.r(t);var i=n("cace"),r=n("a144");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("c154");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"58c1703b",null,!1,i["a"],o);t["default"]=l.exports},ad7d:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-58c1703b], uni-scroll-view[data-v-58c1703b], uni-swiper-item[data-v-58c1703b]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-toast__content[data-v-58c1703b]{display:flex;flex-direction:row;padding:12px 20px;border-radius:4px;background-color:#585858;color:#fff;align-items:center;max-width:%?600?%;position:relative}.u-toast__content--loading[data-v-58c1703b]{flex-direction:column;padding:20px 20px}.u-toast__content__text[data-v-58c1703b]{color:#fff;font-size:15px;line-height:15px}.u-toast__content__text--default[data-v-58c1703b]{color:#fff}.u-toast__content__text--error[data-v-58c1703b]{color:#f56c6c}.u-toast__content__text--primary[data-v-58c1703b]{color:#3c9cff}.u-toast__content__text--success[data-v-58c1703b]{color:#5ac725}.u-toast__content__text--warning[data-v-58c1703b]{color:#f9ae3d}.u-type-primary[data-v-58c1703b]{color:#3c9cff;background-color:#ecf5ff;border-color:#d7eafe;border-width:1px}.u-type-success[data-v-58c1703b]{color:#5ac725;background-color:#dbf1e1;border-color:#bef5c8;border-width:1px}.u-type-error[data-v-58c1703b]{color:#f56c6c;background-color:#fef0f0;border-color:#fde2e2;border-width:1px}.u-type-warning[data-v-58c1703b]{color:#f9ae3d;background-color:#fdf6ec;border-color:#faecd8;border-width:1px}.u-type-default[data-v-58c1703b]{color:#fff;background-color:#585858}',""]),e.exports=t},adeb:function(e,t,n){"use strict";n.r(t);var i=n("e4ac"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},b089:function(e,t,n){"use strict";n.r(t);var i=n("d8be"),r=n("7f22");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("bafa");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"77b16486",null,!1,i["a"],o);t["default"]=l.exports},b380:function(e,t,n){"use strict";function i(e,n){return t.default=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,n)}n("131a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},b3f0:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uTransition:n("245e").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("u-transition",{attrs:{show:e.show,"custom-class":"u-overlay",duration:e.duration,"custom-style":e.overlayStyle},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickHandler.apply(void 0,arguments)}}},[e._t("default")],2)},a=[]},b5e1:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-26861ad0], uni-scroll-view[data-v-26861ad0], uni-swiper-item[data-v-26861ad0]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-loading-icon[data-v-26861ad0]{flex-direction:row;align-items:center;justify-content:center;color:#c8c9cc}.u-loading-icon__text[data-v-26861ad0]{margin-left:4px;color:#606266;font-size:14px;line-height:20px}.u-loading-icon__spinner[data-v-26861ad0]{width:30px;height:30px;position:relative;box-sizing:border-box;max-width:100%;max-height:100%;-webkit-animation:u-rotate-data-v-26861ad0 1s linear infinite;animation:u-rotate-data-v-26861ad0 1s linear infinite}.u-loading-icon__spinner--semicircle[data-v-26861ad0]{border-width:2px;border-color:transparent;border-top-right-radius:100px;border-top-left-radius:100px;border-bottom-left-radius:100px;border-bottom-right-radius:100px;border-style:solid}.u-loading-icon__spinner--circle[data-v-26861ad0]{border-top-right-radius:100px;border-top-left-radius:100px;border-bottom-left-radius:100px;border-bottom-right-radius:100px;border-width:2px;border-top-color:#e5e5e5;border-right-color:#e5e5e5;border-bottom-color:#e5e5e5;border-left-color:#e5e5e5;border-style:solid}.u-loading-icon--vertical[data-v-26861ad0]{flex-direction:column}[data-v-26861ad0]:host{font-size:0;line-height:1}.u-loading-icon__spinner--spinner[data-v-26861ad0]{-webkit-animation-timing-function:steps(12);animation-timing-function:steps(12)}.u-loading-icon__text[data-v-26861ad0]:empty{display:none}.u-loading-icon--vertical .u-loading-icon__text[data-v-26861ad0]{margin:6px 0 0;color:#606266}.u-loading-icon__dot[data-v-26861ad0]{position:absolute;top:0;left:0;width:100%;height:100%}.u-loading-icon__dot[data-v-26861ad0]:before{display:block;width:2px;height:25%;margin:0 auto;background-color:currentColor;border-radius:40%;content:" "}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(1){-webkit-transform:rotate(30deg);transform:rotate(30deg);opacity:1}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(2){-webkit-transform:rotate(60deg);transform:rotate(60deg);opacity:.9375}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(3){-webkit-transform:rotate(90deg);transform:rotate(90deg);opacity:.875}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(4){-webkit-transform:rotate(120deg);transform:rotate(120deg);opacity:.8125}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(5){-webkit-transform:rotate(150deg);transform:rotate(150deg);opacity:.75}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(6){-webkit-transform:rotate(180deg);transform:rotate(180deg);opacity:.6875}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(7){-webkit-transform:rotate(210deg);transform:rotate(210deg);opacity:.625}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(8){-webkit-transform:rotate(240deg);transform:rotate(240deg);opacity:.5625}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(9){-webkit-transform:rotate(270deg);transform:rotate(270deg);opacity:.5}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(10){-webkit-transform:rotate(300deg);transform:rotate(300deg);opacity:.4375}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(11){-webkit-transform:rotate(330deg);transform:rotate(330deg);opacity:.375}.u-loading-icon__dot[data-v-26861ad0]:nth-of-type(12){-webkit-transform:rotate(1turn);transform:rotate(1turn);opacity:.3125}@-webkit-keyframes u-rotate-data-v-26861ad0{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes u-rotate-data-v-26861ad0{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',""]),e.exports=t},b6cd:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-b2a05bc2], uni-scroll-view[data-v-b2a05bc2], uni-swiper-item[data-v-b2a05bc2]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-overlay[data-v-b2a05bc2]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7)}',""]),e.exports=t},b85c:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("06c5"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=(0,i.default)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(l)throw o}}}}},b903:function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{name:{type:String,default:uni.$u.props.icon.name},color:{type:String,default:uni.$u.props.icon.color},size:{type:[String,Number],default:uni.$u.props.icon.size},bold:{type:Boolean,default:uni.$u.props.icon.bold},index:{type:[String,Number],default:uni.$u.props.icon.index},hoverClass:{type:String,default:uni.$u.props.icon.hoverClass},customPrefix:{type:String,default:uni.$u.props.icon.customPrefix},label:{type:[String,Number],default:uni.$u.props.icon.label},labelPos:{type:String,default:uni.$u.props.icon.labelPos},labelSize:{type:[String,Number],default:uni.$u.props.icon.labelSize},labelColor:{type:String,default:uni.$u.props.icon.labelColor},space:{type:[String,Number],default:uni.$u.props.icon.space},imgMode:{type:String,default:uni.$u.props.icon.imgMode},width:{type:[String,Number],default:uni.$u.props.icon.width},height:{type:[String,Number],default:uni.$u.props.icon.height},top:{type:[String,Number],default:uni.$u.props.icon.top},stop:{type:Boolean,default:uni.$u.props.icon.stop}}};t.default=i},ba57:function(e,t,n){"use strict";n.r(t);var i=n("912d"),r=n("f5ff");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("a14a");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"2f0e5305",null,!1,i["a"],o);t["default"]=l.exports},baa5:function(e,t,n){var i=n("23e7"),r=n("e58c");i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},bafa:function(e,t,n){"use strict";var i=n("61de"),r=n.n(i);r.a},bca2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.titles=t.mineralBedInfo=t.basicInfo=void 0;var i={1:{"标本编号":"DBB01","标本中文名称":"斑岩型铜矿石","标本外文名称":"Porphyry Copper Ore","具体产地":"拉萨市墨竹工卡县知不拉铜矿","省":"西藏自治区","国家":"中国","采集的经度":"E91° 35＇ 30＂","采集的纬度":"N29° 42＇ 36＂","采集的高程":"5500 m","地质产状或层位":"产于角岩化凝灰岩和大理岩的岩性界面处","主要用途":"科学研究","特征描述":"矿石呈粒状结构， 条带状、 脉状、 浸染状构造。 主要矿石矿物为铜黄色黄铜矿和暗铜红色斑铜矿（ 表面铜蓝锖色）， 含有少量黄铁矿、 辉钼矿、 磁铁矿、 方铅矿、 蓝铜矿、 褐铁矿等。 主要脉石矿物为石榴子石、 透辉石， 含绿帘石、 硅灰石、 方解石、 石英、 透闪石、 阳起石、 符山石、 绿泥石、 绢云母等。","标本提供者":"西藏巨龙铜业有限公司","标本提供时间":"20220920","保存单位":"国家岩矿化石标本资源库","保持位置号":"金石坪04","标本保存类型":"标本","标本保存数量":1,"规格":"","长x宽x高":"100 cmx80cmx222cm","备注":"==============","标本状态":"完好","矿石颜色":"灰黑色","矿石结构":"粒状结构","矿石构造":"条带状构造、 脉状构造、 浸染状构造","矿石的矿物组成":"==============","矿石矿物":"以蓝铜矿、 黄铜矿、 斑铜矿为主， 磁铁矿、 辉钼矿、 黄铁矿褐铁矿、 方铅矿、 闪锌矿次之， 另见少量辉铜矿、 赤铁矿、 毒砂等。","脉石矿物":"以石榴子石、 透辉石为主， 绿帘石、 硅灰石、 方解石、 石英次之， 另见少量透闪石、 阳起石、 符山石、 绿泥石、 绢云母等。","元素的赋存状态及分配":"铜、 钼、 铅、 锌主要以硫化物黄铜矿、 辉钼矿、 方铅矿、 闪锌矿形式赋存， 金以自然金的形式赋存。","矿石的化学组成":"==============","主要有用组分（ 元素或化合物）":"铜","伴生有用组分（ 元素或化合物）":"钼、 铅、 锌、 金、 银","有害组分（ 元素或化合物）":"硫"},2:{"标本编号":"DBB01","标本中文名称":"斑岩型铜矿石","标本外文名称":"Porphyry Copper Ore","具体产地":"拉萨市墨竹工卡县知不拉铜矿","省":"西藏自治区","国家":"中国","采集的经度":"E91° 35＇ 30＂","采集的纬度":"N29° 42＇ 36＂","采集的高程":"5500 m","地质产状或层位":"产于角岩化凝灰岩和大理岩的岩性界面处","主要用途":"科学研究","特征描述":"矿石呈粒状结构， 条带状、 脉状、 浸染状构造。 主要矿石矿物为铜黄色黄铜矿和暗铜红色斑铜矿（ 表面铜蓝锖色）， 含有少量黄铁矿、 辉钼矿、 磁铁矿、 方铅矿、 蓝铜矿、 褐铁矿等。 主要脉石矿物为石榴子石、 透辉石， 含绿帘石、 硅灰石、 方解石、 石英、 透闪石、 阳起石、 符山石、 绿泥石、 绢云母等。","标本提供者":"西藏巨龙铜业有限公司","标本提供时间":"20220920","保存单位":"国家岩矿化石标本资源库","保持位置号":"金石坪04","标本保存类型":"标本","标本保存数量":1,"规格":"","长x宽x高":"100 cmx80cmx222cm","备注":"==============","标本状态":"完好","矿石颜色":"灰黑色","矿石结构":"粒状结构","矿石构造":"条带状构造、 脉状构造、 浸染状构造","矿石的矿物组成":"==============","矿石矿物":"以蓝铜矿、 黄铜矿、 斑铜矿为主， 磁铁矿、 辉钼矿、 黄铁矿褐铁矿、 方铅矿、 闪锌矿次之， 另见少量辉铜矿、 赤铁矿、 毒砂等。","脉石矿物":"以石榴子石、 透辉石为主， 绿帘石、 硅灰石、 方解石、 石英次之， 另见少量透闪石、 阳起石、 符山石、 绿泥石、 绢云母等。","元素的赋存状态及分配":"铜、 钼、 铅、 锌主要以硫化物黄铜矿、 辉钼矿、 方铅矿、 闪锌矿形式赋存， 金以自然金的形式赋存。","矿石的化学组成":"==============","主要有用组分（ 元素或化合物）":"铜","伴生有用组分（ 元素或化合物）":"钼、 铅、 锌、 金、 银","有害组分（ 元素或化合物）":"硫"},3:{"标本编号":"DBB03","标本中文名称":"矽卡岩型铜多金属矿石","标本外文名称":"Skarn Cooper Ploymetallic Ore","具体产地":"拉萨市墨竹工卡县甲玛铜多金属矿床","省":"西藏自治区","国家":"中国","采集的经度":"E91°45′","采集的纬度":"N29°42′","采集的高程":"4780m","地质产状或层位":"产于林布宗组角岩与多底沟组大理岩的层间接触带内","主要用途":"科学研究","特征描述":"矿石呈灰绿色，中粗粒结构，团块状、脉状、稠密浸染状、细脉浸染状构造。主要矿石矿物为黄铜矿、闪锌矿、斑铜矿、铜蓝、黝铜矿、黄铁矿。脉石矿物为石榴子石、辉石、绿帘石、绿泥石、石英、长石、方解石等。","标本提供者":"西藏自治区自然资源厅","标本提供时间":"20221010","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪06","标本保存类型":"标本","标本保存的数量":1,"规格":"长x宽x高：115cmx55cmx110cm","标本状态":"完好","矿石颜色":"灰绿色","矿石结构":"中粗粒结构","矿石构造":"团块状、脉状、稠密浸染状、细脉浸染状构造","矿石的矿物组成":"矿石矿物：黄铜矿、闪锌矿、斑铜矿、铜蓝、黝铜矿、黄铁矿\n\t\t\t脉石矿物：石榴石、辉石、绿帘石、绿泥石、石英、方解石、长石\n\t\t\t元素的赋存状态及分配：铜主要以硫化物黄铜矿、铜蓝、斑铜矿、黝铜矿形式赋存，锌主要以硫化物闪锌矿形式赋存","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：铜\n\t\t\t伴生有用组分（元素或化合物）：锌、银、金\n\t\t\t伴生有益组分（元素或化合物）：铁\n\t\t\t有害组分（元素或化合物）：硫\n\t\t"},4:{"标本编号":"DBB04","标本中文名称":"石英脉型金矿石","标本外文名称":"Quartz Vein Gold Ore","具体产地":"三门峡市灵宝市阳平镇金渠金矿床","省":"河南省","国家":"中国","采集的经度":"E110°33′38″","采集的纬度":"N34°25′57″","采集的高程":"900m","地质产状或层位":"矿区断裂构造发育，成矿受韧性剪切带控制，矿体主要分布于文峪黑云母花岗岩周围。","主要用途":"科学研究","特征描述":"矿石呈粒状结构，脉状、浸染状、团块状、晶簇状构造。主要矿石矿物为铅灰色方铅矿、棕褐色闪锌矿、黄铁矿、黄铜矿，含有自然金、银金矿、碲金矿、自然银等。主要脉石矿物为石英、斜长石，含有绢云母、白云母、白云石、铁白云石、方解石、绿泥石等。","标本提供者":"西藏自治区自然资源厅","标本提供时间":"20220920","保存单位":"国家岩矿化石标本库","保存位置号":"金石坪04","标本保存类型":"标本","标本保存的数量":1,"规格":"长x宽x高：75cmx26cmx160cm","标本状态":"完好","矿石颜色":"新鲜面灰黑色","矿石结构":"粒状变晶结构、压力定向结构、碎裂结构、揉皱结构、糜棱结构、重结晶结构、斑状结构、变余辉绿结构","矿石构造":"脉状、浸染状、团块状、晶簇状构造","矿石的矿物组成":"矿石矿物：以方铅矿、黄铁矿、闪锌矿为主，自然金、自然银、黄铜矿、碲金矿、银金矿次之，另见少量白钨矿等。\n\t\t脉石矿物：以石英、斜长石为主，绢云母、白云母、白云石、铁白云石次之。另见少量方解石、绿泥石、黑云母、角闪石、辉石、高岭土化等。\n\t\t元素的赋存状态及分配：金、银、铅、锌主要以自然金、银、银金矿硫化物方铅矿、闪锌矿等形式赋存。","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：金、铅、锌\n\t\t伴生有用组分（元素或化合物）：银\n\t\t伴生有益组分（元素或化合物）：\n\t\t有害组分（元素或化合物）：硫\n\t\t"},5:{"标本编号":"DBB05","标本中文名称":"锑铅锌矿石","标本外文名称":"Antimony Lead Zinc Ore","具体产地":"山南市隆子县扎西康锑多金属矿床","省":"西藏自治区","国家":"中国","采集的经度":"E91°59′56″","采集的纬度":"N28°21′30″","采集的高程":"4500m","地质产状或层位":"赋矿围岩主体为下侏罗统日当组，岩性为一套浅变质的海相碎屑沉积岩，矿体主要分布在不同的断裂破碎带中。标本采于Ⅶ号矿体","主要用途":"科学研究","特征描述":"矿石呈灰黑色，粒状结构，角砾状、脉状构造。主要矿石矿物为辉锑矿、方铅矿、闪锌矿、黄铁矿，含有脆硫锑铅矿、车轮矿、银黝铜矿、菱锌矿等。主要脉石矿物为石英、方解石，含有白云母、高岭土、伊利石等。围岩、早期硫化物或锰铁碳酸盐角砾被石英、方解石等胶结形成角砾状构造，孔洞中可见自形水晶晶体。","标本提供者":"西藏华钰矿业股份有限公司","标本提供时间":"20220920","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪10","标本保存类型":"标本","标本保存的数量":1,"规格":"长×宽×高：128cm×114cm×66cm","标本状态":"完好","矿石颜色":"新鲜面灰黑色","矿石结构":"粒状结构、共结边结构、包含结构、溶蚀结构、交代残余结构、骸晶结构、穿插结构、压力定向结构、碎裂结构、揉皱结构","矿石构造":"条带状构造、晶洞构造；角砾状构造，围岩、早期硫化物或锰铁碳酸盐角砾被石英、方解石等胶结形成角砾状构造，孔洞中可见自形水晶晶体","矿石的矿物组成":"矿石矿物：以闪锌矿、方铅矿、辉锑矿、黄铁矿为主，脆硫锑铅矿、车轮矿、银黝铜矿、菱锌矿次之。","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：锑、铅、锌\n伴生有用组分（元素或化合物）：银、金\n伴生有益组分（元素或化合物）：镓\n有害组分（元素或化合物）：硫\n\t\t"},7:{"标本编号":"DBB07","标本中文名称":"矽卡岩型铅锌矿石  ","标本外文名称":"Skarn Lead Zinc Ore","具体产地":"洛阳市栾川县石宝沟钼矿床","省":"河南省","国家":"中国","采集的经度":"E 111°32′00″","采集的纬度":"N 33°51′40″","采集的高程":"858m","地质产状或层位":"矽卡岩接触带","主要用途":"科学研究","特征描述":"矿石呈灰色，中粗粒结构，块状构造。主要矿石矿物为方铅矿、闪锌矿、黄铁矿。主要脉石矿物为石英、方解石。","标本提供者":"河南省栾川县鑫川矿业开发有限责任公司","标本提供时间":"20220901","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪09","标本保存类型":"标本","标本保存的数量":1,"规格":"长×宽×高：137cm×95cm×70cm ","标本状态":"完好","矿石颜色":"亮灰色","矿石结构":"中-粗粒结构","矿石构造":"块状构造","矿石的矿物组成":"矿石矿物：方铅矿、闪锌矿、黄铁矿\n\t\t脉石矿物：石英、方解石\n\t\t元素的赋存状态及分配：黄铁矿铁主要以硫化物形式赋存，方铅矿主要以硫化物形式赋存，锌主要以硫化物形式赋存","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：铅、锌\n\t\t伴生有用组分（元素或化合物）：钼\n\t\t伴生有益组分（元素或化合物）：\n\t\t有害组分（元素或化合物）：\n\t\t"},8:{"标本编号":"DBB08","标本中文名称":"矽卡岩型钼多金属矿石   ","标本外文名称":"Skarn Molybdenum Polymetallic Ore","具体产地":"洛阳市栾川县石宝沟钼矿床","省":"河南省","国家":"中国","采集的经度":"E 111°32′00″","采集的纬度":"N 33°51′40″","采集的高程":"858m","地质产状或层位":"矽卡岩接触带","主要用途":"科学研究","特征描述":"矿石呈灰色，粒状结构，条带状、团块状、浸染状构造。主要矿石矿物为辉钼矿、方铅矿、闪锌矿、黄铁矿。脉石矿物为石榴子石、石英、透辉石、绿泥石、方解石等。","标本提供者":"河南省栾川县鑫川矿业开发有限责任公司","标本提供时间":"20220901","保存单位":"国家岩矿化石标本库","保存位置号":"金石坪15","标本保存类型":"标本","标本保存的数量":1,"规格":"长×宽×高：3700cm×1650cm×95cm","标本状态":"完好","矿石颜色":"灰绿色","矿石结构":"粒状结构","矿石构造":"条带状、团块状、浸染状构造","矿石的矿物组成":"矿石矿物：辉钼矿、方铅矿、闪锌矿、黄铁矿\n\t\t\t\t脉石矿物：石榴子石、石英、透辉石、绿泥石、方解石等\n\t\t\t\t元素的赋存状态及分配：辉钼矿主要以硫化物形式赋存，黄铁矿铁主要以硫化物形式赋存，方铅矿主要以硫化物形式赋存，锌主要以硫化物形式赋存","矿石的化学组成":"\n\t\t\t主要有用组分（元素或化合物）：钼、铅、锌\n\t\t\t伴生有用组分（元素或化合物）：\n\t\t\t伴生有益组分（元素或化合物）：\n\t\t\t有害组分（元素或化合物）：\n\t\t"},10:{"标本编号":"DBB10","标本中文名称":"矽卡岩型钼多金属矿石   ","标本外文名称":"Skarn Polymetallic Ore","具体产地":"麻栗坡南秧田钨矿床","省":"北衙金多金属矿","国家":"云南省大理市鹤庆县","采集的经度":"E100°11′31″","采集的纬度":"N26°10′1″","采集的高程":"1800m","地质产状或层位":"产于北衙矿区万硐山矿段","主要用途":"科学研究","特征描述":"矿石呈灰色，粒状结构，条带状、团块状、浸染状构造。主要矿石矿物为辉钼矿、方铅矿、闪锌矿、黄铁矿。脉石矿物为石榴子石、石英、透辉石、绿泥石、方解石等。","标本提供者":"云南黄金矿业集团有限公司","标本提供时间":"20220920","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪10","标本保存类型":"标本","标本保存的数量":1,"规格":"长×宽×高：220×143×122cm","标本状态":"完好","矿石颜色":"灰色","矿石结构":"粒状结构","矿石构造":"团块状构造、浸染状构造","矿石的矿物组成":"\n\t\t\t矿石矿物：磁铁矿、黄铁矿、黄铜矿、磁黄铁矿、斑铜矿、银金矿\n\t\t\t脉石矿物：石榴子石、石英、绿帘石、绿泥石等\n\t\t\t元素的赋存状态及分配：金以不可见金的形式赋存于硫化物与磁铁矿种；铁主要以氧化物磁铁矿的形式存在及硫化物黄铁矿、磁黄铁矿形式赋存，铜主要以硫化物黄铜矿形式赋存\n\t\t","矿石的化学组成":"\n\t\t\t主要有用组分（元素或化合物）：金、铁、铜\n\t\t\t伴生有用组分（元素或化合物）：银\n\t\t\t伴生有益组分（元素或化合物）：\n\t\t\t有害组分（元素或化合物）：硫\n\t\t"},12:{"标本编号":"DBB12","标本中文名称":"铜金矿石   ","标本外文名称":"Copper Gold Ore","具体产地":"凉山州会理县绿水镇拉拉铜矿床","省":"四川省","国家":"中国","采集的经度":"E101°57′10″","采集的纬度":"N26°13′40″","采集的高程":"1914m","地质产状或层位":"产于扬子西缘河口群","主要用途":"科学研究","特征描述":"矿石呈灰色，粒状结构，团块状、浸染状构造。矿石矿物主要有黄铜矿、黄铁矿，含有磁铁矿、辉钼矿，脉石矿物有钠长石、石英、黑云母、白云母、方解石、白云石、石榴子石等。","标本提供者":"朱志敏，中国地质科学院矿产综合利用研究所","标本提供时间":"20220920","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪07","标本保存类型":"标本","标本保存的数量":1,"规格":"标本的长、宽、高：110×95×75","标本状态":"完好","矿石颜色":"灰色","矿石结构":"粒状结构","矿石构造":"团块状构造、浸染状构造","矿石的矿物组成":"\n\t\t矿石矿物：主要有黄铜矿、黄铁矿，含有磁铁矿、辉钼矿、自然金等\n\t\t脉石矿物：钠长石、石英、黑云母、白云母、方解石、白云石、石榴子石等\n\t\t元素的赋存状态及分配：铁主要以黄铁矿、磁铁矿形式赋存，铜主要以黄铜矿形式赋存\n\t\t","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：铜、铁\n\t\t伴生有用组分（元素或化合物）：钼、钴\n\t\t伴生有益组分（元素或化合物）：稀土、金、硫\n\t\t有害组分（元素或化合物）：砷、氟\n\t\t"},13:{"标本编号":"DBB13","标本中文名称":"蚀变岩型金矿石   ","标本外文名称":"Altered Rock Gold Ore","具体产地":"烟台市莱州三山岛金矿床","省":"山东省","国家":"中国","采集的经度":"E119°56′11″","采集的纬度":"N37°23′3″","采集的高程":"-1900 m","地质产状或层位":"产于晚侏罗世玲珑黑云母花岗岩和早白垩世郭家岭花岗闪长岩","主要用途":"科学研究","特征描述":"产自我国乃至世界最重要的金矿集区之一——胶东半岛西北部招远—莱州成矿带三山岛金矿床，该矿床是胶东最大的蚀变岩型金矿床之一。矿石呈灰白色，粒状结构，细脉状、浸染状构造。主要矿石矿物为黄铁矿，含有黄铜矿、方铅矿、闪锌矿、银金矿和少量毒砂。脉石矿物为石英、绢云母、白云母、绿泥石、钾长石、方解石、菱铁矿等。","标本提供者":"山东黄金集团有限公司","标本提供时间":"20220920","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪02","标本保存类型":"标本","标本保存的数量":1,"规格":"长x宽x高：199cmx75cmx204cm","标本状态":"完好","矿石颜色":"灰白色","矿石结构":"粒状结构","矿石构造":"细脉状、浸染状构造","矿石的矿物组成":"\n\t\t矿石矿物：黄铁矿为主，并伴生黄铜矿、方铅矿、闪锌矿、银金矿和少量毒砂\n脉石矿物：石英、绢云母、白云母、绿泥石、钾长石、方解石、菱铁矿\n元素的赋存状态及分配：金主要以自然金、银金矿、金银矿等矿物包裹体的形式赋存在黄铁矿中，或与方铅矿、闪锌矿、黄铜矿伴生充填在黄铁矿裂隙和晶隙中，少量金矿物与石英共生\n\t\t","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：金\n伴生有用组分（元素或化合物）：银、硫\n伴生有益组分（元素或化合物）：铜、铅、锌、铬、钼、锑、锶\n有害组分（元素或化合物）：砷\n\t\t"},14:{"标本编号":"DBB14","标本中文名称":"玢岩型铁矿石   ","标本外文名称":"Porphyry Iron Ore","具体产地":"马鞍山市雨山区向山镇凹山铁矿床","省":"安徽省","国家":"中国","采集的经度":"E118°36′21″","采集的纬度":"N31°39′53″","采集的高程":"露天矿坑","地质产状或层位":"主要赋存于凹山辉石闪长玢岩岩体隆起部位及其与大王山组火山岩接触带附近","主要用途":"科学研究","特征描述":"矿石呈灰色，粒状结构，浸染状构造。主要矿石矿物为磁铁矿，含有氧化形成具有磁铁矿假象的赤铁矿，矿石表面可见氧化形成的黄褐色铁质皮壳。脉石矿物为阳起石、钠长石、绿泥石、绿帘石、方解石、磷灰石、石英等。","标本提供者":"安徽省地质矿产勘查局322地质队","标本提供时间":"20220920","保存单位":"中国家岩矿化石标本资源库","保存位置号":"金石坪13","标本保存类型":"标本","标本保存的数量":1,"规格":"长×宽×高：100cm×65cm×60cm","标本状态":"完好","矿石颜色":"灰色","矿石结构":"粒状结构","矿石构造":"块状、浸染状构造","矿石的矿物组成":"\n\t\t矿石矿物：磁铁矿，含有氧化形成具有磁铁矿假象的赤铁矿\n脉石矿物：阳起石、钠长石、绿泥石、绿帘石、方解石、磷灰石、石英等\n元素的赋存状态及分配：铁主要以氧化物的形式存在\n\t\t","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：铁\n\t\t伴生有用组分（元素或化合物）： \n\t\t伴生有益组分（元素或化合物）： \n\t\t有害组分（元素或化合物）：硫\n\t\t"},15:{"标本编号":"DBB15","标本中文名称":"斑岩型钼铜矿石   ","标本外文名称":"Porphyry Molybdenum Copper Ore","具体产地":"呼伦贝尔市新巴尔虎右旗乌奴格吐山铜钼矿床","省":"内蒙古自治区","国家":"中国","采集的经度":"E 117°18′00″","采集的纬度":"N 49°26′00″","采集的高程":"690m","地质产状或层位":"绢英岩化石英斑岩","主要用途":"科学研究","特征描述":"矿石呈灰白色，粒状结构，脉状、网脉状、浸染状构造。主要矿石矿物为辉钼矿、黄铜矿、黄铁矿。脉石矿物为石英、钾长石、斜长石、绢云母、黑云母、绿泥石等。","标本提供者":"中国黄金集团内蒙古矿业有限公司","标本提供时间":"20221010","保存单位":"国家岩矿化石标本库","保存位置号":"金石坪14","标本保存类型":"标本","标本保存的数量":1,"规格":"标本的长×宽×高：115×55×110cm","标本状态":"完好","矿石颜色":"灰白色","矿石结构":"粒状结构","矿石构造":"脉状、网脉状、浸染状构造","矿石的矿物组成":"\n\t\t矿石矿物：辉钼矿、黄铜矿、黄铁矿\n\t\t脉石矿物：石英、钾长石、斜长石、绢云母、黑云母、绿泥石\n\t\t元素的赋存状态及分配：钼主要以硫化物形式赋存于辉钼矿中，铜主要以硫化物形式赋存于黄铜矿中\n\t\t","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：钼、铜\n\t\t伴生有用组分（元素或化合物）： 银、金\n\t\t伴生有益组分（元素或化合物）：\n\t\t有害组分（元素或化合物）：\n\t\t"},16:{"标本编号":"DBB16","标本中文名称":"矽卡岩型铜铅锌矿石   ","标本外文名称":"Skarn Copper Lead Zinc Ore","具体产地":"保山市隆阳区金厂河铁铜锌铁多金属矿床","省":"云南省","国家":"中国","采集的经度":"E99°10′48″","采集的纬度":"N25°27′08″","采集的高程":"1795m","地质产状或层位":"产于金厂河矿区核桃坪组中段一层（∈3h2-1）ZnV3矿体","主要用途":"科学研究","特征描述":"矿石呈灰黑色，粒状结构，脉状、团块状、浸染状构造。主要矿石矿物为闪锌矿、方铅矿、黄铜矿。脉石矿物为透闪石—阳起石、辉石、绿泥石、黑柱石、石英、方解石等。","标本提供者":"陈少伟、康国山、李庆锐等云南黄金矿业集团有限公司","标本提供时间":"20221013","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪11","标本保存类型":"标本","标本保存的数量":1,"规格":"长×宽×高：80×90×160cm","标本状态":"完好","矿石颜色":"灰黑色","矿石结构":"自形晶、半自形晶、它形晶结构、包含、连生结构","矿石构造":"脉状、团块状、浸染状构造","矿石的矿物组成":"\n\t\t矿石矿物：闪锌矿、方铅矿，黄铜矿\n脉石矿物：透闪石—阳起石、辉石、绿泥石、黑柱石、石英、方解石等\n元素的赋存状态及分配：铅、锌主要以硫化物方铅矿、闪锌矿形式赋存，铜主要以硫化物黄铜矿形式赋存。\n\t\t","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：铜、铅、锌\n伴生有用组分（元素或化合物）：\n伴生有益组分（元素或化合物）：铜、银\n有害组分（元素或化合物）：硅、砷、镉\n\t\t"},17:{"标本编号":"DBB17","标本中文名称":"铜镍硫化物矿石   ","标本外文名称":"Copper and Nickel Sulfide Ore","具体产地":"金昌市金川铜镍矿床","省":"甘肃省","国家":"中国","采集的经度":"E102°09′28″","采集的纬度":"N38°29′15″","采集的高程":"800m","地质产状或层位":"产于金川超镁铁质岩体中下部","主要用途":"科学研究","特征描述":"矿石呈灰黑色，粒状结构，海绵陨铁结构，浸染状构造。主要矿石矿物为磁黄铁矿、镍黄铁矿、黄铜矿，含有稀散、金、银、铂族元素等贵金属元素矿物。主要脉石矿物为橄榄石、辉石、蛇纹石等。。","标本提供者":"金川集团股份有限公司","标本提供时间":"20221018 ","保存单位":"国家岩矿化石标本资源库","保存位置号":"金石坪08","标本保存类型":"标本","标本保存的数量":2,"规格":"标本的长、宽、高：50*50*80cm","标本状态":"完好","矿石颜色":"灰黑色","矿石结构":"粒状结构，海绵陨铁结构","矿石构造":"浸染状构造","矿石的矿物组成":"\n\t\t矿石矿物：辉钼矿、黄铜矿、黄铁矿磁黄铁矿、镍黄铁矿、黄铜矿，含有稀散、金、银、铂族元素等贵金属元素矿物\n脉石矿物：橄榄石、辉石、蛇纹石等\n元素的赋存状态及分配：镍主要以硫化物矿物镍黄铁矿形式赋存，铜主要以硫化物黄铜矿的形式赋存\n\t\t","矿石的化学组成":"\n\t\t主要有用组分（元素或化合物）：镍、铜\n\t\t伴生有用组分（元素或化合物）：钴、铂族元素\n\t\t伴生有益组分（元素或化合物）：硒\n\t\t有害组分（元素或化合物）：硫\n\t\t"}};t.basicInfo=i;var r={1:{"矿床名称":"西藏拉萨市墨竹工卡县知不拉铜矿","英文名称":"Zhibula Copper Deposit in MoZhugongka County,Lasa,Tibet","产地":"拉萨市墨竹工卡县","省":"西藏自治区","国家":"中国 ","经度":"E91°35＇30＂","纬度":"N29°42＇36＂","高程":"5500m","区域地质背景":"冈底斯是我国规模最大的铜矿带，发现了10余处大型、超大型矿床，包括我国最大的铜矿--驱龙斑岩型Cu-Mo以及甲玛复合型Cu-Mo-Au-Pb-Zn矿床。知不拉矽卡岩型铜矿床处于该成矿带的东段，位于西藏墨竹工卡县甲玛乡境内，距驱龙矿床南约2km，其大地构造位置处于冈底斯一念青唐古拉板片次级构造单元一冈底斯陆缘火山一岩浆弧东段。区内岩浆具有多期活动特征，与雅鲁藏布江洋盆的俯冲、消亡以及印度与欧亚板块碰撞造山密切相关，大致可分为4期，包括早侏罗世叶巴组弧火山岩及同时期弧花岗岩、晚白垩世俯冲型花岗岩、古新世-始新世林子宗火山岩及同时期碰撞型花岗岩、渐新世中新世与区内大规模斑岩型铜矿密切相关的斑岩及花岗岩。区内构造为近E-W，而主要控矿构造为NE的复合型断裂带，分布在拉萨日多弧内盆地的南部边缘，并具有多期性和继承性活动的特点。","矿区地质":"\n\t\t\t冈底斯是我国规模最大的铜矿带， 发现了10余处大型、 超大型矿床， 包括我国最大的铜矿 - 一驱龙斑岩型Cu - Mo以及甲玛复合型Cu - Mo - Au - Pb -\n\t\t\tZn矿床。 知不拉矽卡岩型铜矿床处于该成矿带的东段， 位于西藏墨竹工卡县甲玛乡境内， 距驱龙矿床南约2km， 其大地构造位置处于冈底斯一念青唐古拉板片次级构造单元一冈底斯陆缘火山一岩浆弧东段。 区内岩浆具有多期活动特征， 与雅鲁藏布江洋盆的俯冲、 消亡以及印度与欧亚板块碰撞造山密切相关， 大致可分为4期， 包括早侏罗世叶巴组弧火山岩及同时期弧花岗岩、 晚白垩世俯冲型花岗岩、 古新世 -\n\t\t\t始新世林子宗火山岩及同时期碰撞型花岗岩、 渐新世中新世与区内大规模斑岩型铜矿密切相关的斑岩及花岗岩。 区内构造为近E -\n\t\t\tW， 而主要控矿构造为NE的复合型断裂带， 分布在拉萨一日多弧内盆地的南部边缘， 并具有多期性和继承性活动的特点。 ","矿床地质":"======","矿体":"西藏巨龙铜业有限公司2011年补充勘探工作方案显示知不拉矿区主要有1、II、II、IV号矿体，主要呈层状、似层状，少量透镜状、囊状赋存于叶巴组凝灰岩与大理岩层间，部分受断层控制（如III号矿体）。","矿石":"矿石类型主要有黄铜矿一磁铁矿矿石、黄铜矿一斑铜矿矿石、斑铜矿矿石、黄铜矿一黄铁矿矿石、黄铜矿一方铅矿一闪锌矿矿石，呈浸染状、块状、团块状、斑杂状、网脉和细脉状。矿石结构主要有结晶结构、交代残余结构、填隙结构、交代乳浊状结构、骸晶结构、反应边结构、固溶体分离结构、共生边结构。金属矿物主要以黄铜矿、斑铜矿为主，磁铁矿、辉钼矿、黄铁矿、方铅矿、闪锌矿、磁黄铁矿次之，另见少量的辉铜矿、赤铁矿、毒砂等；非金属矿物主要以石榴子石、透辉石为主，绿帘石、硅灰石、方解石、石英次之，另见少量的透闪石、阳起石、绿泥石、绢云母等。","围岩蚀变":"矿区围岩蚀变广泛发育，主要有矽卡岩化、硅化、碳酸盐化、绿泥石化等，其中以矽卡岩化、硅化与成矿关系最为密切。矽卡岩发育于凝灰岩与大理岩接触部位及构造破碎带内，少部分发育于凝灰岩中或岩体与碳酸盐岩接触带。","矿床成因":"属于岩浆热液接触交代作用形成的层状矽卡岩型矿床","参考文献":"\n\t\t\t徐净， 郑有业， 孙祥， 等.西藏知不拉矽卡岩型铜矿床矿物学特征及地质意义［ J］.地球科学（ 中国地质大学学\n\t\t\t报）， 2014（ 6）： 654 - 670,\n\t\t\t768． DOI： 10.3799／ dqkx． 2014.062"},2:{"矿床名称":"西藏拉萨市墨竹工卡县知不拉铜矿","英文名称":"Zhibula Copper Deposit in MoZhugongka County,Lasa,Tibet","产地":"拉萨市墨竹工卡县","省":"西藏自治区","国家":"中国 ","经度":"E91°35＇30＂","纬度":"N29°42＇36＂","高程":"5500m","区域地质背景":"冈底斯是我国规模最大的铜矿带，发现了10余处大型、超大型矿床，包括我国最大的铜矿--驱龙斑岩型Cu-Mo以及甲玛复合型Cu-Mo-Au-Pb-Zn矿床。知不拉矽卡岩型铜矿床处于该成矿带的东段，位于西藏墨竹工卡县甲玛乡境内，距驱龙矿床南约2km，其大地构造位置处于冈底斯一念青唐古拉板片次级构造单元一冈底斯陆缘火山一岩浆弧东段。区内岩浆具有多期活动特征，与雅鲁藏布江洋盆的俯冲、消亡以及印度与欧亚板块碰撞造山密切相关，大致可分为4期，包括早侏罗世叶巴组弧火山岩及同时期弧花岗岩、晚白垩世俯冲型花岗岩、古新世-始新世林子宗火山岩及同时期碰撞型花岗岩、渐新世中新世与区内大规模斑岩型铜矿密切相关的斑岩及花岗岩。区内构造为近E-W，而主要控矿构造为NE的复合型断裂带，分布在拉萨日多弧内盆地的南部边缘，并具有多期性和继承性活动的特点。","矿区地质":"\n\t\t\t冈底斯是我国规模最大的铜矿带， 发现了10余处大型、 超大型矿床， 包括我国最大的铜矿 - 一驱龙斑岩型Cu - Mo以及甲玛复合型Cu - Mo - Au - Pb -\n\t\t\tZn矿床。 知不拉矽卡岩型铜矿床处于该成矿带的东段， 位于西藏墨竹工卡县甲玛乡境内， 距驱龙矿床南约2km， 其大地构造位置处于冈底斯一念青唐古拉板片次级构造单元一冈底斯陆缘火山一岩浆弧东段。 区内岩浆具有多期活动特征， 与雅鲁藏布江洋盆的俯冲、 消亡以及印度与欧亚板块碰撞造山密切相关， 大致可分为4期， 包括早侏罗世叶巴组弧火山岩及同时期弧花岗岩、 晚白垩世俯冲型花岗岩、 古新世 -\n\t\t\t始新世林子宗火山岩及同时期碰撞型花岗岩、 渐新世中新世与区内大规模斑岩型铜矿密切相关的斑岩及花岗岩。 区内构造为近E -\n\t\t\tW， 而主要控矿构造为NE的复合型断裂带， 分布在拉萨一日多弧内盆地的南部边缘， 并具有多期性和继承性活动的特点。 ","矿床地质":"======","矿体":"西藏巨龙铜业有限公司2011年补充勘探工作方案显示知不拉矿区主要有1、II、II、IV号矿体，主要呈层状、似层状，少量透镜状、囊状赋存于叶巴组凝灰岩与大理岩层间，部分受断层控制（如III号矿体）。","矿石":"矿石类型主要有黄铜矿一磁铁矿矿石、黄铜矿一斑铜矿矿石、斑铜矿矿石、黄铜矿一黄铁矿矿石、黄铜矿一方铅矿一闪锌矿矿石，呈浸染状、块状、团块状、斑杂状、网脉和细脉状。矿石结构主要有结晶结构、交代残余结构、填隙结构、交代乳浊状结构、骸晶结构、反应边结构、固溶体分离结构、共生边结构。金属矿物主要以黄铜矿、斑铜矿为主，磁铁矿、辉钼矿、黄铁矿、方铅矿、闪锌矿、磁黄铁矿次之，另见少量的辉铜矿、赤铁矿、毒砂等；非金属矿物主要以石榴子石、透辉石为主，绿帘石、硅灰石、方解石、石英次之，另见少量的透闪石、阳起石、绿泥石、绢云母等。","围岩蚀变":"矿区围岩蚀变广泛发育，主要有矽卡岩化、硅化、碳酸盐化、绿泥石化等，其中以矽卡岩化、硅化与成矿关系最为密切。矽卡岩发育于凝灰岩与大理岩接触部位及构造破碎带内，少部分发育于凝灰岩中或岩体与碳酸盐岩接触带。","矿床成因":"属于岩浆热液接触交代作用形成的层状矽卡岩型矿床","参考文献":"\n\t\t\t徐净， 郑有业， 孙祥， 等.西藏知不拉矽卡岩型铜矿床矿物学特征及地质意义［ J］.地球科学（ 中国地质大学学\n\t\t\t报）， 2014（ 6）： 654 - 670,\n\t\t\t768． DOI： 10.3799／ dqkx． 2014.062"},3:{"矿床名称":"西藏拉萨市墨竹工卡县甲玛铜多金属矿床","英文名称":"Jiama Copper Polymetallic Deposit in Mozhugongka County, Lasa, Tibet","产地":"拉萨市墨竹工卡县甲玛铜多金属矿床","省":"西藏自治区","国家":"中国 ","经度":"E91°45′","纬度":"N29°42′","高程":"4780m","区域地质背景":"甲玛铜多金属矿床位于西藏特提斯构造域冈底斯-念青唐古拉(地体)板片中南部，其南北分别以印度河-雅鲁藏布江和班公湖-怒江缝合带为界，受新特提斯洋演化控制，经历了复杂的地质-构造-岩浆演化过程。受印度板块和欧亚板块碰撞影响，冈底斯-念青唐古拉地体南缘的构造线总体走势近东西向，由于区域长期走滑效应，次级构造线多呈北西西向，以发育若干北西西向的推覆构造系为特征。矿区及邻近区域的地层主要为被动陆缘火山沉积岩系,包括上三叠统麦隆岗组、中-下侏罗统叶巴组、上侏罗统却桑温泉组和多底沟组、下白垩统林布宗组、楚木龙组以及塔龙拉组。矿区出露的地层主要为下白垩统林布宗组的砂板岩和角岩、上侏罗统多底沟组的灰岩和大理岩，在牛马塘一带出露有少量的第四系残坡积物和冲洪积物。区域上岩浆岩发育,主要分布在雅江断裂以北,是冈底斯火山-岩浆弧的重要组成部分。矿区岩浆岩在浅部呈岩枝、岩脉等形态产出，深部存在含矿斑岩体，主要岩石类型有花岗斑岩、黑云母二长花岗斑岩、花岗闪长斑岩、石英闪长玢岩、闪长玢岩、闪长岩、闪斜煌斑岩、角闪辉绿玢岩和石英辉长岩等。","矿区地质":"\n\t\t地层：矿区赋矿地层主要为下白垩统林布宗组砂板岩、角岩以及上侏罗统多底沟组灰岩、大理岩化灰岩、大理岩。\n\t\t构造：甲玛矿区受控于南北向挤压构造，形成一系列倒转褶皱:红-塔背斜、夏工普向斜和牛马塘背斜等。红-塔背斜是矿区的主要褶皱，轴迹呈北西向;牛马塘背斜位于红-塔背斜的北东，轴迹大致和红-塔背斜平行，规模相对较小，红-塔背斜是矿区的主要褶皱，轴迹呈北西向；牛马塘背斜位于红-塔背斜的北东，轴迹大致和红-塔背斜平行，规模相对较小。\n\t\t岩浆岩：矿区岩浆岩主要呈岩枝、岩脉产出，岩石类型包括花岗斑岩、花岗闪长斑岩、石英闪长玢岩、闪长玢岩、闪长岩、煌斑岩、角闪辉绿玢岩等。 ","矿床地质":"======","矿体":"甲玛铜多金属矿床主要由3种矿体类型组成：(1)产于角岩中的铜钼矿体；(2)产于斑岩中的钼铜矿体；(3)产于矽卡岩中的铜多金属矿体（图1c、d）。角岩型矿体主要分布于林布宗组角岩中，矿体主要呈近直立的筒状产于深部斑岩体上部，走向NW-SE（约300°），延长1200 m，垂向延伸达900m；斑岩型矿体为隐伏矿体，主要赋矿岩石为花岗斑岩、二长花岗斑岩、石英二长斑岩、闪长（玢）岩；矿体主要呈筒状产于0～40线则古朗地区以南，矿体走向NW-SE（约300°），延长约800 m，近直立，垂向延伸达500 m；矽卡岩型矿体主要产于林布宗组和多底沟组接触带的扩容空间。矽卡岩主矿体走向NW-SE（约300°），延长达2850 m，矿体倾向NE(30°），延伸超过2500 m（未控制边界）。","矿石":"矿石矿物包括黄铜矿、辉钼矿、黄铁矿、磁铁矿，还有少量的闪锌矿、方铅矿、斑铜矿、孔雀石、铜蓝、黝铜矿等；脉石矿物主要为石英、斜长石、钾长石、黑云母、电气石、石膏，次为角闪石、绢云母、绿泥石、绿帘石、方解石、萤石等。","围岩蚀变":"蚀变类型包括钾化、黄铁绢英岩化、青磐岩化和泥化。","矿床成因":"超大型斑岩一矽卡岩型铜矿床","矿床发现和开发简史":"\n\t\t解放前，当地人曾经用土法采铅，并留下两处老硐。解放后，李璞等（1951-1953年）首次对甲玛矿床进行了踏勘，揭开了甲玛勘察的序幕。\n1956-1990年间，西藏地质局831队和833队、西藏第一地质大队、西藏区域地质调查大队、西藏地质六队初步查明了矿床地层、构造、岩浆岩、变质作用及成矿作用特征，控制了长达3600m的铜铅锌多金属含（赋）矿带，奠定了甲玛矿床详查及勘探的坚实基础。\n1991-2000年，西藏地矿厅完成了甲玛矿床的详查工作，提交了《西藏自治区墨竹工卡县甲玛矿区铜多金属矿详查地质报告》。\n2007年，成都理工大学完成了则古朗一牛马塘1：1万土壤地球化学测量和岩石地球化学剖面测量，山西地质调查院完成了矿床1：1万高精度磁测和中间梯度激电探测，奠定了甲玛矿区深部勘探和外围详查的基础。\n2008年，中国黄金集团整合了甲玛矿产资源，组建西藏华泰龙矿业开发有限公司，并与中国地质科学院矿产资源和成都理工大学开展了“产-学-研”三结合的矿业勘查开发评价研究工作，于2008年底向国土资源部提交了《西藏自治区墨竹工卡县甲玛铜多金属矿区0-16-40-80、0-15线铜多金属矿勘探报告》与《西藏自治区墨竹工卡县甲玛矿区外围铜多金属矿详查报告》，之后，历经5年的勘探，现今已探明矿床资源储量已扩大至铜金属量670万吨，钼68万吨，金150吨，银8800吨，铅＋锌56万吨，当量铜资源量达1500万吨以上（秦志鵬2013）。\n\t\t","参考文献":"\n\t\t[1]陈红瑾,王立强,胡古月,顾枫华,唐攀,张忠坤,周敖日格勒.西藏甲玛铜多金属矿床流体包裹体研究[J].矿床地质,2022,41(02):303-323.DOI:10.16111/j.0258-7106.2022.02.006.\n\t\t马士委,许志琴,张忠坤,马元,赵中宝,庞雪,赵孝武,王慧.藏南甲玛铜多金属矿床构造变形及其对成矿的制约[J].岩石学报,2016,32(12):3781-3799."},4:{"矿床名称":"河南省三门峡市灵宝市阳平镇金渠金矿床","英文名称":"Jinqu Gold Deposit in Yangping County, Lingbao, Sanmenxia, Henan Province","产地":"三门峡市灵宝市阳平镇金渠金矿床","省":"河南省","国家":"中国 ","经度":"E110°26′33″~E110°35′52″","纬度":"N34°22′44″~N34°27′12″","高程":"900m","区域地质背景":"小秦岭金矿田是我国著名的金成矿区带, 大地构造位属华北地台南缘。矿田是由太华群深变质岩系组成的“地垒状”地块。地块北侧为汾渭盆地, 南侧为元古界褶皱系。主要构造形迹有近东西向展布的老鸦岔复式背形构造, 北东向褶皱构造及一系列近东西向断裂构造, 构成本区基本构造格架。金渠金矿区域位于构造线呈北西西—南东东走向, 由老鸦岔复背斜组成, 南北两侧分别被小河和太要区域性大断裂围限, 太华群被隆起。","矿区地质":"\n\t\t地层：矿区地层为闾家峪组、观音堂组。\n构造：矿区断裂构造发育, 按其形成的深度层次可分为韧性断层、韧脆叠加断层和脆性断层。\n岩浆岩：出露的岩浆岩以岩脉的形式产出，其岩性主要为辉绿岩和花岗岩。","矿床地质":"======","矿体":"成矿与燕山期热力构造活动期的花岗岩有关, 受文峪黑云母花岗岩体控制, 矿体主要分布于岩体周围。矿脉较多, 可分为4个矿脉组, 自南而北分别为202脉组、16脉组、303脉组和845脉组。","矿石":"原生矿石分为含金石英脉型和含金构造蚀变岩型。矿石矿物主要有金银类矿物（自然金、银金矿、碲金银矿）；铅矿物（方铅矿、铅矾、碲铅矿）；铁矿物（黄铁矿、磁黄铁矿、褐铁矿）；铜矿物（黄铜矿、辉铜矿、斑铜矿、铜蓝）及少量的白钨矿、黑钨矿、闪锌矿。次生金属矿物多为褐铁矿、铜兰、孔雀石、铅钒等。脉石矿物主要为石英、长石，次为绢云母、黑云母、绿泥石、方解石等","围岩蚀变":"矿区内常见的围岩蚀变有黄铁矿化、多金属矿化、硅化、碳酸盐化等。蚀变主要发育在两石英脉之间或者两端的延长部位, 同时还在含金石英上下盘发育, 具线型蚀变特征。","矿床成因":"属于变质—热液型金矿床","矿床发现和开发简史":"\n\t\t1.1964年原河南省地质局根据国家急需黄金资源的情况，加强金矿地质工作，发现了灵宝小秦岭金矿，并成立了小秦岭金矿会战指挥部，一年来查明含金石英脉达100条以上，成矿远景好，可构成大型金矿床。\n2.1965年开始对金硐岔矿区进行勘探。\n3.1967年，原河南省地质局豫01队提交灵宝小秦岭金矿第一份勘探报告——《河南灵宝金矿金硐岔矿区地质勘探报告书》。\n3.1970年，河南省地质、煤炭、冶金部门的地质队伍合并，成立了河南省革委建委地质勘探公司，突出大搞铁矿，灵宝小秦岭金矿地质工作在编制了《河南灵宝金矿东闯矿区地质勘探报告》报告。\n4.1975年河南省恢复金矿勘查工作，灵宝小秦岭金矿经过几年停顿和小规模施工，1979年起又作为重点矿区开展金矿勘查。\n5.自1983年始，原河南省地质局第一地质调查队、原中国人民解放军武装警察部队黄金第九支队、灵宝市矿山技术服务中心、河南省三门峡市矿山技术服务中心、原河南省地质科研所等多家地勘单位在此开展黄金勘查工作，编制了众多不同勘查范围和程度的地质报告，以及诸多的储量报告。\n\t\t","参考文献":"\n\t\t[1]高志军,张选治.小秦岭金渠金矿区域构造岩与金矿化关系的探讨[J].科技传播,2014,6(16):178-179.\n[2]张选治,高志军.小秦岭金渠金矿区域成矿模式探讨[J].科技资讯,2014,12(20):100-101."},5:{"矿床名称":"西藏山南市隆子县扎西康锑多金属矿床","英文名称":"Zaxikang Antimony Polymetallic Deposit in Longzi County, Shannan, Tibet","产地":"山南市隆子县","省":"西藏自治区","国家":"中国 ","经度":"E91°58′56″～E90°02′30″","纬度":"N28°19′56″～N28°22′58″","高程":"4800m","区域地质背景":"扎西康矿床是喜马拉雅碰撞造山带东段多金属成矿带内发现的首个大型以铅锌矿为主的多金属矿床。矿床位于藏南地区, 地处雅鲁藏布江缝合带与喜马拉雅北坡之间, 属于特提斯—喜马拉雅构造域东段的组成部分。区域地层属冈底斯—喜马拉雅构造地层大区中的康马隆子分区。大地构造位置处于青藏高原南部特提斯喜马拉雅造山带中东部, 地跨喜马拉雅陆块、雅鲁藏布江结合带, 北邻冈底斯陆块。区内有大规模的断裂构造和褶皱构造。","矿区地质":"\n\t\t地层：矿床出露的地层为第四系和侏罗系。第四系主要为冲积、冲洪积、湖积、冰碛物，岩性为砂砾、亚砂土、含砾砂土、黏土、冰漂砾等。侏罗系主要为日当组和陆热组，矿体主要赋存于日当组。日当组岩性为一套灰黑色—深灰色炭质板岩、泥质粉砂岩、页岩，夹少量灰黑色、深灰色薄层状、透镜状灰岩，其中炭质板岩是矿区主要的容矿围岩。陆热组岩性为一套深灰色—灰黑色页岩、泥质粉砂岩夹层状灰岩，与页岩常常互层，风化形成“肋骨”状地貌。\n构造：矿区内构造极为发育，以断裂构造为主，主要为中新世以来东西向伸展作用形成的南北向高角度正断层，属错那裂谷系的次级断裂，其严格控制了矿体的产状与分布。\n岩浆岩：出露的岩浆岩以岩脉的形式产出，其岩性主要为辉绿岩和花岗岩。","矿床地质":"\n\t\t矿体：矿体严格受南北向断裂控制，矿体产状与断层破碎带的延伸方向基本一致，在断层产状变化或断裂交汇处，矿体出现膨大、增厚和品位增高的现象。矿区内已圈定工业矿体4条，其中，Ⅴ号矿体呈似层状、长透镜状产于南北向的F7断层破碎带中，局部具分支复合现象，矿体倾向在260°～280°之间，倾角在55°～70°之间，向北侧伏。\n矿石：矿石矿物主要为方铅矿、闪锌矿、辉锑矿、铅锑硫盐矿物、铁锰碳酸盐矿物，少量的黄铜矿、毒砂等。脉石矿物主要为石英、方解石，少量的白云石，微量绢云母等。矿石结构构造大致可以分为两种类型：一种受后期构造挤压而呈现破碎状，表现为粗晶结构、半自形—他形结构，呈粗脉状、块状或者角砾状构造；另一类呈现开放空间充填的特点，粗晶—细晶结构，半自形—自形结构，呈皮壳状、脉状、似层状、条带状、网脉状和晶洞状，其未受到构造应力破坏，因此矿脉保存完整。\n围岩蚀变：围岩蚀变主要以硅化、绢云母化、黄铁矿化、褐铁矿化和方解石化为主，其中地表褐铁矿化为主要的地质找矿标志之一。\n\t\t","矿床成因":"属于（喷流）沉积—构造—（岩浆）热液（泉）叠加改造型矿床","矿床发现和开发简史":"\n\t\t1.1973年以来不同地质单位在区域上先后开展了不同程度的基础地质工作、矿产勘查工作以及物化探工作。其中涉及扎西康矿集区的1:100万区域地质调查、1:25万区域地质调查，基本查明了本区地层层序，厘定了填图单元，建立了构造格架；1:20万区域化探测量初步查明了测区地球化学背景及特征。\n2.2005～2006年，西藏华钰矿业开发有限公司对扎西康区域进行预查地质工作。 \n3.2007～2008年，西藏华钰矿业开发有限公司对扎西康探矿权范围开展了普查地质工作，大致查明了该区地层、构造、岩浆岩及矿区、矿床地质特征。 \n4.2009～2010年，西藏华钰矿业开发有限公司对扎西康探矿权范围开展了详查地质工作，通过地质填图，查明了矿区地层、岩性、构造、矿化蚀变的分布特征。 \n5.2013～2019年，西藏华钰矿业开发有限公司委托中国地质调查局成都地质调查中心在探矿权范围内开展勘查工作。 \n6.2013年至今，中国地质调查局成都地质调查中心开展了“西藏扎西康整装勘查区关键基础地质问题研究”，系统总结了扎西康整装勘查区内地层、构造特征及扎西康矿集区典型矿床的控矿因素、找矿标志等。\n\t\t","参考文献":"\n\t\t[1]樊文鑫,李光明,梁生贤.西藏扎西康铅锌多金属矿床控矿构造的电性特征及找矿预测[J].吉林大学学报(地球科学版),2021,51(06):1709-1719.\n[2]李洪梁,李光明,丁俊,张志,卿成实,付建刚,凌晨,刘宇奇.藏南扎西康铅锌多金属矿床成因——硫化物原位硫同位素证据[J].吉林大学学报(地球科学版),2020,50(05):1289-1303.\n[3]李任杰,张文磊,马健飞,胡传辉.西藏扎西康铅锌锑多金属矿床地质特征及成因[J].现代矿业,2016,32(10):133-134+154.."},7:{"矿床名称":"河南省洛阳市栾川石宝沟钼矿","英文名称":"Shibaogou Molybdenite Deposite in Luanchuan, Luoyang, Henan Province","产地":"洛阳市栾川县","省":"河南省","国家":"中国 ","经度":"E 111°32′00″","纬度":"N 33°51′40″","高程":"1200m-400m","区域地质背景":"矿区位于华北陆块南缘，与北秦岭造山带相邻。华北陆块南缘北以潼关—三门峡—宝丰—鲁山—舞阳断裂为界，南以洛南—栾川—方城—明港断裂为界。栾川矿集区位于东秦岭核心成矿部位，是我国最重要的钼多金属成矿带，被称为中国钼都，储量居世界前列。其内部的黄背岭-石宝沟地区近几年勘查成果初现，又因其重要的地质背景，使该区构造特征研究显得尤为迫切。","矿区地质":"\n\t\t地层：栾川矿集区出露地层包括中元古界宽坪群、中-新元古界官道口以及新元古界的栾川群和陶湾群（金雪，2017）。\n（1）中元古界宽坪群：分布于北秦岭北部地区，呈宽窄变化很大的狭长带状断续延伸千余公里，是一套强烈变形中浅变质岩系。宽坪群下部主要为绿帘纳长阳起片岩、斜长角闪岩等，中部为云母石英片，石榴二云斜长片麻岩等，上部为石英大理岩、黑云大理岩和角闪大理岩等(柯昌辉等，2014)。\n（2）中-新元古界官道口群：该群是华北陆块南缘的第二盖层，与上覆的栾川群呈整合接触，与下伏熊耳群呈假整合接触。官道口群主要为一套河流相或滨浅海相沉积，发育陆源碎屑岩和碳酸盐岩。在熊耳山南坡地区，该群出露约 2800km2火山岩系。\n（3）新元古界栾川群：该群是华北陆块南缘的第三盖层，与上覆陶湾群及下伏官道口群均呈平行不整合接触，主要分布于卢氏—栾川一带。栾川群主要为滨浅海相陆源碎屑岩—碳酸盐岩—碱性火山岩建造，岩性主要包括千枚岩、变质长石石英岩、白云石大理岩、绢云(钙质)片岩等(庞振山，2006)。\n（4）新元古界陶湾群：为华北陆块南缘的第四盖层，平行不整合覆盖于栾川群之上，该地层变质程度及构造变形较为复杂。陶湾群呈近东西向展布，由浅海相碎屑岩和碳酸盐岩组成，主要岩性包括钙质砾岩、千枚岩和片状大理岩，自下而上可依次划分为鱼库组、三岔口组、凤脉庙组、秋木沟组（柯昌辉，2013）。\n构造：矿区位于华北陆块南缘和北秦岭构造带的衔接部位，大地构造位置属于华北板块南缘。长期复杂的地质构造演化过程中，形成了一系列大致相互平行的NW-NWW 向区域性主干裂带，自北向南依次为马超营断裂、栾川断裂、瓦穴子断裂、朱阳关-夏馆断裂带和商丹缝合带。在主干断裂带之间，发育一系列 NE—NNE 向构造，与 NW 向构造交叉，形成网格状构造(许志琴，1988；张国伟，2001)。 \n岩浆岩：自新太古代至中生代，豫西地区岩浆活动频繁，伴有火山喷发作用，发育多种不同类型岩浆，具有多旋回、多期性特征（许腾，2015）。区域内燕山期岩浆活动达到高峰，大规模酸性岩浆侵入，形成了一系列花岗岩岩基（如老君山岩体、合峪岩体）和岩株（如上房沟岩体、南泥湖岩体）。栾川矿集区内出露南泥湖、火神庙、鱼库等岩体。 ","矿床地质":"\n\t\t矿体：该矿床剥蚀程度浅，地表局部可看到辉钼矿化。主矿体平面上西起石宝沟，东到半截沟沟脑，东西方向长约1400 m，南北方向宽约1280 m，面积约0.82 km2。 矿(化)体形态呈不规则椭圆状分布于石宝沟岩体东侧外接触带500 m范围内。剖面上矿体总体呈似层状，局部增厚。总体倾向北东、东。矿体底部与花岗斑岩体顶面的坡向和坡度趋于一致，倾角随岩体顶界面变化而变化，一般在30°左右，中上部相对平缓，一般20°左右。东矿段工业矿体平均品位0.10%，西矿段 0.05%，较均匀。矿体的品位变化与厚度变化关系不密切（吕伟庆等，2014）。\n矿石：根据含矿岩石主要可划分为长英角岩型辉钼矿石、透辉石斜长石角岩型辉钼矿石、矽卡岩型辉钼矿石、花岗岩型辉钼矿石4种矿石类型，另外还有少量变辉长岩型辉钼矿矿石、白云石大理岩型辉钼矿矿石等。矿石结构以鳞片状结构、镶嵌结构、包体结构、 自形－它形晶粒状结构。矿石构造以细脉状构造、 脉状构造、浸染状构造、细脉浸染状构造（吕伟庆等，2014）。\n区内矿石物质组份比较简单，钼矿石中矿石矿物含量约占1%～8%，主要由黄铁矿、辉钼矿等组成，黄铜矿、闪锌矿、磁黄铁矿、磁铁矿等少量。容矿岩石由花岗斑岩与矽卡岩组成，脉石矿物含量约占92%～99%，相应脉石矿物主要由石英、斜长石、钾长石及石英、透闪石、石榴子石、透辉石等组成。次生矿物有方解石、石英等（李敏等，2020）。\n围岩蚀变：矿床内因受热液交代作用，围岩蚀变强烈、类型复杂、分布广泛。主要类型有矽卡岩化、钾化、硅化、绢云母化、绿帘石化、绿泥石化、阳起石化、碳酸盐化、萤石化、沸石化以及硫化物化。岩体内外的蚀变具有分带性（李敏，2020）。\n\t\t","矿床成因":"属于大型斑岩—矽卡岩型钼矿床","矿床发现和开发简史":"\n\t\t1、1956~1958年，秦岭区测队对栾川地区进行了1：20万栾川幅地质调查\n和金属量、重砂测量工作，圈定了栾川—三川Cu、Pb、Zn、Mo、W等多元素组合异常，并发现了上房、南泥湖钼矿床及一些多金属矿（化）点。\n2、1957~1959年，河南省地质局豫01队，对上房、南泥湖钼矿和骆驼山钨铜矿进行了勘查，完成了南泥湖钼矿、包头砦铜钼矿、中鱼库钨铜矿及马圈钼矿等矿区的普查评价。\n3、1965~1966年，豫20队在栾川鱼库进行过铁矿普查。地质18队在栾川康山一带进行过金矿普查，发现矿化蚀变破碎带一百余条，编写有《康山矿区山金普查报告》。\n4、1968~1973年，河南省地矿局第三地质队对栾川南泥湖钼矿、三道庄钼矿开展了详细的地质勘探，并于1985年提交勘探报告。\n5、1973~1976年和1982~1986年，河南省地质局地质三队分别对栾川南部和北部地区进行了1：5万区域地质调查，为该区域的地质矿产研究提供了丰富的资料。\n6、栾川石宝沟铅锌钼钨矿由于历史原因，先后设置了24个矿业权，共形成了生产的、半生产的、废弃的大小采坑60多处。2010年10月，作为整合主体，鑫川矿业公司与7家矿业权人签订了矿业权转让合同整合，让鑫川矿业公司充满着生机。该公司先后投入5000万元进行勘探，仅2011年4月钻探矿工作量就达16000米，新增铅锌钼钨矿储量190万吨。在2011年7月国土资源部通报表彰的全国47家矿产资源开发先进矿山中，栾川县鑫川矿业公司名列其中。\n\t\t","参考文献":"\n\t\t[1]\t金雪. 豫西石宝沟花岗岩体成因及其成矿潜力评价[D].中国地质大学(北京),2016.\n[2]\t刘冲,刘炳战,邹雪冬,黄一格,陈静,姜丽丽,李冬.栾川矿集区黄背岭—石宝沟地区地质构造赤平投影分析[J].世界有色金属,2020(20):194-195.\n[3]\t吕伟庆，刘建军，吴飞，张衡.河南省栾川县石宝沟钼矿矿床地质特征及成因探讨[J].中国钼业,2014,(4): 20-24\n[4]\t李敏.河南栾川石宝沟矿区辉钼矿矿物学及标型特征研究[J].世界有色金属,2020,(12): 114-115\n[5]\t徐兆文，任启江.河南栾川石宝沟、火神庙和大坪岩体岩浆演化特征及其与钼矿化关系[J].南京大学学报(地球科学),1988,(1): 92-105"},8:{"矿床名称":"河南省洛阳市栾川石宝沟钼矿","英文名称":"Shibaogou Molybdenite Deposite in Luanchuan, Luoyang, Henan Province","产地":"洛阳市栾川县","省":"河南省","国家":"中国 ","经度":"E 111°32′00″","纬度":"N 33°51′40″","高程":"1200m-400m","区域地质背景":"矿区位于华北陆块南缘，与北秦岭造山带相邻。华北陆块南缘北以潼关—三门峡—宝丰—鲁山—舞阳断裂为界，南以洛南—栾川—方城—明港断裂为界。栾川矿集区位于东秦岭核心成矿部位，是我国最重要的钼多金属成矿带，被称为中国钼都，储量居世界前列。其内部的黄背岭-石宝沟地区近几年勘查成果初现，又因其重要的地质背景，使该区构造特征研究显得尤为迫切。","矿区地质":"\n\t\t地层：栾川矿集区出露地层包括中元古界宽坪群、中-新元古界官道口以及新元古界的栾川群和陶湾群（金雪，2017）。\n（1）中元古界宽坪群：分布于北秦岭北部地区，呈宽窄变化很大的狭长带状断续延伸千余公里，是一套强烈变形中浅变质岩系。宽坪群下部主要为绿帘纳长阳起片岩、斜长角闪岩等，中部为云母石英片，石榴二云斜长片麻岩等，上部为石英大理岩、黑云大理岩和角闪大理岩等(柯昌辉等，2014)。\n（2）中-新元古界官道口群：该群是华北陆块南缘的第二盖层，与上覆的栾川群呈整合接触，与下伏熊耳群呈假整合接触。官道口群主要为一套河流相或滨浅海相沉积，发育陆源碎屑岩和碳酸盐岩。在熊耳山南坡地区，该群出露约 2800km2火山岩系。\n（3）新元古界栾川群：该群是华北陆块南缘的第三盖层，与上覆陶湾群及下伏官道口群均呈平行不整合接触，主要分布于卢氏—栾川一带。栾川群主要为滨浅海相陆源碎屑岩—碳酸盐岩—碱性火山岩建造，岩性主要包括千枚岩、变质长石石英岩、白云石大理岩、绢云(钙质)片岩等(庞振山，2006)。\n（4）新元古界陶湾群：为华北陆块南缘的第四盖层，平行不整合覆盖于栾川群之上，该地层变质程度及构造变形较为复杂。陶湾群呈近东西向展布，由浅海相碎屑岩和碳酸盐岩组成，主要岩性包括钙质砾岩、千枚岩和片状大理岩，自下而上可依次划分为鱼库组、三岔口组、凤脉庙组、秋木沟组（柯昌辉，2013）。\n构造：矿区位于华北陆块南缘和北秦岭构造带的衔接部位，大地构造位置属于华北板块南缘。长期复杂的地质构造演化过程中，形成了一系列大致相互平行的NW-NWW 向区域性主干裂带，自北向南依次为马超营断裂、栾川断裂、瓦穴子断裂、朱阳关-夏馆断裂带和商丹缝合带。在主干断裂带之间，发育一系列 NE—NNE 向构造，与 NW 向构造交叉，形成网格状构造(许志琴，1988；张国伟，2001)。 \n岩浆岩：自新太古代至中生代，豫西地区岩浆活动频繁，伴有火山喷发作用，发育多种不同类型岩浆，具有多旋回、多期性特征（许腾，2015）。区域内燕山期岩浆活动达到高峰，大规模酸性岩浆侵入，形成了一系列花岗岩岩基（如老君山岩体、合峪岩体）和岩株（如上房沟岩体、南泥湖岩体）。栾川矿集区内出露南泥湖、火神庙、鱼库等岩体。 ","矿床地质":"\n\t\t矿体：该矿床剥蚀程度浅，地表局部可看到辉钼矿化。主矿体平面上西起石宝沟，东到半截沟沟脑，东西方向长约1400 m，南北方向宽约1280 m，面积约0.82 km2。 矿(化)体形态呈不规则椭圆状分布于石宝沟岩体东侧外接触带500 m范围内。剖面上矿体总体呈似层状，局部增厚。总体倾向北东、东。矿体底部与花岗斑岩体顶面的坡向和坡度趋于一致，倾角随岩体顶界面变化而变化，一般在30°左右，中上部相对平缓，一般20°左右。东矿段工业矿体平均品位0.10%，西矿段 0.05%，较均匀。矿体的品位变化与厚度变化关系不密切（吕伟庆等，2014）。\n矿石：根据含矿岩石主要可划分为长英角岩型辉钼矿石、透辉石斜长石角岩型辉钼矿石、矽卡岩型辉钼矿石、花岗岩型辉钼矿石4种矿石类型，另外还有少量变辉长岩型辉钼矿矿石、白云石大理岩型辉钼矿矿石等。矿石结构以鳞片状结构、镶嵌结构、包体结构、 自形－它形晶粒状结构。矿石构造以细脉状构造、 脉状构造、浸染状构造、细脉浸染状构造（吕伟庆等，2014）。\n区内矿石物质组份比较简单，钼矿石中矿石矿物含量约占1%～8%，主要由黄铁矿、辉钼矿等组成，黄铜矿、闪锌矿、磁黄铁矿、磁铁矿等少量。容矿岩石由花岗斑岩与矽卡岩组成，脉石矿物含量约占92%～99%，相应脉石矿物主要由石英、斜长石、钾长石及石英、透闪石、石榴子石、透辉石等组成。次生矿物有方解石、石英等（李敏等，2020）。\n围岩蚀变：矿床内因受热液交代作用，围岩蚀变强烈、类型复杂、分布广泛。主要类型有矽卡岩化、钾化、硅化、绢云母化、绿帘石化、绿泥石化、阳起石化、碳酸盐化、萤石化、沸石化以及硫化物化。岩体内外的蚀变具有分带性（李敏，2020）。\n\t\t","矿床成因":"属于大型斑岩—矽卡岩型钼矿床","矿床发现和开发简史":"\n\t\t1、1956~1958年，秦岭区测队对栾川地区进行了1：20万栾川幅地质调查\n和金属量、重砂测量工作，圈定了栾川—三川Cu、Pb、Zn、Mo、W等多元素组合异常，并发现了上房、南泥湖钼矿床及一些多金属矿（化）点。\n2、1957~1959年，河南省地质局豫01队，对上房、南泥湖钼矿和骆驼山钨铜矿进行了勘查，完成了南泥湖钼矿、包头砦铜钼矿、中鱼库钨铜矿及马圈钼矿等矿区的普查评价。\n3、1965~1966年，豫20队在栾川鱼库进行过铁矿普查。地质18队在栾川康山一带进行过金矿普查，发现矿化蚀变破碎带一百余条，编写有《康山矿区山金普查报告》。\n4、1968~1973年，河南省地矿局第三地质队对栾川南泥湖钼矿、三道庄钼矿开展了详细的地质勘探，并于1985年提交勘探报告。\n5、1973~1976年和1982~1986年，河南省地质局地质三队分别对栾川南部和北部地区进行了1：5万区域地质调查，为该区域的地质矿产研究提供了丰富的资料。\n6、栾川石宝沟铅锌钼钨矿由于历史原因，先后设置了24个矿业权，共形成了生产的、半生产的、废弃的大小采坑60多处。2010年10月，作为整合主体，鑫川矿业公司与7家矿业权人签订了矿业权转让合同整合，让鑫川矿业公司充满着生机。该公司先后投入5000万元进行勘探，仅2011年4月钻探矿工作量就达16000米，新增铅锌钼钨矿储量190万吨。在2011年7月国土资源部通报表彰的全国47家矿产资源开发先进矿山中，栾川县鑫川矿业公司名列其中。\n\t\t","参考文献":"\n\t\t[1]\t金雪. 豫西石宝沟花岗岩体成因及其成矿潜力评价[D].中国地质大学(北京),2016.\n[2]\t刘冲,刘炳战,邹雪冬,黄一格,陈静,姜丽丽,李冬.栾川矿集区黄背岭—石宝沟地区地质构造赤平投影分析[J].世界有色金属,2020(20):194-195.\n[3]\t吕伟庆，刘建军，吴飞，张衡.河南省栾川县石宝沟钼矿矿床地质特征及成因探讨[J].中国钼业,2014,(4): 20-24\n[4]\t李敏.河南栾川石宝沟矿区辉钼矿矿物学及标型特征研究[J].世界有色金属,2020,(12): 114-115\n[5]\t徐兆文，任启江.河南栾川石宝沟、火神庙和大坪岩体岩浆演化特征及其与钼矿化关系[J].南京大学学报(地球科学),1988,(1): 92-105"},10:{"矿床名称":"云南省大理白族自治州鹤庆县北衙金多金属矿床","英文名称":"Beiya Gold Polymetallic Deposit in Hebi County, Dali, Yunnan","产地":"大理白族自治州鹤庆县北衙金多金属矿床","省":"云南省","国家":"中国 ","经度":"E100°11′15″~E100°13′00″","纬度":"N26°07′30″~N26°10′30″","高程":"1800m","区域地质背景":"矿区处于三江造山带与扬子板块的弧形结合部位，被夹持在北西向金沙江—红河断裂、南北向宾川—程海断裂和北东向丽江—木里断裂之间。这三大断裂系统构成区内的构造骨架。不但规模巨大，而且活动历史较长，长期以来控制区内的地层发育、褶皱变形、岩浆活动以及矿产的分布。","矿区地质":"\n\t\t\t地层：区内地层从元古界到第四系各时代地层均有出露。元古界变质岩，主要呈断块出露于洱海西侧，构成点苍山山脉的主体，称为“元古宙苍山群”。“苍山群”进一步被划分为古元古代沟头箐群、中元古代苍山群和新元古代罗平山组。沟头箐群分布于点苍山西侧，原岩为基性火山沉积岩系，为中压角闪岩相发生区域变质的产物，主要岩相为斜长角闪岩，片麻岩，云母片岩，变粒岩和大理岩等；苍山群分布在点苍山东侧，与沟头箐岩群断层接触，由大理岩，斜长角闪岩，云母片岩等组成，驰名中外的大理石即产自其中。原岩也为基性火山沉积岩系，变质程度较低，为绿片岩相到高绿片岩相；罗平山组分布于洱源县城西部的罗平山东坡，与苍山群和沟头箐群均为断层接触，原岩为碎屑岩-碳酸盐岩系，变质程度为低绿片岩相，由白云母石英片岩，绢云千枚岩和结晶灰岩组成。\n\t\t\t构造：区内主要的构造有北衙向斜和矿区西侧的马鞍山断裂, 断层走向、褶皱轴向大致呈近南北向。\n\t\t\t岩浆岩：区内岩浆岩较发育, 主要的岩浆岩为喜山期的富碱斑岩体, 此外, 在北衙地区外围出露海西期峨眉山玄武岩。富碱斑岩体出露的数量较多, 但规模较小, 岩体主要呈岩株、岩脉产出。主要的岩性有石英正长斑岩、黑云母正长斑岩、正长斑岩、煌斑岩脉体及次火山角砾岩。\n\t\t","矿床地质":"\n\t\t\t矿体：主要矿体类型划分为四种：产在矽卡岩带中 (内外接触带) 的Au-Cu-Fe矿体，产在富碱斑岩体内的Au-Fe (Cu) -Mo矿体，层间破碎带中的Fe-Au-Cu矿体，第四系红土 (残坡积物) 中的Au-Fe矿体。北衙矿区万硐山矿段金多金属矿体分布于斑岩体内及外侧的北衙组地层中，红土型金多金属矿体分布于丽江组下段（E2l1）地层中。\n\t\t\t矿石：产在矽卡岩带中的Au-Cu-Fe矿体金品位较高, 平均品位可达2.68 g/t，主要的矿石矿物包括磁铁矿、赤铁矿、褐铁矿、黄铁矿、黄铜矿、孔雀石、铜蓝、磁黄铁矿等, 脉石矿物包括绿泥石、绿帘石、透辉石、石榴子石等矽卡岩矿物以及方解石等。原生矿石的结构主要为致密块状、浸染状、脉状等。\n\t\t\t围岩蚀变：主要为钾化、绢云母化、硅化、碳酸盐化、矽卡岩化、绿泥石化、大理岩化。\n\t\t","矿床成因":"属于铁氧化物铜金矿床","矿床发现和开发简史":"\n\t\t北衙金矿原称北衙铅矿，明代万历至清朝嘉庆年间就有采铅炼银，繁盛时期开采规模较大，北衙当时即属于官方炼银的管理衙门之一。1956年，云南地质局527队对斑岩接触带的磁铁矿做过普查工作；1957-1959年，先后有滇中地质队、大理州地质队、14地质队等，对铅锌矿进行了勘查工作，提交C＋D级铅金属量14x104t，平均品位2.52％，锌5.8x104t，平均品位1.36％；1966年，云南地质局第一区测队完成了鹤庆幅1：200000区测报告；1974-1975年，西南有色地勘局310地质队在该区进行岩体调查，发现与Au，Ag，Pb，Zn，Cu，Fe有关的大小斑岩体35个；1982-1985年，武警黄金13支队对金银进行评价，获金远景储量1880kg，认为矿体小而分散，无工业价值；1987-1996年，310队在笔架山矿段投入钻探1310m，坑探142m，槽探12000m，提交D＋E级表内金757kg，平均品位5.41g／t；1992-1993年，310队就笔架山西坡22号脉群向省黄金公司承包完成C＋D级金储量700.99kg，平均品位7.22g／t；在万硐山-红泥塘承包完成C＋D级金储量2667.37kg，平均品位5.38g／t；1996-1999年，310队对万硐山、红泥塘含金磁褐铁矿和北衙坝子第三系红色粘土型金矿进行了远景控制和探索，获含金磁褐铁矿D＋E级表内外金储量7499.28kg，红色粘土型E级表内金储量3710.75kg。科研及综合研究：1982年至今，不少科研单位和个人对该区进行了较深入研究。中科院地质与地球物理所、中国地质大学、中国地质科学院等。各生产科研单位随后提交和发表了一系列有关的科研报告和论文。蔡新平等1991年再次提交成果报告《滇西北衙金矿床特征及成因初探》；任治机等《中国云南鹤庆北衙金矿地质》（1995年）、《云南地体构造与成矿作用》（1996年）等并首次论述了该区的红土型金矿；中国地质大学莫宣学、曾普胜等对北衙地区的富碱斑岩及其含矿性做了研究，大批学者发表了有关本区的研究论文。2000年起，经过云南地矿资源股份有限公司连续4年的商业性地质勘查，已获得D＋E级金储量36t以上，预计到2005年可达到50t，远景储量100t。一个超大型金矿基地的雏形已经基本形成。1998年建成250t／d选厂，现正在扩建500t／d选厂，黄金生产规模2003年已达1t／a以上。\n\t\t","参考文献":"\n\t\t[1]周云满,周癸武,张长青,王利东,余红平,李万华,刘张荣.滇西北衙金多金属矿床成矿构造特征及地质勘查意义[J].大地构造与成矿学,2021,45(02):308-326.DOI:10.16539/j.ddgzyckx.2021.02.004.\n\t\t[2]张维涛.滇西北衙金多金属矿床类型与成矿时代调研[J].河北地质大学学报,2017,40(04):6-11.唐慧,刘顺,钱永超,吴锦,谭洪旗,朱志敏.四川拉拉铜矿构造变形与成矿的关系[J].矿产综合利用,2022(04):87-93.\n\t\t"},12:{"矿床名称":"四川省凉山州会理县绿水镇拉拉铜矿床","英文名称":"Zhibula Copper Deposit in MoZhugongka County, Lasa, Tibet","产地":"凉山州会理县绿水镇拉拉铜矿床","省":"四川省","国家":"中国 ","经度":"E101°57′10″","纬度":"N26°13′40″","高程":"1914m","区域地质背景":"矿区位于扬子克拉通西南缘的康滇南北构造带中段，产出于东西走向的金沙江褶断裂带与南北向构造带的交接复合处的河口复式背斜部位，是我国西南地区著名的铜铁多金属成矿带。区域地层自古元古界到新生界，除缺失奥陶系、石炭系之外，其他地层均有分布，尤以元古宙和中生代地层最发育。区域内岩浆活动强烈，并具有多旋回多期次特征，主要期次有晋宁期、澄江期、华力西期及印支期。","矿区地质":"\n\t\t地层：矿区内发育的地层主要为古元古代河口群，中元古代会理群和三叠纪白果湾组。河口群底部被辉长岩体侵蚀，未见下伏地层。河口群之上为会理群通安组，虽在矿区西侧出露，但是两者以断层相隔，未见连续的接触关系。三叠纪白果湾组主要分布于矿区南东部，在矿区北西角也有零星分布，它们受南北向断裂控制，不整合于河口群之上。\n\t\t构造：矿区构造以一系列东西向为主、南北向次之的复式背斜、复式向斜和断层为主，处于区域性的近南北向断裂F13和F29之间。F13断层走向约为北东10°到20°，倾向北西，倾角约70°～85°，属逆断层，同时西盘有向北平移的性质。F29走向北东30°左右，倾角北西，地表倾角70°～85°，向深部由陡变缓，逐步变化到30°～40°，断层属逆断层。\n\t\t岩浆岩：矿区岩浆活动强烈且分布广泛，河口期火山岩构成矿区的含矿层位。区内出露侵入岩以辉长岩为主，次为基性脉岩和侵入角砾岩等。辉长岩是矿区内广泛出露的基性侵入岩体，区内分布有十几个大小不等的岩体、岩墙和岩床。\n\t\t","矿床地质":"\n\t\t矿体：主要赋存于河口群落凼组，矿床由32个矿体组成，其中1～5号矿体规模最大，占全矿区总储量的97%。矿体一般呈层状、透镜状。通常以叠瓦状形态产出，膨胀现象明显，也伴有分支复合、尖灭再现的现象。矿体通常赋存于二云母石英片岩、石榴石黑云母片岩、石榴石二云母片岩、白云石英钠长石片岩和磁铁石英钠长岩。\n\t\t矿石：金属矿物主要有黄铜矿、黄铁矿、磁铁矿为主,其次为辉铝矿、斑铜矿、辉铜矿、闪锌矿、方铅矿、褐铁矿等;也可见少量的赤铁矿、镜铁矿、自然金、兰铜矿等。主要脉石矿物有石英、钠长石、黑云母等,次要矿物有方解石、白云母、莹石、绿泥石、石榴了石、孔雀石等,此外还可见少量的角闪石、斜长石、磷灰石、阳起石。矿石结构以半自形—他形结构、碎裂结构、交代残余结构及包含结构为主，构造主要为条带状、角砾状、块状、浸染状及脉状构造。\n\t\t围岩蚀变：主要为黑云母化、硅化、碳酸盐化、钠长石化、萤石化及绿泥石化等。\n\t\t","矿床成因":"属于铁氧化物铜金矿床","矿床发现和开发简史":"\n\t\t1956年，地质队开始对该区落凼铜矿田开展普查、详查、勘探。\n1956～1970年，以小面积找铜为主，主要是在落凼矿区及外围寻找铜矿。\n1970～1984年，铜铁并举，大面积、全方位、多兵种、多手段、教学科研齐上，集中了大量物力、财力，开展拉拉、黎溪、毛姑坝3个地区的铜铁矿床勘探和面上找矿工作，于1982年12月提交了《四川省会理县拉拉铜矿落凼矿区详细勘探地质报告》。\n1984～2004年，地质队工作陷入低谷，拉拉矿区勘查停滞。\n2004～2012年，地质队贯彻《国务院关于加强地质工作的决定》，开始重新认识拉拉铜铁矿田，组织多名专业人员反复查阅拉拉矿田历史勘查报告、科研报告、论文、原始工程编录等资料，并多次现场查看钻孔岩心，分析成矿机理，研究铜铁矿床的源、运、储、存，提出了找矿新思路。\n2012-2014年，老矿山接替资源勘查项目在拉拉落凼铜矿南部红泥坡矿区勘查取得了重大突破，新增铜资源量63.22万吨，实现重大找矿突破。\n\t\t","参考文献":"\n\t\t[1]陈辉,林鲁军,庞振山,程志中,薛建玲,陶文,马一行,龚灵明,申红涛.四川会理拉拉铜矿找矿预测模型构建与找矿示范[J].地学前缘,2021,28(03):309-327.\n[2]唐慧,刘顺,钱永超,吴锦,谭洪旗,朱志敏.四川拉拉铜矿构造变形与成矿的关系[J].矿产综合利用,2022(04):87-93.\n陈浩鹏.四川省拉拉铜矿床地质特征及成矿条件[J].世界有色金属,2020,(16):88-89.\n\t\t"},13:{"矿床名称":"山东省烟台市莱州三山岛金矿床","英文名称":"Sanshandao Gold Deposite in Laizhou, Yantai, Shandong Province","产地":"烟台市莱州三山岛地区","省":"山东省","国家":"中国 ","经度":"E119°56′11″","纬度":"N37°23′3″","高程":"-1900 m","区域地质背景":"三山岛金矿位于胶东地区西北部。胶东地区是中国最大的金矿集区，以郯庐断裂为界与鲁西相邻，分胶北地体和苏鲁地体两个构造单元。大地构造位置处在太平洋、华北和扬子板块的交汇地带，多旋回构造运动使该区发育多期次岩浆作用、变质作用以及成矿作用的叠加。中生代时，华北与扬子板块碰撞造山后，区域应力场由挤压向伸展转化，且太平洋板块也发生俯冲转向，区内发生强烈的中酸性岩浆活动，并导致金大规模富集成矿。","矿区地质":"\n\t\t地层：矿区地层为新太古代胶东群郭格庄岩组斜长角闪岩、黑云变粒岩、片麻岩和TTG岩系等，且大部分被海水及第四系沉积物覆盖。\n构造：区内构造以断裂为主，控矿断裂为三山岛断裂F1，总体走向40°～45°，倾向SE，倾角为40°～45°。\n岩浆岩：岩浆岩主要是玲珑型二长花岗岩和郭家岭型花岗闪长岩。\n\t\t","矿床地质":"\n\t\t矿体：三山岛金矿床共有矿体18个，规模最大的两个矿体为I号矿体（主矿体）和II号矿体（次要矿体），两矿体走向35°～45°，倾向SE，倾角约40°，赋存于三山岛断裂下盘的黄铁绢英蚀变岩顶部或中上部，呈似层状、脉状或透镜状产出。II号矿体连续性较I号矿体好，但都常见分支和复合、膨胀和狭缩、尖灭及再现等现象。\n矿石：矿石主要为浸染状构造和脉状构造，其次有条带状构造、斑点状或斑杂状构造、网脉状构造和角砾状构造。以粒状结构、压碎结构、填隙结构、包含结构为主，其次为交代结构和固溶体出溶结构。矿石的金属矿物主要为黄铁矿，其次为闪锌矿、黄铜矿、方铅矿、自然金及银金矿，少量的毒砂、金红石、磁黄铁矿、砷黝铜矿。非金属矿物主要有石英、绢云母和方解石等。金矿物以淡金黄色的银金矿为主，少量金黄色的自然金，主要呈填隙状充填在黄铁矿的晶隙或裂隙中，少量以包体形式产在黄铁矿中。\n围岩蚀变：主要有硅化、钾化、黄铁绢英岩化和碳酸盐化。\n\t\t","矿床成因":"属于岩浆热液接触交代作用形成的层状矽卡岩型矿床","矿床发现和开发简史":"\n\t\t上世纪60年代起发现并评价胶东三山岛金矿为矿床规模宏大的蚀变岩型金矿。\n1969年完成地质勘探，1980年由加拿大莱特公司完成可行性研究，1981年北京有色冶金设计研究总院完成初步设计，矿山设计生产规模为1500t／d。\n1984年开始建立矿山，1989年开始试投产，1990年末达到设计生产规模。1991年正式生产。\n经过多年的发展，矿山采、选、冶综合生产能力达7000t／d，已成为我国前100家大型有色金属矿采选企业之一，也是目前中国黄金生产机械化程度最高的黄金矿山。\n经过近三十年的开采，矿区开采深度逐渐加大，浅部资源逐步被消耗，保有储量进入资源危机阶段，寻找接替资源迫在眉捷。\n2007年三山岛金矿接替资源勘查工作已经获得＂全国危机矿山资源接替勘查”项目的资助，大量的勘探工程在矿区深部实施，为成矿规律的研究以及矿区深部、外围的成矿预测提供了宝贵的资料。\n\t\t","参考文献":"\n\t\t[1]邱志伟,李占轲,袁中正.胶东三山岛金矿床黄铁矿显微结构和微量元素特征：对金富集机制的指示[J].地球学,2022,47(01):290-308.\n许杨,蓝廷广,舒磊,胡换龙,陈应华,王洪.胶东三山岛金矿床黄铁矿As富集机制及其对金成矿作用的指示[J].矿床地质, 2021,40(03):419-431.\n\t\t"},14:{"矿床名称":"安徽马鞍山市向山镇凹山铁矿","英文名称":"Washan Iron Deposit in Xiangshan district, Ma'anshan area, Anhui","产地":"马鞍山市向山镇凹山铁矿","省":"安徽省","国家":"中国 ","经度":"E118°36′21″—E118°36′21″","纬度":"N31°39′53″—N31°39′53″","高程":"露天矿坑","区域地质背景":"凹山玢岩铁矿床位于我国长江中下游成矿带宁芜矿集区。大地构造位于扬子板块北缘，产于方山—小丹阳断裂、长江断裂带、芜湖断裂和南京-湖熟断裂为边界断裂之间，从南京至芜湖呈NE-SW向展布，是典型的断陷盆地。“玢岩铁矿”是指在陆相安山质火山岩分布区，与辉石闪长玢岩－次火山岩或火山－侵入岩体在空间、时间以及成因上相联系的一组以铁为主的矿床。这一概念的提出，摒弃了以前孤立地研究个别矿床的局限性，对扩大区域找矿规模具有重要意义。","矿区地质":"\n\t\t地层：矿区内除生产采场及少数地段外，均被第四系残积物和人工堆积物所覆盖。工程揭露，矿区深部依次发育白垩纪大王山组（K1d）和龙王山组（K1l）火山岩，以及侏罗纪象山群（J1-2x）沉积岩。白垩纪大王山组（K1d）火山岩自上而下分为两段，其中上段为紫灰、紫红色斜长粗面岩、粗安岩，晶屑凝灰岩和含石英粗安岩；下段为浅灰色安山岩、粗面岩、局部夹角砾凝灰岩及沉凝灰岩。龙王山组（K1d）火山岩自上而下分为三个部分，其中上部为灰紫色角砾凝灰岩及凝灰岩；中部为灰紫色安山岩，夹浅黄色凝灰质砂岩；下部为灰色安山岩及凝灰质砂岩。侏罗纪象山群（J1-2x）主要为含细砂粉砂岩。\n构造：区内构造活动多为断裂活动，N-NE向隐伏断裂带是控制凹山矿床形成的主要构造。该断裂带总走向15°。断裂内充填有辉石闪长玢岩。在断裂的弧形凸出处与次级横断裂交叉处，通常形成了品位富、储量大的矿床。\n岩浆岩：矿区内发育辉石闪长玢岩和花岗闪长斑岩，前者是矿床的赋矿围岩，后者形成于成矿后。辉石闪长玢岩出露于矿区的中部和东部。花岗闪长斑岩在矿区呈岩株状产出，地表未见出露。\n\t\t","矿床地质":"\n\t\t矿体：凹山铁矿床共发育有61个铁矿体，其中1号矿体为主矿体，矿石储量占矿床总储量的95%以上，其余均为零星小矿体。1号矿体主体呈囊状近似球状，NW侧变薄，不规则分支尖灭；矿体走向NE45°，倾向NW，NW侧倾角平均65°；部分地段包含较多夹石，或被断层错断，或被后期花岗闪长斑岩穿切。1号矿体走向长度800-1020米，沿倾向延伸280-720米，赋存标高173.92米--226.95米，沿垂直方向延伸400.87米。矿体上部发育有较多的伟晶状磷灰石阳起石磁铁矿矿石、角砾状磁铁矿矿石，品位较高，部分TFe可达45-50%；中部和下部以网脉-角砾状磁铁矿矿石、浸染状磁铁矿矿石为主，品位较低，品位一般为20-30%，属需选磁铁矿矿石。\n矿石：磁铁矿矿石主要有四种类型，浸染状磁铁矿矿石、角砾状磁铁矿矿石、粗粒脉状磁铁矿矿石和伟晶状磁铁矿矿石。在氧化带，这四种类型则被氧化成相应的假象赤铁矿矿石。矿石主要呈自形-半自形晶粒结构、半自形-他形晶粒结构，另发育少量交代假象结构、交代包含结构、交代残留结构等。构造主要有块状构造、角砾状构造、脉状构造、细脉网脉状构造及浸染状构造。其中，脉状构造和网脉状构造多见于矿体的上部，角砾状和块状构造多见于矿体的中部，浸染状构造多见于矿体的下部。矿石中金属矿物主要有磁铁矿、假象赤铁矿、赤铁矿、褐铁矿、黄铁矿等；非金属矿物主要有钠长石、阳起石、绿泥石、绿帘石、磷灰石、石英等。\n围岩蚀变：矿区发育有强烈的围岩蚀变。与铁矿化关系密切的是阳起石化、绿泥石化和绿帘石化。阳起石化在铁矿体附近的岩石中发育广泛；在铁矿体中，阳起石伴随磁铁矿充填和交代围岩；绿泥石化主要发育在铁矿体中岩石角砾内，在铁矿化发育较弱的矿体下部绿泥石化显著减弱；绿帘石化多发育在铁矿体下部及矿体下部围岩中。\n\t\t","矿床成因":"属于玢岩型铁矿床","矿床发现和开发简史":"\n\t\t1、上世纪初：凹山铁矿床是1912年被发现的，在1917年前后，南山矿区即为私人资本家开采。\n2、1937-1945年：日军占领期间在凹山进行掠夺式开采。\n3、解放后-1985年：解放后矿山归国有，并经历了开采规模的四次扩建。第一次扩建工作于1956年开展，按年产铁矿石50万吨组织生产；第二次于1965年，按年产铁矿石370至400万吨组织生产；第三次于1973年，按年产铁矿石500万吨组织生产；第四次于1985年，对原有凹山采选系统进行了技术改造，矿山规模由年产铁矿石500万吨扩大到600万吨。\n4、1989年：采剥总量达到顶峰，完成了1513万吨，矿石产量突破600万吨，创造了当时我国金属露天矿山小面积的矿山达到了大规模的产量和由山坡露天开采实现增产过渡先例的两个“奇迹”，为我国的经济建设作出了巨大的贡献。\n5、1970末-90初：宁芜项目研究小组（1978）根据宁芜矿集区内铁矿床的地质地球化学特征建立了“玢岩铁矿”理想模型，凹山铁矿床是其中的一个重要的矿床亚类，常印佛等（1991）、翟裕生等（1992）和唐永成等（1998）在对长江中下游多金属成矿带的研究中亦根据地质地球化学特征对凹山铁矿床的成因等问题进行了总结分析。\n\t\t","参考文献":"\n\t\t[1].Liu W H, Daniík M, Zhang J, Xu X L. Apatite (U–Th)/He thermochronometry of iron deposits in the central Ningwu volcanic basin, eastern China: Implications for exhumation and preservation[J]. Journal of Geochemical Exploration, 2020:106608.\n[2].Duan C, Li Y H, Mao J W, Hou K J, Wang C L, Yang B Y, Wang Q, Li W. Ore formation at the Washan iron oxide–apatite deposit in the Ningwu Ore District, eastern China: Insights from in situ LA-ICP-MS magnetite trace element geochemistry[J]. Ore Geology Reviews, 2019, 112:103064.\n[3].Hou T, Zhang Z C, Encarnacion J, Huang H, Wang M. Geochronology/geochemistry of the Washan dioritic porphyry associated with Kiruna-type iron ores, Middle-Lower Yangtze River Valley, eastern China: implications for petrogenesis/mineralization[J]. International Geology Review, 2012, 54(11):1332-1352.\n[4].Yu J J, Chen Y C, Mao J W, Pirajno F, Duan C. Review of geology, alteration and origin of iron oxide–apatite deposits in the Cretaceous Ningwu basin, Lower Yangtze River Valley, eastern China: Implications for ore genesis and geodynamic setting[J]. Ore Geology Reviews, 2011, 43(1):170-181.\n[5].Zhou T, Yu F, Feng Y, Zhang L, Bing Q, Liang M, YangX. Geology and geochronology of magnetite-apatite deposits in the Ning-Wu volcanic basin, eastern China[J]. Journal of Asian Earth Sciences, 2013, 66(apr.8):90-107.\n[6].常印佛，刘湘培，吴言昌.长江中下游铜铁成矿带[M].地质出版社，1991.\n[7].陈津华，曾键年，王思源，李锦伟，邱金亮，张燕.宁芜和庐枞火山岩盆地玢岩铁矿矿床地球化学特征及其成矿动力学背景探讨[J].地质科技情报，2012，31(1):9.\n[8].董树文，项怀顺，高锐，吕庆田，李建设，战双庆，卢占武，马立成．长江中下游庐江－枞阳火山岩矿集区深部结构与成矿作用[J]．岩石学报，2010，26（9）：2529-2542\n[9].范裕，周涛发，袁峰，张乐骏，钱兵，马良，David RC.宁芜盆地闪长玢岩的形成时代及对成矿的指示意义[J].岩石学报，2010(9):14.\n[10].侯可军，袁顺达.宁芜盆地火山-次火山岩的锆石 U-Pb 年龄、Hf 同位素组成及其地质意义[J].岩石学报，2010，26（3）：888-902\n[11].宁芜研究项目编写组.宁芜玢岩铁矿[M].北京：地质出版社，1978\n[12].余金杰.宁芜地区凹山和太山铁矿床中磷灰石Sr同位素特征及意义[J]. 地质论评，2003，49(3):272-276.\n[13].赵新福，曾丽平，廖旺，李婉婷，胡浩，李建威.长江中下游成矿带玢岩铁矿研究新进展及对矿床成因的启示[J].地学前缘，2020，27(2):21.\n[14].周涛发，范裕，袁峰，邓宇峰，张达玉.宁芜矿集区矿床学实践教程[M].地质出版社，2015\n[15].周涛发，范裕，袁峰.长江中下游成矿带成岩成矿作用研究进展[J].岩石学报，2008，24（8）： 1665-1678\n\t\t"},15:{"矿床名称":"内蒙古呼伦贝尔市新巴尔虎右旗乌奴格吐山铜钼矿床","英文名称":"Wulugetushan Molybdenum Copper Deposite in Xin Barag Youqi, Hulunbeier, Inner Monglia","产地":"呼伦贝尔市新巴尔虎右旗乌奴格吐山","省":"内蒙古自治区","国家":"中国 ","经度":"E 117°18′00","纬度":"N 49°26′00″","高程":"690m","区域地质背景":"乌奴格吐山矿床所在的满洲里-额尔古纳地区属外贝加尔海西期褶皱系，其西南和东北分别延入蒙古和俄罗斯境，东南以额尔古纳-呼伦深大断裂为界与大兴安岭褶皱系相接，是重要的有色、贵金属成矿区。区域上地层发育不全，主要有：元古界隹疙疸组、古生界泥盆系中统乌奴耳纽、上古生界下三迭统老龙头组、中生界下侏罗统万宝组、下侏罗统塔木兰沟组、下侏罗统满克头鄂博组、上侏罗统玛尼吐组、下白垩统梅勒图组、下白垩统大磨拐河组、新生界第三系上—中新统呼查山组。","矿区地质":"\n\t\t地层：矿区内仅有上古生界下石炭统莫尔根河组海相火山岩地层，中生界上侏罗统陆相中酸性火山岩沉积岩层，与下伏石炭系地层为不整合接触。\n构造：受额—呼深断裂(得尔布干中蒙断裂带一部分)的制约，矿区内发育有NW、NE、NWW三组次级断裂构造和火山机构。而火山活动又受燕山早期阶段NW和NE向两组断裂的交叉复合构造的控制，表现出多期次喷发与侵入的特点。围绕复合火山管道发育的环形构造系统明显的控制着该矿床的蚀变与矿化。\n岩浆岩：区内岩浆岩以燕山期为主，华力西期少见。燕山早期以侵入活动为特征，沿隆起区核部侵入的有黑云母花岗岩、花岗岩、花岗细晶岩等中酸性侵入岩，为矿区的主要成矿围岩。燕山晚期以火山喷发和超浅成侵入为特征，是该矿床主要成矿期。其早阶段主要有潜流纹岩、潜斜长花岗斑岩、潜花岗斑岩、潜石英斑岩等次火山岩，其中潜斜长花岗斑岩在时空及成因上与矿化富集有密切关系。晚阶段主要有英安质潜火山角砾岩、潜流纹斑岩。\n\t\t","矿床地质":"\n\t\t矿体：铜钼矿体，在平面上以潜斜长花岗斑岩体为中心呈空心环形矿带。剖面上与潜斜长花岗斑岩形态、产状相一致，为上缓下陡呈北西倾斜的筒状体。具上宽下窄的特点，矿体南东部被晚期侵入的角砾岩所破坏，矿体中部被成矿后期断层错断，分割成南北2个矿段，北矿段是矿床的主体，南矿段矿体个数多、规模小。\n矿石：矿石结构以它形—半自形结构为主，次有交代结构、包含结构、固熔体分解结构、镶边结构等。矿石构造以细脉状、细脉浸染状为主，兼有细粒浸染状，局部有团块状、角砾状。主要金属矿物有黄铁矿、黄铜矿、辉铜矿、黝铜矿、铜兰、辉钼矿，其次是斑铜矿、方铅矿、闪锌矿、磁铁矿、毒砂等,表生金属矿物可见褐铁矿、孔雀石、蓝铜矿、钼华。脉石矿物:石英、钾长石、斜长石、绢云母，次要为伊利石、水白云母，少量方解石、金红石、硬石膏、萤石、高岭石、褐帘石等。\n围岩蚀变：与成矿作用有关的热液蚀变类型主要有:硅化、钾长石化、绢云母化、水白云母化、伊利石化、碳酸盐化，次为黑云母化、高岭土化、白云母化、硬石膏化，少见绿泥石化、绿帘石化和明矾石化等。其中硅化、钾长石化、绢云母化最重要。\n\t\t","矿床成因":"Null","矿床发现和开发简史":"\n\t\t1960年内蒙古地质局114队进行满洲里幅1：100万地质调查，于矿区首次发现矿化，但认为品位较低、矿化范围小而终止进一步找矿工作。黑龙江冶金地质勘探公司和黑龙江有色地质勘查局先后于1977～1983、1990～1992年间对矿区进行勘查。2005～2006年，中国黄金集团勘探工作表明，乌奴格吐山铜钼矿为一可利用待开发的大型铜钼矿床（李宁，2013）。\n\t\t","参考文献":"\n\t\t[1]王天豪,孙德有,苟军.乌奴格吐山矿床成矿时代及矿床成因探讨[J].矿床地质,2012,31(S1):613-614.DOI:10.16111/j.0258-7106.2012.s1.310.\n周忠政,宋作均.内蒙古乌奴格吐山铜钼矿床围岩蚀变特征浅析[J].长春工程学院学报(自然科学版),2008,(04):46-50.\n\t\t"},16:{"矿床名称":"云南省保山市金厂河铁铜铅锌多金属矿床","英文名称":"Jinchanghe Iron-Copper-Lead-Zinc Polymetallic Deposit in Baoshan, Yunnan","产地":"保山市隆阳区","省":"云南省","国家":"中国 ","经度":"E99°10′48″","纬度":"N25°27′08″","高程":"1795m","区域地质背景":"金厂河矿床位于冈底斯-念青唐古拉褶皱系南段，保山-永德褶皱束北段之核桃坪复背斜东翼，属于保山-镇康铅锌多金属成矿带。保山地块西侧为高黎贡-怒江断裂，东侧为澜沧江断裂，北部在碧江一带由于澜沧江断裂和怒江断裂汇拢而消失，南部延出国境，构成滇缅泰马（Sibumasu）地体的一部分。保山地块地层出露较齐全，包括古生界、中生界 和新生界，其中古生代地层出露范围较广，早古生代 与晚古生代地层均有出露，早古生界主要为寒武系 上统沙河厂组与核桃坪组大理岩化灰岩、变质砂岩、钙质板岩；晚古生代及中生代地层为泥岩、灰岩、白云质灰岩。区域上主要构造线方向为北北西向，晚期被北西向及北东向断裂错断。","矿区地质":"\n\t\t地层：矿区出露地层主要为寒武系、奥陶系、志留系及第四系本矿区主要赋矿围 岩是上寒武统核桃坪组中段大理岩化灰岩。\n构造：矿区主要见 NW 向、NE 向、近 NS 向三组断裂，其中F2走向，NW倾向南西倾角74°，具压扭性逆断层性质；F10走向NE，倾向南东，倾角70°，具张扭性正断层活动特征。F2、F10两断裂交汇于矿区东侧，是重要的运矿构造，同时也控制矿体分布范 围；区内主要褶皱为金厂河背斜，褶皱轴面应力作用较为集中，地层容易产生张性裂隙使得该背斜核部的层间裂隙成为有利的容矿构造。\n岩浆岩：矿区地表见海西期辉绿岩-辉长岩，主要呈岩脉、岩株状产出，分布点较多，主要呈岛状-透镜状分布。\n\t\t","矿床地质":"\n\t\t矿体：矿体呈层状、似层状、透镜状产于矽卡岩和矽卡岩化大理岩中，在金厂河隆起中心部位矿体厚度大，向四周矿化减弱，厚度减薄。目前共圈定矿体174个，有铅锌矿体43个、铜矿体57个、磁铁矿体65个。\n矿石：矿石矿物主要为磁铁矿、闪锌矿、方铅矿、黄铜矿、磁黄铁矿。脉石矿物主要为石榴子石、辉石、阳起石、黑柱 石、绿帘石、绿泥石,其次为石英、方解石、萤石、少量 榍石、金红石等.\n\t\t","矿床成因":"属于矽卡岩型多金属隐伏矿床","矿床发现和开发简史":"\n\t\t1．自1990年至2003年，云南省地矿局、云南省地质调查院等先后在金厂河矿区开展地面磁测、土壤化探测量、重力测量，圈定了具有大面积磁异常、高重力异常及n、Pb、Cu等元素高度浓集的金厂河隐伏多金属矿床。\n2.2003年经过钻探验证，发现隐伏厚大铁铜铅锌矿体。\n2004年至今，云南黄金矿业集团股份有限公司对金厂河矿床进行了普查与详查勘探，基本上查明了矿体特征，并持续扩大了铜、铅锌、铁的储量，目前该矿床已达到中-大型规模\n\t\t","参考文献":"\n\t\t[1]黄华,张长青,周云满,刘博,谢永富,董云涛,杨春海,董文伟.云南金厂河铁铜铅锌多金属矿床矽卡岩矿物学特征及蚀变分带[J].岩石矿物学杂志,2014,33(01):127-148.\n\t\t"},17:{"矿床名称":"甘肃省金川铜镍硫化物矿床","英文名称":"Cu-Ni Deposit in JinChuan City，Gansu Province","产地":"甘肃省金川市","省":"甘肃省","国家":"中国 ","经度":"101°50＇45＂-101°54＇00＂","纬度":"38°33＇30＂-38°36＇30＂","高程":"null","区域地质背景":"矿区经历了不同构造层次、不同时期的构造变动、岩浆活动和变质作用，呈现出复杂的构造形迹。金川铜镍硫化物矿床位于阿拉善台块南西边缘，龙首山隆起东希北东侧深断裂的上盘（即南西侧）。长城纪晚期华北古地块西南边缘拉张环境，大陆裂谷的前断裂拱曲。岩浆活动频繁，尤为加里东期岩浆活动十分强烈，从寒武世一奥陶世一志留世均有岩浆活动，发育了一套中基性一酸性一偏碱性的岩石组合。各类侵入体多成岩株、岩瘤状产出。","矿区地质":"\n\t\t地层：矿区经历了不同构造层次、不同时期的构造变动、岩浆活动和变质作用，呈现出复杂的构造形迹。金川铜镍硫化物矿床位于阿拉善台块南西边缘，龙首山隆起东希北东侧深断裂的上盘（即南西侧）。长城纪晚期华北古地块西南边缘拉张环境，大陆裂谷的前断裂拱曲。岩浆活动频繁，尤为加里东期岩浆活动十分强烈，从寒武世一奥陶世00:00光活动发育了一套中其性一酸性0319君性的岩石组合。各类侵入体多成岩株、岩瘤状产出\n\t\t","矿床地质":"\n\t\t金川铜镍硫化物矿床中的矿体形态主要有以下几种：\n（1）似层状矿体\n由于岩浆结晶分异作用形成的星点状贫矿体、海绵陨铁状富矿体，或超基性岩底盘围岩中的接触交代型矿体，具这种形态，其中贫矿体基本上沿超基性岩带呈层状连续分布，海绵陨铁状富矿体则呈似层状连续分布。\n（2）透镜状矿体\n交代型矿体呈透镜状分布。海绵陨铁状富矿体也有呈透镜状连续分布的。\n（3）脉状、囊状矿体\n由岩浆熔离出的金属硫化物矿浆或构造变质成矿热液沿构造裂隙（原生破碎构造、后期裂隙构造）充填（交代）形成的矿体，多呈不规则脉状、小的囊状，规模不大。\n（4）柱状矿体\n在I矿目前仅发现一个，位于6行，矿体呈向南倾斜的柱状，柱高约300m下端与似层状主矿体相连，矿柱断面呈不规则多边形，断面直径在各中段变化较大，大的约80m左右，小的20～30m。矿体北西侧与断层（F6）相接。矿化呈海绵陨铁状和细脉浸染状，铜含量较高，伴生的金、银含量也高。\n（5）58号矿体\n矿体沿走向不连续，是由多个小矿体组成，矿体的外部形态极不规则，规模大小相差悬殊，呈不规则扁豆状、囊状、透镜状、脉状等。\n矿石：1）矿石的矿物成分\n金属矿物以硫化物为主，含少量氧化物、微量自然元素等。按工业类型划分为原生矿石和氧化矿石两种。原生矿石又主要包括浸染状矿石、星点状矿石、海绵陨铁状矿石和块状矿石等。在与大理石接触带还发现有变质矿石。氧化矿石中的矿物组分分布较多的是氧化物、氢氧化物、碳酸盐矿物、硫酸盐矿物、硅酸盐矿物。氧化物及氢氧化物主要有褐铁矿、针铁矿、石英、燧石。矿石类型主要为稀疏浸染状和稠密浸染状矿石。矿石中金属硫化物主要为磁黄铁矿、镍黄铁矿和黄铜矿。矿物成分主要有孔雀石、蓝铜矿、黄铜矿、黄铁矿，另有少量的磁铁矿、赤铁矿、褐铁矿。\n2）矿石的组构\n金川硫化物矿床的矿石结构常见有他形晶粒状结构、碎裂结构、自形晶粒状结构、半自形晶粒结构、溶蚀结构、板状结构、交代文象结构、交代残余结构、交代网脉状结构、交代格状结构、揉皱结构等。\n围岩蚀变：金川铜镍矿床岩石的直接围岩是大理石、片岩和混合岩等。围岩发生过不同程度的蚀变作用，主要有蛇纹石化、绿泥石化、透闪石化、滑石碳酸岩化等。但以蛇纹石化最为发育，且与成矿关系极为密切。\n\t\t","矿床成因":"岩浆熔离--贯入-接触交代作用复合矿床","矿床发现和开发简史":"\n\t\t本区先后有甘肃省地质局645队、地质六队、煤田地质勘探局145队、核工业212队等在本区进行地质及矿产普查工作，但未收集到与本次工作有关的地质资料。\n1．金川硫化物铜镍矿床最初发现于1958年，1958年，甘肃省地质局祁连山地质队（原第六地质队，现合并于甘肃省地矿局第四地质矿产勘查院）第一分队，在测区进行地质测量，发现东大山铁矿和白家嘴铜镍矿。\n2.1964年-1968年，甘肃省地质局第一区测队在前人工作的基础上，在该区内进行了1：20万河西堡幅区域地质、矿产测量工作，出版有1：20万《河西堡》区域地质、矿产测量报告。\n1984年-1988年，在测区进行了1：5万区域地质调查，并提交了相应的报告。\n3．从2000开始，金川集团公司开展深部二轮地质找矿勘探，并取得了重大发现。\n4.2003年，核工业212队在该地区进行地质预查工作时发现了该铜矿点；2004年-2007年之间，相继有不同的私人投资方在此地进行了少量槽探、硐探等零星的地质工作，其中2006年中南大学对金川矿床构造体系进行了研究。\n5.2008年，甘肃省地矿局第四地质矿产勘查院物测组在测区开展了1：5000面积性磁测工作，共完成13.14km2，发现大的磁异常10处，未做进一步的地质工作。该年底，兰州源鑫旺矿业有限公司在该区施工了3个钻孔，并在2009年予以编录。\n6.2009年6月-2009年11月，甘肃省地矿局第四地质矿产勘查院在测区南西角有铜矿化的地带开展1：1万地质草\n测、1：2千地质正测和槽探工程揭露，并对以往前人研究成果进行了编录；另外，对2008年发现磁异常的地区进行1：1万地质草测、1：2千地质正测、1：2千磁法测量和槽探工程揭露，在芦草沟南铜矿区，共圈定铜矿体10条，矿体长22m-61m不等，厚度1.01m-4.95m不等，矿物成分以Cu为主，平均品位在0.60％-3.19％之间，矿石自然类型为氧化矿。\n\t\t","参考文献":"\n\t\t1、贾恩环．甘肃金川硫化铜镍矿床地质特征．矿床地质，1986,5(1):27-38\n2、李文渊等．金川式深部熔离-贯入型铜镍硫化物矿床模型．《中国矿床模型概论》．北京：地质出版社．2009\n3、汤中立，李文渊．1995．金川硫化铜镍（含铂）矿床成矿模型及地质对比．北京：地质出版社，1-209\n4、高强祖、王玉山、黄满湘．金川铜镍硫化物矿床I、II矿区矿体地质对比研究．矿产与地质．2009,23（6）：514-518\n5、贾恩环．金川铜-镍硫化物矿床成矿模式和成矿系列．地质论评．1986,32（3）：276-286\n6、高强祖、黄满湘．金川铜镍硫化物矿床成因探讨．西部探矿工程．2006,122（6）：143-144\n7、汤中立．金川硫化铜镍矿床成矿模式．现代地\n质．1990,4（4）：55-64\n8、汤中立．金川含矿超铁镁岩的Sm-Nd定年．科学通报．1992,10：918～920\n9、汤中立．金川铜镍硫化物矿床岩浆成矿作用的偏在性．甘肃地质学报．1996.5（2）：73-85\n10、徐庆生，宋学信，张景凯，曹亚文．金川超镁铁质岩体矿物化学特征及矿物地质温度计、压力计研究.甘肃地质学报．1994,3（1）：59-69\n11、杨杆柱，彭礼贵，董显扬，侯世军，巩志超，安三元．金川含铜镍超基性岩体的岩浆包裹体特征及其地质意义.地质论评．1991.37（1）：70-79\n12、罗照华等．铜镍硫化物矿床的成因一一以诺里尔斯克（俄罗斯）和金川（中国）为例．矿床地质．2000,19（4）：330-339\n13、高辉等．金川铜镍矿床成矿模式、控矿因素分析与找矿．地质与勘探．2009,45（3）：218-228\n14、杨胜洪等．金川铜镍硫化物矿床的Re-Os“年龄”及其意义．地球化学．2007,36（1）：27-36\n15、田毓龙．金川铜镍硫化物矿床岩浆通道型矿体地质地球化学特征．2009,83（10）：1515-1525\n16、赵振华，钱汉东．金川铜镍硫化物矿床两类矿石的稀土元素地球化学特征研究．矿床地质2008,27（5）：613-621\n17、朱文凤，梁有彬．金川铜镍硫化物矿床铂族元素的赋存状态及分布规律．地质与探．2000,36（1）：26-28\n18、张宗清．金川铜镍矿床年龄和源区同位素地球化学特征．地质学报．2004,7（3）：360-365\n19、胡沛青等．金川Cu-Ni-PGE硫化物矿床成矿过程稀有气体同位素组成示踪．岩石学报．2010,26（11）：3375-338620、高辉等．布什维尔德杂岩体Platreef矿床与金川铜镍硫化矿床微量元素地球化学特征对比及其意义．2009,36（2）：268-288\n\t\t"}};t.mineralBedInfo=r;var a={1:"斑岩型铜矿石",2:"矽卡岩型铜矿石",3:"矽卡岩型铜多金属锌矿石",4:"石英脉型金矿石",5:"锑铅锌矿石",6:"锑铅锌矿石",7:"矽卡岩铅锌矿石",8:"矽卡岩型钼多金属矿石",9:"",10:"矽卡岩型多金属矿石",11:"",12:"铜金矿石",13:"蚀变岩型金矿石",14:"玢岩型铁矿石",15:"铜钼矿石",16:"矽卡岩型铜铅锌矿石",17:"铜镍硫化物型矿石"};t.titles=a},bd86:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.inited?n("v-uni-view",{ref:"u-transition",staticClass:"u-transition",class:e.classes,style:[e.mergeStyle],on:{touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.noop.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickHandler.apply(void 0,arguments)}}},[e._t("default")],2):e._e()},a=[]},bf19:function(e,t,n){"use strict";var i=n("23e7");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c037:function(e,t,n){"use strict";n.r(t);var i=n("ac17"),r=n("41b8");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("fd1c");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"55cfca04",null,!1,i["a"],o);t["default"]=l.exports},c154:function(e,t,n){"use strict";var i=n("619d"),r=n.n(i);r.a},c50f:function(e,t,n){"use strict";var i=n("4ea4");n("99af"),n("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("1da1")),a=(i(n("2d8e")),function(e){return{enter:"u-".concat(e,"-enter u-").concat(e,"-enter-active"),"enter-to":"u-".concat(e,"-enter-to u-").concat(e,"-enter-active"),leave:"u-".concat(e,"-leave u-").concat(e,"-leave-active"),"leave-to":"u-".concat(e,"-leave-to u-").concat(e,"-leave-active")}}),o={methods:{clickHandler:function(){this.$emit("click")},vueEnter:function(){var e=this,t=a(this.mode);this.status="enter",this.$emit("beforeEnter"),this.inited=!0,this.display=!0,this.classes=t.enter,this.$nextTick((0,r.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,uni.$u.sleep(20);case 2:e.$emit("enter"),e.transitionEnded=!1,e.$emit("afterEnter"),e.classes=t["enter-to"];case 6:case"end":return n.stop()}}),n)}))))},vueLeave:function(){var e=this;if(this.display){var t=a(this.mode);this.status="leave",this.$emit("beforeLeave"),this.classes=t.leave,this.$nextTick((function(){e.transitionEnded=!1,e.$emit("leave"),setTimeout(e.onTransitionEnd,e.duration),e.classes=t["leave-to"]}))}},onTransitionEnd:function(){this.transitionEnded||(this.transitionEnded=!0,this.$emit("leave"===this.status?"afterLeave":"afterEnter"),!this.show&&this.display&&(this.display=!1,this.inited=!1))}}};t.default=o},c53d:function(e,t,n){"use strict";n.r(t);var i=n("7fdb"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},c806:function(e,t,n){"use strict";n.r(t);var i=n("6ac0"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},c876:function(e,t,n){"use strict";var i=n("762f"),r=n.n(i);r.a},cace:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uOverlay:n("9334").default,uLoadingIcon:n("a695").default,uIcon:n("4b91").default,uGap:n("e8c2").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-toast"},[n("u-overlay",{attrs:{show:e.isShow,"custom-style":e.overlayStyle}},[n("v-uni-view",{staticClass:"u-toast__content",class:["u-type-"+e.tmpConfig.type,"loading"===e.tmpConfig.type||e.tmpConfig.loading?"u-toast__content--loading":""],style:[e.contentStyle]},["loading"===e.tmpConfig.type?n("u-loading-icon",{attrs:{mode:"circle",color:"rgb(255, 255, 255)",inactiveColor:"rgb(120, 120, 120)",size:"25"}}):"defalut"!==e.tmpConfig.type&&e.iconName?n("u-icon",{attrs:{name:e.iconName,size:"17",color:e.tmpConfig.type,customStyle:e.iconStyle}}):e._e(),"loading"===e.tmpConfig.type||e.tmpConfig.loading?n("u-gap",{attrs:{height:"12",bgColor:"transparent"}}):e._e(),n("v-uni-text",{staticClass:"u-toast__content__text",class:["u-toast__content__text--"+e.tmpConfig.type],staticStyle:{"max-width":"400rpx"}},[e._v(e._s(e.tmpConfig.message))])],1)],1)],1)},a=[]},ce95:function(e,t,n){"use strict";n.r(t);var i=n("6609"),r=n("f2bc");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("3171");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"7a78d4df",null,!1,i["a"],o);t["default"]=l.exports},cfc3:function(e,t,n){var i=n("74e8");i("Float32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},d8be:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uIcon:n("4b91").default,uLine:n("ba57").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-cell",class:[e.customClass],style:[e.$u.addStyle(e.customStyle)],attrs:{"hover-class":e.disabled||!e.clickable&&!e.isLink?"":"u-cell--clickable","hover-stay-time":250},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickHandler.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-cell__body",class:[e.center&&"u-cell--center","large"===e.size&&"u-cell__body--large"]},[n("v-uni-view",{staticClass:"u-cell__body__content"},[e.$slots.icon||e.icon?n("v-uni-view",{staticClass:"u-cell__left-icon-wrap"},[e.$slots.icon?e._t("icon"):n("u-icon",{attrs:{name:e.icon,"custom-style":e.iconStyle,size:"large"===e.size?22:18}})],2):e._e(),n("v-uni-view",{staticClass:"u-cell__title"},[e._t("title",[e.title?n("v-uni-text",{staticClass:"u-cell__title-text",class:[e.disabled&&"u-cell--disabled","large"===e.size&&"u-cell__title-text--large"],style:[e.titleTextStyle]},[e._v(e._s(e.title))]):e._e()]),e._t("label",[e.label?n("v-uni-text",{staticClass:"u-cell__label",class:[e.disabled&&"u-cell--disabled","large"===e.size&&"u-cell__label--large"]},[e._v(e._s(e.label))]):e._e()])],2)],1),e._t("value",[e.$u.test.empty(e.value)?e._e():n("v-uni-text",{staticClass:"u-cell__value",class:[e.disabled&&"u-cell--disabled","large"===e.size&&"u-cell__value--large"]},[e._v(e._s(e.value))])]),e.$slots["right-icon"]||e.isLink?n("v-uni-view",{staticClass:"u-cell__right-icon-wrap",class:["u-cell__right-icon-wrap--"+e.arrowDirection]},[e.$slots["right-icon"]?e._t("right-icon"):n("u-icon",{attrs:{name:e.rightIcon,"custom-style":e.rightIconStyle,color:e.disabled?"#c8c9cc":"info",size:"large"===e.size?18:16}})],2):e._e()],2),e.border?n("u-line"):e._e()],1)},a=[]},d967:function(e,t,n){"use strict";function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n("d3b7"),n("4ae1"),n("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},dca8:function(e,t,n){var i=n("23e7"),r=n("bb2f"),a=n("d039"),o=n("861d"),s=n("f183").onFreeze,l=Object.freeze,u=a((function(){l(1)}));i({target:"Object",stat:!0,forced:u,sham:!r},{freeze:function(e){return l&&o(e)?l(s(e)):e}})},dfe9:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("5530")),a=i(n("4878")),o=i(n("c50f")),s={name:"u-transition",data:function(){return{inited:!1,viewStyle:{},status:"",transitionEnded:!1,display:!1,classes:""}},computed:{mergeStyle:function(){var e=this.viewStyle,t=this.customStyle;return(0,r.default)((0,r.default)({transitionDuration:"".concat(this.duration,"ms"),transitionTimingFunction:this.timingFunction},uni.$u.addStyle(t)),e)}},mixins:[uni.$u.mpMixin,uni.$u.mixin,o.default,a.default],watch:{show:{handler:function(e){e?this.vueEnter():this.vueLeave()},immediate:!0}}};t.default=s},e4ac:function(e,t,n){"use strict";var i=n("dbce");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("bca2"),a=i(n("74a1")),o=n("f1b0"),s=n("a147"),l=n("efcb"),u=n("21ff"),c=n("7358"),h={data:function(){return{basicInfo:r.basicInfo,mineralBedInfo:r.mineralBedInfo,titles:r.titles,camera:null,renderer:null,scene:null,light:null,lod:null,gui:null,controls:null,list4:[{name:"3D模型"},{name:"基本信息"},{name:"矿床信息"}],activeIndex:0,modelIndex:1}},onLoad:function(e){var t=this;this.modelIndex=e.model,Object.prototype.hasOwnProperty.call(this.mineralBedInfo,this.modelIndex)?uni.setNavigationBarTitle({title:this.titles[this.modelIndex]}):this.$nextTick((function(){t.$refs.uToast.show({type:"error",color:"#000",bgColor:"#e8e8e8",message:"模型加载失败",duration:3e3,fontSize:20,safeAreaInsetTop:!0})}))},computed:{getBasicInfo:function(){return this.basicInfo[this.modelIndex]||[]},getMineralBedInfo:function(){return this.mineralBedInfo[this.modelIndex]||[]}},watch:{activeIndex:{handler:function(e,t){var n=this;if(0==t){document.getElementById("three-model").style.display="none";document.querySelector(".dg").style.display="none"}0==e&&this.$nextTick((function(){if(n.scene){document.getElementById("three-model").style.display="block";document.querySelector(".dg").style.display="block"}else n.lod=new a.LOD,n.initCamera(),n.initRender(),n.initScene(),n.initLight(),n.initModel1(),n.initModel2(),n.initModel3(),n.initModel4(),n.initControls(),n.initGui(),n.animate(),window.onresize=n.onWindowResize,n.$nextTick((function(){document.querySelector(".dg").style.top="100px"}))}))},immediate:!0}},methods:{onTabChange:function(e){var t=e.index;this.activeIndex=t},initCamera:function(){this.camera=new a.PerspectiveCamera(65,window.innerWidth/window.innerHeight,.5,1e3),this.camera.position.set(120,20,120),this.camera.lookAt(new a.Vector3(0,0,0)),console.log(this.camera,a)},initRender:function(){this.renderer=new a.WebGLRenderer({antialias:!0,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=a.PCFSoftShadowMap,this.renderer.setClearColor(16777215),document.getElementById("three-model").appendChild(this.renderer.domElement)},initScene:function(){this.scene=new a.Scene},initLight:function(){this.scene.add(new a.AmbientLight(16777215)),this.light=new a.PointLight(16777215,.5),this.light.position.set(100,100,100),this.light.castShadow=!0,this.scene.add(this.light)},initModel1:function(){var e=this,t=new l.GLTFLoader,n=new s.DRACOLoader;n.setDecoderPath("@/js/draco/"),n.preload(),t.setDRACOLoader(n),t.load("static/model".concat(this.modelIndex,"/sparse1.glb"),(function(t){t.scene.position.set(0,0,0),t.scene.scale.set(20,20,20),e.lod.addLevel(t.scene,210)}))},initModel2:function(){var e=this,t=new l.GLTFLoader,n=new s.DRACOLoader;n.setDecoderPath("@/js/draco/"),n.preload(),t.setDRACOLoader(n),t.load("static/model".concat(this.modelIndex,"/sparse2.glb"),(function(t){t.scene.position.set(0,0,0),t.scene.scale.set(20,20,20),e.lod.addLevel(t.scene,170)}))},initModel3:function(){var e=this,t=new l.GLTFLoader;t.setMeshoptDecoder(c.MeshoptDecoder),t.load("static/model".concat(this.modelIndex,"/sparse3.glb"),(function(t){t.scene.position.set(0,0,0),t.scene.scale.set(20,20,20),e.lod.addLevel(t.scene,130)}))},initModel4:function(){var e=this,t=new l.GLTFLoader;t.setMeshoptDecoder(c.MeshoptDecoder),t.load("static/model".concat(this.modelIndex,"/sparse4.glb"),(function(t){t.scene.position.set(0,0,0),t.scene.scale.set(20,20,20),e.lod.addLevel(t.scene,90)}))},initGui:function(){this.gui=new o.GUI({width:200}),this.gui.add(this.controls,"autoRotate")},initControls:function(){this.controls=new u.OrbitControls(this.camera,this.renderer.domElement),this.controls.autoRotate=!0,this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.enableZoom=!0,this.controls.minDistance=40,this.controls.maxDistance=300},render:function(){this.scene.add(this.lod);var e=this.camera.position.clone();this.light.position.set(e.x,e.y,e.z),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.render(),this.renderer.setSize(window.innerWidth,window.innerHeight)},animate:function(){this.render(),this.lod.update(this.camera),this.controls.update(),requestAnimationFrame(this.animate)}}};t.default=h},e67e:function(e,t,n){"use strict";var i=n("4ea4");n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("4de4"),n("7db0"),n("4160"),n("a630"),n("c975"),n("baa5"),n("d81d"),n("26e9"),n("fb6a"),n("4e82"),n("a434"),n("c19f"),n("82da"),n("ace4"),n("f4b3"),n("4ec9"),n("90d7"),n("2af1"),n("a9e3"),n("35b3"),n("8ba4"),n("aff5"),n("dca8"),n("b64b"),n("d3b7"),n("acd8"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("466d"),n("38cf"),n("5319"),n("1276"),n("498a"),n("cfc3"),n("4a9b"),n("fd87"),n("8b09"),n("143c"),n("5cc6"),n("8a59"),n("84c3"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("10d1"),n("159b"),n("ddb0"),n("bf19"),Object.defineProperty(t,"__esModule",{value:!0}),t.ImmediateRenderObject=Og,t.WebGLRenderer=Ph,t.WebGLUtils=wh,t.DynamicCopyUsage=t.DstColorFactor=t.DstAlphaFactor=t.DoubleSide=t.DodecahedronGeometry=t.DodecahedronBufferGeometry=t.DiscreteInterpolant=t.DirectionalLightHelper=t.DirectionalLight=t.DepthTexture=t.DepthStencilFormat=t.DepthFormat=t.DefaultLoadingManager=t.DecrementWrapStencilOp=t.DecrementStencilOp=t.DataUtils=t.DataTextureLoader=t.DataTexture3D=t.DataTexture2DArray=t.DataTexture=t.DataArrayTexture=t.Data3DTexture=t.Cylindrical=t.CylinderGeometry=t.CylinderBufferGeometry=t.CustomToneMapping=t.CustomBlending=t.CurvePath=t.Curve=t.CullFaceNone=t.CullFaceFrontBack=t.CullFaceFront=t.CullFaceBack=t.CubicInterpolant=t.CubicBezierCurve3=t.CubicBezierCurve=t.CubeUVReflectionMapping=t.CubeTextureLoader=t.CubeTexture=t.CubeRefractionMapping=t.CubeReflectionMapping=t.CubeCamera=t.ConeGeometry=t.ConeBufferGeometry=t.CompressedTextureLoader=t.CompressedTexture=t.ColorManagement=t.ColorKeyframeTrack=t.Color=t.Clock=t.ClampToEdgeWrapping=t.CircleGeometry=t.CircleBufferGeometry=t.CineonToneMapping=t.CatmullRomCurve3=t.CapsuleGeometry=t.CapsuleBufferGeometry=t.CanvasTexture=t.CameraHelper=t.Camera=t.Cache=t.ByteType=t.BufferGeometryLoader=t.BufferGeometry=t.BufferAttribute=t.BoxHelper=t.BoxGeometry=t.BoxBufferGeometry=t.Box3Helper=t.Box3=t.Box2=t.BooleanKeyframeTrack=t.Bone=t.BasicShadowMap=t.BasicDepthPacking=t.BackSide=t.AxesHelper=t.AudioLoader=t.AudioListener=t.AudioContext=t.AudioAnalyser=t.Audio=t.ArrowHelper=t.ArrayCamera=t.ArcCurve=t.AnimationUtils=t.AnimationObjectGroup=t.AnimationMixer=t.AnimationLoader=t.AnimationClip=t.AmbientLightProbe=t.AmbientLight=t.AlwaysStencilFunc=t.AlwaysDepth=t.AlphaFormat=t.AdditiveBlending=t.AdditiveAnimationBlendMode=t.AddOperation=t.AddEquation=t.ACESFilmicToneMapping=void 0,t.Matrix4=t.Matrix3=t.MathUtils=t.MaterialLoader=t.Material=t.MOUSE=t.LuminanceFormat=t.LuminanceAlphaFormat=t.LoopRepeat=t.LoopPingPong=t.LoopOnce=t.LoadingManager=t.LoaderUtils=t.Loader=t.LinearToneMapping=t.LinearSRGBColorSpace=t.LinearMipmapNearestFilter=t.LinearMipmapLinearFilter=t.LinearMipMapNearestFilter=t.LinearMipMapLinearFilter=t.LinearInterpolant=t.LinearFilter=t.LinearEncoding=t.LineSegments=t.LineLoop=t.LineDashedMaterial=t.LineCurve3=t.LineCurve=t.LineBasicMaterial=t.Line3=t.Line=t.LightProbe=t.Light=t.LessStencilFunc=t.LessEqualStencilFunc=t.LessEqualDepth=t.LessDepth=t.Layers=t.LatheGeometry=t.LatheBufferGeometry=t.LOD=t.KeyframeTrack=t.KeepStencilOp=t.InvertStencilOp=t.InterpolateSmooth=t.InterpolateLinear=t.InterpolateDiscrete=t.Interpolant=t.InterleavedBufferAttribute=t.InterleavedBuffer=t.IntType=t.Int8BufferAttribute=t.Int32BufferAttribute=t.Int16BufferAttribute=t.InstancedMesh=t.InstancedInterleavedBuffer=t.InstancedBufferGeometry=t.InstancedBufferAttribute=t.IncrementWrapStencilOp=t.IncrementStencilOp=t.ImageUtils=t.ImageLoader=t.ImageBitmapLoader=t.IcosahedronGeometry=t.IcosahedronBufferGeometry=t.HemisphereLightProbe=t.HemisphereLightHelper=t.HemisphereLight=t.HalfFloatType=t.Group=t.GridHelper=t.GreaterStencilFunc=t.GreaterEqualStencilFunc=t.GreaterEqualDepth=t.GreaterDepth=t.GLSL3=t.GLSL1=t.GLBufferAttribute=t.Frustum=t.FrontSide=t.FramebufferTexture=t.FogExp2=t.Fog=t.FloatType=t.Float64BufferAttribute=t.Float32BufferAttribute=t.Float16BufferAttribute=t.FileLoader=t.ExtrudeGeometry=t.ExtrudeBufferGeometry=t.EventDispatcher=t.Euler=t.EquirectangularRefractionMapping=t.EquirectangularReflectionMapping=t.EqualStencilFunc=t.EqualDepth=t.EllipseCurve=t.EdgesGeometry=t.DynamicReadUsage=t.DynamicDrawUsage=void 0,t.RGIntegerFormat=t.RGFormat=t.RGB_S3TC_DXT1_Format=t.RGB_PVRTC_4BPPV1_Format=t.RGB_PVRTC_2BPPV1_Format=t.RGB_ETC2_Format=t.RGB_ETC1_Format=t.RGBFormat=t.RGBA_S3TC_DXT5_Format=t.RGBA_S3TC_DXT3_Format=t.RGBA_S3TC_DXT1_Format=t.RGBA_PVRTC_4BPPV1_Format=t.RGBA_PVRTC_2BPPV1_Format=t.RGBA_ETC2_EAC_Format=t.RGBA_BPTC_Format=t.RGBA_ASTC_8x8_Format=t.RGBA_ASTC_8x6_Format=t.RGBA_ASTC_8x5_Format=t.RGBA_ASTC_6x6_Format=t.RGBA_ASTC_6x5_Format=t.RGBA_ASTC_5x5_Format=t.RGBA_ASTC_5x4_Format=t.RGBA_ASTC_4x4_Format=t.RGBA_ASTC_12x12_Format=t.RGBA_ASTC_12x10_Format=t.RGBA_ASTC_10x8_Format=t.RGBA_ASTC_10x6_Format=t.RGBA_ASTC_10x5_Format=t.RGBA_ASTC_10x10_Format=t.RGBAIntegerFormat=t.RGBAFormat=t.RGBADepthPacking=t.REVISION=t.QuaternionLinearInterpolant=t.QuaternionKeyframeTrack=t.Quaternion=t.QuadraticBezierCurve3=t.QuadraticBezierCurve=t.PropertyMixer=t.PropertyBinding=t.PositionalAudio=t.PolyhedronGeometry=t.PolyhedronBufferGeometry=t.PolarGridHelper=t.PointsMaterial=t.Points=t.PointLightHelper=t.PointLight=t.PlaneHelper=t.PlaneGeometry=t.PlaneBufferGeometry=t.Plane=t.PerspectiveCamera=t.Path=t.PMREMGenerator=t.PCFSoftShadowMap=t.PCFShadowMap=t.OrthographicCamera=t.OneMinusSrcColorFactor=t.OneMinusSrcAlphaFactor=t.OneMinusDstColorFactor=t.OneMinusDstAlphaFactor=t.OneFactor=t.OctahedronGeometry=t.OctahedronBufferGeometry=t.ObjectSpaceNormalMap=t.ObjectLoader=t.Object3D=t.NumberKeyframeTrack=t.NotEqualStencilFunc=t.NotEqualDepth=t.NormalBlending=t.NormalAnimationBlendMode=t.NoToneMapping=t.NoColorSpace=t.NoBlending=t.NeverStencilFunc=t.NeverDepth=t.NearestMipmapNearestFilter=t.NearestMipmapLinearFilter=t.NearestMipMapNearestFilter=t.NearestMipMapLinearFilter=t.NearestFilter=t.MultiplyOperation=t.MultiplyBlending=t.MixOperation=t.MirroredRepeatWrapping=t.MinEquation=t.MeshToonMaterial=t.MeshStandardMaterial=t.MeshPhysicalMaterial=t.MeshPhongMaterial=t.MeshNormalMaterial=t.MeshMatcapMaterial=t.MeshLambertMaterial=t.MeshDistanceMaterial=t.MeshDepthMaterial=t.MeshBasicMaterial=t.Mesh=t.MaxEquation=void 0,t.ZeroSlopeEnding=t.ZeroFactor=t.ZeroCurvatureEnding=t.WrapAroundEnding=t.WireframeGeometry=t.WebGLRenderTarget=t.WebGLMultisampleRenderTarget=t.WebGLMultipleRenderTargets=t.WebGLCubeRenderTarget=t.WebGLArrayRenderTarget=t.WebGL3DRenderTarget=t.WebGL1Renderer=t.VideoTexture=t.VectorKeyframeTrack=t.Vector4=t.Vector3=t.Vector2=t.VSMShadowMap=t.UnsignedShortType=t.UnsignedShort5551Type=t.UnsignedShort4444Type=t.UnsignedIntType=t.UnsignedInt248Type=t.UnsignedByteType=t.UniformsUtils=t.UniformsLib=t.UniformsGroup=t.Uniform=t.Uint8ClampedBufferAttribute=t.Uint8BufferAttribute=t.Uint32BufferAttribute=t.Uint16BufferAttribute=t.UVMapping=t.TubeGeometry=t.TubeBufferGeometry=t.TrianglesDrawMode=t.TriangleStripDrawMode=t.TriangleFanDrawMode=t.Triangle=t.TorusKnotGeometry=t.TorusKnotBufferGeometry=t.TorusGeometry=t.TorusBufferGeometry=t.TextureLoader=t.Texture=t.TetrahedronGeometry=t.TetrahedronBufferGeometry=t.TangentSpaceNormalMap=t.TOUCH=t.SubtractiveBlending=t.SubtractEquation=t.StringKeyframeTrack=t.StreamReadUsage=t.StreamDrawUsage=t.StreamCopyUsage=t.StereoCamera=t.StaticReadUsage=t.StaticDrawUsage=t.StaticCopyUsage=t.SrcColorFactor=t.SrcAlphaSaturateFactor=t.SrcAlphaFactor=t.SpriteMaterial=t.Sprite=t.SpotLightHelper=t.SpotLight=t.SplineCurve=t.SphericalHarmonics3=t.Spherical=t.SphereGeometry=t.SphereBufferGeometry=t.Sphere=t.Source=t.SkinnedMesh=t.SkeletonHelper=t.Skeleton=t.ShortType=t.ShapeUtils=t.ShapePath=t.ShapeGeometry=t.ShapeBufferGeometry=t.Shape=t.ShadowMaterial=t.ShaderMaterial=t.ShaderLib=t.ShaderChunk=t.Scene=t.SRGBColorSpace=t.RingGeometry=t.RingBufferGeometry=t.ReverseSubtractEquation=t.ReplaceStencilOp=t.RepeatWrapping=t.ReinhardToneMapping=t.RedIntegerFormat=t.RedFormat=t.RectAreaLight=t.Raycaster=t.Ray=t.RawShaderMaterial=void 0,t.sRGBEncoding=t._SRGBAFormat=t.ZeroStencilOp=void 0;var r=i(n("9072")),a=i(n("2909")),o=i(n("1da1")),s=i(n("b85c")),l=i(n("3835")),u=i(n("45eb")),c=i(n("7e84")),h=i(n("257e")),d=i(n("262e")),f=i(n("2caf")),p=i(n("ade3"));n("96cf");var v,m=i(n("d4ec")),g=i(n("bee2")),y="144";t.REVISION=y;var _={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};t.MOUSE=_;var x={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};t.TOUCH=x;var b=0;t.CullFaceNone=b;var M=1;t.CullFaceBack=M;var w=2;t.CullFaceFront=w;var S=3;t.CullFaceFrontBack=S;var A=0;t.BasicShadowMap=A;var T=1;t.PCFShadowMap=T;var C=2;t.PCFSoftShadowMap=C;var E=3;t.VSMShadowMap=E;var k=0;t.FrontSide=k;var L=1;t.BackSide=L;var R=2;t.DoubleSide=R;var B=0;t.NoBlending=B;var P=1;t.NormalBlending=P;var I=2;t.AdditiveBlending=I;var D=3;t.SubtractiveBlending=D;var O=4;t.MultiplyBlending=O;var F=5;t.CustomBlending=F;var N=100;t.AddEquation=N;var G=101;t.SubtractEquation=G;var U=102;t.ReverseSubtractEquation=U;var z=103;t.MinEquation=z;var H=104;t.MaxEquation=H;var V=200;t.ZeroFactor=V;var W=201;t.OneFactor=W;var j=202;t.SrcColorFactor=j;var J=203;t.OneMinusSrcColorFactor=J;var X=204;t.SrcAlphaFactor=X;var q=205;t.OneMinusSrcAlphaFactor=q;var Y=206;t.DstAlphaFactor=Y;var Z=207;t.OneMinusDstAlphaFactor=Z;var K=208;t.DstColorFactor=K;var Q=209;t.OneMinusDstColorFactor=Q;var $=210;t.SrcAlphaSaturateFactor=$;var ee=0;t.NeverDepth=ee;var te=1;t.AlwaysDepth=te;var ne=2;t.LessDepth=ne;var ie=3;t.LessEqualDepth=ie;var re=4;t.EqualDepth=re;var ae=5;t.GreaterEqualDepth=ae;var oe=6;t.GreaterDepth=oe;var se=7;t.NotEqualDepth=se;var le=0;t.MultiplyOperation=le;var ue=1;t.MixOperation=ue;var ce=2;t.AddOperation=ce;var he=0;t.NoToneMapping=he;var de=1;t.LinearToneMapping=de;var fe=2;t.ReinhardToneMapping=fe;var pe=3;t.CineonToneMapping=pe;var ve=4;t.ACESFilmicToneMapping=ve;var me=5;t.CustomToneMapping=me;var ge=300;t.UVMapping=ge;var ye=301;t.CubeReflectionMapping=ye;var _e=302;t.CubeRefractionMapping=_e;var xe=303;t.EquirectangularReflectionMapping=xe;var be=304;t.EquirectangularRefractionMapping=be;var Me=306;t.CubeUVReflectionMapping=Me;var we=1e3;t.RepeatWrapping=we;var Se=1001;t.ClampToEdgeWrapping=Se;var Ae=1002;t.MirroredRepeatWrapping=Ae;var Te=1003;t.NearestFilter=Te;var Ce=1004;t.NearestMipmapNearestFilter=Ce;var Ee=1004;t.NearestMipMapNearestFilter=Ee;var ke=1005;t.NearestMipmapLinearFilter=ke;var Le=1005;t.NearestMipMapLinearFilter=Le;var Re=1006;t.LinearFilter=Re;var Be=1007;t.LinearMipmapNearestFilter=Be;var Pe=1007;t.LinearMipMapNearestFilter=Pe;var Ie=1008;t.LinearMipmapLinearFilter=Ie;var De=1008;t.LinearMipMapLinearFilter=De;var Oe=1009;t.UnsignedByteType=Oe;var Fe=1010;t.ByteType=Fe;var Ne=1011;t.ShortType=Ne;var Ge=1012;t.UnsignedShortType=Ge;var Ue=1013;t.IntType=Ue;var ze=1014;t.UnsignedIntType=ze;var He=1015;t.FloatType=He;var Ve=1016;t.HalfFloatType=Ve;var We=1017;t.UnsignedShort4444Type=We;var je=1018;t.UnsignedShort5551Type=je;var Je=1020;t.UnsignedInt248Type=Je;var Xe=1021;t.AlphaFormat=Xe;var qe=1022;t.RGBFormat=qe;var Ye=1023;t.RGBAFormat=Ye;var Ze=1024;t.LuminanceFormat=Ze;var Ke=1025;t.LuminanceAlphaFormat=Ke;var Qe=1026;t.DepthFormat=Qe;var $e=1027;t.DepthStencilFormat=$e;var et=1028;t.RedFormat=et;var tt=1029;t.RedIntegerFormat=tt;var nt=1030;t.RGFormat=nt;var it=1031;t.RGIntegerFormat=it;var rt=1033;t.RGBAIntegerFormat=rt;var at=33776;t.RGB_S3TC_DXT1_Format=at;var ot=33777;t.RGBA_S3TC_DXT1_Format=ot;var st=33778;t.RGBA_S3TC_DXT3_Format=st;var lt=33779;t.RGBA_S3TC_DXT5_Format=lt;var ut=35840;t.RGB_PVRTC_4BPPV1_Format=ut;var ct=35841;t.RGB_PVRTC_2BPPV1_Format=ct;var ht=35842;t.RGBA_PVRTC_4BPPV1_Format=ht;var dt=35843;t.RGBA_PVRTC_2BPPV1_Format=dt;var ft=36196;t.RGB_ETC1_Format=ft;var pt=37492;t.RGB_ETC2_Format=pt;var vt=37496;t.RGBA_ETC2_EAC_Format=vt;var mt=37808;t.RGBA_ASTC_4x4_Format=mt;var gt=37809;t.RGBA_ASTC_5x4_Format=gt;var yt=37810;t.RGBA_ASTC_5x5_Format=yt;var _t=37811;t.RGBA_ASTC_6x5_Format=_t;var xt=37812;t.RGBA_ASTC_6x6_Format=xt;var bt=37813;t.RGBA_ASTC_8x5_Format=bt;var Mt=37814;t.RGBA_ASTC_8x6_Format=Mt;var wt=37815;t.RGBA_ASTC_8x8_Format=wt;var St=37816;t.RGBA_ASTC_10x5_Format=St;var At=37817;t.RGBA_ASTC_10x6_Format=At;var Tt=37818;t.RGBA_ASTC_10x8_Format=Tt;var Ct=37819;t.RGBA_ASTC_10x10_Format=Ct;var Et=37820;t.RGBA_ASTC_12x10_Format=Et;var kt=37821;t.RGBA_ASTC_12x12_Format=kt;var Lt=36492;t.RGBA_BPTC_Format=Lt;var Rt=2200;t.LoopOnce=Rt;var Bt=2201;t.LoopRepeat=Bt;var Pt=2202;t.LoopPingPong=Pt;var It=2300;t.InterpolateDiscrete=It;var Dt=2301;t.InterpolateLinear=Dt;var Ot=2302;t.InterpolateSmooth=Ot;var Ft=2400;t.ZeroCurvatureEnding=Ft;var Nt=2401;t.ZeroSlopeEnding=Nt;var Gt=2402;t.WrapAroundEnding=Gt;var Ut=2500;t.NormalAnimationBlendMode=Ut;var zt=2501;t.AdditiveAnimationBlendMode=zt;var Ht=0;t.TrianglesDrawMode=Ht;var Vt=1;t.TriangleStripDrawMode=Vt;var Wt=2;t.TriangleFanDrawMode=Wt;var jt=3e3;t.LinearEncoding=jt;var Jt=3001;t.sRGBEncoding=Jt;var Xt=3200;t.BasicDepthPacking=Xt;var qt=3201;t.RGBADepthPacking=qt;var Yt=0;t.TangentSpaceNormalMap=Yt;var Zt=1;t.ObjectSpaceNormalMap=Zt;var Kt="";t.NoColorSpace=Kt;var Qt="srgb";t.SRGBColorSpace=Qt;var $t="srgb-linear";t.LinearSRGBColorSpace=$t;var en=0;t.ZeroStencilOp=en;var tn=7680;t.KeepStencilOp=tn;var nn=7681;t.ReplaceStencilOp=nn;var rn=7682;t.IncrementStencilOp=rn;var an=7683;t.DecrementStencilOp=an;var on=34055;t.IncrementWrapStencilOp=on;var sn=34056;t.DecrementWrapStencilOp=sn;var ln=5386;t.InvertStencilOp=ln;var un=512;t.NeverStencilFunc=un;var cn=513;t.LessStencilFunc=cn;var hn=514;t.EqualStencilFunc=hn;var dn=515;t.LessEqualStencilFunc=dn;var fn=516;t.GreaterStencilFunc=fn;var pn=517;t.NotEqualStencilFunc=pn;var vn=518;t.GreaterEqualStencilFunc=vn;var mn=519;t.AlwaysStencilFunc=mn;var gn=35044;t.StaticDrawUsage=gn;var yn=35048;t.DynamicDrawUsage=yn;var _n=35040;t.StreamDrawUsage=_n;var xn=35045;t.StaticReadUsage=xn;var bn=35049;t.DynamicReadUsage=bn;var Mn=35041;t.StreamReadUsage=Mn;var wn=35046;t.StaticCopyUsage=wn;var Sn=35050;t.DynamicCopyUsage=Sn;var An=35042;t.StreamCopyUsage=An;var Tn="100";t.GLSL1=Tn;var Cn="300 es";t.GLSL3=Cn;var En=1035;t._SRGBAFormat=En;var kn=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=n.slice(0),r=0,a=i.length;r<a;r++)i[r].call(this,e);e.target=null}}}}]),e}();t.EventDispatcher=kn;var Ln=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Rn=1234567,Bn=Math.PI/180,Pn=180/Math.PI;function In(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=Ln[255&e]+Ln[e>>8&255]+Ln[e>>16&255]+Ln[e>>24&255]+"-"+Ln[255&t]+Ln[t>>8&255]+"-"+Ln[t>>16&15|64]+Ln[t>>24&255]+"-"+Ln[63&n|128]+Ln[n>>8&255]+"-"+Ln[n>>16&255]+Ln[n>>24&255]+Ln[255&i]+Ln[i>>8&255]+Ln[i>>16&255]+Ln[i>>24&255];return r.toLowerCase()}function Dn(e,t,n){return Math.max(t,Math.min(n,e))}function On(e,t){return(e%t+t)%t}function Fn(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)}function Nn(e,t,n){return e!==t?(n-e)/(t-e):0}function Gn(e,t,n){return(1-n)*e+n*t}function Un(e,t,n,i){return Gn(e,t,1-Math.exp(-n*i))}function zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(On(e,2*t)-t)}function Hn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function Vn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function Wn(e,t){return e+Math.floor(Math.random()*(t-e+1))}function jn(e,t){return e+Math.random()*(t-e)}function Jn(e){return e*(.5-Math.random())}function Xn(e){void 0!==e&&(Rn=e);var t=Rn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function qn(e){return e*Bn}function Yn(e){return e*Pn}function Zn(e){return 0===(e&e-1)&&0!==e}function Kn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Qn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function $n(e,t,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+i)/2),c=o((t+i)/2),h=a((t-i)/2),d=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ei(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ti(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var ni=Object.freeze({__proto__:null,DEG2RAD:Bn,RAD2DEG:Pn,generateUUID:In,clamp:Dn,euclideanModulo:On,mapLinear:Fn,inverseLerp:Nn,lerp:Gn,damp:Un,pingpong:zn,smoothstep:Hn,smootherstep:Vn,randInt:Wn,randFloat:jn,randFloatSpread:Jn,seededRandom:Xn,degToRad:qn,radToDeg:Yn,isPowerOfTwo:Zn,ceilPowerOfTwo:Kn,floorPowerOfTwo:Qn,setQuaternionFromProperEuler:$n,normalize:ti,denormalize:ei});t.MathUtils=ni;var ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,e),e.prototype.isVector2=!0,this.x=t,this.y=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))},{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),e}();t.Vector2=ii;var ri=function(){function e(){(0,m.default)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=i[0],v=i[3],m=i[6],g=i[1],y=i[4],_=i[7],x=i[2],b=i[5],M=i[8];return r[0]=a*p+o*g+s*x,r[3]=a*v+o*y+s*b,r[6]=a*m+o*_+s*M,r[1]=l*p+u*g+c*x,r[4]=l*v+u*y+c*b,r[7]=l*m+u*_+c*M,r[2]=h*p+d*g+f*x,r[5]=h*v+d*y+f*b,r[8]=h*m+d*_+f*M,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*r*u+n*o*s+i*r*l-i*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*r,d=l*r-a*s,f=t*c+n*h+i*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(i*l-u*n)*p,e[2]=(o*n-i*a)*p,e[3]=h*p,e[4]=(u*t-i*s)*p,e[5]=(i*r-o*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*r)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*l,i[6]=t*o+n*u,i[1]=-n*r+t*s,i[4]=-n*a+t*l,i[7]=-n*o+t*u,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function ai(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}t.Matrix3=ri;var oi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function si(e,t){return new oi[e](t)}function li(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ui(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ci(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var hi=(v={},(0,p.default)(v,Qt,(0,p.default)({},$t,ui)),(0,p.default)(v,$t,(0,p.default)({},Qt,ci)),v),di={legacyMode:!0,get workingColorSpace(){return $t},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(hi[t]&&void 0!==hi[t][n]){var i=hi[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};t.ColorManagement=di;var fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pi={r:0,g:0,b:0},vi={h:0,s:0,l:0},mi={h:0,s:0,l:0};function gi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function yi(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var _i,xi=function(){function e(t,n,i){return(0,m.default)(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(t):this.setRGB(t,n,i)}return(0,g.default)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,di.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$t;return this.r=e,this.g=t,this.b=n,di.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$t;if(e=On(e,1),t=Dn(t,0,1),n=Dn(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=gi(a,r,e+1/3),this.g=gi(a,r,e),this.b=gi(a,r,e-1/3)}return di.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,di.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,di.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(r[1])/360,l=parseFloat(r[2])/100,u=parseFloat(r[3])/100;return i(r[4]),this.setHSL(s,l,u,n)}break}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,di.toWorkingColorSpace(this,n),this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,di.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt,n=fi[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ui(e.r),this.g=ui(e.g),this.b=ui(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=ci(e.r),this.g=ci(e.g),this.b=ci(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return di.fromWorkingColorSpace(yi(this,pi),e),Dn(255*pi.r,0,255)<<16^Dn(255*pi.g,0,255)<<8^Dn(255*pi.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;di.fromWorkingColorSpace(yi(this,pi),t);var n,i,r=pi.r,a=pi.g,o=pi.b,s=Math.max(r,a,o),l=Math.min(r,a,o),u=(l+s)/2;if(l===s)n=0,i=0;else{var c=s-l;switch(i=u<=.5?c/(s+l):c/(2-s-l),s){case r:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-r)/c+2;break;case o:n=(r-a)/c+4;break}n/=6}return e.h=n,e.s=i,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;return di.fromWorkingColorSpace(yi(this,pi),t),e.r=pi.r,e.g=pi.g,e.b=pi.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return di.fromWorkingColorSpace(yi(this,pi),e),e!==Qt?"color(".concat(e," ").concat(pi.r," ").concat(pi.g," ").concat(pi.b,")"):"rgb(".concat(255*pi.r|0,",").concat(255*pi.g|0,",").concat(255*pi.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(vi),vi.h+=e,vi.s+=t,vi.l+=n,this.setHSL(vi.h,vi.s,vi.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(vi),e.getHSL(mi);var n=Gn(vi.h,mi.h,t),i=Gn(vi.s,mi.s,t),r=Gn(vi.l,mi.l,t);return this.setHSL(n,i,r),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),e}();t.Color=xi,xi.NAMES=fi;var bi=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_i&&(_i=li("canvas")),_i.width=e.width,_i.height=e.height;var n=_i.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_i}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=li("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),r=i.data,a=0;a<r.length;a++)r[a]=255*ui(r[a]/255);return n.putImageData(i,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*ui(o[s]/255)):o[s]=ui(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}();t.ImageUtils=bi;var Mi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,m.default)(this,e),this.isSource=!0,this.uuid=In(),this.data=t,this.version=0}return(0,g.default)(e,[{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)i[a].isDataTexture?r.push(wi(i[a].image)):r.push(wi(i[a]))}else r=wi(i);n.url=r}return t||(e.images[this.uuid]=n),n}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();function wi(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?bi.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}t.Source=Mi;var Si=0,Ai=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Re,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ie,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ye,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Oe,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:jt;return(0,m.default)(this,n),e=t.call(this),e.isTexture=!0,Object.defineProperty((0,h.default)(e),"id",{value:Si++}),e.uuid=In(),e.name="",e.source=new Mi(i),e.mipmaps=[],e.mapping=r,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=d,e.format=u,e.internalFormat=null,e.type=c,e.offset=new ii(0,0),e.repeat=new ii(1,1),e.center=new ii(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new ri,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,g.default)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==ge)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case we:e.x=e.x-Math.floor(e.x);break;case Se:e.x=e.x<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case we:e.y=e.y-Math.floor(e.y);break;case Se:e.y=e.y<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}},{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(kn);t.Texture=Ai,Ai.DEFAULT_IMAGE=null,Ai.DEFAULT_MAPPING=ge;var Ti=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.default)(this,e),e.prototype.isVector4=!0,this.x=t,this.y=n,this.z=i,this.w=r}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,r,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(u-h)<a&&Math.abs(c-p)<a&&Math.abs(f-v)<a){if(Math.abs(u+h)<o&&Math.abs(c+p)<o&&Math.abs(f+v)<o&&Math.abs(l+d+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,_=(m+1)/2,x=(u+h)/4,b=(c+p)/4,M=(f+v)/4;return g>y&&g>_?g<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=x/n,r=b/n):y>_?y<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=x/i,r=M/i):_<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=b/r,i=M/r),this.set(n,i,r,t),this}var w=Math.sqrt((v-f)*(v-f)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(w)<.001&&(w=1),this.x=(v-f)/w,this.y=(c-p)/w,this.z=(h-u)/w,this.w=Math.acos((l+d+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))},{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}}]),e}();t.Vector4=Ti;var Ci=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,m.default)(this,n),r=t.call(this),r.isWebGLRenderTarget=!0,r.width=e,r.height=i,r.depth=1,r.scissor=new Ti(0,0,e,i),r.scissorTest=!1,r.viewport=new Ti(0,0,e,i);var o={width:e,height:i,depth:1};return r.texture=new Ai(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),r.texture.isRenderTargetTexture=!0,r.texture.flipY=!1,r.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,r.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,r.texture.minFilter=void 0!==a.minFilter?a.minFilter:Re,r.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,r.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,r.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,r.samples=void 0!==a.samples?a.samples:0,r}return(0,g.default)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new Mi(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(kn);t.WebGLRenderTarget=Ci;var Ei=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),e=t.call(this,null),e.isDataArrayTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=Te,e.minFilter=Te,e.wrapR=Se,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return n}(Ai);t.DataArrayTexture=Ei;var ki=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,e,i),a.isWebGLArrayRenderTarget=!0,a.depth=r,a.texture=new Ei(null,e,i,r),a.texture.isRenderTargetTexture=!0,a}return n}(Ci);t.WebGLArrayRenderTarget=ki;var Li=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),e=t.call(this,null),e.isData3DTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=Te,e.minFilter=Te,e.wrapR=Se,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return n}(Ai);t.Data3DTexture=Li;var Ri=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,e,i),a.isWebGL3DRenderTarget=!0,a.depth=r,a.texture=new Li(null,e,i,r),a.texture.isRenderTargetTexture=!0,a}return n}(Ci);t.WebGL3DRenderTarget=Ri;var Bi=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,m.default)(this,n),a=t.call(this,e,i,o),a.isWebGLMultipleRenderTargets=!0;var s=a.texture;a.texture=[];for(var l=0;l<r;l++)a.texture[l]=s.clone(),a.texture[l].isRenderTargetTexture=!0;return a}return(0,g.default)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(Ci);t.WebGLMultipleRenderTargets=Bi;var Pi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.default)(this,e),this.isQuaternion=!0,this._x=t,this._y=n,this._z=i,this._w=r}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),h=s(n/2),d=s(i/2),f=s(r/2);switch(a){case"XYZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"YXZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"ZXY":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"ZYX":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"YZX":this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f;break;case"XZY":this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-s)*d,this._y=(r-l)*d,this._z=(a-i)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(u-s)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(r+l)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(r-l)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-i)/v,this._x=(r+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Dn(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}],[{key:"slerpFlat",value:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||l!==d||u!==f){var v=1-o,m=s*h+l*d+u*f+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,m*g);v=Math.sin(v*x)/_,o=Math.sin(o*x)/_}var b=o*g;if(s=s*v+h*b,l=l*v+d*b,u=u*v+f*b,c=c*v+p*b,v===1-o){var M=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=M,l*=M,u*=M,c*=M}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],u=n[i+3],c=r[a],h=r[a+1],d=r[a+2],f=r[a+3];return e[t]=o*f+u*c+s*d-l*h,e[t+1]=s*f+u*h+l*c-o*d,e[t+2]=l*f+u*d+o*h-s*c,e[t+3]=u*f-o*c-s*h-l*d,e}}]),e}();t.Quaternion=Pi;var Ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,m.default)(this,e),e.prototype.isVector3=!0,this.x=t,this.y=n,this.z=i}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Oi.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Oi.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,u=s*n+o*t-r*i,c=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=l*s+h*-r+u*-o-c*-a,this.y=u*s+h*-a+c*-r-l*-o,this.z=c*s+h*-o+l*-a-u*-r,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Di.copy(this).projectOnVector(e),this.sub(Di)}},{key:"reflect",value:function(e){return this.sub(Di.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Dn(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),e}();t.Vector3=Ii;var Di=new Ii,Oi=new Pi,Fi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii(-1/0,-1/0,-1/0);(0,m.default)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Gi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,r=0,a=i.count;r<a;r++)Gi.fromBufferAttribute(i,r).applyMatrix4(e.matrixWorld),this.expandByPoint(Gi);else null===n.boundingBox&&n.computeBoundingBox(),Ui.copy(n.boundingBox),Ui.applyMatrix4(e.matrixWorld),this.union(Ui);for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Gi),Gi.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Xi),qi.subVectors(this.max,Xi),zi.subVectors(e.a,Xi),Hi.subVectors(e.b,Xi),Vi.subVectors(e.c,Xi),Wi.subVectors(Hi,zi),ji.subVectors(Vi,Hi),Ji.subVectors(zi,Vi);var t=[0,-Wi.z,Wi.y,0,-ji.z,ji.y,0,-Ji.z,Ji.y,Wi.z,0,-Wi.x,ji.z,0,-ji.x,Ji.z,0,-Ji.x,-Wi.y,Wi.x,0,-ji.y,ji.x,0,-Ji.y,Ji.x,0];return!!Ki(t,zi,Hi,Vi,qi)&&(t=[1,0,0,0,1,0,0,0,1],!!Ki(t,zi,Hi,Vi,qi)&&(Yi.crossVectors(Wi,ji),t=[Yi.x,Yi.y,Yi.z],Ki(t,zi,Hi,Vi,qi)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=Gi.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Gi).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ni[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ni[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ni[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ni[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ni[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ni[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ni[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ni[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ni)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();t.Box3=Fi;var Ni=[new Ii,new Ii,new Ii,new Ii,new Ii,new Ii,new Ii,new Ii],Gi=new Ii,Ui=new Fi,zi=new Ii,Hi=new Ii,Vi=new Ii,Wi=new Ii,ji=new Ii,Ji=new Ii,Xi=new Ii,qi=new Ii,Yi=new Ii,Zi=new Ii;function Ki(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){Zi.fromArray(e,a);var s=r.x*Math.abs(Zi.x)+r.y*Math.abs(Zi.y)+r.z*Math.abs(Zi.z),l=t.dot(Zi),u=n.dot(Zi),c=i.dot(Zi);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var Qi=new Fi,$i=new Ii,er=new Ii,tr=new Ii,nr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,m.default)(this,e),this.center=t,this.radius=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Qi.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){tr.subVectors(e,this.center);var t=tr.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.add(tr.multiplyScalar(i/n)),this.radius+=i}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?er.set(0,0,1).multiplyScalar(e.radius):er.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint($i.copy(e.center).add(er)),this.expandByPoint($i.copy(e.center).sub(er)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Sphere=nr;var ir=new Ii,rr=new Ii,ar=new Ii,or=new Ii,sr=new Ii,lr=new Ii,ur=new Ii,cr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii(0,0,-1);(0,m.default)(this,e),this.origin=t,this.direction=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ir)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ir.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ir.copy(this.direction).multiplyScalar(t).add(this.origin),ir.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){rr.copy(e).add(t).multiplyScalar(.5),ar.copy(t).sub(e).normalize(),or.copy(this.origin).sub(rr);var r,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(ar),c=or.dot(this.direction),h=-or.dot(ar),d=or.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(r=u*h-c,a=u*c-h,s=l*f,r>=0)if(a>=-s)if(a<=s){var p=1/f;r*=p,a*=p,o=r*(r+u*a+2*c)+a*(u*r+a+2*h)+d}else a=l,r=Math.max(0,-(u*a+c)),o=-r*r+a*(a+2*h)+d;else a=-l,r=Math.max(0,-(u*a+c)),o=-r*r+a*(a+2*h)+d;else a<=-s?(r=Math.max(0,-(-u*l+c)),a=r>0?-l:Math.min(Math.max(-l,-h),l),o=-r*r+a*(a+2*h)+d):a<=s?(r=0,a=Math.min(Math.max(-l,-h),l),o=a*(a+2*h)+d):(r=Math.max(0,-(u*l+c)),a=r>0?l:Math.min(Math.max(-l,-h),l),o=-r*r+a*(a+2*h)+d);else a=u>0?-l:l,r=Math.max(0,-(u*a+c)),o=-r*r+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(ar).multiplyScalar(a).add(rr),o}},{key:"intersectSphere",value:function(e,t){ir.subVectors(e.center,this.origin);var n=ir.dot(this.direction),i=ir.dot(ir)-n*n,r=e.radius*e.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0}},{key:"intersectBox",value:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ir)}},{key:"intersectTriangle",value:function(e,t,n,i,r){sr.subVectors(t,e),lr.subVectors(n,e),ur.crossVectors(sr,lr);var a,o=this.direction.dot(ur);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}or.subVectors(this.origin,e);var s=a*this.direction.dot(lr.crossVectors(or,lr));if(s<0)return null;var l=a*this.direction.dot(sr.cross(or));if(l<0)return null;if(s+l>o)return null;var u=-a*or.dot(ur);return u<0?null:this.at(u/o,r)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Ray=cr;var hr=function(){function e(){(0,m.default)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=r,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/dr.setFromMatrixColumn(e,0).length(),r=1/dr.setFromMatrixColumn(e,1).length(),a=1/dr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*u,m=s*c,g=l*u,y=l*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var _=s*u,x=s*c,b=l*u,M=l*c;t[0]=_-M*o,t[4]=-a*c,t[8]=b+x*o,t[1]=x+b*o,t[5]=a*u,t[9]=M-_*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*u,S=a*c,A=o*u,T=o*c;t[0]=s*u,t[4]=A*l-S,t[8]=w*l+T,t[1]=s*c,t[5]=T*l+w,t[9]=S*l-A,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var C=a*s,E=a*l,k=o*s,L=o*l;t[0]=s*u,t[4]=L-C*c,t[8]=k*c+E,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=E*c+k,t[10]=C-L*c}else if("XZY"===e.order){var R=a*s,B=a*l,P=o*s,I=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=R*c+I,t[5]=a*u,t[9]=B*c-P,t[2]=P*c-B,t[6]=o*u,t[10]=I*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(pr,e,vr)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return yr.subVectors(e,t),0===yr.lengthSq()&&(yr.z=1),yr.normalize(),mr.crossVectors(n,yr),0===mr.lengthSq()&&(1===Math.abs(n.z)?yr.x+=1e-4:yr.z+=1e-4,yr.normalize(),mr.crossVectors(n,yr)),mr.normalize(),gr.crossVectors(yr,mr),i[0]=mr.x,i[4]=gr.x,i[8]=yr.x,i[1]=mr.y,i[5]=gr.y,i[9]=yr.y,i[2]=mr.z,i[6]=gr.z,i[10]=yr.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=i[0],M=i[4],w=i[8],S=i[12],A=i[1],T=i[5],C=i[9],E=i[13],k=i[2],L=i[6],R=i[10],B=i[14],P=i[3],I=i[7],D=i[11],O=i[15];return r[0]=a*b+o*A+s*k+l*P,r[4]=a*M+o*T+s*L+l*I,r[8]=a*w+o*C+s*R+l*D,r[12]=a*S+o*E+s*B+l*O,r[1]=u*b+c*A+h*k+d*P,r[5]=u*M+c*T+h*L+d*I,r[9]=u*w+c*C+h*R+d*D,r[13]=u*S+c*E+h*B+d*O,r[2]=f*b+p*A+v*k+m*P,r[6]=f*M+p*T+v*L+m*I,r[10]=f*w+p*C+v*R+m*D,r[14]=f*S+p*E+v*B+m*O,r[3]=g*b+y*A+_*k+x*P,r[7]=g*M+y*T+_*L+x*I,r[11]=g*w+y*C+_*R+x*D,r[15]=g*S+y*E+_*B+x*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14],f=e[3],p=e[7],v=e[11],m=e[15];return f*(+r*s*c-i*l*c-r*o*h+n*l*h+i*o*d-n*s*d)+p*(+t*s*d-t*l*h+r*a*h-i*a*d+i*l*u-r*s*u)+v*(+t*l*c-t*o*d-r*a*c+n*a*d+r*o*u-n*l*u)+m*(-i*o*u-t*s*c+t*o*h+i*a*c-n*a*h+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*h*l+p*s*d-o*v*d-c*s*m+o*h*m,y=f*h*l-u*v*l-f*s*d+a*v*d+u*s*m-a*h*m,_=u*p*l-f*c*l+f*o*d-a*p*d-u*o*m+a*c*m,x=f*c*s-u*p*s-f*o*h+a*p*h+u*o*v-a*c*v,b=t*g+n*y+i*_+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/b;return e[0]=g*M,e[1]=(p*h*r-c*v*r-p*i*d+n*v*d+c*i*m-n*h*m)*M,e[2]=(o*v*r-p*s*r+p*i*l-n*v*l-o*i*m+n*s*m)*M,e[3]=(c*s*r-o*h*r-c*i*l+n*h*l+o*i*d-n*s*d)*M,e[4]=y*M,e[5]=(u*v*r-f*h*r+f*i*d-t*v*d-u*i*m+t*h*m)*M,e[6]=(f*s*r-a*v*r-f*i*l+t*v*l+a*i*m-t*s*m)*M,e[7]=(a*h*r-u*s*r+u*i*l-t*h*l-a*i*d+t*s*d)*M,e[8]=_*M,e[9]=(f*c*r-u*p*r-f*n*d+t*p*d+u*n*m-t*c*m)*M,e[10]=(a*p*r-f*o*r+f*n*l-t*p*l-a*n*m+t*o*m)*M,e[11]=(u*o*r-a*c*r-u*n*l+t*c*l+a*n*d-t*o*d)*M,e[12]=x*M,e[13]=(u*p*i-f*c*i+f*n*h-t*p*h-u*n*v+t*c*v)*M,e[14]=(f*o*i-a*p*i-f*n*s+t*p*s+a*n*v-t*o*v)*M,e[15]=(a*c*i-u*o*i+u*n*s-t*c*s-a*n*h+t*o*h)*M,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,u=a+a,c=o+o,h=r*l,d=r*u,f=r*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,_=s*c,x=n.x,b=n.y,M=n.z;return i[0]=(1-(p+m))*x,i[1]=(d+_)*x,i[2]=(f-y)*x,i[3]=0,i[4]=(d-_)*b,i[5]=(1-(h+m))*b,i[6]=(v+g)*b,i[7]=0,i[8]=(f+y)*M,i[9]=(v-g)*M,i[10]=(1-(h+p))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,r=dr.set(i[0],i[1],i[2]).length(),a=dr.set(i[4],i[5],i[6]).length(),o=dr.set(i[8],i[9],i[10]).length(),s=this.determinant();s<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],fr.copy(this);var l=1/r,u=1/a,c=1/o;return fr.elements[0]*=l,fr.elements[1]*=l,fr.elements[2]*=l,fr.elements[4]*=u,fr.elements[5]*=u,fr.elements[6]*=u,fr.elements[8]*=c,fr.elements[9]*=c,fr.elements[10]*=c,t.setFromRotationMatrix(fr),n.x=r,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,i,r,a){var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*s,h=(n+i)*l,d=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();t.Matrix4=hr;var dr=new Ii,fr=new hr,pr=new Ii(0,0,0),vr=new Ii(1,1,1),mr=new Ii,gr=new Ii,yr=new Ii,_r=new hr,xr=new Pi,br=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;(0,m.default)(this,e),this.isEuler=!0,this._x=t,this._y=n,this._z=i,this._order=r}return(0,g.default)(e,[{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,r=i[0],a=i[4],o=i[8],s=i[1],l=i[5],u=i[9],c=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Dn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(Dn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-Dn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Dn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return _r.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_r,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return xr.setFromEuler(this),this.setFromQuaternion(xr,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}]),e}();t.Euler=br,br.DefaultOrder="XYZ",br.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Mr=function(){function e(){(0,m.default)(this,e),this.mask=1}return(0,g.default)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}();t.Layers=Mr;var wr=0,Sr=new Ii,Ar=new Pi,Tr=new hr,Cr=new Ii,Er=new Ii,kr=new Ii,Lr=new Pi,Rr=new Ii(1,0,0),Br=new Ii(0,1,0),Pr=new Ii(0,0,1),Ir={type:"added"},Dr={type:"removed"},Or=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,m.default)(this,n),e=t.call(this),e.isObject3D=!0,Object.defineProperty((0,h.default)(e),"id",{value:wr++}),e.uuid=In(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var i=new Ii,r=new br,a=new Pi,o=new Ii(1,1,1);function s(){a.setFromEuler(r,!1)}function l(){r.setFromQuaternion(a,void 0,!1)}return r._onChange(s),a._onChange(l),Object.defineProperties((0,h.default)(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new hr},normalMatrix:{value:new ri}}),e.matrix=new hr,e.matrixWorld=new hr,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,e.layers=new Mr,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,g.default)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.multiply(Ar),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Ar.setFromAxisAngle(e,t),this.quaternion.premultiply(Ar),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Rr,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Br,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Pr,e)}},{key:"translateOnAxis",value:function(e,t){return Sr.copy(e).applyQuaternion(this.quaternion),this.position.add(Sr.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Rr,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Br,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Pr,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Tr.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Cr.copy(e):Cr.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Er.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Tr.lookAt(Er,Cr,this.up):Tr.lookAt(Cr,Er,this.up),this.quaternion.setFromRotationMatrix(Tr),i&&(Tr.extractRotation(i.matrixWorld),Ar.setFromRotationMatrix(Tr),this.quaternion.premultiply(Ar.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ir)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Dr)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Dr)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Tr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Tr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Tr),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],a=r.getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Er,e,kr),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Er,Lr,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++){var r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++){var o=i[r];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];r(e.shapes,u)}else r(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(r(e.materials,this.material[h]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(var f=0;f<this.children.length;f++)i.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];i.animations.push(r(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),y=S(e.textures),_=S(e.images),x=S(e.shapes),b=S(e.skeletons),M=S(e.animations),w=S(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),x.length>0&&(n.shapes=x),b.length>0&&(n.skeletons=b),M.length>0&&(n.animations=M),w.length>0&&(n.nodes=w)}return n.object=i,n;function S(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(kn);t.Object3D=Or,Or.DefaultUp=new Ii(0,1,0),Or.DefaultMatrixAutoUpdate=!0,Or.DefaultMatrixWorldAutoUpdate=!0;var Fr=new Ii,Nr=new Ii,Gr=new Ii,Ur=new Ii,zr=new Ii,Hr=new Ii,Vr=new Ii,Wr=new Ii,jr=new Ii,Jr=new Ii,Xr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ii;(0,m.default)(this,e),this.a=t,this.b=n,this.c=i}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Fr.subVectors(this.c,this.b),Nr.subVectors(this.a,this.b),.5*Fr.cross(Nr).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,r,a){return e.getUV(t,this.a,this.b,this.c,n,i,r,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,r=this.a,a=this.b,o=this.c;zr.subVectors(a,r),Hr.subVectors(o,r),Wr.subVectors(e,r);var s=zr.dot(Wr),l=Hr.dot(Wr);if(s<=0&&l<=0)return t.copy(r);jr.subVectors(e,a);var u=zr.dot(jr),c=Hr.dot(jr);if(u>=0&&c<=u)return t.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(r).addScaledVector(zr,n);Jr.subVectors(e,o);var d=zr.dot(Jr),f=Hr.dot(Jr);if(f>=0&&d<=f)return t.copy(o);var p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return i=l/(l-f),t.copy(r).addScaledVector(Hr,i);var v=u*f-d*c;if(v<=0&&c-u>=0&&d-f>=0)return Vr.subVectors(o,a),i=(c-u)/(c-u+(d-f)),t.copy(a).addScaledVector(Vr,i);var m=1/(v+p+h);return n=p*m,i=h*m,t.copy(r).addScaledVector(zr,n).addScaledVector(Hr,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),Fr.subVectors(e,t),i.cross(Fr);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,r){Fr.subVectors(i,t),Nr.subVectors(n,t),Gr.subVectors(e,t);var a=Fr.dot(Fr),o=Fr.dot(Nr),s=Fr.dot(Gr),l=Nr.dot(Nr),u=Nr.dot(Gr),c=a*l-o*o;if(0===c)return r.set(-2,-1,-1);var h=1/c,d=(l*s-o*u)*h,f=(a*u-o*s)*h;return r.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,Ur),Ur.x>=0&&Ur.y>=0&&Ur.x+Ur.y<=1}},{key:"getUV",value:function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,Ur),s.set(0,0),s.addScaledVector(r,Ur.x),s.addScaledVector(a,Ur.y),s.addScaledVector(o,Ur.z),s}},{key:"isFrontFacing",value:function(e,t,n,i){return Fr.subVectors(n,t),Nr.subVectors(e,t),Fr.cross(Nr).dot(i)<0}}]),e}();t.Triangle=Xr;var qr=0,Yr=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isMaterial=!0,Object.defineProperty((0,h.default)(e),"id",{value:qr++}),e.uuid=In(),e.name="",e.type="Material",e.blending=P,e.side=k,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=X,e.blendDst=q,e.blendEquation=N,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=ie,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=mn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=tn,e.stencilZFail=tn,e.stencilZPass=tn,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,g.default)(n,[{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==P&&(n.blending=this.blending),this.side!==k&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(kn);t.Material=Yr;var Zr=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new xi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=le,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yr);t.MeshBasicMaterial=Zr;var Kr=new Ii,Qr=new ii,$r=function(){function e(t,n,i){if((0,m.default)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===i,this.usage=gn,this.updateRange={offset:0,count:-1},this.version=0}return(0,g.default)(e,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Qr.fromBufferAttribute(this,t),Qr.applyMatrix3(e),this.setXY(t,Qr.x,Qr.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Kr.fromBufferAttribute(this,i),Kr.applyMatrix3(e),this.setXYZ(i,Kr.x,Kr.y,Kr.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Kr.fromBufferAttribute(this,t),Kr.applyMatrix4(e),this.setXYZ(t,Kr.x,Kr.y,Kr.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Kr.fromBufferAttribute(this,t),Kr.applyNormalMatrix(e),this.setXYZ(t,Kr.x,Kr.y,Kr.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Kr.fromBufferAttribute(this,t),Kr.transformDirection(e),this.setXYZ(t,Kr.x,Kr.y,Kr.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array),r=ti(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==gn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();t.BufferAttribute=$r;var ea=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Int8Array(e),i,r)}return n}($r);t.Int8BufferAttribute=ea;var ta=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint8Array(e),i,r)}return n}($r);t.Uint8BufferAttribute=ta;var na=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint8ClampedArray(e),i,r)}return n}($r);t.Uint8ClampedBufferAttribute=na;var ia=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Int16Array(e),i,r)}return n}($r);t.Int16BufferAttribute=ia;var ra=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint16Array(e),i,r)}return n}($r);t.Uint16BufferAttribute=ra;var aa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Int32Array(e),i,r)}return n}($r);t.Int32BufferAttribute=aa;var oa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Uint32Array(e),i,r)}return n}($r);t.Uint32BufferAttribute=oa;var sa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,new Uint16Array(e),i,r),a.isFloat16BufferAttribute=!0,a}return n}($r);t.Float16BufferAttribute=sa;var la=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Float32Array(e),i,r)}return n}($r);t.Float32BufferAttribute=la;var ua=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){return(0,m.default)(this,n),t.call(this,new Float64Array(e),i,r)}return n}($r);t.Float64BufferAttribute=ua;var ca=0,ha=new hr,da=new Or,fa=new Ii,pa=new Fi,va=new Fi,ma=new Ii,ga=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isBufferGeometry=!0,Object.defineProperty((0,h.default)(e),"id",{value:ca++}),e.uuid=In(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,g.default)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(ai(e)?oa:ra)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new ri).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return ha.makeRotationFromQuaternion(e),this.applyMatrix4(ha),this}},{key:"rotateX",value:function(e){return ha.makeRotationX(e),this.applyMatrix4(ha),this}},{key:"rotateY",value:function(e){return ha.makeRotationY(e),this.applyMatrix4(ha),this}},{key:"rotateZ",value:function(e){return ha.makeRotationZ(e),this.applyMatrix4(ha),this}},{key:"translate",value:function(e,t,n){return ha.makeTranslation(e,t,n),this.applyMatrix4(ha),this}},{key:"scale",value:function(e,t,n){return ha.makeScale(e,t,n),this.applyMatrix4(ha),this}},{key:"lookAt",value:function(e){return da.lookAt(e),da.updateMatrix(),this.applyMatrix4(da.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fa).negate(),this.translate(fa.x,fa.y,fa.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new la(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Fi);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ii(-1/0,-1/0,-1/0),new Ii(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];pa.setFromBufferAttribute(r),this.morphTargetsRelative?(ma.addVectors(this.boundingBox.min,pa.min),this.boundingBox.expandByPoint(ma),ma.addVectors(this.boundingBox.max,pa.max),this.boundingBox.expandByPoint(ma)):(this.boundingBox.expandByPoint(pa.min),this.boundingBox.expandByPoint(pa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new nr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ii,1/0);if(e){var n=this.boundingSphere.center;if(pa.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];va.setFromBufferAttribute(a),this.morphTargetsRelative?(ma.addVectors(pa.min,va.min),pa.expandByPoint(ma),ma.addVectors(pa.max,va.max),pa.expandByPoint(ma)):(pa.expandByPoint(va.min),pa.expandByPoint(va.max))}pa.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)ma.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(ma));if(t)for(var u=0,c=t.length;u<c;u++)for(var h=t[u],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)ma.fromBufferAttribute(h,f),d&&(fa.fromBufferAttribute(e,f),ma.add(fa)),o=Math.max(o,n.distanceToSquared(ma));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new $r(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new Ii,u[c]=new Ii;var h=new Ii,d=new Ii,f=new Ii,p=new ii,v=new ii,m=new ii,g=new Ii,y=new Ii,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var x=0,b=_.length;x<b;++x)for(var M=_[x],w=M.start,S=M.count,A=w,T=w+S;A<T;A+=3)N(n[A+0],n[A+1],n[A+2]);for(var C=new Ii,E=new Ii,k=new Ii,L=new Ii,R=0,B=_.length;R<B;++R)for(var P=_[R],I=P.start,D=P.count,O=I,F=I+D;O<F;O+=3)G(n[O+0]),G(n[O+1]),G(n[O+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function N(e,t,n){h.fromArray(i,3*e),d.fromArray(i,3*t),f.fromArray(i,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(h),f.sub(h),v.sub(p),m.sub(p);var r=1/(v.x*m.y-m.x*v.y);isFinite(r)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(r),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(y),u[t].add(y),u[n].add(y))}function G(e){k.fromArray(r,3*e),L.copy(k);var t=l[e];C.copy(t),C.sub(k.multiplyScalar(k.dot(t))).normalize(),E.crossVectors(L,t);var n=E.dot(u[e]),i=n<0?-1:1;s[4*e]=C.x,s[4*e+1]=C.y,s[4*e+2]=C.z,s[4*e+3]=i}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new $r(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Ii,o=new Ii,s=new Ii,l=new Ii,u=new Ii,c=new Ii,h=new Ii,d=new Ii;if(e)for(var f=0,p=e.count;f<p;f+=3){var v=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(h),u.add(h),c.add(h),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ma.fromBufferAttribute(e,t),ma.normalize(),e.setXYZ(t,ma.x,ma.y,ma.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(var c=0;c<i;c++)a[s++]=n[o++]}return new $r(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,r=this.attributes;for(var a in r){var o=r[a],s=e(o,i);t.setAttribute(a,s)}var l=this.morphAttributes;for(var u in l){for(var c=[],h=l[u],d=0,f=h.length;d<f;d++){var p=h[d],v=e(p,i);c.push(v)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,g=0,y=m.length;g<y;g++){var _=m[g];t.addGroup(_.start,_.count,_.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[u]=h,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,h=u.length;c<h;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var v=d[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(kn);t.BufferGeometry=ga;var ya=new hr,_a=new cr,xa=new nr,ba=new Ii,Ma=new Ii,wa=new Ii,Sa=new Ii,Aa=new Ii,Ta=new Ii,Ca=new Ii,Ea=new Ii,ka=new Ii,La=new ii,Ra=new ii,Ba=new ii,Pa=new Ii,Ia=new Ii,Da=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zr;return(0,m.default)(this,n),e=t.call(this),e.isMesh=!0,e.type="Mesh",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),xa.copy(n.boundingSphere),xa.applyMatrix4(r),!1!==e.ray.intersectsSphere(xa)&&(ya.copy(r).invert(),_a.copy(e.ray).applyMatrix4(ya),null===n.boundingBox||!1!==_a.intersectsBox(n.boundingBox)))){var a,o=n.index,s=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,d=n.groups,f=n.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=d.length;p<v;p++)for(var m=d[p],g=i[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(o.count,Math.min(m.start+m.count,f.start+f.count)),x=y,b=_;x<b;x+=3){var M=o.getX(x),w=o.getX(x+1),S=o.getX(x+2);a=Fa(this,g,e,_a,s,l,u,c,h,M,w,S),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=m.materialIndex,t.push(a))}else for(var A=Math.max(0,f.start),T=Math.min(o.count,f.start+f.count),C=A,E=T;C<E;C+=3){var k=o.getX(C),L=o.getX(C+1),R=o.getX(C+2);a=Fa(this,i,e,_a,s,l,u,c,h,k,L,R),a&&(a.faceIndex=Math.floor(C/3),t.push(a))}else if(void 0!==s)if(Array.isArray(i))for(var B=0,P=d.length;B<P;B++)for(var I=d[B],D=i[I.materialIndex],O=Math.max(I.start,f.start),F=Math.min(s.count,Math.min(I.start+I.count,f.start+f.count)),N=O,G=F;N<G;N+=3){var U=N,z=N+1,H=N+2;a=Fa(this,D,e,_a,s,l,u,c,h,U,z,H),a&&(a.faceIndex=Math.floor(N/3),a.face.materialIndex=I.materialIndex,t.push(a))}else for(var V=Math.max(0,f.start),W=Math.min(s.count,f.start+f.count),j=V,J=W;j<J;j+=3){var X=j,q=j+1,Y=j+2;a=Fa(this,i,e,_a,s,l,u,c,h,X,q,Y),a&&(a.faceIndex=Math.floor(j/3),t.push(a))}}}}]),n}(Or);function Oa(e,t,n,i,r,a,o,s){var l;if(l=t.side===L?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==R,s),null===l)return null;Ia.copy(s),Ia.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Ia);return u<n.near||u>n.far?null:{distance:u,point:Ia.clone(),object:e}}function Fa(e,t,n,i,r,a,o,s,l,u,c,h){ba.fromBufferAttribute(r,u),Ma.fromBufferAttribute(r,c),wa.fromBufferAttribute(r,h);var d=e.morphTargetInfluences;if(a&&d){Ca.set(0,0,0),Ea.set(0,0,0),ka.set(0,0,0);for(var f=0,p=a.length;f<p;f++){var v=d[f],m=a[f];0!==v&&(Sa.fromBufferAttribute(m,u),Aa.fromBufferAttribute(m,c),Ta.fromBufferAttribute(m,h),o?(Ca.addScaledVector(Sa,v),Ea.addScaledVector(Aa,v),ka.addScaledVector(Ta,v)):(Ca.addScaledVector(Sa.sub(ba),v),Ea.addScaledVector(Aa.sub(Ma),v),ka.addScaledVector(Ta.sub(wa),v)))}ba.add(Ca),Ma.add(Ea),wa.add(ka)}e.isSkinnedMesh&&(e.boneTransform(u,ba),e.boneTransform(c,Ma),e.boneTransform(h,wa));var g=Oa(e,t,n,i,ba,Ma,wa,Pa);if(g){s&&(La.fromBufferAttribute(s,u),Ra.fromBufferAttribute(s,c),Ba.fromBufferAttribute(s,h),g.uv=Xr.getUV(Pa,ba,Ma,wa,La,Ra,Ba,new ii)),l&&(La.fromBufferAttribute(l,u),Ra.fromBufferAttribute(l,c),Ba.fromBufferAttribute(l,h),g.uv2=Xr.getUV(Pa,ba,Ma,wa,La,Ra,Ba,new ii));var y={a:u,b:c,c:h,normal:new Ii,materialIndex:0};Xr.getNormal(ba,Ma,wa,y.normal),g.face=y}return g}t.Mesh=Da;var Na=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,m.default)(this,n),e=t.call(this),e.type="BoxGeometry",e.parameters={width:i,height:r,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var u=(0,h.default)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var c=[],d=[],f=[],p=[],v=0,g=0;function y(e,t,n,i,r,a,o,s,l,h,m){for(var y=a/l,_=o/h,x=a/2,b=o/2,M=s/2,w=l+1,S=h+1,A=0,T=0,C=new Ii,E=0;E<S;E++)for(var k=E*_-b,L=0;L<w;L++){var R=L*y-x;C[e]=R*i,C[t]=k*r,C[n]=M,d.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=s>0?1:-1,f.push(C.x,C.y,C.z),p.push(L/l),p.push(1-E/h),A+=1}for(var B=0;B<h;B++)for(var P=0;P<l;P++){var I=v+P+w*B,D=v+P+w*(B+1),O=v+(P+1)+w*(B+1),F=v+(P+1)+w*B;c.push(I,D,F),c.push(D,O,F),T+=6}u.addGroup(g,T,m),g+=T,v+=A}return y("z","y","x",-1,-1,a,r,i,l,s,0),y("z","y","x",1,-1,a,r,-i,l,s,1),y("x","z","y",1,1,i,a,r,o,l,2),y("x","z","y",1,-1,i,a,-r,o,l,3),y("x","y","z",1,-1,i,r,a,o,s,4),y("x","y","z",-1,-1,i,r,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new la(d,3)),e.setAttribute("normal",new la(f,3)),e.setAttribute("uv",new la(p,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(ga);function Ga(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function Ua(e){for(var t={},n=0;n<e.length;n++){var i=Ga(e[n]);for(var r in i)t[r]=i[r]}return t}function za(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}t.BoxGeometry=Na;var Ha={clone:Ga,merge:Ua};t.UniformsUtils=Ha;var Va="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Wa="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",ja=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.uniformsGroups=[],i.vertexShader=Va,i.fragmentShader=Wa,i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ga(e.uniforms),this.uniformsGroups=za(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var r=this.uniforms[i],a=r.value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var s in this.extensions)!0===this.extensions[s]&&(o[s]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}]),n}(Yr);t.ShaderMaterial=ja;var Ja=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isCamera=!0,e.type="Camera",e.matrixWorldInverse=new hr,e.projectionMatrix=new hr,e.projectionMatrixInverse=new hr,e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){(0,u.default)((0,c.default)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Or);t.Camera=Ja;var Xa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,m.default)(this,n),e=t.call(this),e.isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Pn*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Bn*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Pn*Math.atan(Math.tan(.5*Bn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Bn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Ja);t.PerspectiveCamera=Xa;var qa=90,Ya=1,Za=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this),a.type="CubeCamera",a.renderTarget=r;var o=new Xa(qa,Ya,e,i);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Ii(1,0,0)),a.add(o);var s=new Xa(qa,Ya,e,i);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new Ii(-1,0,0)),a.add(s);var l=new Xa(qa,Ya,e,i);l.layers=a.layers,l.up.set(0,0,1),l.lookAt(new Ii(0,1,0)),a.add(l);var u=new Xa(qa,Ya,e,i);u.layers=a.layers,u.up.set(0,0,-1),u.lookAt(new Ii(0,-1,0)),a.add(u);var c=new Xa(qa,Ya,e,i);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new Ii(0,0,1)),a.add(c);var h=new Xa(qa,Ya,e,i);return h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new Ii(0,0,-1)),a.add(h),a}return(0,g.default)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=(0,l.default)(this.children,6),r=i[0],a=i[1],o=i[2],s=i[3],u=i[4],c=i[5],h=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=he,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}]),n}(Or);t.CubeCamera=Za;var Ka=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c,h){var d;return(0,m.default)(this,n),e=void 0!==e?e:[],i=void 0!==i?i:ye,d=t.call(this,e,i,r,a,o,s,l,u,c,h),d.isCubeTexture=!0,d.flipY=!1,d}return(0,g.default)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Ai);t.CubeTexture=Ka;var Qa=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.default)(this,n),i=t.call(this,e,e,r),i.isWebGLCubeRenderTarget=!0;var a={width:e,height:e,depth:1},o=[a,a,a,a,a,a];return i.texture=new Ka(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,i.texture.minFilter=void 0!==r.minFilter?r.minFilter:Re,i}return(0,g.default)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Na(5,5,5),r=new ja({name:"CubemapFromEquirect",uniforms:Ga(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:L,blending:B});r.uniforms.tEquirect.value=t;var a=new Da(i,r),o=t.minFilter;t.minFilter===Ie&&(t.minFilter=Re);var s=new Za(1,10,this);return s.update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var r=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}]),n}(Ci);t.WebGLCubeRenderTarget=Qa;var $a=new Ii,eo=new Ii,to=new ri,no=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=$a.subVectors(n,t).cross(eo.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta($a),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||to.getNormalMatrix(e),i=this.coplanarPoint($a).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Plane=no;var io=new nr,ro=new Ii,ao=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new no,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new no,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new no,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new no,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new no,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new no;(0,m.default)(this,e),this.planes=[t,n,i,r,a,o]}return(0,g.default)(e,[{key:"set",value:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-i,c-s,p-h,y-v).normalize(),t[1].setComponents(o+i,c+s,p+h,y+v).normalize(),t[2].setComponents(o+r,c+l,p+d,y+m).normalize(),t[3].setComponents(o-r,c-l,p-d,y-m).normalize(),t[4].setComponents(o-a,c-u,p-f,y-g).normalize(),t[5].setComponents(o+a,c+u,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),io.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(io)}},{key:"intersectsSprite",value:function(e){return io.center.set(0,0,0),io.radius=.7071067811865476,io.applyMatrix4(e.matrixWorld),this.intersectsSphere(io)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){var a=t[r].distanceToPoint(n);if(a<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(ro.x=i.normal.x>0?e.max.x:e.min.x,ro.y=i.normal.y>0?e.max.y:e.min.y,ro.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ro)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function oo(){var e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function so(e,t){var n=t.isWebGL2,i=new WeakMap;function r(t,i){var r,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(i,s),e.bufferData(i,a,o),t.onUploadCallback(),a instanceof Float32Array)r=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(a instanceof Int16Array)r=5122;else if(a instanceof Uint32Array)r=5125;else if(a instanceof Int32Array)r=5124;else if(a instanceof Int8Array)r=5120;else if(a instanceof Uint8Array)r=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);r=5121}return{buffer:s,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}function a(t,i,r){var a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}function o(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)}function s(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))}function l(e,t){if(e.isGLBufferAttribute){var n=i.get(e);(!n||n.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var o=i.get(e);void 0===o?i.set(e,r(e,t)):o.version<e.version&&(a(o.buffer,e,t),o.version=e.version)}}return{get:o,remove:s,update:l}}t.Frustum=ao;var lo=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.default)(this,n),e=t.call(this),e.type="PlaneGeometry",e.parameters={width:i,height:r,widthSegments:a,heightSegments:o};for(var s=i/2,l=r/2,u=Math.floor(a),c=Math.floor(o),h=u+1,d=c+1,f=i/u,p=r/c,v=[],g=[],y=[],_=[],x=0;x<d;x++)for(var b=x*p-l,M=0;M<h;M++){var w=M*f-s;g.push(w,-b,0),y.push(0,0,1),_.push(M/u),_.push(1-x/c)}for(var S=0;S<c;S++)for(var A=0;A<u;A++){var T=A+h*S,C=A+h*(S+1),E=A+1+h*(S+1),k=A+1+h*S;v.push(T,C,k),v.push(C,E,k)}return e.setIndex(v),e.setAttribute("position",new la(g,3)),e.setAttribute("normal",new la(y,3)),e.setAttribute("uv",new la(_,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(ga);t.PlaneGeometry=lo;var uo="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",co="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ho="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",fo="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",po="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",vo="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",mo="vec3 transformed = vec3( position );",go="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",yo="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",_o="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",xo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",bo="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Mo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",wo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",So="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Ao="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",To="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Co="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Eo="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",ko="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Lo="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Ro="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Bo="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Po="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Io="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Do="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Oo="gl_FragColor = linearToOutputTexel( gl_FragColor );",Fo="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",No="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Go="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Uo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",zo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Ho="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Vo="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",Wo="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",jo="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Jo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Xo="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",qo="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",Yo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Zo="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",Ko="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",Qo="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",$o="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",es="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",ts="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",ns="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",is="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",rs="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",as="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",os="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",ss="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",ls="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",us="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",cs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",hs="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",ds="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",fs="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",ps="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",vs="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",ms="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",gs="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ys="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",_s="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",xs="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",bs="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Ms="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",ws="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Ss="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",As="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Ts="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Cs="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",Es="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",ks="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Ls="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",Rs="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Bs="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",Ps="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Is="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Ds="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Os="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Fs="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ns="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Gs="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Us="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",zs="#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Hs="#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Vs="#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",Ws="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",js="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Js="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",Xs="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",qs="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Ys="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Zs="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Ks="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Qs="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",$s="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",el="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",tl="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",nl="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",il="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",rl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",al="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",ol="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",sl="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",ll="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ul="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",hl="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",dl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",fl="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",pl="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",vl="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",ml="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",gl="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",yl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",_l="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",xl="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",bl="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ml="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",wl="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Sl="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Al="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Tl="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Cl="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",El="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",kl="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ll="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Rl="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Bl="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Pl="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Il="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Dl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ol="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Fl="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Nl="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Gl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ul={alphamap_fragment:uo,alphamap_pars_fragment:co,alphatest_fragment:ho,alphatest_pars_fragment:fo,aomap_fragment:po,aomap_pars_fragment:vo,begin_vertex:mo,beginnormal_vertex:go,bsdfs:yo,iridescence_fragment:_o,bumpmap_pars_fragment:xo,clipping_planes_fragment:bo,clipping_planes_pars_fragment:Mo,clipping_planes_pars_vertex:wo,clipping_planes_vertex:So,color_fragment:Ao,color_pars_fragment:To,color_pars_vertex:Co,color_vertex:Eo,common:ko,cube_uv_reflection_fragment:Lo,defaultnormal_vertex:Ro,displacementmap_pars_vertex:Bo,displacementmap_vertex:Po,emissivemap_fragment:Io,emissivemap_pars_fragment:Do,encodings_fragment:Oo,encodings_pars_fragment:Fo,envmap_fragment:No,envmap_common_pars_fragment:Go,envmap_pars_fragment:Uo,envmap_pars_vertex:zo,envmap_physical_pars_fragment:$o,envmap_vertex:Ho,fog_vertex:Vo,fog_pars_vertex:Wo,fog_fragment:jo,fog_pars_fragment:Jo,gradientmap_pars_fragment:Xo,lightmap_fragment:qo,lightmap_pars_fragment:Yo,lights_lambert_fragment:Zo,lights_lambert_pars_fragment:Ko,lights_pars_begin:Qo,lights_toon_fragment:es,lights_toon_pars_fragment:ts,lights_phong_fragment:ns,lights_phong_pars_fragment:is,lights_physical_fragment:rs,lights_physical_pars_fragment:as,lights_fragment_begin:os,lights_fragment_maps:ss,lights_fragment_end:ls,logdepthbuf_fragment:us,logdepthbuf_pars_fragment:cs,logdepthbuf_pars_vertex:hs,logdepthbuf_vertex:ds,map_fragment:fs,map_pars_fragment:ps,map_particle_fragment:vs,map_particle_pars_fragment:ms,metalnessmap_fragment:gs,metalnessmap_pars_fragment:ys,morphcolor_vertex:_s,morphnormal_vertex:xs,morphtarget_pars_vertex:bs,morphtarget_vertex:Ms,normal_fragment_begin:ws,normal_fragment_maps:Ss,normal_pars_fragment:As,normal_pars_vertex:Ts,normal_vertex:Cs,normalmap_pars_fragment:Es,clearcoat_normal_fragment_begin:ks,clearcoat_normal_fragment_maps:Ls,clearcoat_pars_fragment:Rs,iridescence_pars_fragment:Bs,output_fragment:Ps,packing:Is,premultiplied_alpha_fragment:Ds,project_vertex:Os,dithering_fragment:Fs,dithering_pars_fragment:Ns,roughnessmap_fragment:Gs,roughnessmap_pars_fragment:Us,shadowmap_pars_fragment:zs,shadowmap_pars_vertex:Hs,shadowmap_vertex:Vs,shadowmask_pars_fragment:Ws,skinbase_vertex:js,skinning_pars_vertex:Js,skinning_vertex:Xs,skinnormal_vertex:qs,specularmap_fragment:Ys,specularmap_pars_fragment:Zs,tonemapping_fragment:Ks,tonemapping_pars_fragment:Qs,transmission_fragment:$s,transmission_pars_fragment:el,uv_pars_fragment:tl,uv_pars_vertex:nl,uv_vertex:il,uv2_pars_fragment:rl,uv2_pars_vertex:al,uv2_vertex:ol,worldpos_vertex:sl,background_vert:ll,background_frag:ul,cube_vert:cl,cube_frag:hl,depth_vert:dl,depth_frag:fl,distanceRGBA_vert:pl,distanceRGBA_frag:vl,equirect_vert:ml,equirect_frag:gl,linedashed_vert:yl,linedashed_frag:_l,meshbasic_vert:xl,meshbasic_frag:bl,meshlambert_vert:Ml,meshlambert_frag:wl,meshmatcap_vert:Sl,meshmatcap_frag:Al,meshnormal_vert:Tl,meshnormal_frag:Cl,meshphong_vert:El,meshphong_frag:kl,meshphysical_vert:Ll,meshphysical_frag:Rl,meshtoon_vert:Bl,meshtoon_frag:Pl,points_vert:Il,points_frag:Dl,shadow_vert:Ol,shadow_frag:Fl,sprite_vert:Nl,sprite_frag:Gl};t.ShaderChunk=Ul;var zl={common:{diffuse:{value:new xi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ri},uv2Transform:{value:new ri},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ii(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ri}},sprite:{diffuse:{value:new xi(16777215)},opacity:{value:1},center:{value:new ii(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ri}}};t.UniformsLib=zl;var Hl={basic:{uniforms:Ua([zl.common,zl.specularmap,zl.envmap,zl.aomap,zl.lightmap,zl.fog]),vertexShader:Ul.meshbasic_vert,fragmentShader:Ul.meshbasic_frag},lambert:{uniforms:Ua([zl.common,zl.specularmap,zl.envmap,zl.aomap,zl.lightmap,zl.emissivemap,zl.bumpmap,zl.normalmap,zl.displacementmap,zl.fog,zl.lights,{emissive:{value:new xi(0)}}]),vertexShader:Ul.meshlambert_vert,fragmentShader:Ul.meshlambert_frag},phong:{uniforms:Ua([zl.common,zl.specularmap,zl.envmap,zl.aomap,zl.lightmap,zl.emissivemap,zl.bumpmap,zl.normalmap,zl.displacementmap,zl.fog,zl.lights,{emissive:{value:new xi(0)},specular:{value:new xi(1118481)},shininess:{value:30}}]),vertexShader:Ul.meshphong_vert,fragmentShader:Ul.meshphong_frag},standard:{uniforms:Ua([zl.common,zl.envmap,zl.aomap,zl.lightmap,zl.emissivemap,zl.bumpmap,zl.normalmap,zl.displacementmap,zl.roughnessmap,zl.metalnessmap,zl.fog,zl.lights,{emissive:{value:new xi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ul.meshphysical_vert,fragmentShader:Ul.meshphysical_frag},toon:{uniforms:Ua([zl.common,zl.aomap,zl.lightmap,zl.emissivemap,zl.bumpmap,zl.normalmap,zl.displacementmap,zl.gradientmap,zl.fog,zl.lights,{emissive:{value:new xi(0)}}]),vertexShader:Ul.meshtoon_vert,fragmentShader:Ul.meshtoon_frag},matcap:{uniforms:Ua([zl.common,zl.bumpmap,zl.normalmap,zl.displacementmap,zl.fog,{matcap:{value:null}}]),vertexShader:Ul.meshmatcap_vert,fragmentShader:Ul.meshmatcap_frag},points:{uniforms:Ua([zl.points,zl.fog]),vertexShader:Ul.points_vert,fragmentShader:Ul.points_frag},dashed:{uniforms:Ua([zl.common,zl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ul.linedashed_vert,fragmentShader:Ul.linedashed_frag},depth:{uniforms:Ua([zl.common,zl.displacementmap]),vertexShader:Ul.depth_vert,fragmentShader:Ul.depth_frag},normal:{uniforms:Ua([zl.common,zl.bumpmap,zl.normalmap,zl.displacementmap,{opacity:{value:1}}]),vertexShader:Ul.meshnormal_vert,fragmentShader:Ul.meshnormal_frag},sprite:{uniforms:Ua([zl.sprite,zl.fog]),vertexShader:Ul.sprite_vert,fragmentShader:Ul.sprite_frag},background:{uniforms:{uvTransform:{value:new ri},t2D:{value:null}},vertexShader:Ul.background_vert,fragmentShader:Ul.background_frag},cube:{uniforms:Ua([zl.envmap,{opacity:{value:1}}]),vertexShader:Ul.cube_vert,fragmentShader:Ul.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ul.equirect_vert,fragmentShader:Ul.equirect_frag},distanceRGBA:{uniforms:Ua([zl.common,zl.displacementmap,{referencePosition:{value:new Ii},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ul.distanceRGBA_vert,fragmentShader:Ul.distanceRGBA_frag},shadow:{uniforms:Ua([zl.lights,zl.fog,{color:{value:new xi(0)},opacity:{value:1}}]),vertexShader:Ul.shadow_vert,fragmentShader:Ul.shadow_frag}};function Vl(e,t,n,i,r,a){var o,s,l=new xi(0),u=!0===r?0:1,c=null,h=0,d=null;function f(n,r){var a=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=t.get(f));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(f=null),null===f?p(l,u):f&&f.isColor&&(p(f,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===Me)?(void 0===s&&(s=new Da(new Na(1,1,1),new ja({name:"BackgroundCubeMaterial",uniforms:Ga(Hl.cube.uniforms),vertexShader:Hl.cube.vertexShader,fragmentShader:Hl.cube.fragmentShader,side:L,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),s.material.uniforms.envMap.value=f,s.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&h===f.version&&d===e.toneMapping||(s.material.needsUpdate=!0,c=f,h=f.version,d=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new Da(new lo(2,2),new ja({name:"BackgroundMaterial",uniforms:Ga(Hl.background.uniforms),vertexShader:Hl.background.vertexShader,fragmentShader:Hl.background.fragmentShader,side:k,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&h===f.version&&d===e.toneMapping||(o.material.needsUpdate=!0,c=f,h=f.version,d=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return l},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),u=t,p(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(l,u)},render:f}}function Wl(e,t,n,i){var r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},l=m(null),u=l,c=!1;function h(t,i,r,a,s){var l=!1;if(o){var h=v(a,r,i);u!==h&&(u=h,f(u.object)),l=g(t,a,r,s),l&&y(t,a,r,s)}else{var d=!0===i.wireframe;u.geometry===a.id&&u.program===r.id&&u.wireframe===d||(u.geometry=a.id,u.program=r.id,u.wireframe=d,l=!0)}null!==s&&n.update(s,34963),(l||c)&&(c=!1,S(t,i,r,a),null!==s&&e.bindBuffer(34963,n.get(s).buffer))}function d(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function p(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function v(e,t,n){var i=!0===n.wireframe,r=s[e.id];void 0===r&&(r={},s[e.id]=r);var a=r[t.id];void 0===a&&(a={},r[t.id]=a);var o=a[i];return void 0===o&&(o=m(d()),a[i]=o),o}function m(e){for(var t=[],n=[],i=[],a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function g(e,t,n,i){var r=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s){var c=s[l];if(c.location>=0){var h=r[l],d=a[l];if(void 0===d&&("instanceMatrix"===l&&e.instanceMatrix&&(d=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(d=e.instanceColor)),void 0===h)return!0;if(h.attribute!==d)return!0;if(d&&h.data!==d.data)return!0;o++}}return u.attributesNum!==o||u.index!==i}function y(e,t,n,i){var r={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s){var c=s[l];if(c.location>=0){var h=a[l];void 0===h&&("instanceMatrix"===l&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(h=e.instanceColor));var d={};d.attribute=h,h&&h.data&&(d.data=h.data),r[l]=d,o++}}u.attributes=r,u.attributesNum=o,u.index=i}function _(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function x(e){b(e,0)}function b(n,r){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r){var l=i.isWebGL2?e:t.get("ANGLE_instanced_arrays");l[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function M(){for(var t=u.newAttributes,n=u.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function w(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function S(r,a,o,s){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){_();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var h in u){var d=u[h];if(d.location>=0){var f=l[h];if(void 0===f&&("instanceMatrix"===h&&r.instanceMatrix&&(f=r.instanceMatrix),"instanceColor"===h&&r.instanceColor&&(f=r.instanceColor)),void 0!==f){var p=f.normalized,v=f.itemSize,m=n.get(f);if(void 0===m)continue;var g=m.buffer,y=m.type,S=m.bytesPerElement;if(f.isInterleavedBufferAttribute){var A=f.data,T=A.stride,C=f.offset;if(A.isInstancedInterleavedBuffer){for(var E=0;E<d.locationSize;E++)b(d.location+E,A.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)}else for(var k=0;k<d.locationSize;k++)x(d.location+k);e.bindBuffer(34962,g);for(var L=0;L<d.locationSize;L++)w(d.location+L,v/d.locationSize,y,p,T*S,(C+v/d.locationSize*L)*S)}else{if(f.isInstancedBufferAttribute){for(var R=0;R<d.locationSize;R++)b(d.location+R,f.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count)}else for(var B=0;B<d.locationSize;B++)x(d.location+B);e.bindBuffer(34962,g);for(var P=0;P<d.locationSize;P++)w(d.location+P,v/d.locationSize,y,p,v*S,v/d.locationSize*P*S)}}else if(void 0!==c){var I=c[h];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(d.location,I);break;case 3:e.vertexAttrib3fv(d.location,I);break;case 4:e.vertexAttrib4fv(d.location,I);break;default:e.vertexAttrib1fv(d.location,I)}}}}M()}}function A(){for(var e in E(),s){var t=s[e];for(var n in t){var i=t[n];for(var r in i)p(i[r].object),delete i[r];delete t[n]}delete s[e]}}function T(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var i=t[n];for(var r in i)p(i[r].object),delete i[r];delete t[n]}delete s[e.id]}}function C(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var i=n[e.id];for(var r in i)p(i[r].object),delete i[r];delete n[e.id]}}}function E(){k(),c=!0,u!==l&&(u=l,f(u.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:E,resetDefaultState:k,dispose:A,releaseStatesOfGeometry:T,releaseStatesOfProgram:C,initAttributes:_,enableAttribute:x,disableUnusedAttributes:M}}function jl(e,t,n,i){var r,a=i.isWebGL2;function o(e){r=e}function s(t,i){e.drawArrays(r,t,i),n.update(i,r,1)}function l(i,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](r,i,o,s),n.update(o,r,s)}}this.setMode=o,this.render=s,this.renderInstances=l}function Jl(e,t,n){var i;function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var u=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),p=e.getParameter(34076),v=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),_=d>0,x=o||t.has("OES_texture_float"),b=_&&x,M=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:b,maxSamples:M}}function Xl(e){var t=this,n=null,i=0,r=!1,a=!1,o=new no,s=new ri,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(e,n,i,r){var a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==r||null===u){var c=i+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,f=i;d!==a;++d,f+=4)o.copy(e[d]).applyMatrix4(h,s),o.normal.toArray(u,f),u[f+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==i||r;return r=t,n=c(e,a,0),i=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(t,o,s){var h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!r||null===h||0===h.length||a&&!f)a?c(null):u();else{var v=a?0:i,m=4*v,g=p.clippingState||null;l.value=g,g=c(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function ql(e){var t=new WeakMap;function n(e,t){return t===xe?e.mapping=ye:t===be&&(e.mapping=_e),e}function i(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===xe||a===be){if(t.has(i)){var o=t.get(i).texture;return n(o,i.mapping)}var s=i.image;if(s&&s.height>0){var l=new Qa(s.height/2);return l.fromEquirectangularTexture(e,i),t.set(i,l),i.addEventListener("dispose",r),n(l.texture,i.mapping)}return null}}return i}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}t.ShaderLib=Hl,Hl.physical={uniforms:Ua([Hl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ii(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new xi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ii},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new xi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new xi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ul.meshphysical_vert,fragmentShader:Ul.meshphysical_frag};var Yl=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,m.default)(this,n),e=t.call(this),e.isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=r,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,a=r+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Ja);t.OrthographicCamera=Yl;var Zl=4,Kl=[.125,.215,.35,.446,.526,.582],Ql=20,$l=new Yl,eu=new xi,tu=null,nu=(1+Math.sqrt(5))/2,iu=1/nu,ru=[new Ii(1,1,1),new Ii(-1,1,1),new Ii(1,1,-1),new Ii(-1,1,-1),new Ii(0,nu,iu),new Ii(0,nu,-iu),new Ii(iu,0,nu),new Ii(-iu,0,nu),new Ii(nu,iu,0),new Ii(-nu,iu,0)],au=function(){function e(t){(0,m.default)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,g.default)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;tu=this._renderer.getRenderTarget(),this._setSize(256);var r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=hu(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=cu(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(tu),e.scissorTest=!1,lu(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===ye||e.mapping===_e?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),tu=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Re,minFilter:Re,generateMipmaps:!1,type:Ve,format:Ye,encoding:jt,depthBuffer:!1},i=su(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=su(e,t,n);var r=this._lodMax,a=ou(r);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=uu(r,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new Da(this._lodPlanes[0],e);this._renderer.compile(t,$l)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var r=90,a=1,o=new Xa(r,a,t,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,h=u.toneMapping;u.getClearColor(eu),u.toneMapping=he,u.autoClear=!1;var d=new Zr({name:"PMREM.Background",side:L,depthWrite:!1,depthTest:!1}),f=new Da(new Na,d),p=!1,v=e.background;v?v.isColor&&(d.color.copy(v),e.background=null,p=!0):(d.color.copy(eu),p=!0);for(var m=0;m<6;m++){var g=m%3;0===g?(o.up.set(0,s[m],0),o.lookAt(l[m],0,0)):1===g?(o.up.set(0,0,s[m]),o.lookAt(0,l[m],0)):(o.up.set(0,s[m],0),o.lookAt(0,0,l[m]));var y=this._cubeSize;lu(i,g*y,m>2?y:0,y,y),u.setRenderTarget(i),p&&u.render(f,o),u.render(e,o)}f.geometry.dispose(),f.material.dispose(),u.toneMapping=h,u.autoClear=c,e.background=v}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===ye||e.mapping===_e;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=hu()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=cu());var r=i?this._cubemapMaterial:this._equirectMaterial,a=new Da(this._lodPlanes[0],r),o=r.uniforms;o["envMap"].value=e;var s=this._cubeSize;lu(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,$l)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=ru[(i-1)%ru.length];this._blur(e,i-1,i,r,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(e,t,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=3,c=new Da(this._lodPlanes[i],l),h=l.uniforms,d=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*d):2*Math.PI/(2*Ql-1),p=r/f,v=isFinite(r)?1+Math.floor(u*p):Ql;v>Ql&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(v," samples when the maximum is set to ").concat(Ql));for(var m=[],g=0,y=0;y<Ql;++y){var _=y/p,x=Math.exp(-_*_/2);m.push(x),0===y?g+=x:y<v&&(g+=2*x)}for(var b=0;b<m.length;b++)m[b]=m[b]/g;h["envMap"].value=e.texture,h["samples"].value=v,h["weights"].value=m,h["latitudinal"].value="latitudinal"===a,o&&(h["poleAxis"].value=o);var M=this._lodMax;h["dTheta"].value=f,h["mipInt"].value=M-n;var w=this._sizeLods[i],S=3*w*(i>M-Zl?i-M+Zl:0),A=4*(this._cubeSize-w);lu(t,S,A,3*w,2*w),s.setRenderTarget(t),s.render(c,$l)}}]),e}();function ou(e){for(var t=[],n=[],i=[],r=e,a=e-Zl+1+Kl.length,o=0;o<a;o++){var s=Math.pow(2,r);n.push(s);var l=1/s;o>e-Zl?l=Kl[o-e+Zl-1]:0===o&&(l=0),i.push(l);for(var u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*f),_=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=0;b<f;b++){var M=b%3*2/3-1,w=b>2?0:-1,S=[M,w,0,M+2/3,w,0,M+2/3,w+1,0,M,w,0,M+2/3,w+1,0,M,w+1,0];y.set(S,v*p*b),_.set(d,m*p*b);var A=[b,b,b,b,b,b];x.set(A,g*p*b)}var T=new ga;T.setAttribute("position",new $r(y,v)),T.setAttribute("uv",new $r(_,m)),T.setAttribute("faceIndex",new $r(x,g)),t.push(T),r>Zl&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}function su(e,t,n){var i=new Ci(e,t,n);return i.texture.mapping=Me,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function lu(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function uu(e,t,n){var i=new Float32Array(Ql),r=new Ii(0,1,0),a=new ja({name:"SphericalGaussianBlur",defines:{n:Ql,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:du(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:B,depthTest:!1,depthWrite:!1});return a}function cu(){return new ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:du(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:B,depthTest:!1,depthWrite:!1})}function hu(){return new ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:du(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:B,depthTest:!1,depthWrite:!1})}function du(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function fu(e){var t=new WeakMap,n=null;function i(i){if(i&&i.isTexture){var o=i.mapping,s=o===xe||o===be,l=o===ye||o===_e;if(s||l){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new au(e)),u=s?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var c=i.image;if(s&&c&&c.height>0||l&&c&&r(c)){null===n&&(n=new au(e));var h=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,h),i.addEventListener("dispose",a),h.texture}return null}}return i}function r(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}function a(e){var n=e.target;n.removeEventListener("dispose",a);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function o(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:i,dispose:o}}function pu(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function vu(e,t,n,i){var r={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete r[s.id];var u=a.get(s);u&&(t.remove(u),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e,t){return!0===r[t.id]||(t.addEventListener("dispose",o),r[t.id]=!0,n.memory.geometries++),t}function l(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var r=e.morphAttributes;for(var a in r)for(var o=r[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)}function u(e){var n=[],i=e.index,r=e.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],d=s[l+2];n.push(c,h,h,d,d,c)}}else{var f=r.array;o=r.version;for(var p=0,v=f.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(ai(n)?oa:ra)(n,1);_.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,_)}function c(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&u(e)}else u(e);return a.get(e)}return{get:s,update:l,getWireframeAttribute:c}}function mu(e,t,n,i){var r,a,o,s=i.isWebGL2;function l(e){r=e}function u(e){a=e.type,o=e.bytesPerElement}function c(t,i){e.drawElements(r,i,a,t*o),n.update(i,r,1)}function h(i,l,u){if(0!==u){var c,h;if(s)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](r,l,a,i*o,u),n.update(l,r,u)}}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function gu(e){var t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(e,t,i){switch(n.calls++,t){case 4:n.triangles+=i*(e/3);break;case 1:n.lines+=i*(e/2);break;case 3:n.lines+=i*(e-1);break;case 2:n.lines+=i*e;break;case 0:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function yu(e,t){return e[0]-t[0]}function _u(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xu(e,t,n){for(var i={},r=new Float32Array(8),a=new WeakMap,o=new Ti,s=[],l=0;l<8;l++)s[l]=[l,0];function u(l,u,c,h){var d=l.morphTargetInfluences;if(!0===t.isWebGL2){var f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0,v=a.get(u);if(void 0===v||v.count!==p){var m=function e(){C.dispose(),a.delete(u),u.removeEventListener("dispose",e)};void 0!==v&&v.texture.dispose();var g=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,_=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],M=u.morphAttributes.color||[],w=0;!0===g&&(w=1),!0===y&&(w=2),!0===_&&(w=3);var S=u.attributes.position.count*w,A=1;S>t.maxTextureSize&&(A=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);var T=new Float32Array(S*A*4*p),C=new Ei(T,S,A,p);C.type=He,C.needsUpdate=!0;for(var E=4*w,k=0;k<p;k++)for(var L=x[k],R=b[k],B=M[k],P=S*A*4*k,I=0;I<L.count;I++){var D=I*E;!0===g&&(o.fromBufferAttribute(L,I),T[P+D+0]=o.x,T[P+D+1]=o.y,T[P+D+2]=o.z,T[P+D+3]=0),!0===y&&(o.fromBufferAttribute(R,I),T[P+D+4]=o.x,T[P+D+5]=o.y,T[P+D+6]=o.z,T[P+D+7]=0),!0===_&&(o.fromBufferAttribute(B,I),T[P+D+8]=o.x,T[P+D+9]=o.y,T[P+D+10]=o.z,T[P+D+11]=4===B.itemSize?o.w:1)}v={count:p,texture:C,size:new ii(S,A)},a.set(u,v),u.addEventListener("dispose",m)}for(var O=0,F=0;F<d.length;F++)O+=d[F];var N=u.morphTargetsRelative?1:1-O;h.getUniforms().setValue(e,"morphTargetBaseInfluence",N),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var G=void 0===d?0:d.length,U=i[u.id];if(void 0===U||U.length!==G){U=[];for(var z=0;z<G;z++)U[z]=[z,0];i[u.id]=U}for(var H=0;H<G;H++){var V=U[H];V[0]=H,V[1]=d[H]}U.sort(_u);for(var W=0;W<8;W++)W<G&&U[W][1]?(s[W][0]=U[W][0],s[W][1]=U[W][1]):(s[W][0]=Number.MAX_SAFE_INTEGER,s[W][1]=0);s.sort(yu);for(var j=u.morphAttributes.position,J=u.morphAttributes.normal,X=0,q=0;q<8;q++){var Y=s[q],Z=Y[0],K=Y[1];Z!==Number.MAX_SAFE_INTEGER&&K?(j&&u.getAttribute("morphTarget"+q)!==j[Z]&&u.setAttribute("morphTarget"+q,j[Z]),J&&u.getAttribute("morphNormal"+q)!==J[Z]&&u.setAttribute("morphNormal"+q,J[Z]),r[q]=K,X+=K):(j&&!0===u.hasAttribute("morphTarget"+q)&&u.deleteAttribute("morphTarget"+q),J&&!0===u.hasAttribute("morphNormal"+q)&&u.deleteAttribute("morphNormal"+q),r[q]=0)}var Q=u.morphTargetsRelative?1:1-X;h.getUniforms().setValue(e,"morphTargetBaseInfluence",Q),h.getUniforms().setValue(e,"morphTargetInfluences",r)}}return{update:u}}function bu(e,t,n,i){var r=new WeakMap;function a(e){var a=i.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==a&&(t.update(l),r.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l}function o(){r=new WeakMap}function s(e){var t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:a,dispose:o}}t.PMREMGenerator=au;var Mu=new Ai,wu=new Ei,Su=new Li,Au=new Ka,Tu=[],Cu=[],Eu=new Float32Array(16),ku=new Float32Array(9),Lu=new Float32Array(4);function Ru(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=Tu[r];if(void 0===a&&(a=new Float32Array(r),Tu[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Bu(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Pu(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Iu(e,t){var n=Cu[t];void 0===n&&(n=new Int32Array(t),Cu[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Du(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ou(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bu(n,t))return;e.uniform2fv(this.addr,t),Pu(n,t)}}function Fu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Bu(n,t))return;e.uniform3fv(this.addr,t),Pu(n,t)}}function Nu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bu(n,t))return;e.uniform4fv(this.addr,t),Pu(n,t)}}function Gu(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Bu(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Pu(n,t)}else{if(Bu(n,i))return;Lu.set(i),e.uniformMatrix2fv(this.addr,!1,Lu),Pu(n,i)}}function Uu(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Bu(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Pu(n,t)}else{if(Bu(n,i))return;ku.set(i),e.uniformMatrix3fv(this.addr,!1,ku),Pu(n,i)}}function zu(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Bu(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Pu(n,t)}else{if(Bu(n,i))return;Eu.set(i),e.uniformMatrix4fv(this.addr,!1,Eu),Pu(n,i)}}function Hu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Vu(e,t){var n=this.cache;Bu(n,t)||(e.uniform2iv(this.addr,t),Pu(n,t))}function Wu(e,t){var n=this.cache;Bu(n,t)||(e.uniform3iv(this.addr,t),Pu(n,t))}function ju(e,t){var n=this.cache;Bu(n,t)||(e.uniform4iv(this.addr,t),Pu(n,t))}function Ju(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Xu(e,t){var n=this.cache;Bu(n,t)||(e.uniform2uiv(this.addr,t),Pu(n,t))}function qu(e,t){var n=this.cache;Bu(n,t)||(e.uniform3uiv(this.addr,t),Pu(n,t))}function Yu(e,t){var n=this.cache;Bu(n,t)||(e.uniform4uiv(this.addr,t),Pu(n,t))}function Zu(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Mu,r)}function Ku(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Su,r)}function Qu(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Au,r)}function $u(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||wu,r)}function ec(e){switch(e){case 5126:return Du;case 35664:return Ou;case 35665:return Fu;case 35666:return Nu;case 35674:return Gu;case 35675:return Uu;case 35676:return zu;case 5124:case 35670:return Hu;case 35667:case 35671:return Vu;case 35668:case 35672:return Wu;case 35669:case 35673:return ju;case 5125:return Ju;case 36294:return Xu;case 36295:return qu;case 36296:return Yu;case 35678:case 36198:case 36298:case 36306:case 35682:return Zu;case 35679:case 36299:case 36307:return Ku;case 35680:case 36300:case 36308:case 36293:return Qu;case 36289:case 36303:case 36311:case 36292:return $u}}function tc(e,t){e.uniform1fv(this.addr,t)}function nc(e,t){var n=Ru(t,this.size,2);e.uniform2fv(this.addr,n)}function ic(e,t){var n=Ru(t,this.size,3);e.uniform3fv(this.addr,n)}function rc(e,t){var n=Ru(t,this.size,4);e.uniform4fv(this.addr,n)}function ac(e,t){var n=Ru(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function oc(e,t){var n=Ru(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function sc(e,t){var n=Ru(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function lc(e,t){e.uniform1iv(this.addr,t)}function uc(e,t){e.uniform2iv(this.addr,t)}function cc(e,t){e.uniform3iv(this.addr,t)}function hc(e,t){e.uniform4iv(this.addr,t)}function dc(e,t){e.uniform1uiv(this.addr,t)}function fc(e,t){e.uniform2uiv(this.addr,t)}function pc(e,t){e.uniform3uiv(this.addr,t)}function vc(e,t){e.uniform4uiv(this.addr,t)}function mc(e,t,n){var i=t.length,r=Iu(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2D(t[a]||Mu,r[a])}function gc(e,t,n){var i=t.length,r=Iu(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture3D(t[a]||Su,r[a])}function yc(e,t,n){var i=t.length,r=Iu(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||Au,r[a])}function _c(e,t,n){var i=t.length,r=Iu(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2DArray(t[a]||wu,r[a])}function xc(e){switch(e){case 5126:return tc;case 35664:return nc;case 35665:return ic;case 35666:return rc;case 35674:return ac;case 35675:return oc;case 35676:return sc;case 5124:case 35670:return lc;case 35667:case 35671:return uc;case 35668:case 35672:return cc;case 35669:case 35673:return hc;case 5125:return dc;case 36294:return fc;case 36295:return pc;case 36296:return vc;case 35678:case 36198:case 36298:case 36306:case 35682:return mc;case 35679:case 36299:case 36307:return gc;case 35680:case 36300:case 36308:case 36293:return yc;case 36289:case 36303:case 36311:case 36292:return _c}}var bc=function e(t,n,i){(0,m.default)(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=ec(n.type)},Mc=function e(t,n,i){(0,m.default)(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=xc(n.type)},wc=function(){function e(t){(0,m.default)(this,e),this.id=t,this.seq=[],this.map={}}return(0,g.default)(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}}}]),e}(),Sc=/(\w+)(\])?(\[|\.)?/g;function Ac(e,t){e.seq.push(t),e.map[t.id]=t}function Tc(e,t,n){var i=e.name,r=i.length;Sc.lastIndex=0;while(1){var a=Sc.exec(i),o=Sc.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){Ac(n,void 0===u?new bc(s,e,t):new Mc(s,e,t));break}var c=n.map,h=c[s];void 0===h&&(h=new wc(s),Ac(n,h)),n=h}}var Cc=function(){function e(t,n){(0,m.default)(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),r=0;r<i;++r){var a=t.getActiveUniform(n,r),o=t.getUniformLocation(n,a.name);Tc(a,o,this)}}return(0,g.default)(e,[{key:"setValue",value:function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n}}]),e}();function Ec(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var kc=0;function Lc(e,t){for(var n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length),o=r;o<a;o++){var s=o+1;i.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return i.join("\n")}function Rc(e){switch(e){case jt:return["Linear","( value )"];case Jt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Bc(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";var a=/ERROR: 0:(\d+)/.exec(r);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+Lc(e.getShaderSource(t),o)}return r}function Pc(e,t){var n=Rc(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ic(e,t){var n;switch(t){case de:n="Linear";break;case fe:n="Reinhard";break;case pe:n="OptimizedCineon";break;case ve:n="ACESFilmic";break;case me:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Dc(e){var t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(Nc).join("\n")}function Oc(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function Fc(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}function Nc(e){return""!==e}function Gc(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Uc(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var zc=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hc(e){return e.replace(zc,Vc)}function Vc(e,t){var n=Ul[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Hc(n)}var Wc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jc(e){return e.replace(Wc,Jc)}function Jc(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Xc(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function qc(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===T?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===C?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===E&&(t="SHADOWMAP_TYPE_VSM"),t}function Yc(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ye:case _e:t="ENVMAP_TYPE_CUBE";break;case Me:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Zc(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case _e:t="ENVMAP_MODE_REFRACTION";break}return t}function Kc(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case le:t="ENVMAP_BLENDING_MULTIPLY";break;case ue:t="ENVMAP_BLENDING_MIX";break;case ce:t="ENVMAP_BLENDING_ADD";break}return t}function Qc(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t,r=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:r,texelHeight:i,maxMip:n}}function $c(e,t,n,i){var r,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=qc(n),h=Yc(n),d=Zc(n),f=Kc(n),p=Qc(n),v=n.isWebGL2?"":Dc(n),m=Oc(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(r=[m].filter(Nc).join("\n"),r.length>0&&(r+="\n"),a=[v,m].filter(Nc).join("\n"),a.length>0&&(a+="\n")):(r=[Xc(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nc).join("\n"),a=[v,Xc(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==he?"#define TONE_MAPPING":"",n.toneMapping!==he?Ul["tonemapping_pars_fragment"]:"",n.toneMapping!==he?Ic("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ul["encodings_pars_fragment"],Pc("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Nc).join("\n")),l=Hc(l),l=Gc(l,n),l=Uc(l,n),u=Hc(u),u=Gc(u,n),u=Uc(u,n),l=jc(l),u=jc(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",n.glslVersion===Cn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Cn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,x,b=y+r+l,M=y+a+u,w=Ec(o,35633,b),S=Ec(o,35632,M);if(o.attachShader(g,w),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var A=o.getProgramInfoLog(g).trim(),T=o.getShaderInfoLog(w).trim(),C=o.getShaderInfoLog(S).trim(),E=!0,k=!0;if(!1===o.getProgramParameter(g,35714)){E=!1;var L=Bc(o,w,"vertex"),R=Bc(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+A+"\n"+L+"\n"+R)}else""!==A?console.warn("THREE.WebGLProgram: Program Info Log:",A):""!==T&&""!==C||(k=!1);k&&(this.diagnostics={runnable:E,programLog:A,vertexShader:{log:T,prefix:r},fragmentShader:{log:C,prefix:a}})}return o.deleteShader(w),o.deleteShader(S),this.getUniforms=function(){return void 0===_&&(_=new Cc(o,g)),_},this.getAttributes=function(){return void 0===x&&(x=Fc(o,g)),x},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=kc++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=S,this}var eh=0,th=function(){function e(){(0,m.default)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,g.default)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),i=(0,s.default)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(a){i.e(a)}finally{i.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new nh(e),t.set(e,n)),n}}]),e}(),nh=function e(t){(0,m.default)(this,e),this.id=eh++,this.code=t,this.usedTimes=0};function ih(e,t,n,i,r,a,o){var s=new Mr,l=new th,u=[],c=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(a,s,u,v,m){var g=v.fog,y=m.geometry,_=a.isMeshStandardMaterial?v.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||_),b=x&&x.mapping===Me?x.image.height:null,M=p[a.type];null!==a.precision&&(f=r.getMaxPrecision(a.precision),f!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."));var w,S,A,T,C=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,E=void 0!==C?C.length:0,k=0;if(void 0!==y.morphAttributes.position&&(k=1),void 0!==y.morphAttributes.normal&&(k=2),void 0!==y.morphAttributes.color&&(k=3),M){var B=Hl[M];w=B.vertexShader,S=B.fragmentShader}else w=a.vertexShader,S=a.fragmentShader,l.update(a),A=l.getVertexShaderID(a),T=l.getFragmentShaderID(a);var I=e.getRenderTarget(),D=a.alphaTest>0,O=a.clearcoat>0,F=a.iridescence>0,N={isWebGL2:c,shaderID:M,shaderName:a.type,vertexShader:w,fragmentShader:S,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:T,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:d,outputEncoding:null===I?e.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:jt,map:!!a.map,matcap:!!a.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:b,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Zt,tangentSpaceNormalMap:a.normalMapType===Yt,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===Jt,clearcoat:O,clearcoatMap:O&&!!a.clearcoatMap,clearcoatRoughnessMap:O&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!a.clearcoatNormalMap,iridescence:F,iridescenceMap:F&&!!a.iridescenceMap,iridescenceThicknessMap:F&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===P,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:E,morphTextureStride:k,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:he,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===R,flipSided:a.side===L,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()};return N}function m(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(g(n,t),y(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()}function g(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function y(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}function _(e){var t,n=p[e.type];if(n){var i=Hl[n];t=Ha.clone(i.uniforms)}else t=e.uniforms;return t}function x(t,n){for(var i,r=0,o=u.length;r<o;r++){var s=u[r];if(s.cacheKey===n){i=s,++i.usedTimes;break}}return void 0===i&&(i=new $c(e,n,t,a),u.push(i)),i}function b(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}}function M(e){l.remove(e)}function w(){l.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:_,acquireProgram:x,releaseProgram:b,releaseShaderCache:M,programs:u,dispose:w}}function rh(){var e=new WeakMap;function t(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function i(t,n,i){e.get(t)[n]=i}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function ah(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function oh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function sh(){var e=[],t=0,n=[],i=[],r=[];function a(){t=0,n.length=0,i.length=0,r.length=0}function o(n,i,r,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}function s(e,t,a,s,l,u){var c=o(e,t,a,s,l,u);a.transmission>0?i.push(c):!0===a.transparent?r.push(c):n.push(c)}function l(e,t,a,s,l,u){var c=o(e,t,a,s,l,u);a.transmission>0?i.unshift(c):!0===a.transparent?r.unshift(c):n.unshift(c)}function u(e,t){n.length>1&&n.sort(e||ah),i.length>1&&i.sort(t||oh),r.length>1&&r.sort(t||oh)}function c(){for(var n=t,i=e.length;n<i;n++){var r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:s,unshift:l,finish:c,sort:u}}function lh(){var e=new WeakMap;function t(t,n){var i,r=e.get(t);return void 0===r?(i=new sh,e.set(t,[i])):n>=r.length?(i=new sh,r.push(i)):i=r[n],i}function n(){e=new WeakMap}return{get:t,dispose:n}}function uh(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ii,color:new xi};break;case"SpotLight":n={position:new Ii,direction:new Ii,color:new xi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ii,color:new xi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ii,skyColor:new xi,groundColor:new xi};break;case"RectAreaLight":n={color:new xi,position:new Ii,halfWidth:new Ii,halfHeight:new Ii};break}return e[t.id]=n,n}}}function ch(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}var hh=0;function dh(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function fh(e,t){for(var n=new uh,i=ch(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)r.probe.push(new Ii);var o=new Ii,s=new hr,l=new hr;function u(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)r.probe[c].set(0,0,0);var h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,_=0,x=0;a.sort(dh);for(var b=!0!==o?Math.PI:1,M=0,w=a.length;M<w;M++){var S=a[M],A=S.color,T=S.intensity,C=S.distance,E=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=A.r*T*b,l+=A.g*T*b,u+=A.b*T*b;else if(S.isLightProbe)for(var k=0;k<9;k++)r.probe[k].addScaledVector(S.sh.coefficients[k],T);else if(S.isDirectionalLight){var L=n.get(S);if(L.color.copy(S.color).multiplyScalar(S.intensity*b),S.castShadow){var R=S.shadow,B=i.get(S);B.shadowBias=R.bias,B.shadowNormalBias=R.normalBias,B.shadowRadius=R.radius,B.shadowMapSize=R.mapSize,r.directionalShadow[h]=B,r.directionalShadowMap[h]=E,r.directionalShadowMatrix[h]=S.shadow.matrix,m++}r.directional[h]=L,h++}else if(S.isSpotLight){var P=n.get(S);P.position.setFromMatrixPosition(S.matrixWorld),P.color.copy(A).multiplyScalar(T*b),P.distance=C,P.coneCos=Math.cos(S.angle),P.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),P.decay=S.decay,r.spot[f]=P;var I=S.shadow;if(S.map&&(r.spotLightMap[_]=S.map,_++,I.updateMatrices(S),S.castShadow&&x++),r.spotLightMatrix[f]=I.matrix,S.castShadow){var D=i.get(S);D.shadowBias=I.bias,D.shadowNormalBias=I.normalBias,D.shadowRadius=I.radius,D.shadowMapSize=I.mapSize,r.spotShadow[f]=D,r.spotShadowMap[f]=E,y++}f++}else if(S.isRectAreaLight){var O=n.get(S);O.color.copy(A).multiplyScalar(T),O.halfWidth.set(.5*S.width,0,0),O.halfHeight.set(0,.5*S.height,0),r.rectArea[p]=O,p++}else if(S.isPointLight){var F=n.get(S);if(F.color.copy(S.color).multiplyScalar(S.intensity*b),F.distance=S.distance,F.decay=S.decay,S.castShadow){var N=S.shadow,G=i.get(S);G.shadowBias=N.bias,G.shadowNormalBias=N.normalBias,G.shadowRadius=N.radius,G.shadowMapSize=N.mapSize,G.shadowCameraNear=N.camera.near,G.shadowCameraFar=N.camera.far,r.pointShadow[d]=G,r.pointShadowMap[d]=E,r.pointShadowMatrix[d]=S.shadow.matrix,g++}r.point[d]=F,d++}else if(S.isHemisphereLight){var U=n.get(S);U.skyColor.copy(S.color).multiplyScalar(T*b),U.groundColor.copy(S.groundColor).multiplyScalar(T*b),r.hemi[v]=U,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=zl.LTC_FLOAT_1,r.rectAreaLTC2=zl.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=zl.LTC_HALF_1,r.rectAreaLTC2=zl.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=u;var z=r.hash;z.directionalLength===h&&z.pointLength===d&&z.spotLength===f&&z.rectAreaLength===p&&z.hemiLength===v&&z.numDirectionalShadows===m&&z.numPointShadows===g&&z.numSpotShadows===y&&z.numSpotMaps===_||(r.directional.length=h,r.spot.length=f,r.rectArea.length=p,r.point.length=d,r.hemi.length=v,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=y+_-x,r.spotLightMap.length=_,r.numSpotLightShadowsWithMaps=x,z.directionalLength=h,z.pointLength=d,z.spotLength=f,z.rectAreaLength=p,z.hemiLength=v,z.numDirectionalShadows=m,z.numPointShadows=g,z.numSpotShadows=y,z.numSpotMaps=_,r.version=hh++)}function c(e,t){for(var n=0,i=0,a=0,u=0,c=0,h=t.matrixWorldInverse,d=0,f=e.length;d<f;d++){var p=e[d];if(p.isDirectionalLight){var v=r.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=r.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=r.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),s.copy(p.matrixWorld),s.premultiply(h),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=r.point[i];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),i++}else if(p.isHemisphereLight){var _=r.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),c++}}}return{setup:u,setupView:c,state:r}}function ph(e,t){var n=new fh(e,t),i=[],r=[];function a(){i.length=0,r.length=0}function o(e){i.push(e)}function s(e){r.push(e)}function l(e){n.setup(i,e)}function u(e){n.setupView(i,e)}var c={lightsArray:i,shadowsArray:r,lights:n};return{init:a,state:c,setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function vh(e,t){var n=new WeakMap;function i(i){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(i);return void 0===o?(r=new ph(e,t),n.set(i,[r])):a>=o.length?(r=new ph(e,t),o.push(r)):r=o[a],r}function r(){n=new WeakMap}return{get:i,dispose:r}}var mh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=Xt,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Yr);t.MeshDepthMaterial=mh;var gh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.referencePosition=new Ii,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Yr);t.MeshDistanceMaterial=gh;var yh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",_h="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function xh(e,t,n){var i=new ao,r=new ii,a=new ii,o=new Ti,s=new mh({depthPacking:qt}),l=new gh,u={},c=n.maxTextureSize,h={0:L,1:k,2:R},d=new ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ii},radius:{value:4}},vertexShader:yh,fragmentShader:_h}),f=d.clone();f.defines.HORIZONTAL_PASS=1;var p=new ga;p.setAttribute("position",new $r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Da(p,d),m=this;function g(n,i){var a=t.update(v);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ci(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,d,v,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,f,v,null)}function y(t,n,i,r,a,o){var c=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==d?d:!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var f=c.uuid,p=n.uuid,v=u[f];void 0===v&&(v={},u[f]=v);var m=v[p];void 0===m&&(m=c.clone(),v[p]=m),c=m}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=o===E?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=r,c.farDistance=a),c}function _(n,r,a,o,s){if(!1!==n.visible){var l=n.layers.test(r.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===E)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var h=u.groups,d=0,f=h.length;d<f;d++){var p=h[d],v=c[p.materialIndex];if(v&&v.visible){var m=y(n,v,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,p)}}else if(c.visible){var g=y(n,c,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,g,n,null)}}for(var x=n.children,b=0,M=x.length;b<M;b++)_(x[b],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=T,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(B),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var v=t[f],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){r.copy(y.mapSize);var x=y.getFrameExtents();if(r.multiply(x),a.copy(y.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(a.x=Math.floor(c/x.x),r.x=a.x*x.x,y.mapSize.x=a.x),r.y>c&&(a.y=Math.floor(c/x.y),r.y=a.y*x.y,y.mapSize.y=a.y)),null===y.map){var b=this.type!==E?{minFilter:Te,magFilter:Te}:{};y.map=new Ci(r.x,r.y,b),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var M=y.getViewportCount(),w=0;w<M;w++){var S=y.getViewport(w);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),d.viewport(o),y.updateMatrices(v,w),i=y.getFrustum(),_(n,s,y.camera,v,this.type)}!0!==y.isPointLightShadow&&this.type===E&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(l,u,h)}}}function bh(e,t,n){var i,r,a=n.isWebGL2;function o(){var t=!1,n=new Ti,i=null,r=new Ti(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function s(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?Ce(2929):Ee(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case ee:e.depthFunc(512);break;case te:e.depthFunc(519);break;case ne:e.depthFunc(513);break;case ie:e.depthFunc(515);break;case re:e.depthFunc(514);break;case ae:e.depthFunc(518);break;case oe:e.depthFunc(516);break;case se:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function l(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?Ce(2960):Ee(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}}var u=new o,c=new s,h=new l,d=new WeakMap,f=new WeakMap,v={},m={},g=new WeakMap,y=[],_=null,x=!1,S=null,A=null,T=null,C=null,E=null,k=null,le=null,ue=!1,ce=null,he=null,de=null,fe=null,pe=null,ve=e.getParameter(35661),me=!1,ge=0,ye=e.getParameter(7938);-1!==ye.indexOf("WebGL")?(ge=parseFloat(/^WebGL (\d)/.exec(ye)[1]),me=ge>=1):-1!==ye.indexOf("OpenGL ES")&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(ye)[1]),me=ge>=2);var _e=null,xe={},be=e.getParameter(3088),Me=e.getParameter(2978),we=(new Ti).fromArray(be),Se=(new Ti).fromArray(Me);function Ae(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var Te={};function Ce(t){!0!==v[t]&&(e.enable(t),v[t]=!0)}function Ee(t){!1!==v[t]&&(e.disable(t),v[t]=!1)}function ke(t,n){return m[t]!==n&&(e.bindFramebuffer(t,n),m[t]=n,a&&(36009===t&&(m[36160]=n),36160===t&&(m[36009]=n)),!0)}function Le(i,r){var a=y,o=!1;if(i)if(a=g.get(r),void 0===a&&(a=[],g.set(r,a)),i.isWebGLMultipleRenderTargets){var s=i.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))}function Re(t){return _!==t&&(e.useProgram(t),_=t,!0)}Te[3553]=Ae(3553,3553,1),Te[34067]=Ae(34067,34069,6),u.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Ce(2929),c.setFunc(ie),Fe(!1),Ne(M),Ce(2884),De(B);var Be=(i={},(0,p.default)(i,N,32774),(0,p.default)(i,G,32778),(0,p.default)(i,U,32779),i);if(a)Be[z]=32775,Be[H]=32776;else{var Pe=t.get("EXT_blend_minmax");null!==Pe&&(Be[z]=Pe.MIN_EXT,Be[H]=Pe.MAX_EXT)}var Ie=(r={},(0,p.default)(r,V,0),(0,p.default)(r,W,1),(0,p.default)(r,j,768),(0,p.default)(r,X,770),(0,p.default)(r,$,776),(0,p.default)(r,K,774),(0,p.default)(r,Y,772),(0,p.default)(r,J,769),(0,p.default)(r,q,771),(0,p.default)(r,Q,775),(0,p.default)(r,Z,773),r);function De(t,n,i,r,a,o,s,l){if(t!==B){if(!1===x&&(Ce(3042),x=!0),t===F)a=a||n,o=o||i,s=s||r,n===A&&a===E||(e.blendEquationSeparate(Be[n],Be[a]),A=n,E=a),i===T&&r===C&&o===k&&s===le||(e.blendFuncSeparate(Ie[i],Ie[r],Ie[o],Ie[s]),T=i,C=r,k=o,le=s),S=t,ue=null;else if(t!==S||l!==ue){if(A===N&&E===N||(e.blendEquation(32774),A=N,E=N),l)switch(t){case P:e.blendFuncSeparate(1,771,1,771);break;case I:e.blendFunc(1,1);break;case D:e.blendFuncSeparate(0,769,0,1);break;case O:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case P:e.blendFuncSeparate(770,771,1,771);break;case I:e.blendFunc(770,1);break;case D:e.blendFuncSeparate(0,769,0,1);break;case O:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}T=null,C=null,k=null,le=null,S=t,ue=l}}else!0===x&&(Ee(3042),x=!1)}function Oe(e,t){e.side===R?Ee(2884):Ce(2884);var n=e.side===L;t&&(n=!n),Fe(n),e.blending===P&&!1===e.transparent?De(B):De(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),c.setFunc(e.depthFunc),c.setTest(e.depthTest),c.setMask(e.depthWrite),u.setMask(e.colorWrite);var i=e.stencilWrite;h.setTest(i),i&&(h.setMask(e.stencilWriteMask),h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ue(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Ce(32926):Ee(32926)}function Fe(t){ce!==t&&(t?e.frontFace(2304):e.frontFace(2305),ce=t)}function Ne(t){t!==b?(Ce(2884),t!==he&&(t===M?e.cullFace(1029):t===w?e.cullFace(1028):e.cullFace(1032))):Ee(2884),he=t}function Ge(t){t!==de&&(me&&e.lineWidth(t),de=t)}function Ue(t,n,i){t?(Ce(32823),fe===n&&pe===i||(e.polygonOffset(n,i),fe=n,pe=i)):Ee(32823)}function ze(e){e?Ce(3089):Ee(3089)}function He(t){void 0===t&&(t=33984+ve-1),_e!==t&&(e.activeTexture(t),_e=t)}function Ve(t,n){null===_e&&He();var i=xe[_e];void 0===i&&(i={type:void 0,texture:void 0},xe[_e]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||Te[t]),i.type=t,i.texture=n)}function We(){var t=xe[_e];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function je(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Je(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Xe(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function qe(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ye(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ze(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ke(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Qe(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function $e(t){!1===we.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),we.copy(t))}function et(t){!1===Se.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Se.copy(t))}function tt(t,n){var i=f.get(n);void 0===i&&(i=new WeakMap,f.set(n,i));var r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))}function nt(t,n){var i=f.get(n),r=i.get(t);d.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),d.set(t,r))}function it(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),v={},_e=null,xe={},m={},g=new WeakMap,y=[],_=null,x=!1,S=null,A=null,T=null,C=null,E=null,k=null,le=null,ue=!1,ce=null,he=null,de=null,fe=null,pe=null,we.set(0,0,e.canvas.width,e.canvas.height),Se.set(0,0,e.canvas.width,e.canvas.height),u.reset(),c.reset(),h.reset()}return{buffers:{color:u,depth:c,stencil:h},enable:Ce,disable:Ee,bindFramebuffer:ke,drawBuffers:Le,useProgram:Re,setBlending:De,setMaterial:Oe,setFlipSided:Fe,setCullFace:Ne,setLineWidth:Ge,setPolygonOffset:Ue,setScissorTest:ze,activeTexture:He,bindTexture:Ve,unbindTexture:We,compressedTexImage2D:je,texImage2D:Ke,texImage3D:Qe,updateUBOMapping:tt,uniformBlockBinding:nt,texStorage2D:Ye,texStorage3D:Ze,texSubImage2D:Je,texSubImage3D:Xe,compressedTexSubImage2D:qe,scissor:$e,viewport:et,reset:it}}function Mh(e,t,n,i,r,a,o){var s,l,u,c=r.isWebGL2,h=r.maxTextures,d=r.maxCubemapSize,f=r.maxTextureSize,v=r.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap,_=new WeakMap,x=!1;try{x="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(se){}function b(e,t){return x?new OffscreenCanvas(e,t):li("canvas")}function M(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Qn:Math.floor,o=a(r*e.width),s=a(r*e.height);void 0===u&&(u=b(o,s));var l=n?b(o,s):u;l.width=o,l.height=s;var c=l.getContext("2d");return c.drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return Zn(e.width)&&Zn(e.height)}function S(e){return!c&&(e.wrapS!==Se||e.wrapT!==Se||e.minFilter!==Te&&e.minFilter!==Re)}function A(e,t){return e.generateMipmaps&&t&&e.minFilter!==Te&&e.minFilter!==Re}function T(t){e.generateMipmap(t)}function C(n,i,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),33319===i&&(5126===r&&(s=33328),5131===r&&(s=33327),5121===r&&(s=33323)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=a===Jt&&!1===o?35907:32856),32819===r&&(s=32854),32820===r&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function E(e,t,n){return!0===A(e,n)||e.isFramebufferTexture&&e.minFilter!==Te&&e.minFilter!==Re?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(e){return e===Te||e===Ce||e===ke?9728:9729}function L(e){var t=e.target;t.removeEventListener("dispose",L),B(t),t.isVideoTexture&&y.delete(t)}function R(e){var t=e.target;t.removeEventListener("dispose",R),I(t)}function B(e){var t=i.get(e);if(void 0!==t.__webglInit){var n=e.source,r=_.get(n);if(r){var a=r[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&P(e),0===Object.keys(r).length&&_.delete(n)}i.remove(e)}}function P(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var r=t.source,a=_.get(r);delete a[n.__cacheKey],o.memory.textures--}function I(t){var n=t.texture,r=i.get(t),a=i.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(r.__webglFramebuffer[s]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(var l=0;l<r.__webglColorRenderbuffer.length;l++)r.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[l]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var h=i.get(n[u]);h.__webglTexture&&(e.deleteTexture(h.__webglTexture),o.memory.textures--),i.remove(n[u])}i.remove(n),i.remove(t)}var D=0;function O(){D=0}function F(){var e=D;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),D+=1,e}function N(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}function G(e,t){var r=i.get(e);if(e.isVideoTexture&&ae(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void X(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function U(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?X(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))}function z(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?X(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))}function H(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?q(r,e,t):(n.activeTexture(33984+t),n.bindTexture(34067,r.__webglTexture))}var V=(s={},(0,p.default)(s,we,10497),(0,p.default)(s,Se,33071),(0,p.default)(s,Ae,33648),s),W=(l={},(0,p.default)(l,Te,9728),(0,p.default)(l,Ce,9984),(0,p.default)(l,ke,9986),(0,p.default)(l,Re,9729),(0,p.default)(l,Be,9985),(0,p.default)(l,Ie,9987),l);function j(n,a,o){if(o?(e.texParameteri(n,10242,V[a.wrapS]),e.texParameteri(n,10243,V[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,V[a.wrapR]),e.texParameteri(n,10240,W[a.magFilter]),e.texParameteri(n,10241,W[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Se&&a.wrapT===Se||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,k(a.magFilter)),e.texParameteri(n,10241,k(a.minFilter)),a.minFilter!==Te&&a.minFilter!==Re&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===He&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===Ve&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function J(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",L));var r=n.source,a=_.get(r);void 0===a&&(a={},_.set(r,a));var s=N(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&P(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return i}function X(t,i,r){var o=3553;i.isDataArrayTexture&&(o=35866),i.isData3DTexture&&(o=32879);var s=J(t,i),l=i.source;if(n.activeTexture(33984+r),n.bindTexture(o,t.__webglTexture),l.version!==l.__currentVersion||!0===s){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var u=S(i)&&!1===w(i.image),h=M(i.image,u,!1,f);h=oe(i,h);var d,p=w(h)||c,v=a.convert(i.format,i.encoding),m=a.convert(i.type),g=C(i.internalFormat,v,m,i.encoding,i.isVideoTexture);j(o,i,p);var y=i.mipmaps,_=c&&!0!==i.isVideoTexture,x=void 0===l.__currentVersion||!0===s,b=E(i,h,p);if(i.isDepthTexture)g=6402,c?g=i.type===He?36012:i.type===ze?33190:i.type===Je?35056:33189:i.type===He&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Qe&&6402===g&&i.type!==Ge&&i.type!==ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=ze,m=a.convert(i.type)),i.format===$e&&6402===g&&(g=34041,i.type!==Je&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Je,m=a.convert(i.type))),x&&(_?n.texStorage2D(3553,1,g,h.width,h.height):n.texImage2D(3553,0,g,h.width,h.height,0,v,m,null));else if(i.isDataTexture)if(y.length>0&&p){_&&x&&n.texStorage2D(3553,b,g,y[0].width,y[0].height);for(var k=0,L=y.length;k<L;k++)d=y[k],_?n.texSubImage2D(3553,k,0,0,d.width,d.height,v,m,d.data):n.texImage2D(3553,k,g,d.width,d.height,0,v,m,d.data);i.generateMipmaps=!1}else _?(x&&n.texStorage2D(3553,b,g,h.width,h.height),n.texSubImage2D(3553,0,0,0,h.width,h.height,v,m,h.data)):n.texImage2D(3553,0,g,h.width,h.height,0,v,m,h.data);else if(i.isCompressedTexture){_&&x&&n.texStorage2D(3553,b,g,y[0].width,y[0].height);for(var R=0,B=y.length;R<B;R++)d=y[R],i.format!==Ye?null!==v?_?n.compressedTexSubImage2D(3553,R,0,0,d.width,d.height,v,d.data):n.compressedTexImage2D(3553,R,g,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_?n.texSubImage2D(3553,R,0,0,d.width,d.height,v,m,d.data):n.texImage2D(3553,R,g,d.width,d.height,0,v,m,d.data)}else if(i.isDataArrayTexture)_?(x&&n.texStorage3D(35866,b,g,h.width,h.height,h.depth),n.texSubImage3D(35866,0,0,0,0,h.width,h.height,h.depth,v,m,h.data)):n.texImage3D(35866,0,g,h.width,h.height,h.depth,0,v,m,h.data);else if(i.isData3DTexture)_?(x&&n.texStorage3D(32879,b,g,h.width,h.height,h.depth),n.texSubImage3D(32879,0,0,0,0,h.width,h.height,h.depth,v,m,h.data)):n.texImage3D(32879,0,g,h.width,h.height,h.depth,0,v,m,h.data);else if(i.isFramebufferTexture){if(x)if(_)n.texStorage2D(3553,b,g,h.width,h.height);else for(var P=h.width,I=h.height,D=0;D<b;D++)n.texImage2D(3553,D,g,P,I,0,v,m,null),P>>=1,I>>=1}else if(y.length>0&&p){_&&x&&n.texStorage2D(3553,b,g,y[0].width,y[0].height);for(var O=0,F=y.length;O<F;O++)d=y[O],_?n.texSubImage2D(3553,O,0,0,v,m,d):n.texImage2D(3553,O,g,v,m,d);i.generateMipmaps=!1}else _?(x&&n.texStorage2D(3553,b,g,h.width,h.height),n.texSubImage2D(3553,0,0,0,v,m,h)):n.texImage2D(3553,0,g,v,m,h);A(i,p)&&T(o),l.__currentVersion=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function q(t,i,r){if(6===i.image.length){var o=J(t,i),s=i.source;if(n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),s.version!==s.__currentVersion||!0===o){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var l=i.isCompressedTexture||i.image[0].isCompressedTexture,u=i.image[0]&&i.image[0].isDataTexture,h=[],f=0;f<6;f++)h[f]=l||u?u?i.image[f].image:i.image[f]:M(i.image[f],!1,!0,d),h[f]=oe(i,h[f]);var p,v=h[0],m=w(v)||c,g=a.convert(i.format,i.encoding),y=a.convert(i.type),_=C(i.internalFormat,g,y,i.encoding),x=c&&!0!==i.isVideoTexture,b=void 0===s.__currentVersion||!0===o,S=E(i,v,m);if(j(34067,i,m),l){x&&b&&n.texStorage2D(34067,S,_,v.width,v.height);for(var k=0;k<6;k++){p=h[k].mipmaps;for(var L=0;L<p.length;L++){var R=p[L];i.format!==Ye?null!==g?x?n.compressedTexSubImage2D(34069+k,L,0,0,R.width,R.height,g,R.data):n.compressedTexImage2D(34069+k,L,_,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x?n.texSubImage2D(34069+k,L,0,0,R.width,R.height,g,y,R.data):n.texImage2D(34069+k,L,_,R.width,R.height,0,g,y,R.data)}}}else{p=i.mipmaps,x&&b&&(p.length>0&&S++,n.texStorage2D(34067,S,_,h[0].width,h[0].height));for(var B=0;B<6;B++)if(u){x?n.texSubImage2D(34069+B,0,0,0,h[B].width,h[B].height,g,y,h[B].data):n.texImage2D(34069+B,0,_,h[B].width,h[B].height,0,g,y,h[B].data);for(var P=0;P<p.length;P++){var I=p[P],D=I.image[B].image;x?n.texSubImage2D(34069+B,P+1,0,0,D.width,D.height,g,y,D.data):n.texImage2D(34069+B,P+1,_,D.width,D.height,0,g,y,D.data)}}else{x?n.texSubImage2D(34069+B,0,0,0,g,y,h[B]):n.texImage2D(34069+B,0,_,g,y,h[B]);for(var O=0;O<p.length;O++){var F=p[O];x?n.texSubImage2D(34069+B,O+1,0,0,g,y,F.image[B]):n.texImage2D(34069+B,O+1,_,g,y,F.image[B])}}}A(i,m)&&T(34067),s.__currentVersion=s.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}}function Y(t,r,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),h=C(o.internalFormat,u,c,o.encoding),d=i.get(r);d.__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,h,r.width,r.height,0,u,c,null)),n.bindFramebuffer(36160,t),re(r)?m.framebufferTexture2DMultisampleEXT(36160,s,l,i.get(o).__webglTexture,0,ie(r)):e.framebufferTexture2D(36160,s,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function Z(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i||re(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===He?r=36012:o.type===ze&&(r=33190));var s=ie(n);re(n)?m.renderbufferStorageMultisampleEXT(36161,s,r,n.width,n.height):e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=ie(n);i&&!1===re(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):re(n)?m.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var h=u[c],d=a.convert(h.format,h.encoding),f=a.convert(h.type),p=C(h.internalFormat,d,f,h.encoding),v=ie(n);i&&!1===re(n)?e.renderbufferStorageMultisample(36161,v,p,n.width,n.height):re(n)?m.renderbufferStorageMultisampleEXT(36161,v,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function K(t,r){var a=r&&r.isWebGLCubeRenderTarget;if(a)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),G(r.depthTexture,0);var o=i.get(r.depthTexture).__webglTexture,s=ie(r);if(r.depthTexture.format===Qe)re(r)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(r.depthTexture.format!==$e)throw new Error("Unknown depthTexture format");re(r)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):e.framebufferTexture2D(36160,33306,3553,o,0)}}function Q(t){var r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");K(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),Z(r.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),Z(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function $(e,t,n){var r=i.get(e);void 0!==t&&Y(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&Q(e)}function ee(t){var s=t.texture,l=i.get(t),u=i.get(s);t.addEventListener("dispose",R),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=w(t)||c;if(h){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=i.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===re(t)){var _=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var x=0;x<_.length;x++){var b=_[x];l.__webglColorRenderbuffer[x]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[x]);var M=a.convert(b.format,b.encoding),S=a.convert(b.type),E=C(b.internalFormat,M,S,b.encoding),k=ie(t);e.renderbufferStorageMultisample(36161,k,E,t.width,t.height),e.framebufferRenderbuffer(36160,36064+x,36161,l.__webglColorRenderbuffer[x])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),Z(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),j(34067,s,f);for(var L=0;L<6;L++)Y(l.__webglFramebuffer[L],t,s,36064,34069+L);A(s,f)&&T(34067),n.unbindTexture()}else if(d){for(var B=t.texture,P=0,I=B.length;P<I;P++){var D=B[P],O=i.get(D);n.bindTexture(3553,O.__webglTexture),j(3553,D,f),Y(l.__webglFramebuffer,t,D,36064+P,3553),A(D,f)&&T(3553)}n.unbindTexture()}else{var F=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?F=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(F,u.__webglTexture),j(F,s,f),Y(l.__webglFramebuffer,t,s,36064,F),A(s,f)&&T(F),n.unbindTexture()}t.depthBuffer&&Q(t)}function te(e){for(var t=w(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=r.length;a<o;a++){var s=r[a];if(A(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=i.get(s).__webglTexture;n.bindTexture(l,u),T(l),n.unbindTexture()}}}function ne(t){if(c&&t.samples>0&&!1===re(t)){var r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],u=t.stencilBuffer?33306:36096,h=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var f=0;f<r.length;f++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+f,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+f,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(var p=0;p<r.length;p++){l.push(36064+p),t.depthBuffer&&l.push(u);var v=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),d){var m=i.get(r[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,m,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),g&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(var y=0;y<r.length;y++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,h.__webglColorRenderbuffer[y]);var _=i.get(r[y]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,_,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}}function ie(e){return Math.min(v,e.samples)}function re(e){var n=i.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ae(e){var t=o.render.frame;y.get(e)!==t&&(y.set(e,t),e.update())}function oe(e,n){var i=e.encoding,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===En||i!==jt&&(i===Jt?!1===c?!0===t.has("EXT_sRGB")&&r===Ye?(e.format=En,e.minFilter=Re,e.generateMipmaps=!1):n=bi.sRGBToLinear(n):r===Ye&&a===Oe||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=F,this.resetTextureUnits=O,this.setTexture2D=G,this.setTexture2DArray=U,this.setTexture3D=z,this.setTextureCube=H,this.rebindTextures=$,this.setupRenderTarget=ee,this.updateRenderTargetMipmap=te,this.updateMultisampleRenderTarget=ne,this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=Y,this.useMultisampledRTT=re}function wh(e,t,n){var i=n.isWebGL2;function r(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Oe)return 5121;if(n===We)return 32819;if(n===je)return 32820;if(n===Fe)return 5120;if(n===Ne)return 5122;if(n===Ge)return 5123;if(n===Ue)return 5124;if(n===ze)return 5125;if(n===He)return 5126;if(n===Ve)return i?5131:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===Xe)return 6406;if(n===Ye)return 6408;if(n===Ze)return 6409;if(n===Ke)return 6410;if(n===Qe)return 6402;if(n===$e)return 34041;if(n===et)return 6403;if(n===qe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===En)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===tt)return 36244;if(n===nt)return 33319;if(n===it)return 33320;if(n===rt)return 36249;if(n===at||n===ot||n===st||n===lt)if(a===Jt){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===at)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ot)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===st)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===lt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===at)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ot)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===st)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===lt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===ut||n===ct||n===ht||n===dt){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===ut)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ct)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ht)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===dt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ft)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===pt||n===vt){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===pt)return a===Jt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===vt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===mt||n===gt||n===yt||n===_t||n===xt||n===bt||n===Mt||n===wt||n===St||n===At||n===Tt||n===Ct||n===Et||n===kt){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===mt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===gt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===yt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_t)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===xt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===bt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Mt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===wt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===St)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===At)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Tt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ct)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Et)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===kt)return a===Jt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Lt){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Lt)return a===Jt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Je?i?34042:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}return{convert:r}}var Sh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.default)(this,n),e=t.call(this),e.isArrayCamera=!0,e.cameras=i,e}return n}(Xa);t.ArrayCamera=Sh;var Ah=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isGroup=!0,e.type="Group",e}return n}(Or);t.Group=Ah;var Th={type:"move"},Ch=function(){function e(){(0,m.default)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,g.default)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Ah,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Ah,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ii,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ii),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Ah,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ii,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ii),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,r=null,a=null,o=this._targetRay,l=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var c,h=(0,s.default)(e.hand.values());try{for(h.s();!(c=h.n()).done;){var d=c.value,f=t.getJointPose(d,n);if(void 0===u.joints[d.jointName]){var p=new Ah;p.matrixAutoUpdate=!1,p.visible=!1,u.joints[d.jointName]=p,u.add(p)}var v=u.joints[d.jointName];null!==f&&(v.matrix.fromArray(f.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=f.radius),v.visible=null!==f}}catch(b){h.e(b)}finally{h.f()}var m=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],y=m.position.distanceTo(g.position),_=.02,x=.005;u.inputState.pinching&&y>_+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&y<=_-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));null!==o&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Th)))}return null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==a),this}}]),e}(),Eh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c,h){var d;if((0,m.default)(this,n),h=void 0!==h?h:Qe,h!==Qe&&h!==$e)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&h===Qe&&(r=ze),void 0===r&&h===$e&&(r=Je),d=t.call(this,null,a,o,s,l,u,h,r,c),d.isDepthTexture=!0,d.image={width:e,height:i},d.magFilter=void 0!==l?l:Te,d.minFilter=void 0!==u?u:Te,d.flipY=!1,d.generateMipmaps=!1,d}return n}(Ai);t.DepthTexture=Eh;var kh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;(0,m.default)(this,n),r=t.call(this);var a=(0,h.default)(r),s=null,l=1,u=null,c="local-floor",d=null,f=null,p=null,v=null,g=null,y=null,_=i.getContextAttributes(),x=null,b=null,M=[],w=[],S=new Xa;S.layers.enable(1),S.viewport=new Ti;var A=new Xa;A.layers.enable(2),A.viewport=new Ti;var T=[S,A],C=new Sh;C.layers.enable(1),C.layers.enable(2);var E=null,k=null;function L(e){var t=w.indexOf(e.inputSource);if(-1!==t){var n=M[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function R(){s.removeEventListener("select",L),s.removeEventListener("selectstart",L),s.removeEventListener("selectend",L),s.removeEventListener("squeeze",L),s.removeEventListener("squeezestart",L),s.removeEventListener("squeezeend",L),s.removeEventListener("end",R),s.removeEventListener("inputsourceschange",B);for(var t=0;t<M.length;t++){var n=w[t];null!==n&&(w[t]=null,M[t].disconnect(n))}E=null,k=null,e.setRenderTarget(x),g=null,v=null,p=null,s=null,b=null,G.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function B(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=w.indexOf(n);i>=0&&(w[i]=null,M[i].dispatchEvent({type:"disconnected",data:n}))}for(var r=0;r<e.added.length;r++){var a=e.added[r],o=w.indexOf(a);if(-1===o){for(var s=0;s<M.length;s++){if(s>=w.length){w.push(a),o=s;break}if(null===w[s]){w[s]=a,o=s;break}}if(-1===o)break}var l=M[o];l&&l.dispatchEvent({type:"connected",data:a})}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=M[e];return void 0===t&&(t=new Ch,M[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=M[e];return void 0===t&&(t=new Ch,M[e]=t),t.getGripSpace()},r.getHand=function(e){var t=M[e];return void 0===t&&(t=new Ch,M[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){l=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){c=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return d||u},r.setReferenceSpace=function(e){d=e},r.getBaseLayer=function(){return null!==v?v:g},r.getBinding=function(){return p},r.getFrame=function(){return y},r.getSession=function(){return s},r.setSession=function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(n){var r,o,h,f,m,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=n,null===s){t.next=25;break}if(x=e.getRenderTarget(),s.addEventListener("select",L),s.addEventListener("selectstart",L),s.addEventListener("selectend",L),s.addEventListener("squeeze",L),s.addEventListener("squeezestart",L),s.addEventListener("squeezeend",L),s.addEventListener("end",R),s.addEventListener("inputsourceschange",B),!0===_.xrCompatible){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:return void 0===s.renderState.layers||!1===e.capabilities.isWebGL2?(r={antialias:void 0!==s.renderState.layers||_.antialias,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:l},g=new XRWebGLLayer(s,i,r),s.updateRenderState({baseLayer:g}),b=new Ci(g.framebufferWidth,g.framebufferHeight,{format:Ye,type:Oe,encoding:e.outputEncoding,stencilBuffer:_.stencil})):(o=null,h=null,f=null,_.depth&&(f=_.stencil?35056:33190,o=_.stencil?$e:Qe,h=_.stencil?Je:ze),m={colorFormat:32856,depthFormat:f,scaleFactor:l},p=new XRWebGLBinding(s,i),v=p.createProjectionLayer(m),s.updateRenderState({layers:[v]}),b=new Ci(v.textureWidth,v.textureHeight,{format:Ye,type:Oe,depthTexture:new Eh(v.textureWidth,v.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:_.stencil,encoding:e.outputEncoding,samples:_.antialias?4:0}),y=e.properties.get(b),y.__ignoreDepthValues=v.ignoreDepthValues),b.isXRRenderTarget=!0,this.setFoveation(1),d=null,t.next=20,s.requestReferenceSpace(c);case 20:u=t.sent,G.setContext(s),G.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var P=new Ii,I=new Ii;function D(e,t,n){P.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);var i=P.distanceTo(I),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=i/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=d-v,_=f+(i-v),x=l*s/g*m,b=u*s/g*m;e.projectionMatrix.makePerspective(y,_,x,b,m,g)}function O(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==s){C.near=A.near=S.near=e.near,C.far=A.far=S.far=e.far,E===C.near&&k===C.far||(s.updateRenderState({depthNear:C.near,depthFar:C.far}),E=C.near,k=C.far);var t=e.parent,n=C.cameras;O(C,t);for(var i=0;i<n.length;i++)O(n[i],t);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),e.matrix.copy(C.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var r=e.children,a=0,o=r.length;a<o;a++)r[a].updateMatrixWorld(!0);2===n.length?D(C,S,A):C.projectionMatrix.copy(S.projectionMatrix)}},r.getCamera=function(){return C},r.getFoveation=function(){return null!==v?v.fixedFoveation:null!==g?g.fixedFoveation:void 0},r.setFoveation=function(e){null!==v&&(v.fixedFoveation=e),null!==g&&void 0!==g.fixedFoveation&&(g.fixedFoveation=e)};var F=null;function N(t,n){if(f=n.getViewerPose(d||u),y=n,null!==f){var i=f.views;null!==g&&(e.setRenderTargetFramebuffer(b,g.framebuffer),e.setRenderTarget(b));var r=!1;i.length!==C.cameras.length&&(C.cameras.length=0,r=!0);for(var a=0;a<i.length;a++){var o=i[a],s=null;if(null!==g)s=g.getViewport(o);else{var l=p.getViewSubImage(v,o);s=l.viewport,0===a&&(e.setRenderTargetTextures(b,l.colorTexture,v.ignoreDepthValues?void 0:l.depthStencilTexture),e.setRenderTarget(b))}var c=T[a];void 0===c&&(c=new Xa,c.layers.enable(a),c.viewport=new Ti,T[a]=c),c.matrix.fromArray(o.transform.matrix),c.projectionMatrix.fromArray(o.projectionMatrix),c.viewport.set(s.x,s.y,s.width,s.height),0===a&&C.matrix.copy(c.matrix),!0===r&&C.cameras.push(c)}}for(var h=0;h<M.length;h++){var m=w[h],_=M[h];null!==m&&void 0!==_&&_.update(m,n,d||u)}F&&F(t,n),y=null}var G=new oo;return G.setAnimationLoop(N),r.setAnimationLoop=function(e){F=e},r.dispose=function(){},r}return n}(kn);function Lh(e,t){function n(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function i(e,t,n,i,v){t.isMeshBasicMaterial||t.isMeshLambertMaterial?r(e,t):t.isMeshToonMaterial?(r(e,t),c(e,t)):t.isMeshPhongMaterial?(r(e,t),u(e,t)):t.isMeshStandardMaterial?(r(e,t),h(e,t),t.isMeshPhysicalMaterial&&d(e,t,v)):t.isMeshMatcapMaterial?(r(e,t),f(e,t)):t.isMeshDepthMaterial?r(e,t):t.isMeshDistanceMaterial?(r(e,t),p(e,t)):t.isMeshNormalMaterial?r(e,t):t.isLineBasicMaterial?(a(e,t),t.isLineDashedMaterial&&o(e,t)):t.isPointsMaterial?s(e,t,n,i):t.isSpriteMaterial?l(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function r(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===L&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===L&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);var r,a,o=t.get(i).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*s}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap?r=i.clearcoatRoughnessMap:i.iridescenceMap?r=i.iridescenceMap:i.iridescenceThicknessMap?r=i.iridescenceThicknessMap:i.specularIntensityMap?r=i.specularIntensityMap:i.specularColorMap?r=i.specularColorMap:i.transmissionMap?r=i.transmissionMap:i.thicknessMap?r=i.thicknessMap:i.sheenColorMap?r=i.sheenColorMap:i.sheenRoughnessMap&&(r=i.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),n.uvTransform.value.copy(r.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}function a(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function o(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function s(e,t,n,i){var r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}function l(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function u(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function c(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function h(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);var i=t.get(n).envMap;i&&(e.envMapIntensity.value=n.envMapIntensity)}function d(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===L&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}function f(e,t){t.matcap&&(e.matcap.value=t.matcap)}function p(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Rh(e,t,n,i){var r={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t){var n=t.program;i.uniformBlockBinding(e,n)}function u(e,n){var o=r[e.id];void 0===o&&(p(e),o=c(e),r[e.id]=o,e.addEventListener("dispose",m));var s=n.program;i.updateUBOMapping(e,s);var l=t.render.frame;a[e.id]!==l&&(d(e),a[e.id]=l)}function c(t){var n=h();t.__bindingPointIndex=n;var i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}function h(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(t){var n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=i.length;o<s;o++){var l=i[o];if(!0===f(l,o,a)){var u=l.value,c=l.__offset;"number"===typeof u?(l.__data[0]=u,e.bufferSubData(35345,c,l.__data)):(l.value.isMatrix3?(l.__data[0]=l.value.elements[0],l.__data[1]=l.value.elements[1],l.__data[2]=l.value.elements[2],l.__data[3]=l.value.elements[0],l.__data[4]=l.value.elements[3],l.__data[5]=l.value.elements[4],l.__data[6]=l.value.elements[5],l.__data[7]=l.value.elements[0],l.__data[8]=l.value.elements[6],l.__data[9]=l.value.elements[7],l.__data[10]=l.value.elements[8],l.__data[11]=l.value.elements[0]):u.toArray(l.__data),e.bufferSubData(35345,c,l.__data))}}e.bindBuffer(35345,null)}function f(e,t,n){var i=e.value;if(void 0===n[t])return n[t]="number"===typeof i?i:i.clone(),!0;if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{var r=n[t];if(!1===r.equals(i))return r.copy(i),!0}return!1}function p(e){for(var t=e.uniforms,n=0,i=16,r=0,a=0,o=t.length;a<o;a++){var s=t[a],l=v(s);if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0){r=n%i;var u=i-r;0!==r&&u-l.boundary<0&&(n+=i-r,s.__offset=n)}n+=l.storage}return r=n%i,r>0&&(n+=i-r),e.__size=n,e.__cache={},this}function v(e){var t=e.value,n={boundary:0,storage:0};return"number"===typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function m(t){var n=t.target;n.removeEventListener("dispose",m);var i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}function g(){for(var t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}return{bind:l,update:u,dispose:g}}function Bh(){var e=li("canvas");return e.style.display="block",e}function Ph(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:Bh(),i=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var h=null,d=null,f=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=jt,this.physicallyCorrectLights=!1,this.toneMapping=he,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var v=this,m=!1,g=0,_=0,x=null,b=-1,M=null,w=new Ti,S=new Ti,A=null,T=n.width,C=n.height,E=1,B=null,P=null,I=new Ti(0,0,T,C),D=new Ti(0,0,T,C),O=!1,F=new ao,N=!1,G=!1,U=null,z=new hr,H=new ii,V=new Ii,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===x?E:1}var J,X,q,Y,Z,K,Q,$,ee,te,ne,ie,re,ae,oe,se,le,ue,ce,de,fe,pe,ve,me,ge=i;function ye(e,t){for(var i=0;i<e.length;i++){var r=e[i],a=n.getContext(r,t);if(null!==a)return a}return null}try{var _e={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(y)),n.addEventListener("webglcontextlost",we,!1),n.addEventListener("webglcontextrestored",Se,!1),n.addEventListener("webglcontextcreationerror",Ae,!1),null===ge){var xe=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&xe.shift(),ge=ye(xe,_e),null===ge)throw ye(xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(qe){throw console.error("THREE.WebGLRenderer: "+qe.message),qe}function be(){J=new pu(ge),X=new Jl(ge,J,e),J.init(X),pe=new wh(ge,J,X),q=new bh(ge,J,X),Y=new gu,Z=new rh,K=new Mh(ge,J,q,Z,X,pe,Y),Q=new ql(v),$=new fu(v),ee=new so(ge,X),ve=new Wl(ge,J,ee,X),te=new vu(ge,ee,Y,ve),ne=new bu(ge,te,ee,Y),ce=new xu(ge,X,K),se=new Xl(Z),ie=new ih(v,Q,$,J,X,ve,se),re=new Lh(v,Z),ae=new lh,oe=new vh(J,X),ue=new Vl(v,Q,q,ne,t,s),le=new xh(v,ne,X),me=new Rh(ge,Y,X,q),de=new jl(ge,J,Y,X),fe=new mu(ge,J,Y,X),Y.programs=ie.programs,v.capabilities=X,v.extensions=J,v.properties=Z,v.renderLists=ae,v.shadowMap=le,v.state=q,v.info=Y}be();var Me=new kh(v,ge);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=Y.autoReset,t=le.enabled,n=le.autoUpdate,i=le.needsUpdate,r=le.type;be(),Y.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=i,le.type=r}function Ae(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Te(e){var t=e.target;t.removeEventListener("dispose",Te),Ce(t)}function Ce(e){Ee(e),Z.remove(e)}function Ee(e){var t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))}this.xr=Me,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){var e=J.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=J.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(T,C,!1))},this.getSize=function(e){return e.set(T,C)},this.setSize=function(e,t,i){Me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,C=t,n.width=Math.floor(e*E),n.height=Math.floor(t*E),!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(T*E,C*E).floor()},this.setDrawingBufferSize=function(e,t,i){T=e,C=t,E=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,i),q.viewport(w.copy(I).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,i){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,i),q.scissor(S.copy(D).multiplyScalar(E).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){q.setScissorTest(O=e)},this.setOpaqueSort=function(e){B=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;e&&(i|=16384),t&&(i|=256),n&&(i|=1024),ge.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",we,!1),n.removeEventListener("webglcontextrestored",Se,!1),n.removeEventListener("webglcontextcreationerror",Ae,!1),ae.dispose(),oe.dispose(),Z.dispose(),Q.dispose(),$.dispose(),ne.dispose(),ve.dispose(),me.dispose(),ie.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Re),Me.removeEventListener("sessionend",Be),U&&(U.dispose(),U=null),Pe.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=W);var o=r.isMesh&&r.matrixWorld.determinant()<0,s=je(e,t,n,i,r);q.setMaterial(i,o);var l=n.index,u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c,h=1;!0===i.wireframe&&(l=te.getWireframeAttribute(n),h=2),ve.setup(r,i,s,n,l);var d=de;null!==l&&(c=ee.get(l),d=fe,d.setIndex(c));var f=null!==l?l.count:u.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,y=Math.max(p,m),_=Math.min(f,p+v,m+g)-1,x=Math.max(0,_-y+1);if(0!==x){if(r.isMesh)!0===i.wireframe?(q.setLineWidth(i.wireframeLinewidth*j()),d.setMode(1)):d.setMode(4);else if(r.isLine){var b=i.linewidth;void 0===b&&(b=1),q.setLineWidth(b*j()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,x,r.count);else if(n.isInstancedBufferGeometry){var M=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,M)}else d.render(y,x)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===R?(e.side=L,e.needsUpdate=!0,ze(e,t,n),e.side=k,e.needsUpdate=!0,ze(e,t,n),e.side=R):ze(e,t,n)}d=oe.get(e),d.init(),p.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];n(a,e,t)}else n(i,e,t)})),p.pop(),d=null};var ke=null;function Le(e){ke&&ke(e)}function Re(){Pe.stop()}function Be(){Pe.start()}var Pe=new oo;function De(e,t,n,i){if(!1!==e.visible){var r=e.layers.test(t.layers);if(r)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){i&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var a=ne.update(e),o=e.material;o.visible&&h.push(e,a,o,n,V.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Y.render.frame&&(e.skeleton.update(),e.skeleton.frame=Y.render.frame),!e.frustumCulled||F.intersectsObject(e))){i&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var s=ne.update(e),l=e.material;if(Array.isArray(l))for(var u=s.groups,c=0,f=u.length;c<f;c++){var p=u[c],v=l[p.materialIndex];v&&v.visible&&h.push(e,s,v,n,V.z,p)}else l.visible&&h.push(e,s,l,n,V.z,null)}for(var m=e.children,g=0,y=m.length;g<y;g++)De(m[g],t,n,i)}}function Fe(e,t,n,i){var r=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(n),a.length>0&&Ne(r,t,n),i&&q.viewport(w.copy(i)),r.length>0&&Ge(r,t,n),a.length>0&&Ge(a,t,n),o.length>0&&Ge(o,t,n),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Ne(e,t,n){var i=X.isWebGL2;null===U&&(U=new Ci(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?Ve:Oe,minFilter:Ie,samples:i&&!0===o?4:0})),v.getDrawingBufferSize(H),i?U.setSize(H.x,H.y):U.setSize(Qn(H.x),Qn(H.y));var r=v.getRenderTarget();v.setRenderTarget(U),v.clear();var a=v.toneMapping;v.toneMapping=he,Ge(e,t,n),v.toneMapping=a,K.updateMultisampleRenderTarget(U),K.updateRenderTargetMipmap(U),v.setRenderTarget(r)}function Ge(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,u=null===i?o.material:i,c=o.group;s.layers.test(n.layers)&&Ue(s,t,n,l,u,c)}}function Ue(e,t,n,i,r,a){e.onBeforeRender(v,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(v,t,n,i,e,a),!0===r.transparent&&r.side===R?(r.side=L,r.needsUpdate=!0,v.renderBufferDirect(n,t,i,r,e,a),r.side=k,r.needsUpdate=!0,v.renderBufferDirect(n,t,i,r,e,a),r.side=R):v.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(v,t,n,i,r,a)}function ze(e,t,n){!0!==t.isScene&&(t=W);var i=Z.get(e),r=d.state.lights,a=d.state.shadowsArray,o=r.state.version,s=ie.getParameters(e,r.state,a,t,n),l=ie.getProgramCacheKey(s),u=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?$:Q).get(e.envMap||i.environment),void 0===u&&(e.addEventListener("dispose",Te),u=new Map,i.programs=u);var c=u.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return We(e,s),c}else s.uniforms=ie.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=ie.acquireProgram(s,l),u.set(l,c),i.uniforms=s.uniforms;var h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=se.uniform),We(e,s),i.needsLights=Xe(e),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);var f=c.getUniforms(),p=Cc.seqWithValue(f.seq,h);return i.currentProgram=c,i.uniformsList=p,c}function We(e,t){var n=Z.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function je(e,t,n,i,r){!0!==t.isScene&&(t=W),K.resetTextureUnits();var a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,s=null===x?v.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:jt,l=(i.isMeshStandardMaterial?$:Q).get(i.envMap||o),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=i.toneMapped?v.toneMapping:he,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,_=Z.get(i),w=d.state.lights;if(!0===N&&(!0===G||e!==M)){var S=e===M&&i.id===b;se.setState(i,e,S)}var A=!1;i.version===_.__version?_.needsLights&&_.lightsStateVersion!==w.state.version||_.outputEncoding!==s||r.isInstancedMesh&&!1===_.instancing?A=!0:r.isInstancedMesh||!0!==_.instancing?r.isSkinnedMesh&&!1===_.skinning?A=!0:r.isSkinnedMesh||!0!==_.skinning?_.envMap!==l||!0===i.fog&&_.fog!==a?A=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===se.numPlanes&&_.numIntersection===se.numIntersection?(_.vertexAlphas!==u||_.vertexTangents!==c||_.morphTargets!==h||_.morphNormals!==f||_.morphColors!==p||_.toneMapping!==m||!0===X.isWebGL2&&_.morphTargetsCount!==y)&&(A=!0):A=!0:A=!0:A=!0:(A=!0,_.__version=i.version);var T=_.currentProgram;!0===A&&(T=ze(i,t,r));var k=!1,L=!1,R=!1,B=T.getUniforms(),P=_.uniforms;if(q.useProgram(T.program)&&(k=!0,L=!0,R=!0),i.id!==b&&(b=i.id,L=!0),k||M!==e){if(B.setValue(ge,"projectionMatrix",e.projectionMatrix),X.logarithmicDepthBuffer&&B.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),M!==e&&(M=e,L=!0,R=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var I=B.map.cameraPosition;void 0!==I&&I.setValue(ge,V.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&B.setValue(ge,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&B.setValue(ge,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){B.setOptional(ge,r,"bindMatrix"),B.setOptional(ge,r,"bindMatrixInverse");var D=r.skeleton;D&&(X.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),B.setValue(ge,"boneTexture",D.boneTexture,K),B.setValue(ge,"boneTextureSize",D.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var O=n.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===X.isWebGL2)&&ce.update(r,n,i,T),(L||_.receiveShadow!==r.receiveShadow)&&(_.receiveShadow=r.receiveShadow,B.setValue(ge,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),L&&(B.setValue(ge,"toneMappingExposure",v.toneMappingExposure),_.needsLights&&Je(P,R),a&&!0===i.fog&&re.refreshFogUniforms(P,a),re.refreshMaterialUniforms(P,i,E,C,U),Cc.upload(ge,_.uniformsList,P,K)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Cc.upload(ge,_.uniformsList,P,K),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&B.setValue(ge,"center",r.center),B.setValue(ge,"modelViewMatrix",r.modelViewMatrix),B.setValue(ge,"normalMatrix",r.normalMatrix),B.setValue(ge,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial)for(var F=i.uniformsGroups,z=0,H=F.length;z<H;z++)if(X.isWebGL2){var j=F[z];me.update(j,T),me.bind(j,T)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return T}function Je(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Xe(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Pe.setAnimationLoop(Le),"undefined"!==typeof self&&Pe.setContext(self),this.setAnimationLoop=function(e){ke=e,Me.setAnimationLoop(e),null===e?Pe.stop():Pe.start()},Me.addEventListener("sessionstart",Re),Me.addEventListener("sessionend",Be),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Me.enabled&&!0===Me.isPresenting&&(!0===Me.cameraAutoUpdate&&Me.updateCamera(t),t=Me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,x),d=oe.get(e,p.length),d.init(),p.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(z),G=this.localClippingEnabled,N=se.init(this.clippingPlanes,G,t),h=ae.get(e,f.length),h.init(),f.push(h),De(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(B,P),!0===N&&se.beginShadows();var n=d.state.shadowsArray;if(le.render(n,e,t),!0===N&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(h,e),d.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var i=t.cameras,r=0,a=i.length;r<a;r++){var o=i[r];Fe(h,e,o,o.viewport)}else Fe(h,e,t);null!==x&&(K.updateMultisampleRenderTarget(x),K.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(v,e,t),ve.resetDefaultState(),b=-1,M=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;var i=Z.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,g=t,_=n;var i=!0;if(e){var r=Z.get(e);void 0!==r.__useDefaultFramebuffer?(q.bindFramebuffer(36160,null),i=!1):void 0===r.__webglFramebuffer?K.setupRenderTarget(e):r.__hasExternalTextures&&K.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture)}var a=null,o=!1,s=!1;if(e){var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture)&&(s=!0);var u=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=u[t],o=!0):a=X.isWebGL2&&e.samples>0&&!1===K.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:u,w.copy(e.viewport),S.copy(e.scissor),A=e.scissorTest}else w.copy(I).multiplyScalar(E).floor(),S.copy(D).multiplyScalar(E).floor(),A=O;var c=q.bindFramebuffer(36160,a);if(c&&X.drawBuffers&&i&&q.drawBuffers(e,a),q.viewport(w),q.scissor(S),q.setScissorTest(A),o){var h=Z.get(e.texture);ge.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(s){var d=Z.get(e.texture),f=t||0;ge.framebufferTextureLayer(36160,36064,d.__webglTexture,n||0,f)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){q.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ye&&pe.convert(u)!==ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===Ve&&(J.has("EXT_color_buffer_half_float")||X.isWebGL2&&J.has("EXT_color_buffer_float"));if(c!==Oe&&pe.convert(c)!==ge.getParameter(35738)&&(c!==He||!(X.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ge.readPixels(t,n,i,r,pe.convert(u),pe.convert(c),a)}finally{var d=null!==x?Z.get(x).__webglFramebuffer:null;q.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);K.setTexture2D(t,0),ge.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,a),q.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,o=pe.convert(n.format),s=pe.convert(n.type);K.setTexture2D(n,0),ge.pixelStorei(37440,n.flipY),ge.pixelStorei(37441,n.premultiplyAlpha),ge.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ge.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?ge.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ge.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&ge.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=pe.convert(i.format),c=pe.convert(i.type);if(i.isData3DTexture)K.setTexture3D(i,0),a=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(i,0),a=35866}ge.pixelStorei(37440,i.flipY),ge.pixelStorei(37441,i.premultiplyAlpha),ge.pixelStorei(3317,i.unpackAlignment);var h=ge.getParameter(3314),d=ge.getParameter(32878),f=ge.getParameter(3316),p=ge.getParameter(3315),m=ge.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ge.pixelStorei(3314,g.width),ge.pixelStorei(32878,g.height),ge.pixelStorei(3316,e.min.x),ge.pixelStorei(3315,e.min.y),ge.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ge.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ge.compressedTexSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,g.data)):ge.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,u,c,g),ge.pixelStorei(3314,h),ge.pixelStorei(32878,d),ge.pixelStorei(3316,f),ge.pixelStorei(3315,p),ge.pixelStorei(32877,m),0===r&&i.generateMipmaps&&ge.generateMipmap(a),q.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?K.setTextureCube(e,0):e.isData3DTexture?K.setTexture3D(e,0):e.isDataArrayTexture?K.setTexture2DArray(e,0):K.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){g=0,_=0,x=null,q.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Ih=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(Ph);t.WebGL1Renderer=Ih,Ih.prototype.isWebGL1Renderer=!0;var Dh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,m.default)(this,e),this.isFogExp2=!0,this.name="",this.color=new xi(t),this.density=n}return(0,g.default)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();t.FogExp2=Dh;var Oh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,m.default)(this,e),this.isFog=!0,this.name="",this.color=new xi(t),this.near=n,this.far=i}return(0,g.default)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();t.Fog=Oh;var Fh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,h.default)(e)})),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(Or);t.Scene=Fh;var Nh=function(){function e(t,n){(0,m.default)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=gn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=In()}return(0,g.default)(e,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=In()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=In()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();t.InterleavedBuffer=Nh;var Gh=new Ii,Uh=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,m.default)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=!0===r}return(0,g.default)(e,[{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Gh.fromBufferAttribute(this,t),Gh.applyMatrix4(e),this.setXYZ(t,Gh.x,Gh.y,Gh.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Gh.fromBufferAttribute(this,t),Gh.applyNormalMatrix(e),this.setXYZ(t,Gh.x,Gh.y,Gh.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Gh.fromBufferAttribute(this,t),Gh.transformDirection(e),this.setXYZ(t,Gh.x,Gh.y,Gh.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=ti(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ei(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ei(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ei(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ei(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ti(t,this.array),n=ti(n,this.array),i=ti(i,this.array),r=ti(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new $r(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}}]),e}();t.InterleavedBufferAttribute=Uh;var zh,Hh=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isSpriteMaterial=!0,i.type="SpriteMaterial",i.color=new xi(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Yr);t.SpriteMaterial=Hh;var Vh=new Ii,Wh=new Ii,jh=new Ii,Jh=new ii,Xh=new ii,qh=new hr,Yh=new Ii,Zh=new Ii,Kh=new Ii,Qh=new ii,$h=new ii,ed=new ii,td=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;if((0,m.default)(this,n),i=t.call(this),i.isSprite=!0,i.type="Sprite",void 0===zh){zh=new ga;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Nh(r,5);zh.setIndex([0,1,2,0,2,3]),zh.setAttribute("position",new Uh(a,3,0,!1)),zh.setAttribute("uv",new Uh(a,2,3,!1))}return i.geometry=zh,i.material=void 0!==e?e:new Hh,i.center=new ii(.5,.5),i}return(0,g.default)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wh.setFromMatrixScale(this.matrixWorld),qh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Wh.multiplyScalar(-jh.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;nd(Yh.set(-.5,-.5,0),jh,a,Wh,n,i),nd(Zh.set(.5,-.5,0),jh,a,Wh,n,i),nd(Kh.set(.5,.5,0),jh,a,Wh,n,i),Qh.set(0,0),$h.set(1,0),ed.set(1,1);var o=e.ray.intersectTriangle(Yh,Zh,Kh,!1,Vh);if(null!==o||(nd(Zh.set(-.5,.5,0),jh,a,Wh,n,i),$h.set(0,1),o=e.ray.intersectTriangle(Yh,Kh,Zh,!1,Vh),null!==o)){var s=e.ray.origin.distanceTo(Vh);s<e.near||s>e.far||t.push({distance:s,point:Vh.clone(),uv:Xr.getUV(Vh,Yh,Zh,Kh,Qh,$h,ed,new ii),face:null,object:this})}}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Or);function nd(e,t,n,i,r,a){Jh.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Xh.x=a*Jh.x-r*Jh.y,Xh.y=r*Jh.x+a*Jh.y):Xh.copy(Jh),e.copy(t),e.x+=Xh.x,e.y+=Xh.y,e.applyMatrix4(qh)}t.Sprite=td;var id=new Ii,rd=new Ii,ad=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e._currentLevel=0,e.type="LOD",Object.defineProperties((0,h.default)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,g.default)(n,[{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var a=t[i];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,i=this.levels;for(n=0;n<i.length;n++)if(t<i[n].distance)break;return i.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i;n++)if(e<t[n].distance)break;return t[n-1].object}return null}},{key:"raycast",value:function(e,t){var n=this.levels;if(n.length>0){id.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(id);this.getObjectForDistance(i).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){id.setFromMatrixPosition(e.matrixWorld),rd.setFromMatrixPosition(this.matrixWorld);var n,i,r=id.distanceTo(rd)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i;n++){if(!(r>=t[n].distance))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,r=0,a=i.length;r<a;r++){var o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(Or);t.LOD=ad;var od=new Ii,sd=new Ti,ld=new Ti,ud=new Ii,cd=new hr,hd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isSkinnedMesh=!0,r.type="SkinnedMesh",r.bindMode="attached",r.bindMatrix=new hr,r.bindMatrixInverse=new hr,r}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Ti,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,i=this.geometry;sd.fromBufferAttribute(i.attributes.skinIndex,e),ld.fromBufferAttribute(i.attributes.skinWeight,e),od.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var r=0;r<4;r++){var a=ld.getComponent(r);if(0!==a){var o=sd.getComponent(r);cd.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(ud.copy(od).applyMatrix4(cd),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Da);t.SkinnedMesh=hd;var dd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isBone=!0,e.type="Bone",e}return n}(Or);t.Bone=dd;var fd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Te,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Te,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return(0,m.default)(this,n),e=t.call(this,null,l,u,c,h,d,o,s,f,p),e.isDataTexture=!0,e.image={data:i,width:r,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return n}(Ai);t.DataTexture=fd;var pd=new hr,vd=new hr,md=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,m.default)(this,e),this.uuid=In(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,g.default)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new hr)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new hr;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:vd;pd.multiplyMatrices(o,t[r]),pd.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Kn(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new fd(t,e,e,Ye,He);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var r=e.bones[n],a=t[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new dd),this.bones.push(a),this.boneInverses.push((new hr).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,r=t.length;i<r;i++){var a=t[i];e.bones.push(a.uuid);var o=n[i];e.boneInverses.push(o.toArray())}return e}}]),e}();t.Skeleton=md;var gd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),a=t.call(this,e,i,r),a.isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}($r);t.InstancedBufferAttribute=gd;var yd=new hr,_d=new hr,xd=[],bd=new Da,Md=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,e,i),a.isInstancedMesh=!0,a.instanceMatrix=new gd(new Float32Array(16*r),16),a.instanceColor=null,a.count=r,a.frustumCulled=!1,a}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,i=this.count;if(bd.geometry=this.geometry,bd.material=this.material,void 0!==bd.material)for(var r=0;r<i;r++){this.getMatrixAt(r,yd),_d.multiplyMatrices(n,yd),bd.matrixWorld=_d,bd.raycast(e,xd);for(var a=0,o=xd.length;a<o;a++){var s=xd[a];s.instanceId=r,s.object=this,t.push(s)}xd.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new gd(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Da);t.InstancedMesh=Md;var wd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new xi(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Yr);t.LineBasicMaterial=wd;var Sd=new Ii,Ad=new Ii,Td=new hr,Cd=new cr,Ed=new nr,kd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wd;return(0,m.default)(this,n),e=t.call(this),e.isLine=!0,e.type="Line",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)Sd.fromBufferAttribute(t,i-1),Ad.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Sd.distanceTo(Ad);e.setAttribute("lineDistance",new la(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ed.copy(n.boundingSphere),Ed.applyMatrix4(i),Ed.radius+=r,!1!==e.ray.intersectsSphere(Ed)){Td.copy(i).invert(),Cd.copy(e.ray).applyMatrix4(Td);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Ii,u=new Ii,c=new Ii,h=new Ii,d=this.isLineSegments?2:1,f=n.index,p=n.attributes,v=p.position;if(null!==f)for(var m=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count),y=m,_=g-1;y<_;y+=d){var x=f.getX(y),b=f.getX(y+1);l.fromBufferAttribute(v,x),u.fromBufferAttribute(v,b);var M=Cd.distanceSqToSegment(l,u,h,c);if(!(M>s)){h.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var S=Math.max(0,a.start),A=Math.min(v.count,a.start+a.count),T=S,C=A-1;T<C;T+=d){l.fromBufferAttribute(v,T),u.fromBufferAttribute(v,T+1);var E=Cd.distanceSqToSegment(l,u,h,c);if(!(E>s)){h.applyMatrix4(this.matrixWorld);var k=e.ray.origin.distanceTo(h);k<e.near||k>e.far||t.push({distance:k,point:c.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}]),n}(Or);t.Line=kd;var Ld=new Ii,Rd=new Ii,Bd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isLineSegments=!0,r.type="LineSegments",r}return(0,g.default)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)Ld.fromBufferAttribute(t,i),Rd.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Ld.distanceTo(Rd);e.setAttribute("lineDistance",new la(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(kd);t.LineSegments=Bd;var Pd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isLineLoop=!0,r.type="LineLoop",r}return n}(kd);t.LineLoop=Pd;var Id=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isPointsMaterial=!0,i.type="PointsMaterial",i.color=new xi(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Yr);t.PointsMaterial=Id;var Dd=new hr,Od=new cr,Fd=new nr,Nd=new Ii,Gd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Id;return(0,m.default)(this,n),e=t.call(this),e.isPoints=!0,e.type="Points",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Fd.copy(n.boundingSphere),Fd.applyMatrix4(i),Fd.radius+=r,!1!==e.ray.intersectsSphere(Fd)){Dd.copy(i).invert(),Od.copy(e.ray).applyMatrix4(Dd);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes,c=u.position;if(null!==l)for(var h=Math.max(0,a.start),d=Math.min(l.count,a.start+a.count),f=h,p=d;f<p;f++){var v=l.getX(f);Nd.fromBufferAttribute(c,v),Ud(Nd,v,s,i,e,t,this)}else for(var m=Math.max(0,a.start),g=Math.min(c.count,a.start+a.count),y=m,_=g;y<_;y++)Nd.fromBufferAttribute(c,y),Ud(Nd,y,s,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}]),n}(Or);function Ud(e,t,n,i,r,a,o){var s=Od.distanceSqToPoint(e);if(s<n){var l=new Ii;Od.closestPointToPoint(e,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}t.Points=Gd;var zd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c){var d;(0,m.default)(this,n),d=t.call(this,e,i,r,a,o,s,l,u,c),d.isVideoTexture=!0,d.minFilter=void 0!==s?s:Re,d.magFilter=void 0!==o?o:Re,d.generateMipmaps=!1;var f=(0,h.default)(d);function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p),d}return(0,g.default)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Ai);t.VideoTexture=zd;var Hd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,{width:e,height:i}),a.isFramebufferTexture=!0,a.format=r,a.magFilter=Te,a.minFilter=Te,a.generateMipmaps=!1,a.needsUpdate=!0,a}return n}(Ai);t.FramebufferTexture=Hd;var Vd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c,h,d,f){var p;return(0,m.default)(this,n),p=t.call(this,null,s,l,u,c,h,a,o,d,f),p.isCompressedTexture=!0,p.image={width:i,height:r},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return n}(Ai);t.CompressedTexture=Vd;var Wd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u,c){var h;return(0,m.default)(this,n),h=t.call(this,e,i,r,a,o,s,l,u,c),h.isCanvasTexture=!0,h.needsUpdate=!0,h}return n}(Ai);t.CanvasTexture=Wd;var jd=function(){function e(){(0,m.default)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,g.default)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=e;a++)t=this.getPoint(a/e),r+=t.distanceTo(i),n.push(r),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];var o,s=0,l=a-1;while(s<=l)if(r=Math.floor(s+(l-s)/2),o=i[r]-n,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,i[r]===n)return r/(a-1);var u=i[r],c=i[r+1],h=c-u,d=(n-u)/h,f=(r+d)/(a-1);return f}},{key:"getTangent",value:function(e,t){var n=1e-4,i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);var a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new ii:new Ii);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Ii,i=[],r=[],a=[],o=new Ii,s=new hr,l=0;l<=e;l++){var u=l/e;i[l]=this.getTangentAt(u,new Ii)}r[0]=new Ii,a[0]=new Ii;var c=Number.MAX_VALUE,h=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var p=1;p<=e;p++){if(r[p]=r[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Dn(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(i[p],r[p])}if(!0===t){var m=Math.acos(Dn(r[0].dot(r[e]),-1,1));m/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(m=-m);for(var g=1;g<=e;g++)r[g].applyMatrix4(s.makeRotationAxis(i[g],m*g)),a[g].crossVectors(i[g],r[g])}return{tangents:i,normals:r,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}();t.Curve=jd;var Jd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,m.default)(this,n),e=t.call(this),e.isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=r,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=u,e.aRotation=c,e}return(0,g.default)(n,[{key:"getPoint",value:function(e,t){var n=t||new ii,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;while(r<0)r+=i;while(r>i)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(jd);t.EllipseCurve=Jd;var Xd=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){var l;return(0,m.default)(this,n),l=t.call(this,e,i,r,r,a,o,s),l.isArcCurve=!0,l.type="ArcCurve",l}return n}(Jd);function qd(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(i-t)/(o+s)+(i-n)/s;l*=o,u*=o,r(t,n,l,u)},calc:function(r){var a=r*r,o=a*r;return e+t*r+n*a+i*o}}}t.ArcCurve=Xd;var Yd=new Ii,Zd=new qd,Kd=new qd,Qd=new qd,$d=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,m.default)(this,n),e=t.call(this),e.isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=r,e.curveType=a,e.tension=o,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,r=i,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,l=Math.floor(s),u=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:0===u&&l===o-1&&(l=o-2,u=1),this.closed||l>0?t=a[(l-1)%o]:(Yd.subVectors(a[0],a[1]).add(a[0]),t=Yd);var c=a[l%o],h=a[(l+1)%o];if(this.closed||l+2<o?n=a[(l+2)%o]:(Yd.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=Yd),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(t.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(n),d);p<1e-4&&(p=1),f<1e-4&&(f=p),v<1e-4&&(v=p),Zd.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,f,p,v),Kd.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,f,p,v),Qd.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,f,p,v)}else"catmullrom"===this.curveType&&(Zd.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),Kd.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),Qd.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return r.set(Zd.calc(u),Kd.calc(u),Qd.calc(u)),r}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Ii).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(jd);function ef(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e,l=e*s;return(2*n-2*i+a+o)*l+(-3*n+3*i-2*a-o)*s+a*e+n}function tf(e,t){var n=1-e;return n*n*t}function nf(e,t){return 2*(1-e)*e*t}function rf(e,t){return e*e*t}function af(e,t,n,i){return tf(e,t)+nf(e,n)+rf(e,i)}function of(e,t){var n=1-e;return n*n*n*t}function sf(e,t){var n=1-e;return 3*n*n*e*t}function lf(e,t){return 3*(1-e)*e*e*t}function uf(e,t){return e*e*e*t}function cf(e,t,n,i,r){return of(e,t)+sf(e,n)+lf(e,i)+uf(e,r)}t.CatmullRomCurve3=$d;var hf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ii,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ii;return(0,m.default)(this,n),e=t.call(this),e.isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(cf(e,i.x,r.x,a.x,o.x),cf(e,i.y,r.y,a.y,o.y)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(jd);t.CubicBezierCurve=hf;var df=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ii,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ii;return(0,m.default)(this,n),e=t.call(this),e.isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,n=t,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(cf(e,i.x,r.x,a.x,o.x),cf(e,i.y,r.y,a.y,o.y),cf(e,i.z,r.z,a.z,o.z)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(jd);t.CubicBezierCurve3=df;var ff=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii;return(0,m.default)(this,n),e=t.call(this),e.isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=r,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new ii;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(jd);t.LineCurve=ff;var pf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii;return(0,m.default)(this,n),e=t.call(this),e.isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=r,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(jd);t.LineCurve3=pf;var vf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ii;return(0,m.default)(this,n),e=t.call(this),e.isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=r,e.v2=a,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(af(e,i.x,r.x,a.x),af(e,i.y,r.y,a.y)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(jd);t.QuadraticBezierCurve=vf;var mf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ii;return(0,m.default)(this,n),e=t.call(this),e.isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii,n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(af(e,i.x,r.x,a.x),af(e,i.y,r.y,a.y),af(e,i.z,r.z,a.z)),n}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(jd);t.QuadraticBezierCurve3=mf;var gf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.default)(this,n),e=t.call(this),e.isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return(0,g.default)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(ef(o,s.x,l.x,u.x,c.x),ef(o,s.y,l.y,u.y,c.y)),n}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new ii).fromArray(r))}return this}}]),n}(jd);t.SplineCurve=gf;var yf=Object.freeze({__proto__:null,ArcCurve:Xd,CatmullRomCurve3:$d,CubicBezierCurve:hf,CubicBezierCurve3:df,EllipseCurve:Jd,LineCurve:ff,LineCurve3:pf,QuadraticBezierCurve:vf,QuadraticBezierCurve3:mf,SplineCurve:gf}),_f=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,g.default)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ff(t,e))}},{key:"getPoint",value:function(e,t){var n=e*this.getLength(),i=this.getCurveLengths(),r=0;while(r<i.length){if(i[r]>=n){var a=i[r]-n,o=this.curves[r],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,t)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new yf[r.type]).fromJSON(r))}return this}}]),n}(jd);t.CurvePath=_f;var xf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.type="Path",i.currentPoint=new ii,e&&i.setFromPoints(e),i}return(0,g.default)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new ff(this.currentPoint.clone(),new ii(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var r=new vf(this.currentPoint.clone(),new ii(e,t),new ii(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){var o=new hf(this.currentPoint.clone(),new ii(e,t),new ii(n,i),new ii(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new gf(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this}},{key:"absarc",value:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}},{key:"ellipse",value:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,a,o,s),this}},{key:"absellipse",value:function(e,t,n,i,r,a,o,s){var l=new Jd(e,t,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(_f);t.Path=xf;var bf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ii(0,-.5),new ii(.5,0),new ii(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="LatheGeometry",e.parameters={points:i,segments:r,phiStart:a,phiLength:o},r=Math.floor(r),o=Dn(o,0,2*Math.PI);for(var s=[],l=[],u=[],c=[],h=[],d=1/r,f=new Ii,p=new ii,v=new Ii,g=new Ii,y=new Ii,_=0,x=0,b=0;b<=i.length-1;b++)switch(b){case 0:_=i[b+1].x-i[b].x,x=i[b+1].y-i[b].y,v.x=1*x,v.y=-_,v.z=0*x,y.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case i.length-1:c.push(y.x,y.y,y.z);break;default:_=i[b+1].x-i[b].x,x=i[b+1].y-i[b].y,v.x=1*x,v.y=-_,v.z=0*x,g.copy(v),v.x+=y.x,v.y+=y.y,v.z+=y.z,v.normalize(),c.push(v.x,v.y,v.z),y.copy(g)}for(var M=0;M<=r;M++)for(var w=a+M*d*o,S=Math.sin(w),A=Math.cos(w),T=0;T<=i.length-1;T++){f.x=i[T].x*S,f.y=i[T].y,f.z=i[T].x*A,l.push(f.x,f.y,f.z),p.x=M/r,p.y=T/(i.length-1),u.push(p.x,p.y);var C=c[3*T+0]*S,E=c[3*T+1],k=c[3*T+0]*A;h.push(C,E,k)}for(var L=0;L<r;L++)for(var R=0;R<i.length-1;R++){var B=R+L*i.length,P=B,I=B+i.length,D=B+i.length+1,O=B+1;s.push(P,I,O),s.push(D,O,I)}return e.setIndex(s),e.setAttribute("position",new la(l,3)),e.setAttribute("uv",new la(u,2)),e.setAttribute("normal",new la(h,3)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(ga);t.LatheGeometry=bf;var Mf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;(0,m.default)(this,n);var s=new xf;return s.absarc(0,-r/2,i,1.5*Math.PI,0),s.absarc(0,r/2,i,0,.5*Math.PI),e=t.call(this,s.getPoints(a),o),e.type="CapsuleGeometry",e.parameters={radius:i,height:r,capSegments:a,radialSegments:o},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(bf);t.CapsuleGeometry=Mf;var wf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="CircleGeometry",e.parameters={radius:i,segments:r,thetaStart:a,thetaLength:o},r=Math.max(3,r);var s=[],l=[],u=[],c=[],h=new Ii,d=new ii;l.push(0,0,0),u.push(0,0,1),c.push(.5,.5);for(var f=0,p=3;f<=r;f++,p+=3){var v=a+f/r*o;h.x=i*Math.cos(v),h.y=i*Math.sin(v),l.push(h.x,h.y,h.z),u.push(0,0,1),d.x=(l[p]/i+1)/2,d.y=(l[p+1]/i+1)/2,c.push(d.x,d.y)}for(var g=1;g<=r;g++)s.push(g,g+1,0);return e.setIndex(s),e.setAttribute("position",new la(l,3)),e.setAttribute("normal",new la(u,3)),e.setAttribute("uv",new la(c,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(ga);t.CircleGeometry=wf;var Sf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:r,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:c};var d=(0,h.default)(e);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],v=[],g=[],y=0,_=[],x=a/2,b=0;function M(){for(var e=new Ii,t=new Ii,n=0,l=(r-i)/a,h=0;h<=s;h++){for(var m=[],M=h/s,w=M*(r-i)+i,S=0;S<=o;S++){var A=S/o,T=A*c+u,C=Math.sin(T),E=Math.cos(T);t.x=w*C,t.y=-M*a+x,t.z=w*E,p.push(t.x,t.y,t.z),e.set(C,l,E).normalize(),v.push(e.x,e.y,e.z),g.push(A,1-M),m.push(y++)}_.push(m)}for(var k=0;k<o;k++)for(var L=0;L<s;L++){var R=_[L][k],B=_[L+1][k],P=_[L+1][k+1],I=_[L][k+1];f.push(R,B,I),f.push(B,P,I),n+=6}d.addGroup(b,n,0),b+=n}function w(e){for(var t=y,n=new ii,a=new Ii,s=0,l=!0===e?i:r,h=!0===e?1:-1,m=1;m<=o;m++)p.push(0,x*h,0),v.push(0,h,0),g.push(.5,.5),y++;for(var _=y,M=0;M<=o;M++){var w=M/o,S=w*c+u,A=Math.cos(S),T=Math.sin(S);a.x=l*T,a.y=x*h,a.z=l*A,p.push(a.x,a.y,a.z),v.push(0,h,0),n.x=.5*A+.5,n.y=.5*T*h+.5,g.push(n.x,n.y),y++}for(var C=0;C<o;C++){var E=t+C,k=_+C;!0===e?f.push(k,k+1,E):f.push(k+1,k,E),s+=3}d.addGroup(b,s,!0===e?1:2),b+=s}return M(),!1===l&&(i>0&&w(!0),r>0&&w(!1)),e.setIndex(f),e.setAttribute("position",new la(p,3)),e.setAttribute("normal",new la(v,3)),e.setAttribute("uv",new la(g,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(ga);t.CylinderGeometry=Sf;var Af=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,m.default)(this,n),e=t.call(this,0,i,r,a,o,s,l,u),e.type="ConeGeometry",e.parameters={radius:i,height:r,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Sf);t.ConeGeometry=Af;var Tf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,m.default)(this,n),e=t.call(this),e.type="PolyhedronGeometry",e.parameters={vertices:i,indices:r,radius:a,detail:o};var s=[],l=[];function u(e){for(var t=new Ii,n=new Ii,i=new Ii,a=0;a<r.length;a+=3)v(r[a+0],t),v(r[a+1],n),v(r[a+2],i),c(t,n,i,e)}function c(e,t,n,i){for(var r=i+1,a=[],o=0;o<=r;o++){a[o]=[];for(var s=e.clone().lerp(n,o/r),l=t.clone().lerp(n,o/r),u=r-o,c=0;c<=u;c++)a[o][c]=0===c&&o===r?s:s.clone().lerp(l,c/u)}for(var h=0;h<r;h++)for(var d=0;d<2*(r-h)-1;d++){var f=Math.floor(d/2);d%2===0?(p(a[h][f+1]),p(a[h+1][f]),p(a[h][f])):(p(a[h][f+1]),p(a[h+1][f+1]),p(a[h+1][f]))}}function h(e){for(var t=new Ii,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function d(){for(var e=new Ii,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=_(e)/2/Math.PI+.5,i=x(e)/Math.PI+.5;l.push(n,1-i)}g(),f()}function f(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],i=l[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),i<.2&&(l[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function v(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function g(){for(var e=new Ii,t=new Ii,n=new Ii,i=new Ii,r=new ii,a=new ii,o=new ii,u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),r.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var h=_(i);y(r,c+0,e,h),y(a,c+2,t,h),y(o,c+4,n,h)}}function y(e,t,n,i){i<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=i/2/Math.PI+.5)}function _(e){return Math.atan2(e.z,-e.x)}function x(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return u(o),h(a),d(),e.setAttribute("position",new la(s,3)),e.setAttribute("normal",new la(s.slice(),3)),e.setAttribute("uv",new la(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(ga);t.PolyhedronGeometry=Tf;var Cf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return e=t.call(this,s,l,i,r),e.type="DodecahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Tf);t.DodecahedronGeometry=Cf;var Ef=new Ii,kf=new Ii,Lf=new Ii,Rf=new Xr,Bf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,m.default)(this,n),e=t.call(this),e.type="EdgesGeometry",e.parameters={geometry:i,thresholdAngle:r},null!==i){for(var a=4,o=Math.pow(10,a),s=Math.cos(Bn*r),l=i.getIndex(),u=i.getAttribute("position"),c=l?l.count:u.count,h=[0,0,0],d=["a","b","c"],f=new Array(3),p={},v=[],g=0;g<c;g+=3){l?(h[0]=l.getX(g),h[1]=l.getX(g+1),h[2]=l.getX(g+2)):(h[0]=g,h[1]=g+1,h[2]=g+2);var y=Rf.a,_=Rf.b,x=Rf.c;if(y.fromBufferAttribute(u,h[0]),_.fromBufferAttribute(u,h[1]),x.fromBufferAttribute(u,h[2]),Rf.getNormal(Lf),f[0]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),f[1]="".concat(Math.round(_.x*o),",").concat(Math.round(_.y*o),",").concat(Math.round(_.z*o)),f[2]="".concat(Math.round(x.x*o),",").concat(Math.round(x.y*o),",").concat(Math.round(x.z*o)),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var b=0;b<3;b++){var M=(b+1)%3,w=f[b],S=f[M],A=Rf[d[b]],T=Rf[d[M]],C="".concat(w,"_").concat(S),E="".concat(S,"_").concat(w);E in p&&p[E]?(Lf.dot(p[E].normal)<=s&&(v.push(A.x,A.y,A.z),v.push(T.x,T.y,T.z)),p[E]=null):C in p||(p[C]={index0:h[b],index1:h[M],normal:Lf.clone()})}}for(var k in p)if(p[k]){var L=p[k],R=L.index0,B=L.index1;Ef.fromBufferAttribute(u,R),kf.fromBufferAttribute(u,B),v.push(Ef.x,Ef.y,Ef.z),v.push(kf.x,kf.y,kf.z)}e.setAttribute("position",new la(v,3))}return e}return n}(ga);t.EdgesGeometry=Bf;var Pf=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.uuid=In(),i.type="Shape",i.holes=[],i}return(0,g.default)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,u.default)((0,c.default)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new xf).fromJSON(r))}return this}}]),n}(xf);t.Shape=Pf;var If={triangulate:function(e,t){var n,i,r,a,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*u:e.length,d=Df(e,0,h,u,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=Hf(e,t,d,u)),e.length>80*u){n=r=e[0],i=a=e[1];for(var p=u;p<h;p+=u)o=e[p],s=e[p+1],o<n&&(n=o),s<i&&(i=s),o>r&&(r=o),s>a&&(a=s);l=Math.max(r-n,a-i),l=0!==l?1/l:0}return Ff(d,f,u,n,i,l),f}};function Df(e,t,n,i,r){var a,o;if(r===hp(e,t,n,i)>0)for(a=t;a<n;a+=i)o=lp(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=lp(a,e[a],e[a+1],o);return o&&ep(o,o.next)&&(up(o),o=o.next),o}function Of(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!ep(i,i.next)&&0!==$f(i.prev,i,i.next))i=i.next;else{if(up(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Ff(e,t,n,i,r,a,o){if(e){!o&&a&&Xf(e,i,r,a);var s,l,u=e;while(e.prev!==e.next)if(s=e.prev,l=e.next,a?Gf(e,i,r,a):Nf(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),up(e),e=l.next,u=l.next;else if(e=l,e===u){o?1===o?(e=Uf(Of(e),t,n),Ff(e,t,n,i,r,a,2)):2===o&&zf(e,t,n,i,r,a):Ff(Of(e),t,n,i,r,a,1);break}}}function Nf(e){var t=e.prev,n=e,i=e.next;if($f(t,n,i)>=0)return!1;var r=e.next.next;while(r!==e.prev){if(Kf(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&$f(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Gf(e,t,n,i){var r=e.prev,a=e,o=e.next;if($f(r,a,o)>=0)return!1;var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=Yf(s,l,t,n,i),d=Yf(u,c,t,n,i),f=e.prevZ,p=e.nextZ;while(f&&f.z>=h&&p&&p.z<=d){if(f!==e.prev&&f!==e.next&&Kf(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&$f(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Kf(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&$f(p.prev,p,p.next)>=0)return!1;p=p.nextZ}while(f&&f.z>=h){if(f!==e.prev&&f!==e.next&&Kf(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&$f(f.prev,f,f.next)>=0)return!1;f=f.prevZ}while(p&&p.z<=d){if(p!==e.prev&&p!==e.next&&Kf(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&$f(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Uf(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!ep(r,a)&&tp(r,i,i.next,a)&&ap(r,a)&&ap(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),up(i),up(i.next),i=e=a),i=i.next}while(i!==e);return Of(i)}function zf(e,t,n,i,r,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&Qf(o,s)){var l=sp(o,s);return o=Of(o,o.next),l=Of(l,l.next),Ff(o,t,n,i,r,a),void Ff(l,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function Hf(e,t,n,i){var r,a,o,s,l,u=[];for(r=0,a=t.length;r<a;r++)o=t[r]*i,s=r<a-1?t[r+1]*i:e.length,l=Df(e,o,s,i,!1),l===l.next&&(l.steiner=!0),u.push(Zf(l));for(u.sort(Vf),r=0;r<u.length;r++)Wf(u[r],n),n=Of(n,n.next);return n}function Vf(e,t){return e.x-t.x}function Wf(e,t){if(t=jf(e,t),t){var n=sp(t,e);Of(t,t.next),Of(n,n.next)}}function jf(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n;var l,u=n,c=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&Kf(a<h?r:o,a,c,h,a<h?o:r,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(r-i.x),ap(i,e)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&Jf(n,i)))&&(n=i,d=l)),i=i.next}while(i!==u);return n}function Jf(e,t){return $f(e.prev,e,t.prev)<0&&$f(t.next,e,e.next)<0}function Xf(e,t,n,i){var r=e;do{null===r.z&&(r.z=Yf(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,qf(r)}function qf(e){var t,n,i,r,a,o,s,l,u=1;do{n=e,e=null,a=null,o=0;while(n){for(o++,i=n,s=0,t=0;t<u;t++)if(s++,i=i.nextZ,!i)break;l=u;while(s>0||l>0&&i)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1);return e}function Yf(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Zf(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Kf(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Qf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!rp(e,t)&&(ap(e,t)&&ap(t,e)&&op(e,t)&&($f(e.prev,e,t.prev)||$f(e,t.prev,t))||ep(e,t)&&$f(e.prev,e,e.next)>0&&$f(t.prev,t,t.next)>0)}function $f(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ep(e,t){return e.x===t.x&&e.y===t.y}function tp(e,t,n,i){var r=ip($f(e,t,n)),a=ip($f(e,t,i)),o=ip($f(n,i,e)),s=ip($f(n,i,t));return r!==a&&o!==s||(!(0!==r||!np(e,n,t))||(!(0!==a||!np(e,i,t))||(!(0!==o||!np(n,e,i))||!(0!==s||!np(n,t,i)))))}function np(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ip(e){return e>0?1:e<0?-1:0}function rp(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&tp(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function ap(e,t){return $f(e.prev,e,e.next)<0?$f(e,t,e.next)>=0&&$f(e,e.prev,t)>=0:$f(e,t,e.prev)<0||$f(e,e.next,t)<0}function op(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}function sp(e,t){var n=new cp(e.i,e.x,e.y),i=new cp(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function lp(e,t,n,i){var r=new cp(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function up(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function cp(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hp(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}var dp=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],r=[];fp(e),pp(n,e);var a=e.length;t.forEach(fp);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,pp(n,t[o]);for(var s=If.triangulate(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}}]),e}();function fp(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function pp(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}t.ShapeUtils=dp;var vp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pf([new ii(.5,.5),new ii(-.5,.5),new ii(-.5,-.5),new ii(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.default)(this,n),e=t.call(this),e.type="ExtrudeGeometry",e.parameters={shapes:i,options:r},i=Array.isArray(i)?i:[i];for(var a=(0,h.default)(e),o=[],s=[],l=0,u=i.length;l<u;l++){var c=i[l];d(c)}function d(e){var t,n,i,l,u,c=[],h=void 0!==r.curveSegments?r.curveSegments:12,d=void 0!==r.steps?r.steps:1,f=void 0!==r.depth?r.depth:1,p=void 0===r.bevelEnabled||r.bevelEnabled,v=void 0!==r.bevelThickness?r.bevelThickness:.2,m=void 0!==r.bevelSize?r.bevelSize:v-.1,g=void 0!==r.bevelOffset?r.bevelOffset:0,y=void 0!==r.bevelSegments?r.bevelSegments:3,_=r.extrudePath,x=void 0!==r.UVGenerator?r.UVGenerator:mp,b=!1;_&&(t=_.getSpacedPoints(d),b=!0,p=!1,n=_.computeFrenetFrames(d,!1),i=new Ii,l=new Ii,u=new Ii),p||(y=0,v=0,m=0,g=0);var M=e.extractPoints(h),w=M.shape,S=M.holes,A=!dp.isClockWise(w);if(A){w=w.reverse();for(var T=0,C=S.length;T<C;T++){var E=S[T];dp.isClockWise(E)&&(S[T]=E.reverse())}}for(var k=dp.triangulateShape(w,S),L=w,R=0,B=S.length;R<B;R++){var P=S[R];w=w.concat(P)}function I(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var D=w.length,O=k.length;function F(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-s/d,v=t.y+o/d,m=n.x-u/f,g=n.y+l/f,y=((m-p)*u-(g-v)*l)/(o*u-s*l);i=p+o*y-e.x,r=v+s*y-e.y;var _=i*i+r*r;if(_<=2)return new ii(i,r);a=Math.sqrt(_/2)}else{var x=!1;o>Number.EPSILON?l>Number.EPSILON&&(x=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(u)&&(x=!0),x?(i=-s,r=o,a=Math.sqrt(c)):(i=o,r=s,a=Math.sqrt(c/2))}return new ii(i/a,r/a)}for(var N=[],G=0,U=L.length,z=U-1,H=G+1;G<U;G++,z++,H++)z===U&&(z=0),H===U&&(H=0),N[G]=F(L[G],L[z],L[H]);for(var V,W=[],j=N.concat(),J=0,X=S.length;J<X;J++){var q=S[J];V=[];for(var Y=0,Z=q.length,K=Z-1,Q=Y+1;Y<Z;Y++,K++,Q++)K===Z&&(K=0),Q===Z&&(Q=0),V[Y]=F(q[Y],q[K],q[Q]);W.push(V),j=j.concat(V)}for(var $=0;$<y;$++){for(var ee=$/y,te=v*Math.cos(ee*Math.PI/2),ne=m*Math.sin(ee*Math.PI/2)+g,ie=0,re=L.length;ie<re;ie++){var ae=I(L[ie],N[ie],ne);Ie(ae.x,ae.y,-te)}for(var oe=0,se=S.length;oe<se;oe++){var le=S[oe];V=W[oe];for(var ue=0,ce=le.length;ue<ce;ue++){var he=I(le[ue],V[ue],ne);Ie(he.x,he.y,-te)}}}for(var de=m+g,fe=0;fe<D;fe++){var pe=p?I(w[fe],j[fe],de):w[fe];b?(l.copy(n.normals[0]).multiplyScalar(pe.x),i.copy(n.binormals[0]).multiplyScalar(pe.y),u.copy(t[0]).add(l).add(i),Ie(u.x,u.y,u.z)):Ie(pe.x,pe.y,0)}for(var ve=1;ve<=d;ve++)for(var me=0;me<D;me++){var ge=p?I(w[me],j[me],de):w[me];b?(l.copy(n.normals[ve]).multiplyScalar(ge.x),i.copy(n.binormals[ve]).multiplyScalar(ge.y),u.copy(t[ve]).add(l).add(i),Ie(u.x,u.y,u.z)):Ie(ge.x,ge.y,f/d*ve)}for(var ye=y-1;ye>=0;ye--){for(var _e=ye/y,xe=v*Math.cos(_e*Math.PI/2),be=m*Math.sin(_e*Math.PI/2)+g,Me=0,we=L.length;Me<we;Me++){var Se=I(L[Me],N[Me],be);Ie(Se.x,Se.y,f+xe)}for(var Ae=0,Te=S.length;Ae<Te;Ae++){var Ce=S[Ae];V=W[Ae];for(var Ee=0,ke=Ce.length;Ee<ke;Ee++){var Le=I(Ce[Ee],V[Ee],be);b?Ie(Le.x,Le.y+t[d-1].y,t[d-1].x+xe):Ie(Le.x,Le.y,f+xe)}}}function Re(){var e=o.length/3;if(p){for(var t=0,n=D*t,i=0;i<O;i++){var r=k[i];De(r[2]+n,r[1]+n,r[0]+n)}t=d+2*y,n=D*t;for(var s=0;s<O;s++){var l=k[s];De(l[0]+n,l[1]+n,l[2]+n)}}else{for(var u=0;u<O;u++){var c=k[u];De(c[2],c[1],c[0])}for(var h=0;h<O;h++){var f=k[h];De(f[0]+D*d,f[1]+D*d,f[2]+D*d)}}a.addGroup(e,o.length/3-e,0)}function Be(){var e=o.length/3,t=0;Pe(L,t),t+=L.length;for(var n=0,i=S.length;n<i;n++){var r=S[n];Pe(r,t),t+=r.length}a.addGroup(e,o.length/3-e,1)}function Pe(e,t){var n=e.length;while(--n>=0){var i=n,r=n-1;r<0&&(r=e.length-1);for(var a=0,o=d+2*y;a<o;a++){var s=D*a,l=D*(a+1),u=t+i+s,c=t+r+s,h=t+r+l,f=t+i+l;Oe(u,c,h,f)}}}function Ie(e,t,n){c.push(e),c.push(t),c.push(n)}function De(e,t,n){Fe(e),Fe(t),Fe(n);var i=o.length/3,r=x.generateTopUV(a,o,i-3,i-2,i-1);Ne(r[0]),Ne(r[1]),Ne(r[2])}function Oe(e,t,n,i){Fe(e),Fe(t),Fe(i),Fe(t),Fe(n),Fe(i);var r=o.length/3,s=x.generateSideWallUV(a,o,r-6,r-3,r-2,r-1);Ne(s[0]),Ne(s[1]),Ne(s[3]),Ne(s[1]),Ne(s[2]),Ne(s[3])}function Fe(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function Ne(e){s.push(e.x),s.push(e.y)}Re(),Be()}return e.setAttribute("position",new la(o,3)),e.setAttribute("uv",new la(s,2)),e.computeVertexNormals(),e}return(0,g.default)(n,[{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes,i=this.parameters.options;return gp(t,i,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new yf[s.type]).fromJSON(s)),new n(i,e.options)}}]),n}(ga);t.ExtrudeGeometry=vp;var mp={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new ii(a,o),new ii(s,l),new ii(u,c)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new ii(o,1-l),new ii(u,1-h),new ii(d,1-p),new ii(v,1-g)]:[new ii(s,1-l),new ii(c,1-h),new ii(f,1-p),new ii(m,1-g)]}};function gp(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}var yp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return e=t.call(this,o,s,i,r),e.type="IcosahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Tf);t.IcosahedronGeometry=yp;var _p=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return e=t.call(this,a,o,i,r),e.type="OctahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Tf);t.OctahedronGeometry=_p;var xp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="RingGeometry",e.parameters={innerRadius:i,outerRadius:r,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a),o=Math.max(1,o);for(var u=[],c=[],h=[],d=[],f=i,p=(r-i)/o,v=new Ii,g=new ii,y=0;y<=o;y++){for(var _=0;_<=a;_++){var x=s+_/a*l;v.x=f*Math.cos(x),v.y=f*Math.sin(x),c.push(v.x,v.y,v.z),h.push(0,0,1),g.x=(v.x/r+1)/2,g.y=(v.y/r+1)/2,d.push(g.x,g.y)}f+=p}for(var b=0;b<o;b++)for(var M=b*(a+1),w=0;w<a;w++){var S=w+M,A=S,T=S+a+1,C=S+a+2,E=S+1;u.push(A,T,E),u.push(T,C,E)}return e.setIndex(u),e.setAttribute("position",new la(c,3)),e.setAttribute("normal",new la(h,3)),e.setAttribute("uv",new la(d,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(ga);t.RingGeometry=xp;var bp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pf([new ii(0,.5),new ii(-.5,-.5),new ii(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,m.default)(this,n),e=t.call(this),e.type="ShapeGeometry",e.parameters={shapes:i,curveSegments:r};var a=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(i))d(i);else for(var h=0;h<i.length;h++)d(i[h]),e.addGroup(u,c,h),u+=c,c=0;function d(e){var t=o.length/3,n=e.extractPoints(r),i=n.shape,u=n.holes;!1===dp.isClockWise(i)&&(i=i.reverse());for(var h=0,d=u.length;h<d;h++){var f=u[h];!0===dp.isClockWise(f)&&(u[h]=f.reverse())}for(var p=dp.triangulateShape(i,u),v=0,m=u.length;v<m;v++){var g=u[v];i=i.concat(g)}for(var y=0,_=i.length;y<_;y++){var x=i[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var b=0,M=p.length;b<M;b++){var w=p[b],S=w[0]+t,A=w[1]+t,T=w[2]+t;a.push(S,A,T),c+=3}}return e.setIndex(a),e.setAttribute("position",new la(o,3)),e.setAttribute("normal",new la(s,3)),e.setAttribute("uv",new la(l,2)),e}return(0,g.default)(n,[{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this),t=this.parameters.shapes;return Mp(t,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}return new n(i,e.curveSegments)}}]),n}(ga);function Mp(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}t.ShapeGeometry=bp;var wp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="SphereGeometry",e.parameters={radius:i,widthSegments:r,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u},r=Math.max(3,Math.floor(r)),a=Math.max(2,Math.floor(a));for(var c=Math.min(l+u,Math.PI),h=0,d=[],f=new Ii,p=new Ii,v=[],g=[],y=[],_=[],x=0;x<=a;x++){var b=[],M=x/a,w=0;0==x&&0==l?w=.5/r:x==a&&c==Math.PI&&(w=-.5/r);for(var S=0;S<=r;S++){var A=S/r;f.x=-i*Math.cos(o+A*s)*Math.sin(l+M*u),f.y=i*Math.cos(l+M*u),f.z=i*Math.sin(o+A*s)*Math.sin(l+M*u),g.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),_.push(A+w,1-M),b.push(h++)}d.push(b)}for(var T=0;T<a;T++)for(var C=0;C<r;C++){var E=d[T][C+1],k=d[T][C],L=d[T+1][C],R=d[T+1][C+1];(0!==T||l>0)&&v.push(E,k,R),(T!==a-1||c<Math.PI)&&v.push(k,L,R)}return e.setIndex(v),e.setAttribute("position",new la(g,3)),e.setAttribute("normal",new la(y,3)),e.setAttribute("uv",new la(_,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(ga);t.SphereGeometry=wp;var Sp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.default)(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return e=t.call(this,a,o,i,r),e.type="TetrahedronGeometry",e.parameters={radius:i,detail:r},e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Tf);t.TetrahedronGeometry=Sp;var Ap=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,m.default)(this,n),e=t.call(this),e.type="TorusGeometry",e.parameters={radius:i,tube:r,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],u=[],c=[],h=[],d=new Ii,f=new Ii,p=new Ii,v=0;v<=a;v++)for(var g=0;g<=o;g++){var y=g/o*s,_=v/a*Math.PI*2;f.x=(i+r*Math.cos(_))*Math.cos(y),f.y=(i+r*Math.cos(_))*Math.sin(y),f.z=r*Math.sin(_),u.push(f.x,f.y,f.z),d.x=i*Math.cos(y),d.y=i*Math.sin(y),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(g/o),h.push(v/a)}for(var x=1;x<=a;x++)for(var b=1;b<=o;b++){var M=(o+1)*x+b-1,w=(o+1)*(x-1)+b-1,S=(o+1)*(x-1)+b,A=(o+1)*x+b;l.push(M,w,A),l.push(w,S,A)}return e.setIndex(l),e.setAttribute("position",new la(u,3)),e.setAttribute("normal",new la(c,3)),e.setAttribute("uv",new la(h,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(ga);t.TorusGeometry=Ap;var Tp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,m.default)(this,n),e=t.call(this),e.type="TorusKnotGeometry",e.parameters={radius:i,tube:r,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var u=[],c=[],h=[],d=[],f=new Ii,p=new Ii,v=new Ii,g=new Ii,y=new Ii,_=new Ii,x=new Ii,b=0;b<=a;++b){var M=b/a*s*Math.PI*2;P(M,s,l,i,v),P(M+.01,s,l,i,g),_.subVectors(g,v),x.addVectors(g,v),y.crossVectors(_,x),x.crossVectors(y,_),y.normalize(),x.normalize();for(var w=0;w<=o;++w){var S=w/o*Math.PI*2,A=-r*Math.cos(S),T=r*Math.sin(S);f.x=v.x+(A*x.x+T*y.x),f.y=v.y+(A*x.y+T*y.y),f.z=v.z+(A*x.z+T*y.z),c.push(f.x,f.y,f.z),p.subVectors(f,v).normalize(),h.push(p.x,p.y,p.z),d.push(b/a),d.push(w/o)}}for(var C=1;C<=a;C++)for(var E=1;E<=o;E++){var k=(o+1)*(C-1)+(E-1),L=(o+1)*C+(E-1),R=(o+1)*C+E,B=(o+1)*(C-1)+E;u.push(k,L,B),u.push(L,R,B)}function P(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}return e.setIndex(u),e.setAttribute("position",new la(c,3)),e.setAttribute("normal",new la(h,3)),e.setAttribute("uv",new la(d,2)),e}return(0,g.default)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(ga);t.TorusKnotGeometry=Tp;var Cp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mf(new Ii(-1,-1,0),new Ii(-1,1,0),new Ii(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,m.default)(this,n),e=t.call(this),e.type="TubeGeometry",e.parameters={path:i,tubularSegments:r,radius:a,radialSegments:o,closed:s};var l=i.computeFrenetFrames(r,s);e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals;var u=new Ii,c=new Ii,h=new ii,d=new Ii,f=[],p=[],v=[],g=[];function y(){for(var e=0;e<r;e++)_(e);_(!1===s?r:0),b(),x()}function _(e){d=i.getPointAt(e/r,d);for(var t=l.normals[e],n=l.binormals[e],s=0;s<=o;s++){var h=s/o*Math.PI*2,v=Math.sin(h),m=-Math.cos(h);c.x=m*t.x+v*n.x,c.y=m*t.y+v*n.y,c.z=m*t.z+v*n.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=d.x+a*c.x,u.y=d.y+a*c.y,u.z=d.z+a*c.z,f.push(u.x,u.y,u.z)}}function x(){for(var e=1;e<=r;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),i=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;g.push(n,i,s),g.push(i,a,s)}}function b(){for(var e=0;e<=r;e++)for(var t=0;t<=o;t++)h.x=e/r,h.y=t/o,v.push(h.x,h.y)}return y(),e.setIndex(g),e.setAttribute("position",new la(f,3)),e.setAttribute("normal",new la(p,3)),e.setAttribute("uv",new la(v,2)),e}return(0,g.default)(n,[{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new yf[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(ga);t.TubeGeometry=Cp;var Ep=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,m.default)(this,n),e=t.call(this),e.type="WireframeGeometry",e.parameters={geometry:i},null!==i){var r=[],a=new Set,o=new Ii,s=new Ii;if(null!==i.index){var l=i.attributes.position,u=i.index,c=i.groups;0===c.length&&(c=[{start:0,count:u.count,materialIndex:0}]);for(var h=0,d=c.length;h<d;++h)for(var f=c[h],p=f.start,v=f.count,g=p,y=p+v;g<y;g+=3)for(var _=0;_<3;_++){var x=u.getX(g+_),b=u.getX(g+(_+1)%3);o.fromBufferAttribute(l,x),s.fromBufferAttribute(l,b),!0===kp(o,s,a)&&(r.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z))}}else for(var M=i.attributes.position,w=0,S=M.count/3;w<S;w++)for(var A=0;A<3;A++){var T=3*w+A,C=3*w+(A+1)%3;o.fromBufferAttribute(M,T),s.fromBufferAttribute(M,C),!0===kp(o,s,a)&&(r.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z))}e.setAttribute("position",new la(r,3))}return e}return n}(ga);function kp(e,t,n){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}t.WireframeGeometry=Ep;var Lp=Object.freeze({__proto__:null,BoxGeometry:Na,CapsuleGeometry:Mf,CircleGeometry:wf,ConeGeometry:Af,CylinderGeometry:Sf,DodecahedronGeometry:Cf,EdgesGeometry:Bf,ExtrudeGeometry:vp,IcosahedronGeometry:yp,LatheGeometry:bf,OctahedronGeometry:_p,PlaneGeometry:lo,PolyhedronGeometry:Tf,RingGeometry:xp,ShapeGeometry:bp,SphereGeometry:wp,TetrahedronGeometry:Sp,TorusGeometry:Ap,TorusKnotGeometry:Tp,TubeGeometry:Cp,WireframeGeometry:Ep}),Rp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isShadowMaterial=!0,i.type="ShadowMaterial",i.color=new xi(0),i.transparent=!0,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(Yr);t.ShadowMaterial=Rp;var Bp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.isRawShaderMaterial=!0,i.type="RawShaderMaterial",i}return n}(ja);t.RawShaderMaterial=Bp;var Pp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshStandardMaterial=!0,i.defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new xi(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new xi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshStandardMaterial=Pp;var Ip=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshPhysicalMaterial=!0,i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new ii(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty((0,h.default)(i),"reflectivity",{get:function(){return Dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),i.iridescenceMap=null,i.iridescenceIOR=1.3,i.iridescenceThicknessRange=[100,400],i.iridescenceThicknessMap=null,i.sheenColor=new xi(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new xi(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new xi(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._iridescence=0,i._transmission=0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=(0,a.default)(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}}]),n}(Pp);t.MeshPhysicalMaterial=Ip;var Dp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshPhongMaterial=!0,i.type="MeshPhongMaterial",i.color=new xi(16777215),i.specular=new xi(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new xi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=le,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshPhongMaterial=Dp;var Op=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshToonMaterial=!0,i.defines={TOON:""},i.type="MeshToonMaterial",i.color=new xi(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new xi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Yr);t.MeshToonMaterial=Op;var Fp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshNormalMaterial=!0,i.type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.flatShading=!1,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Yr);t.MeshNormalMaterial=Fp;var Np=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshLambertMaterial=!0,i.type="MeshLambertMaterial",i.color=new xi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new xi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=le,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshLambertMaterial=Np;var Gp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isMeshMatcapMaterial=!0,i.defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new xi(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Yt,i.normalScale=new ii(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.fog=!0,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Yr);t.MeshMatcapMaterial=Gp;var Up=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.isLineDashedMaterial=!0,i.type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(wd);function zp(e,t,n){return Vp(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Hp(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Vp(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wp(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(t),i}function jp(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r}function Jp(e,t,n,i){var r=1,a=e[0];while(void 0!==a&&void 0===a[i])a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}function Xp(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var f=l.times[d]*r;if(!(f<n||f>=i)){c.push(l.times[d]);for(var p=0;p<u;++p)h.push(l.values[d*u+p])}}0!==c.length&&(l.times=Hp(c,l.times.constructor),l.values=Hp(h,l.values.constructor),o.push(l))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a}function qp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var r=n.tracks.length,a=t/i,o=function(t){var i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)return"continue";var o=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===o)return"continue";var s=0,l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);var u=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var h=i.times.length-1,d=void 0;if(a<=i.times[0]){var f=s,p=l-s;d=zp(i.values,f,p)}else if(a>=i.times[h]){var v=h*l+s,m=v+l-s;d=zp(i.values,v,m)}else{var g=i.createInterpolant(),y=s,_=l-s;g.evaluate(a),d=zp(g.resultBuffer,y,_)}if("quaternion"===r){var x=(new Pi).fromArray(d).normalize().conjugate();x.toArray(d)}for(var b=o.times.length,M=0;M<b;++M){var w=M*c+u;if("quaternion"===r)Pi.multiplyQuaternionsFlat(o.values,w,d,0,o.values,w);else for(var S=c-2*u,A=0;A<S;++A)o.values[w+A]-=d[A]}},s=0;s<r;++s)o(s);return e.blendMode=zt,e}t.LineDashedMaterial=Up;var Yp=Object.freeze({__proto__:null,arraySlice:zp,convertArray:Hp,isTypedArray:Vp,getKeyframeOrder:Wp,sortedArray:jp,flattenJSON:Jp,subclip:Xp,makeClipAdditive:qp});t.AnimationUtils=Yp;var Zp=function(){function e(t,n,i,r){(0,m.default)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return(0,g.default)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}while(n<a){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();t.Interpolant=Zp;var Kp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){var o;return(0,m.default)(this,n),o=t.call(this,e,i,r,a),o._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Ft,endingEnd:Ft},o}return(0,g.default)(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case Nt:r=e,o=2*t-n;break;case Gt:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Nt:a=e,s=2*n-t;break;case Gt:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,v=p*f,m=-h*v+2*h*p-h*f,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,_=d*v-d*p,x=0;x!==o;++x)r[x]=m*a[u+x]+g*a[l+x]+y*a[s+x]+_*a[c+x];return r}}]),n}(Zp);t.CubicInterpolant=Kp;var Qp=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),t.call(this,e,i,r,a)}return(0,g.default)(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(i-t),c=1-u,h=0;h!==o;++h)r[h]=a[l+h]*c+a[s+h]*u;return r}}]),n}(Zp);t.LinearInterpolant=Qp;var $p=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),t.call(this,e,i,r,a)}return(0,g.default)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Zp);t.DiscreteInterpolant=$p;var ev=function(){function e(t,n,i,r){if((0,m.default)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Hp(n,this.TimeBufferType),this.values=Hp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return(0,g.default)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new $p(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Qp(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Kp(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case It:t=this.InterpolantFactoryMethodDiscrete;break;case Dt:t=this.InterpolantFactoryMethodLinear;break;case Ot:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return It;case this.InterpolantFactoryMethodLinear:return Dt;case this.InterpolantFactoryMethodSmooth:return Ot}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){var n=this.times,i=n.length,r=0,a=i-1;while(r!==i&&n[r]<e)++r;while(-1!==a&&n[a]>t)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=zp(n,r,a),this.values=zp(this.values,r*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&Vp(i))for(var l=0,u=i.length;l!==u;++l){var c=i[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=zp(this.times),t=zp(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ot,r=e.length-1,a=1,o=1;o<r;++o){var s=!1,l=e[o],u=e[o+1];if(l!==u&&(1!==o||l!==e[0]))if(i)s=!0;else for(var c=o*n,h=c-n,d=c+n,f=0;f!==n;++f){var p=t[c+f];if(p!==t[h+f]||p!==t[d+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var v=o*n,m=a*n,g=0;g!==n;++g)t[m+g]=t[v+g]}++a}}if(r>0){e[a]=e[r];for(var y=r*n,_=a*n,x=0;x!==n;++x)t[_+x]=t[y+x];++a}return a!==e.length?(this.times=zp(e,0,a),this.values=zp(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=zp(this.times,0),t=zp(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Hp(e.times,Array),values:Hp(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();t.KeyframeTrack=ev,ev.prototype.TimeBufferType=Float32Array,ev.prototype.ValueBufferType=Float32Array,ev.prototype.DefaultInterpolation=Dt;var tv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ev);t.BooleanKeyframeTrack=tv,tv.prototype.ValueTypeName="bool",tv.prototype.ValueBufferType=Array,tv.prototype.DefaultInterpolation=It,tv.prototype.InterpolantFactoryMethodLinear=void 0,tv.prototype.InterpolantFactoryMethodSmooth=void 0;var nv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ev);t.ColorKeyframeTrack=nv,nv.prototype.ValueTypeName="color";var iv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ev);t.NumberKeyframeTrack=iv,iv.prototype.ValueTypeName="number";var rv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),t.call(this,e,i,r,a)}return(0,g.default)(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t),l=e*o,u=l+o;l!==u;l+=4)Pi.slerpFlat(r,0,a,l-o,a,l,s);return r}}]),n}(Zp);t.QuaternionLinearInterpolant=rv;var av=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new rv(this.times,this.values,this.getValueSize(),e)}}]),n}(ev);t.QuaternionKeyframeTrack=av,av.prototype.ValueTypeName="quaternion",av.prototype.DefaultInterpolation=Dt,av.prototype.InterpolantFactoryMethodSmooth=void 0;var ov=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ev);t.StringKeyframeTrack=ov,ov.prototype.ValueTypeName="string",ov.prototype.ValueBufferType=Array,ov.prototype.DefaultInterpolation=It,ov.prototype.InterpolantFactoryMethodLinear=void 0,ov.prototype.InterpolantFactoryMethodSmooth=void 0;var sv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return n}(ev);t.VectorKeyframeTrack=sv,sv.prototype.ValueTypeName="vector";var lv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ut;(0,m.default)(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=In(),this.duration<0&&this.resetDuration()}return(0,g.default)(e,[{key:"resetDuration",value:function(){for(var e=this.tracks,t=0,n=0,i=e.length;n!==i;++n){var r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(cv(n[r]).scale(i));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,a=n.length;r!==a;++r)t.push(ev.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=Wp(s);s=jp(s,1,u),l=jp(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new iv(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var h=[];for(var d in i)h.push(this.CreateFromMorphTargetSequence(d,i[d],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];Jp(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var y=c[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}i.push(new iv(".morphTargetInfluence["+p+"]",v,m))}s=h.length*a}else{var _=".bones["+t[u].name+"]";n(sv,_+".position",c,"pos",i),n(av,_+".quaternion",c,"rot",i),n(sv,_+".scale",c,"scl",i)}}if(0===i.length)return null;var x=new this(r,s,i,o);return x}}]),e}();function uv(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return iv;case"vector":case"vector2":case"vector3":case"vector4":return sv;case"color":return nv;case"quaternion":return av;case"bool":case"boolean":return tv;case"string":return ov}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function cv(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=uv(e.type);if(void 0===e.times){var n=[],i=[];Jp(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}t.AnimationClip=lv;var hv={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};t.Cache=hv;var dv=function e(t,n,i){(0,m.default)(this,e);var r=this,a=!1,o=0,s=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var i=u[t],r=u[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}};t.LoadingManager=dv;var fv=new dv;t.DefaultLoadingManager=fv;var pv=function(){function e(t){(0,m.default)(this,e),this.manager=void 0!==t?t:fv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,g.default)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();t.Loader=pv;var vv={},mv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e),r.response=i,r}return n}((0,r.default)(Error)),gv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=hv.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===vv[e]){vv[e]=[],vv[e].push({onLoad:t,onProgress:n,onError:i});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=vv[e],i=t.body.getReader(),r=t.headers.get("Content-Length"),a=r?parseInt(r):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){function t(){i.read().then((function(i){var r=i.done,l=i.value;if(r)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var d=n[c];d.onProgress&&d.onProgress(u)}e.enqueue(l),t()}}))}t()}});return new Response(l)}throw new mv('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){var t=new DOMParser;return t.parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i,n=t.exec(s),i=n&&n[1]?n[1].toLowerCase():void 0,r=new TextDecoder(i);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){hv.add(e,t);var n=vv[e];delete vv[e];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=vv[e];if(void 0===n)throw r.manager.itemError(e),t;delete vv[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e)})).finally((function(){r.manager.itemEnd(e)})),this.manager.itemStart(e)}else vv[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(pv);t.FileLoader=gv;var yv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new gv(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=lv.parse(e[n]);t.push(i)}return t}}]),n}(pv);t.AnimationLoader=yv;var _v=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=[],o=new Vd,s=new gv(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);var l=0;function u(u){s.load(e[u],(function(e){var n=r.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=Re),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)u(c);else s.load(e,(function(e){var n=r.parse(e,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Re),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o}}]),n}(pv);t.CompressedTextureLoader=_v;var xv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=hv.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o=li("img");function s(){u(),hv.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){u(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}]),n}(pv);t.ImageLoader=xv;var bv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=new Ka,a=new xv(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,o++,6===o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)s(l);return r}}]),n}(pv);t.CubeTextureLoader=bv;var Mv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new fd,o=new gv(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,(function(e){var n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Se,a.wrapT=void 0!==n.wrapT?n.wrapT:Se,a.magFilter=void 0!==n.magFilter?n.magFilter:Re,a.minFilter=void 0!==n.minFilter?n.minFilter:Re,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Ie),1===n.mipmapCount&&(a.minFilter=Re),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}]),n}(pv);t.DataTextureLoader=Mv;var wv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=new Ai,a=new xv(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}]),n}(pv);t.TextureLoader=wv;var Sv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,m.default)(this,n),i=t.call(this),i.isLight=!0,i.type="Light",i.color=new xi(e),i.intensity=r,i}return(0,g.default)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Or);t.Light=Sv;var Av=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),a=t.call(this,e,r),a.isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Or.DefaultUp),a.updateMatrix(),a.groundColor=new xi(i),a}return(0,g.default)(n,[{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(Sv);t.HemisphereLight=Av;var Tv=new hr,Cv=new Ii,Ev=new Ii,kv=function(){function e(t){(0,m.default)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ii(512,512),this.map=null,this.mapPass=null,this.matrix=new hr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ao,this._frameExtents=new ii(1,1),this._viewportCount=1,this._viewports=[new Ti(0,0,1,1)]}return(0,g.default)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Cv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Cv),Ev.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ev),t.updateMatrixWorld(),Tv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Tv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Lv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this,new Xa(50,1,.5,500)),e.isSpotLightShadow=!0,e.focus=1,e}return(0,g.default)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*Pn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;i===t.fov&&r===t.aspect&&a===t.far||(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),(0,u.default)((0,c.default)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(kv),Rv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,m.default)(this,n),r=t.call(this,e,i),r.isSpotLight=!0,r.type="SpotLight",r.position.copy(Or.DefaultUp),r.updateMatrix(),r.target=new Or,r.distance=a,r.angle=o,r.penumbra=s,r.decay=l,r.map=null,r.shadow=new Lv,r}return(0,g.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}]),n}(Sv);t.SpotLight=Rv;var Bv=new hr,Pv=new Ii,Iv=new Ii,Dv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this,new Xa(90,1,.5,500)),e.isPointLightShadow=!0,e._frameExtents=new ii(4,2),e._viewportCount=6,e._viewports=[new Ti(2,1,1,1),new Ti(0,1,1,1),new Ti(3,1,1,1),new Ti(1,1,1,1),new Ti(3,0,1,1),new Ti(1,0,1,1)],e._cubeDirections=[new Ii(1,0,0),new Ii(-1,0,0),new Ii(0,0,1),new Ii(0,0,-1),new Ii(0,1,0),new Ii(0,-1,0)],e._cubeUps=[new Ii(0,1,0),new Ii(0,1,0),new Ii(0,1,0),new Ii(0,1,0),new Ii(0,0,1),new Ii(0,0,-1)],e}return(0,g.default)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Pv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Pv),Iv.copy(n.position),Iv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Iv),n.updateMatrixWorld(),i.makeTranslation(-Pv.x,-Pv.y,-Pv.z),Bv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bv)}}]),n}(kv),Ov=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.default)(this,n),r=t.call(this,e,i),r.isPointLight=!0,r.type="PointLight",r.distance=a,r.decay=o,r.shadow=new Dv,r}return(0,g.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}]),n}(Sv);t.PointLight=Ov;var Fv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this,new Yl(-5,5,5,-5,.5,500)),e.isDirectionalLightShadow=!0,e}return n}(kv),Nv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(Or.DefaultUp),r.updateMatrix(),r.target=new Or,r.shadow=new Fv,r}return(0,g.default)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Sv);t.DirectionalLight=Nv;var Gv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;return(0,m.default)(this,n),r=t.call(this,e,i),r.isAmbientLight=!0,r.type="AmbientLight",r}return n}(Sv);t.AmbientLight=Gv;var Uv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,m.default)(this,n),r=t.call(this,e,i),r.isRectAreaLight=!0,r.type="RectAreaLight",r.width=a,r.height=o,r}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}},{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}}]),n}(Sv);t.RectAreaLight=Uv;var zv=function(){function e(){(0,m.default)(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Ii)}return(0,g.default)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}]),e}();t.SphericalHarmonics3=zv;var Hv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zv,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,m.default)(this,n),e=t.call(this,void 0,r),e.isLightProbe=!0,e.sh=i,e}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Sv);t.LightProbe=Hv;var Vv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.textures={},i}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new gv(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new xi).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=i(o.value);break;case"c":r.uniforms[a].value=(new xi).setHex(o.value);break;case"v2":r.uniforms[a].value=(new ii).fromArray(o.value);break;case"v3":r.uniforms[a].value=(new Ii).fromArray(o.value);break;case"v4":r.uniforms[a].value=(new Ti).fromArray(o.value);break;case"m3":r.uniforms[a].value=(new ri).fromArray(o.value);break;case"m4":r.uniforms[a].value=(new hr).fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.matcap&&(r.matcap=i(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var l=e.normalScale;!1===Array.isArray(l)&&(l=[l,l]),r.normalScale=(new ii).fromArray(l)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new ii).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){var t={ShadowMaterial:Rp,SpriteMaterial:Hh,RawShaderMaterial:Bp,ShaderMaterial:ja,PointsMaterial:Id,MeshPhysicalMaterial:Ip,MeshStandardMaterial:Pp,MeshPhongMaterial:Dp,MeshToonMaterial:Op,MeshNormalMaterial:Fp,MeshLambertMaterial:Np,MeshDepthMaterial:mh,MeshDistanceMaterial:gh,MeshBasicMaterial:Zr,MeshMatcapMaterial:Gp,LineDashedMaterial:Up,LineBasicMaterial:wd,Material:Yr};return new t[e]}}]),n}(pv);t.MaterialLoader=Vv;var Wv=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(r){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}();t.LoaderUtils=Wv;var jv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(ga);t.InstancedBufferGeometry=jv;var Jv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new gv(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,n){if(void 0!==t[n])return t[n];var i=e.interleavedBuffers,a=i[n],o=r(e,a.buffer),s=si(a.type,o),l=new Nh(s,a.stride);return l.uuid=a.uuid,t[n]=l,l}function r(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}var a=e.isInstancedBufferGeometry?new jv:new ga,o=e.data.index;if(void 0!==o){var s=si(o.type,o.array);a.setIndex(new $r(s,1))}var l=e.data.attributes;for(var u in l){var c=l[u],h=void 0;if(c.isInterleavedBufferAttribute){var d=i(e.data,c.data);h=new Uh(d,c.itemSize,c.offset,c.normalized)}else{var f=si(c.type,c.array),p=c.isInstancedBufferAttribute?gd:$r;h=new p(f,c.itemSize,c.normalized)}void 0!==c.name&&(h.name=c.name),void 0!==c.usage&&h.setUsage(c.usage),void 0!==c.updateRange&&(h.updateRange.offset=c.updateRange.offset,h.updateRange.count=c.updateRange.count),a.setAttribute(u,h)}var v=e.data.morphAttributes;if(v)for(var m in v){for(var g=v[m],y=[],_=0,x=g.length;_<x;_++){var b=g[_],M=void 0;if(b.isInterleavedBufferAttribute){var w=i(e.data,b.data);M=new Uh(w,b.itemSize,b.offset,b.normalized)}else{var S=si(b.type,b.array);M=new $r(S,b.itemSize,b.normalized)}void 0!==b.name&&(M.name=b.name),y.push(M)}a.morphAttributes[m]=y}var A=e.data.morphTargetsRelative;A&&(a.morphTargetsRelative=!0);var T=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==T)for(var C=0,E=T.length;C!==E;++C){var k=T[C];a.addGroup(k.start,k.count,k.materialIndex)}var L=e.data.boundingSphere;if(void 0!==L){var R=new Ii;void 0!==L.center&&R.fromArray(L.center),a.boundingSphere=new nr(R,L.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}]),n}(pv);t.BufferGeometryLoader=Jv;var Xv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=""===this.path?Wv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new gv(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)}},{key:"loadAsync",value:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t,n){var i,r,a,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this,r=""===this.path?Wv.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||r,a=new gv(this.manager),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),l=s.metadata,void 0!==l&&void 0!==l.type&&"geometry"!==l.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,i.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){var c=!1;for(var h in a)if(a[h].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(l)}return l}},{key:"parseAsync",value:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){var n,i,r,a,o,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,s,o,n),u=this.parseSkeletons(t.skeletons,l),this.bindSkeletons(l,u),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new Pf).fromJSON(e[n]);t[r.uuid]=r}return t}},{key:"parseSkeletons",value:function(e,t){var n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=(new md).fromJSON(e[r],i);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var i=new Jv,r=0,a=e.length;r<a;r++){var o=void 0,s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;default:s.type in Lp?o=Lp[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},i={};if(void 0!==e){var r=new Vv;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var i=e[n],r=lv.parse(i);t[r.uuid]=r}return t}},{key:"parseImages",value:function(e,t){var n,i=this,r={};function a(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}function o(e){if("string"===typeof e){var t=e,n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t;return a(n)}return e.data?{data:si(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var s=new dv(t);n=new xv(s),n.setCrossOrigin(this.crossOrigin);for(var l=0,u=e.length;l<u;l++){var c=e[l],h=c.url;if(Array.isArray(h)){for(var d=[],f=0,p=h.length;f<p;f++){var v=h[f],m=o(v);null!==m&&(m instanceof HTMLImageElement?d.push(m):d.push(new fd(m.data,m.width,m.height)))}r[c.uuid]=new Mi(d)}else{var g=o(c.url);r[c.uuid]=new Mi(g)}}}return r}},{key:"parseImagesAsync",value:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){var n,i,r,a,s,l,u,c,h,d,f,p,v,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=function(){return s=(0,o.default)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return i=t,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:n.resourcePath+i,e.next=5,r.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:si(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},a=function(e){return s.apply(this,arguments)},n=this,i={},!(void 0!==t&&t.length>0)){e.next=33;break}r=new xv(this.manager),r.setCrossOrigin(this.crossOrigin),l=0,u=t.length;case 8:if(!(l<u)){e.next=33;break}if(c=t[l],h=c.url,!Array.isArray(h)){e.next=26;break}d=[],f=0,p=h.length;case 14:if(!(f<p)){e.next=23;break}return v=h[f],e.next=18,a(v);case 18:m=e.sent,null!==m&&(m instanceof HTMLImageElement?d.push(m):d.push(new fd(m.data,m.width,m.height)));case 20:f++,e.next=14;break;case 23:i[c.uuid]=new Mi(d),e.next=30;break;case 26:return e.next=28,a(c.url);case 28:g=e.sent,i[c.uuid]=new Mi(g);case 30:l++,e.next=8;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],l=s.data,u=void 0;Array.isArray(l)?(u=new Ka,6===l.length&&(u.needsUpdate=!0)):(u=l&&l.data?new fd:new Ai,l&&(u.needsUpdate=!0)),u.source=s,u.uuid=o.uuid,void 0!==o.name&&(u.name=o.name),void 0!==o.mapping&&(u.mapping=n(o.mapping,Yv)),void 0!==o.offset&&u.offset.fromArray(o.offset),void 0!==o.repeat&&u.repeat.fromArray(o.repeat),void 0!==o.center&&u.center.fromArray(o.center),void 0!==o.rotation&&(u.rotation=o.rotation),void 0!==o.wrap&&(u.wrapS=n(o.wrap[0],Zv),u.wrapT=n(o.wrap[1],Zv)),void 0!==o.format&&(u.format=o.format),void 0!==o.type&&(u.type=o.type),void 0!==o.encoding&&(u.encoding=o.encoding),void 0!==o.minFilter&&(u.minFilter=n(o.minFilter,Kv)),void 0!==o.magFilter&&(u.magFilter=n(o.magFilter,Kv)),void 0!==o.anisotropy&&(u.anisotropy=o.anisotropy),void 0!==o.flipY&&(u.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(u.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(u.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(u.userData=o.userData),i[o.uuid]=u}return i}},{key:"parseObject",value:function(e,t,n,i,r){var a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new Fh,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new xi(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Oh(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Dh(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Xa(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Yl(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Gv(e.color,e.intensity);break;case"DirectionalLight":a=new Nv(e.color,e.intensity);break;case"PointLight":a=new Ov(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Uv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Rv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Av(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Hv).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=u(e.material),a=new hd(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=u(e.material),a=new Da(o,s);break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);var h=e.count,d=e.instanceMatrix,f=e.instanceColor;a=new Md(o,s,h),a.instanceMatrix=new gd(new Float32Array(d.array),16),void 0!==f&&(a.instanceColor=new gd(new Float32Array(f.array),f.itemSize));break;case"LOD":a=new ad;break;case"Line":a=new kd(l(e.geometry),u(e.material));break;case"LineLoop":a=new Pd(l(e.geometry),u(e.material));break;case"LineSegments":a=new Bd(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new Gd(l(e.geometry),u(e.material));break;case"Sprite":a=new td(u(e.material));break;case"Group":a=new Ah;break;case"Bone":a=new dd;break;default:a=new Or}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,n,i,r));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];a.animations.push(r[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var _=e.levels,x=0;x<_.length;x++){var b=_[x],M=a.getObjectByProperty("uuid",b.object);void 0!==M&&a.addLevel(M,b.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(pv);t.ObjectLoader=Xv;var qv,Yv={UVMapping:ge,CubeReflectionMapping:ye,CubeRefractionMapping:_e,EquirectangularReflectionMapping:xe,EquirectangularRefractionMapping:be,CubeUVReflectionMapping:Me},Zv={RepeatWrapping:we,ClampToEdgeWrapping:Se,MirroredRepeatWrapping:Ae},Kv={NearestFilter:Te,NearestMipmapNearestFilter:Ce,NearestMipmapLinearFilter:ke,LinearFilter:Re,LinearMipmapNearestFilter:Be,LinearMipmapLinearFilter:Ie},Qv=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return(0,g.default)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=hv.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){hv.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}]),n}(pv);t.ImageBitmapLoader=Qv;var $v={getContext:function(){return void 0===qv&&(qv=new(window.AudioContext||window.webkitAudioContext)),qv},setContext:function(e){qv=e}};t.AudioContext=$v;var em=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){return(0,m.default)(this,n),t.call(this,e)}return(0,g.default)(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new gv(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0),o=$v.getContext();o.decodeAudioData(a,(function(e){t(e)}))}catch(s){i?i(s):console.error(s),r.manager.itemError(e)}}),n,i)}}]),n}(pv);t.AudioLoader=em;var tm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,m.default)(this,n),r=t.call(this,void 0,a),r.isHemisphereLightProbe=!0;var o=(new xi).set(e),s=(new xi).set(i),l=new Ii(o.r,o.g,o.b),u=new Ii(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return r.sh.coefficients[0].copy(l).add(u).multiplyScalar(c),r.sh.coefficients[1].copy(l).sub(u).multiplyScalar(h),r}return n}(Hv);t.HemisphereLightProbe=tm;var nm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,m.default)(this,n),i=t.call(this,void 0,r),i.isAmbientLightProbe=!0;var a=(new xi).set(e);return i.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return n}(Hv);t.AmbientLightProbe=nm;var im=new hr,rm=new hr,am=new hr,om=function(){function e(){(0,m.default)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Xa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Xa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,g.default)(e,[{key:"update",value:function(e){var t=this._cache,n=t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep;if(n){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,am.copy(e.projectionMatrix);var i,r,a=t.eyeSep/2,o=a*t.near/t.focus,s=t.near*Math.tan(Bn*t.fov*.5)/t.zoom;rm.elements[12]=-a,im.elements[12]=a,i=-s*t.aspect+o,r=s*t.aspect+o,am.elements[0]=2*t.near/(r-i),am.elements[8]=(r+i)/(r-i),this.cameraL.projectionMatrix.copy(am),i=-s*t.aspect-o,r=s*t.aspect-o,am.elements[0]=2*t.near/(r-i),am.elements[8]=(r+i)/(r-i),this.cameraR.projectionMatrix.copy(am)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(im)}}]),e}();t.StereoCamera=om;var sm=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,m.default)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,g.default)(e,[{key:"start",value:function(){this.startTime=lm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=lm();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function lm(){return("undefined"===typeof performance?Date:performance).now()}t.Clock=sm;var um=new Ii,cm=new Pi,hm=new Ii,dm=new Ii,fm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.type="AudioListener",e.context=$v.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new sm,e}return(0,g.default)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(um,cm,hm),dm.set(0,0,-1).applyQuaternion(cm),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(um.x,r),t.positionY.linearRampToValueAtTime(um.y,r),t.positionZ.linearRampToValueAtTime(um.z,r),t.forwardX.linearRampToValueAtTime(dm.x,r),t.forwardY.linearRampToValueAtTime(dm.y,r),t.forwardZ.linearRampToValueAtTime(dm.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(um.x,um.y,um.z),t.setOrientation(dm.x,dm.y,dm.z,i.x,i.y,i.z)}}]),n}(Or);t.AudioListener=fm;var pm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i.type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return(0,g.default)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Or);t.Audio=pm;var vm=new Ii,mm=new Pi,gm=new Ii,ym=new Ii,_m=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this,e),i.panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return(0,g.default)(n,[{key:"disconnect",value:function(){(0,u.default)((0,c.default)(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if((0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(vm,mm,gm),ym.set(0,0,1).applyQuaternion(mm);var t=this.panner;if(t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(vm.x,i),t.positionY.linearRampToValueAtTime(vm.y,i),t.positionZ.linearRampToValueAtTime(vm.z,i),t.orientationX.linearRampToValueAtTime(ym.x,i),t.orientationY.linearRampToValueAtTime(ym.y,i),t.orientationZ.linearRampToValueAtTime(ym.z,i)}else t.setPosition(vm.x,vm.y,vm.z),t.setOrientation(ym.x,ym.y,ym.z)}}}]),n}(pm);t.PositionalAudio=_m;var xm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,m.default)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,g.default)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}();t.AudioAnalyser=xm;var bm=function(){function e(t,n,i){var r,a,o;switch((0,m.default)(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,g.default)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=t*this._origIndex;this._mixBufferRegion(n,i,s,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,i){Pi.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,r){var a=this._workIndex*r;Pi.multiplyQuaternionsFlat(e,a,e,t,e,n),Pi.slerpFlat(e,t,e,t,e,a,i)}},{key:"_lerp",value:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,r){for(var a=0;a!==r;++a){var o=t+a;e[o]=e[o]+e[n+a]*i}}}]),e}();t.PropertyMixer=bm;var Mm="\\[\\]\\.:\\/",wm=new RegExp("["+Mm+"]","g"),Sm="[^"+Mm+"]",Am="[^"+Mm.replace("\\.","")+"]",Tm=/((?:WC+[\/:])*)/.source.replace("WC",Sm),Cm=/(WCOD+)?/.source.replace("WCOD",Am),Em=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sm),km=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sm),Lm=new RegExp("^"+Tm+Cm+Em+km+"$"),Rm=["material","materials","bones","map"],Bm=function(){function e(t,n,i){(0,m.default)(this,e);var r=i||Pm.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,r)}return(0,g.default)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),Pm=function(){function e(t,n,i){(0,m.default)(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,g.default)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[r];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(wm,"")}},{key:"parseTrackName",value:function(e){var t=Lm.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Rm.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}}]),e}();t.PropertyBinding=Pm,Pm.Composite=Bm,Pm.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Pm.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Pm.prototype.GetterByBindingType=[Pm.prototype._getValue_direct,Pm.prototype._getValue_array,Pm.prototype._getValue_arrayElement,Pm.prototype._getValue_toArray],Pm.prototype.SetterByBindingTypeAndVersioning=[[Pm.prototype._setValue_direct,Pm.prototype._setValue_direct_setNeedsUpdate,Pm.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pm.prototype._setValue_array,Pm.prototype._setValue_array_setNeedsUpdate,Pm.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pm.prototype._setValue_arrayElement,Pm.prototype._setValue_arrayElement_setNeedsUpdate,Pm.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pm.prototype._setValue_fromArray,Pm.prototype._setValue_fromArray_setNeedsUpdate,Pm.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Im=function(){function e(){(0,m.default)(this,e),this.isAnimationObjectGroup=!0,this.uuid=In(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}return(0,g.default)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=t[d];if(void 0===f){f=s++,t[d]=f,e.push(h);for(var p=0,v=a;p!==v;++p)r[p].push(new Pm(h,n[p],i[p]))}else if(f<l){o=e[f];var m=--l,g=e[m];t[g.uuid]=f,e[f]=g,t[d]=m,e[m]=h;for(var y=0,_=a;y!==_;++y){var x=r[y],b=x[m],M=x[f];x[f]=b,void 0===M&&(M=new Pm(h,n[y],i[y])),x[m]=M}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=t[l];if(void 0!==u&&u>=r){var c=r++,h=e[c];t[h.uuid]=u,e[u]=h,t[l]=c,e[c]=s;for(var d=0,f=i;d!==f;++d){var p=n[d],v=p[c],m=p[u];p[u]=v,p[c]=m}}}this.nCachedObjects_=r}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=t[u];if(void 0!==c)if(delete t[u],c<r){var h=--r,d=e[h],f=--a,p=e[f];t[d.uuid]=c,e[c]=d,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=i;v!==m;++v){var g=n[v],y=g[h],_=g[f];g[c]=y,g[h]=_,g.pop()}}else{var x=--a,b=e[x];x>0&&(t[b.uuid]=c),e[c]=b,e.pop();for(var M=0,w=i;M!==w;++M){var S=n[M];S[c]=S[x],S.pop()}}}this.nCachedObjects_=r}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new Pm(f,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}]),e}();t.AnimationObjectGroup=Im;var Dm=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,m.default)(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:Ft,endingEnd:Ft},u=0;u!==o;++u){var c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Bt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,g.default)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case zt:for(var c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);break;case Ut:default:for(var d=0,f=l.length;d!==f;++d)l[d].evaluate(o),u[d].accumulate(i,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,a=n===Pt;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===Rt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=Nt,i.endingEnd=Nt):(i.endingStart=e?this.zeroSlopeAtStart?Nt:Ft:Gt,i.endingEnd=t?this.zeroSlopeAtEnd?Nt:Ft:Gt)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}]),e}(),Om=new Float32Array(1),Fm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;return(0,m.default)(this,n),i=t.call(this),i._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return(0,g.default)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],d=h.name,f=u[d];if(void 0!==f)++f.referenceCount,a[c]=f;else{if(f=a[c],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;f=new bm(Pm.create(n,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;var c=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new Qp(new Float32Array(2),new Float32Array(2),1,Om),n.__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,r=i.uuid,a="string"===typeof e?lv.findByName(i,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:Ut),void 0!==s){var u=s.actionByRoot[r];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new Dm(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?lv.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions,n=t-1;n>=0;--n)e[n].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s._update(i,e,r,a)}for(var l=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)l[c].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,a=r[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(kn);t.AnimationMixer=Fm;var Nm=function(){function e(t){(0,m.default)(this,e),this.value=t}return(0,g.default)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();t.Uniform=Nm;var Gm=0,Um=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e.isUniformsGroup=!0,Object.defineProperty((0,h.default)(e),"id",{value:Gm++}),e.name="",e.usage=gn,e.uniforms=[],e}return(0,g.default)(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(kn);t.UniformsGroup=Um;var zm=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.default)(this,n),r=t.call(this,e,i),r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=a,r}return(0,g.default)(n,[{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=(0,u.default)((0,c.default)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Nh);t.InstancedInterleavedBuffer=zm;var Hm=function(){function e(t,n,i,r,a){(0,m.default)(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}return(0,g.default)(e,[{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),e}();t.GLBufferAttribute=Hm;var Vm=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,m.default)(this,e),this.ray=new cr(t,n),this.near=i,this.far=r,this.camera=null,this.layers=new Mr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,g.default)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return jm(e,this,n,t),n.sort(Wm),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=e.length;i<r;i++)jm(e[i],this,n,t);return n.sort(Wm),n}}]),e}();function Wm(e,t){return e.distance-t.distance}function jm(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,a=0,o=r.length;a<o;a++)jm(r[a],t,n,!0)}t.Raycaster=Vm;var Jm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,m.default)(this,e),this.radius=t,this.phi=n,this.theta=i,this}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Dn(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Spherical=Jm;var Xm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,m.default)(this,e),this.radius=t,this.theta=n,this.y=i,this}return(0,g.default)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Cylindrical=Xm;var qm=new ii,Ym=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii(-1/0,-1/0);(0,m.default)(this,e),this.isBox2=!0,this.min=t,this.max=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=qm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=qm.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();t.Box2=Ym;var Zm=new Ii,Km=new Ii,Qm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii;(0,m.default)(this,e),this.start=t,this.end=n}return(0,g.default)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Zm.subVectors(e,this.start),Km.subVectors(this.end,this.start);var n=Km.dot(Km),i=Km.dot(Zm),r=i/n;return t&&(r=Dn(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();t.Line3=Qm;var $m=new Ii,eg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){var r;(0,m.default)(this,n),r=t.call(this),r.light=e,r.light.updateMatrixWorld(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;for(var a=new ga,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1,u=32;s<u;s++,l++){var c=s/u*Math.PI*2,h=l/u*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}a.setAttribute("position",new la(o,3));var d=new wd({fog:!1,toneMapped:!1});return r.cone=new Bd(a,d),r.add(r.cone),r.update(),r}return(0,g.default)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),$m.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($m),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Or);t.SpotLightHelper=eg;var tg=new Ii,ng=new hr,ig=new hr,rg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;(0,m.default)(this,n);for(var r=ag(e),a=new ga,o=[],s=[],l=new xi(0,0,1),u=new xi(0,1,0),c=0;c<r.length;c++){var h=r[c];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(u.r,u.g,u.b))}a.setAttribute("position",new la(o,3)),a.setAttribute("color",new la(s,3));var d=new wd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return i=t.call(this,a,d),i.isSkeletonHelper=!0,i.type="SkeletonHelper",i.root=e,i.bones=r,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return(0,g.default)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,i=this.geometry,r=i.getAttribute("position");ig.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(ng.multiplyMatrices(ig,s.matrixWorld),tg.setFromMatrixPosition(ng),r.setXYZ(o,tg.x,tg.y,tg.z),ng.multiplyMatrices(ig,s.parent.matrixWorld),tg.setFromMatrixPosition(ng),r.setXYZ(o+1,tg.x,tg.y,tg.z),o+=2)}i.getAttribute("position").needsUpdate=!0,(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Bd);function ag(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,ag(e.children[n]));return t}t.SkeletonHelper=rg;var og=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n);var o=new wp(i,4,2),s=new Zr({wireframe:!0,fog:!1,toneMapped:!1});return a=t.call(this,o,s),a.light=e,a.light.updateMatrixWorld(),a.color=r,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,g.default)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Da);t.PointLightHelper=og;var sg=new Ii,lg=new xi,ug=new xi,cg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this),a.light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r;var o=new _p(i);o.rotateY(.5*Math.PI),a.material=new Zr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),l=new Float32Array(3*s.count);return o.setAttribute("color",new $r(l,3)),a.add(new Da(o,a.material)),a.update(),a}return(0,g.default)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");lg.copy(this.light.color),ug.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?lg:ug;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(sg.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Or);t.HemisphereLightHelper=cg;var hg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,m.default)(this,n),a=new xi(a),o=new xi(o);for(var s=r/2,l=i/r,u=i/2,c=[],h=[],d=0,f=0,p=-u;d<=r;d++,p+=l){c.push(-u,0,p,u,0,p),c.push(p,0,-u,p,0,u);var v=d===s?a:o;v.toArray(h,f),f+=3,v.toArray(h,f),f+=3,v.toArray(h,f),f+=3,v.toArray(h,f),f+=3}var g=new ga;g.setAttribute("position",new la(c,3)),g.setAttribute("color",new la(h,3));var y=new wd({vertexColors:!0,toneMapped:!1});return e=t.call(this,g,y),e.type="GridHelper",e}return n}(Bd);t.GridHelper=hg;var dg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,m.default)(this,n),s=new xi(s),l=new xi(l);var u=[],c=[];if(r>1)for(var h=0;h<r;h++){var d=h/r*(2*Math.PI),f=Math.sin(d)*i,p=Math.cos(d)*i;u.push(0,0,0),u.push(f,0,p);var v=1&h?s:l;c.push(v.r,v.g,v.b),c.push(v.r,v.g,v.b)}for(var g=0;g<a;g++)for(var y=1&g?s:l,_=i-i/a*g,x=0;x<o;x++){var b=x/o*(2*Math.PI),M=Math.sin(b)*_,w=Math.cos(b)*_;u.push(M,0,w),c.push(y.r,y.g,y.b),b=(x+1)/o*(2*Math.PI),M=Math.sin(b)*_,w=Math.cos(b)*_,u.push(M,0,w),c.push(y.r,y.g,y.b)}var S=new ga;S.setAttribute("position",new la(u,3)),S.setAttribute("color",new la(c,3));var A=new wd({vertexColors:!0,toneMapped:!1});return e=t.call(this,S,A),e.type="PolarGridHelper",e}return n}(Bd);t.PolarGridHelper=dg;var fg=new Ii,pg=new Ii,vg=new Ii,mg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;(0,m.default)(this,n),a=t.call(this),a.light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,void 0===i&&(i=1);var o=new ga;o.setAttribute("position",new la([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var s=new wd({fog:!1,toneMapped:!1});return a.lightPlane=new kd(o,s),a.add(a.lightPlane),o=new ga,o.setAttribute("position",new la([0,0,0,0,0,1],3)),a.targetLine=new kd(o,s),a.add(a.targetLine),a.update(),a}return(0,g.default)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){fg.setFromMatrixPosition(this.light.matrixWorld),pg.setFromMatrixPosition(this.light.target.matrixWorld),vg.subVectors(pg,fg),this.lightPlane.lookAt(pg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pg),this.targetLine.scale.z=vg.length()}}]),n}(Or);t.DirectionalLightHelper=mg;var gg=new Ii,yg=new Ja,_g=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i;(0,m.default)(this,n);var r=new ga,a=new wd({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={};function u(e,t){c(e),c(t)}function c(e){o.push(0,0,0),s.push(0,0,0),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4"),r.setAttribute("position",new la(o,3)),r.setAttribute("color",new la(s,3)),i=t.call(this,r,a),i.type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=l,i.update();var h=new xi(16755200),d=new xi(16711680),f=new xi(43775),p=new xi(16777215),v=new xi(3355443);return i.setColors(h,d,f,p,v),i}return(0,g.default)(n,[{key:"setColors",value:function(e,t,n,i,r){var a=this.geometry,o=a.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap,n=1,i=1;yg.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),xg("c",t,e,yg,0,0,-1),xg("t",t,e,yg,0,0,1),xg("n1",t,e,yg,-n,-i,-1),xg("n2",t,e,yg,n,-i,-1),xg("n3",t,e,yg,-n,i,-1),xg("n4",t,e,yg,n,i,-1),xg("f1",t,e,yg,-n,-i,1),xg("f2",t,e,yg,n,-i,1),xg("f3",t,e,yg,-n,i,1),xg("f4",t,e,yg,n,i,1),xg("u1",t,e,yg,.7*n,1.1*i,-1),xg("u2",t,e,yg,.7*-n,1.1*i,-1),xg("u3",t,e,yg,0,2*i,-1),xg("cf1",t,e,yg,-n,0,1),xg("cf2",t,e,yg,n,0,1),xg("cf3",t,e,yg,0,-i,1),xg("cf4",t,e,yg,0,i,1),xg("cn1",t,e,yg,-n,0,-1),xg("cn2",t,e,yg,n,0,-1),xg("cn3",t,e,yg,0,-i,-1),xg("cn4",t,e,yg,0,i,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Bd);function xg(e,t,n,i,r,a,o){gg.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],gg.x,gg.y,gg.z)}t.CameraHelper=_g;var bg=new Fi,Mg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,m.default)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new ga;return s.setIndex(new $r(a,1)),s.setAttribute("position",new $r(o,3)),i=t.call(this,s,new wd({color:r,toneMapped:!1})),i.object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return(0,g.default)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&bg.setFromObject(this.object),!bg.isEmpty()){var t=bg.min,n=bg.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}}]),n}(Bd);t.BoxHelper=Mg;var wg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,m.default)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ga;return s.setIndex(new $r(a,1)),s.setAttribute("position",new la(o,3)),i=t.call(this,s,new wd({color:r,toneMapped:!1})),i.box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return(0,g.default)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(Bd);t.Box3Helper=wg;var Sg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,m.default)(this,n);var o=a,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ga;l.setAttribute("position",new la(s,3)),l.computeBoundingSphere(),i=t.call(this,l,new wd({color:o,toneMapped:!1})),i.type="PlaneHelper",i.plane=e,i.size=r;var u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new ga;return c.setAttribute("position",new la(u,3)),c.computeBoundingSphere(),i.add(new Da(c,new Zr({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return(0,g.default)(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),(0,u.default)((0,c.default)(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(kd);t.PlaneHelper=Sg;var Ag,Tg,Cg=new Ii,Eg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ii(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ii(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return(0,m.default)(this,n),e=t.call(this),e.type="ArrowHelper",void 0===Ag&&(Ag=new ga,Ag.setAttribute("position",new la([0,0,0,0,1,0],3)),Tg=new Sf(0,.5,1,5,1),Tg.translate(0,-.5,0)),e.position.copy(r),e.line=new kd(Ag,new wd({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Da(Tg,new Zr({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(i),e.setLength(a,s,l),e}return(0,g.default)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Cg.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Cg,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return(0,u.default)((0,c.default)(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(Or);t.ArrowHelper=Eg;var kg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,m.default)(this,n);var r=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new ga;o.setAttribute("position",new la(r,3)),o.setAttribute("color",new la(a,3));var s=new wd({vertexColors:!0,toneMapped:!1});return e=t.call(this,o,s),e.type="AxesHelper",e}return(0,g.default)(n,[{key:"setColors",value:function(e,t,n){var i=new xi,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Bd);t.AxesHelper=kg;var Lg=function(){function e(){(0,m.default)(this,e),this.type="ShapePath",this.color=new xi,this.subPaths=[],this.currentPath=null}return(0,g.default)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new xf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new Pf;a.curves=r.curves,t.push(a)}return t}function n(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[r],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var i,r,a,o=dp.isClockWise,s=this.subPaths;if(0===s.length)return[];var l=[];if(1===s.length)return r=s[0],a=new Pf,a.curves=r.curves,l.push(a),l;var u=!o(s[0].getPoints());u=e?!u:u;var c,h,d=[],f=[],p=[],v=0;f[v]=void 0,p[v]=[];for(var m=0,g=s.length;m<g;m++)r=s[m],c=r.getPoints(),i=o(c),i=e?!i:i,i?(!u&&f[v]&&v++,f[v]={s:new Pf,p:c},f[v].s.curves=r.curves,u&&v++,p[v]=[]):p[v].push({h:r,p:c[0]});if(!f[0])return t(s);if(f.length>1){for(var y=!1,_=0,x=0,b=f.length;x<b;x++)d[x]=[];for(var M=0,w=f.length;M<w;M++)for(var S=p[M],A=0;A<S.length;A++){for(var T=S[A],C=!0,E=0;E<f.length;E++)n(T.p,f[E].p)&&(M!==E&&_++,C?(C=!1,d[E].push(T)):y=!0);C&&d[M].push(T)}_>0&&!1===y&&(p=d)}for(var k=0,L=f.length;k<L;k++){a=f[k].s,l.push(a),h=p[k];for(var R=0,B=h.length;R<B;R++)a.holes.push(h[R].h)}return l}}]),e}();t.ShapePath=Lg;var Rg=Bg();function Bg(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(i[a]=0,i[256|a]=32768,r[a]=24,r[256|a]=24):o<-14?(i[a]=1024>>-o-14,i[256|a]=1024>>-o-14|32768,r[a]=-o-1,r[256|a]=-o-1):o<=15?(i[a]=o+15<<10,i[256|a]=o+15<<10|32768,r[a]=13,r[256|a]=13):o<128?(i[a]=31744,i[256|a]=64512,r[a]=24,r[256|a]=24):(i[a]=31744,i[256|a]=64512,r[a]=13,r[256|a]=13)}for(var s=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64),c=1;c<1024;++c){var h=c<<13,d=0;while(0===(8388608&h))h<<=1,d-=8388608;h&=-8388609,d+=947912704,s[c]=h|d}for(var f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(var p=1;p<31;++p)l[p]=p<<23;l[31]=1199570944,l[32]=2147483648;for(var v=33;v<63;++v)l[v]=2147483648+(v-32<<23);l[63]=3347054592;for(var m=1;m<64;++m)32!==m&&(u[m]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:l,offsetTable:u}}function Pg(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Dn(e,-65504,65504),Rg.floatView[0]=e;var t=Rg.uint32View[0],n=t>>23&511;return Rg.baseTable[n]+((8388607&t)>>Rg.shiftTable[n])}function Ig(e){var t=e>>10;return Rg.uint32View[0]=Rg.mantissaTable[Rg.offsetTable[t]+(1023&e)]+Rg.exponentTable[t],Rg.floatView[0]}var Dg=Object.freeze({__proto__:null,toHalfFloat:Pg,fromHalfFloat:Ig});function Og(){console.error("THREE.ImmediateRenderObject has been removed.")}t.DataUtils=Dg;var Fg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r){var a;return(0,m.default)(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),a=t.call(this,e,i,r),a.samples=4,a}return n}(Ci);t.WebGLMultisampleRenderTarget=Fg;var Ng=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,i,r,a)}return n}(Ei);t.DataTexture2DArray=Ng;var Gg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,i,r,a)}return n}(Li);t.DataTexture3D=Gg;var Ug=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){return(0,m.default)(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,i,r,a,o,s)}return n}(Na);t.BoxBufferGeometry=Ug;var zg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,i,r,a)}return n}(Mf);t.CapsuleBufferGeometry=zg;var Hg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,i,r,a)}return n}(wf);t.CircleBufferGeometry=Hg;var Vg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l){return(0,m.default)(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,i,r,a,o,s,l)}return n}(Af);t.ConeBufferGeometry=Vg;var Wg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l,u){return(0,m.default)(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,i,r,a,o,s,l,u)}return n}(Sf);t.CylinderBufferGeometry=Wg;var jg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,i)}return n}(Cf);t.DodecahedronBufferGeometry=jg;var Jg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,i)}return n}(vp);t.ExtrudeBufferGeometry=Jg;var Xg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,i)}return n}(yp);t.IcosahedronBufferGeometry=Xg;var qg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,i,r,a)}return n}(bf);t.LatheBufferGeometry=qg;var Yg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,i)}return n}(_p);t.OctahedronBufferGeometry=Yg;var Zg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,i,r,a)}return n}(lo);t.PlaneBufferGeometry=Zg;var Kg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a){return(0,m.default)(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,i,r,a)}return n}(Tf);t.PolyhedronBufferGeometry=Kg;var Qg=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){return(0,m.default)(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,i,r,a,o,s)}return n}(xp);t.RingBufferGeometry=Qg;var $g=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,i)}return n}(bp);t.ShapeBufferGeometry=$g;var ey=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s,l){return(0,m.default)(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,i,r,a,o,s,l)}return n}(wp);t.SphereBufferGeometry=ey;var ty=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i){return(0,m.default)(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,i)}return n}(Sp);t.TetrahedronBufferGeometry=ty;var ny=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o){return(0,m.default)(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,i,r,a,o)}return n}(Ap);t.TorusBufferGeometry=ny;var iy=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o,s){return(0,m.default)(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,i,r,a,o,s)}return n}(Tp);t.TorusKnotBufferGeometry=iy;var ry=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e,i,r,a,o){return(0,m.default)(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,i,r,a,o)}return n}(Cp);t.TubeBufferGeometry=ry,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:y}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=y)},e715:function(e,t,n){"use strict";n("caad"),n("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"u-toast",mixins:[uni.$u.mpMixin,uni.$u.mixin],data:function(){return{isShow:!1,timer:null,config:{message:"",type:"",duration:2e3,icon:!0,position:"center",complete:null,overlay:!1,loading:!1},tmpConfig:{}}},computed:{iconName:function(){return this.tmpConfig.icon&&"none"!=this.tmpConfig.icon&&["error","warning","success","primary"].includes(this.tmpConfig.type)?uni.$u.type2icon(this.tmpConfig.type):""},overlayStyle:function(){var e={justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"rgba(0, 0, 0, 0)"};return e},iconStyle:function(){var e={marginRight:"4px"};return e},loadingIconColor:function(){var e="rgb(255, 255, 255)";return["error","warning","success","primary"].includes(this.tmpConfig.type)&&(e=uni.$u.hexToRgb(uni.$u.color[this.tmpConfig.type])),e},contentStyle:function(){var e=uni.$u.sys().windowHeight,t={},n=0;return"top"===this.tmpConfig.position?n=.25*-e:"bottom"===this.tmpConfig.position&&(n=.25*e),t.transform="translateY(".concat(n,"px)"),t}},created:function(){var e=this;["primary","success","error","warning","default","loading"].map((function(t){e[t]=function(n){return e.show({type:t,message:n})}}))},methods:{show:function(e){var t=this;this.tmpConfig=uni.$u.deepMerge(this.config,e),this.clearTimer(),this.isShow=!0,this.timer=setTimeout((function(){t.clearTimer(),"function"===typeof t.tmpConfig.complete&&t.tmpConfig.complete()}),this.tmpConfig.duration)},hide:function(){this.clearTimer()},clearTimer:function(){this.isShow=!1,clearTimeout(this.timer),this.timer=null}},beforeDestroy:function(){this.clearTimer()}};t.default=i},e7bc:function(e,t,n){"use strict";var i=n("90a9"),r=n.n(i);r.a},e8c2:function(e,t,n){"use strict";n.r(t);var i=n("1490"),r=n("021d");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("6dbc");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3927d88e",null,!1,i["a"],o);t["default"]=l.exports},efcb:function(e,t,n){"use strict";var i=n("4ea4");n("4de4"),n("4160"),n("c975"),n("d81d"),n("fb6a"),n("4e82"),n("a434"),n("c19f"),n("ace4"),n("4ec9"),n("b64b"),n("d3b7"),n("07ac"),n("ac1f"),n("3ca3"),n("466d"),n("38cf"),n("841c"),n("cfc3"),n("fd87"),n("8b09"),n("5cc6"),n("84c3"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=void 0;var r=i(n("3835")),a=i(n("45eb")),o=i(n("7e84")),s=i(n("b85c")),l=i(n("d4ec")),u=i(n("bee2")),c=i(n("262e")),h=i(n("2caf")),d=n("74a1"),f=function(e){(0,c.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,l.default)(this,n),i=t.call(this,e),i.dracoLoader=null,i.ktx2Loader=null,i.meshoptDecoder=null,i.pluginCallbacks=[],i.register((function(e){return new _(e)})),i.register((function(e){return new T(e)})),i.register((function(e){return new C(e)})),i.register((function(e){return new b(e)})),i.register((function(e){return new M(e)})),i.register((function(e){return new w(e)})),i.register((function(e){return new S(e)})),i.register((function(e){return new y(e)})),i.register((function(e){return new A(e)})),i.register((function(e){return new x(e)})),i.register((function(e){return new m(e)})),i.register((function(e){return new E(e)})),i.register((function(e){return new k(e)})),i}return(0,u.default)(n,[{key:"load",value:function(e,t,n,i){var r,a=this;r=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:d.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new d.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,r,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(i){o(i)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,i){var r,a={},o={};if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){var s=d.LoaderUtils.decodeText(new Uint8Array(e,0,4));if(s===L){try{a[v.KHR_BINARY_GLTF]=new P(e)}catch(m){return void(i&&i(m))}r=JSON.parse(a[v.KHR_BINARY_GLTF].content)}else r=JSON.parse(d.LoaderUtils.decodeText(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new re(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var u=0;u<this.pluginCallbacks.length;u++){var c=this.pluginCallbacks[u](l);o[c.name]=c,a[c.name]=!0}if(r.extensionsUsed)for(var h=0;h<r.extensionsUsed.length;++h){var f=r.extensionsUsed[h],p=r.extensionsRequired||[];switch(f){case v.KHR_MATERIALS_UNLIT:a[f]=new g;break;case v.KHR_DRACO_MESH_COMPRESSION:a[f]=new I(r,this.dracoLoader);break;case v.KHR_TEXTURE_TRANSFORM:a[f]=new D;break;case v.KHR_MESH_QUANTIZATION:a[f]=new O;break;default:p.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(n,i)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.parse(e,t,i,r)}))}}]),n}(d.Loader);function p(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}t.GLTFLoader=f;var v={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},m=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,u.default)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,i=t.length;n<i;n++){var r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;var r,a=t.json,o=a.extensions&&a.extensions[this.name]||{},s=o.lights||[],l=s[e],u=new d.Color(16777215);void 0!==l.color&&u.fromArray(l.color);var c=void 0!==l.range?l.range:0;switch(l.type){case"directional":r=new d.DirectionalLight(u),r.target.position.set(0,0,-1),r.add(r.target);break;case"point":r=new d.PointLight(u),r.distance=c;break;case"spot":r=new d.SpotLight(u),r.distance=c,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,r.angle=l.spot.outerConeAngle,r.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return r.position.set(0,0,0),r.decay=2,K(r,l),void 0!==l.intensity&&(r.intensity=l.intensity),r.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(r),t.cache.add(n,i),i}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,i=n.json,r=i.nodes[e],a=r.extensions&&r.extensions[this.name]||{},o=a.light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))}}]),e}(),g=function(){function e(){(0,l.default)(this,e),this.name=v.KHR_MATERIALS_UNLIT}return(0,u.default)(e,[{key:"getMaterialType",value:function(){return d.MeshBasicMaterial}},{key:"extendParams",value:function(e,t,n){var i=[];e.color=new d.Color(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var a=r.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,d.sRGBEncoding))}return Promise.all(i)}}]),e}(),y=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_EMISSIVE_STRENGTH}return(0,u.default)(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=i.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),_=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_CLEARCOAT}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new d.Vector2(o,o)}return Promise.all(r)}}]),e}(),x=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_IRIDESCENCE}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}]),e}(),b=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_SHEEN}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[];t.sheenColor=new d.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=i.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,d.sRGBEncoding)),void 0!==a.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}]),e}(),M=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_TRANSMISSION}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}]),e}(),w=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_VOLUME}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new d.Color(o[0],o[1],o[2]),Promise.all(r)}}]),e}(),S=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_IOR}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=i.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),A=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_MATERIALS_SPECULAR}return(0,u.default)(e,[{key:"getMaterialType",value:function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?d.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new d.Color(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,d.sRGBEncoding)),Promise.all(r)}}]),e}(),T=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.KHR_TEXTURE_BASISU}return(0,u.default)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var r=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}]),e}(),C=function(){function e(t){(0,l.default)(this,e),this.parser=t,this.name=v.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,u.default)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;var a=r.extensions[t],o=i.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,a.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),E=function(){function e(t){(0,l.default)(this,e),this.name=v.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,u.default)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){var t=i.byteOffset||0,n=i.byteLength||0,r=i.count,o=i.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(r,o,s,i.mode,i.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(r*o);return a.decodeGltfBuffer(new Uint8Array(e),r,o,s,i.mode,i.filter),e}))}))}return null}}]),e}(),k=function(){function e(t){(0,l.default)(this,e),this.name=v.EXT_MESH_GPU_INSTANCING,this.parser=t}return(0,u.default)(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;var r,a=n.meshes[i.mesh],o=(0,s.default)(a.primitives);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l.mode!==U.TRIANGLES&&l.mode!==U.TRIANGLE_STRIP&&l.mode!==U.TRIANGLE_FAN&&void 0!==l.mode)return null}}catch(m){o.e(m)}finally{o.f()}var u=i.extensions[this.name],c=u.attributes,h=[],f={},p=function(e){h.push(t.parser.getDependency("accessor",c[e]).then((function(t){return f[e]=t,f[e]})))};for(var v in c)p(v);return h.length<1?null:(h.push(this.parser.createNodeMesh(e)),Promise.all(h).then((function(e){var n,i=e.pop(),r=i.isGroup?i.children:[i],a=e[0].count,o=[],l=(0,s.default)(r);try{for(l.s();!(n=l.n()).done;){for(var u=n.value,c=new d.Matrix4,h=new d.Vector3,p=new d.Quaternion,v=new d.Vector3(1,1,1),g=new d.InstancedMesh(u.geometry,u.material,a),y=0;y<a;y++)f.TRANSLATION&&h.fromBufferAttribute(f.TRANSLATION,y),f.ROTATION&&p.fromBufferAttribute(f.ROTATION,y),f.SCALE&&v.fromBufferAttribute(f.SCALE,y),g.setMatrixAt(y,c.compose(h,p,v));for(var _ in f)"TRANSLATION"!==_&&"ROTATION"!==_&&"SCALE"!==_&&u.geometry.setAttribute(_,f[_]);d.Object3D.prototype.copy.call(g,u),g.frustumCulled=!1,t.parser.assignFinalMaterial(g),o.push(g)}}catch(m){l.e(m)}finally{l.f()}return i.isGroup?(i.clear(),i.add.apply(i,o),i):o[0]})))}}]),e}(),L="glTF",R=12,B={JSON:1313821514,BIN:5130562},P=function e(t){(0,l.default)(this,e),this.name=v.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,R);if(this.header={magic:d.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==L)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var i=this.header.length-R,r=new DataView(t,R),a=0;while(a<i){var o=r.getUint32(a,!0);a+=4;var s=r.getUint32(a,!0);if(a+=4,s===B.JSON){var u=new Uint8Array(t,R+a,o);this.content=d.LoaderUtils.decodeText(u)}else if(s===B.BIN){var c=R+a;this.body=t.slice(c,c+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},I=function(){function e(t,n){if((0,l.default)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=v.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,u.default)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(var u in a){var c=j[u]||u.toLowerCase();o[c]=a[u]}for(var h in e.attributes){var d=j[h]||h.toLowerCase();if(void 0!==a[h]){var f=n.accessors[e.attributes[h]],p=z[f.componentType];l[d]=p.name,s[d]=!0===f.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],r=s[n];void 0!==r&&(i.normalized=r)}t(e)}),o,l)}))}))}}]),e}(),D=function(){function e(){(0,l.default)(this,e),this.name=v.KHR_TEXTURE_TRANSFORM}return(0,u.default)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),O=function e(){(0,l.default)(this,e),this.name=v.KHR_MESH_QUANTIZATION},F=function(e){(0,c.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,a){return(0,l.default)(this,n),t.call(this,e,i,r,a)}return(0,u.default)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,a=0;a!==i;a++)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=i-t,c=(n-t)/u,h=c*c,d=h*c,f=e*l,p=f-l,v=-2*d+3*h,m=d-h,g=1-v,y=m-h+c,_=0;_!==o;_++){var x=a[p+_+o],b=a[p+_+s]*u,M=a[f+_+o],w=a[f+_]*u;r[_]=g*x+y*b+v*M+m*w}return r}}]),n}(d.Interpolant),N=new d.Quaternion,G=function(e){(0,c.default)(n,e);var t=(0,h.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"interpolate_",value:function(e,t,i,r){var s=(0,a.default)((0,o.default)(n.prototype),"interpolate_",this).call(this,e,t,i,r);return N.fromArray(s).normalize().toArray(s),s}}]),n}(F),U={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},z={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},H={9728:d.NearestFilter,9729:d.LinearFilter,9984:d.NearestMipmapNearestFilter,9985:d.LinearMipmapNearestFilter,9986:d.NearestMipmapLinearFilter,9987:d.LinearMipmapLinearFilter},V={33071:d.ClampToEdgeWrapping,33648:d.MirroredRepeatWrapping,10497:d.RepeatWrapping},W={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},j={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},J={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},X={CUBICSPLINE:void 0,LINEAR:d.InterpolateLinear,STEP:d.InterpolateDiscrete},q={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Y(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new d.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:d.FrontSide})),e["DefaultMaterial"]}function Z(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function K(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Q(e,t,n){for(var i=!1,r=!1,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(i=!0),void 0!==l.NORMAL&&(r=!0),void 0!==l.COLOR_0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(e);for(var u=[],c=[],h=[],d=0,f=t.length;d<f;d++){var p=t[d];if(i){var v=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(v)}if(r){var m=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(m)}if(a){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(g)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}function $(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(var a=0,o=r.length;a<o;a++)e.morphTargetDictionary[r[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ee(e){var t,n=e.extensions&&e.extensions[v.KHR_DRACO_MESH_COMPRESSION];return t=n?"draco:"+n.bufferView+":"+n.indices+":"+te(n.attributes):e.indices+":"+te(e.attributes)+":"+e.mode,t}function te(e){for(var t="",n=Object.keys(e).sort(),i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function ne(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ie(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}var re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.default)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new p,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var i=!1,r=!1,a=-1;"undefined"!==typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||i||r&&a<98?this.textureLoader=new d.TextureLoader(this.options.manager):this.textureLoader=new d.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new d.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,u.default)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};Z(r,a,i),K(a,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i=0,r=t.length;i<r;i++)for(var a=t[i].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var i=this;if(e.refs[t]<=1)return n;var a=n.clone(),o=function e(t,n){var a=i.associations.get(t);null!=a&&i.associations.set(n,a);var o,l=(0,s.default)(t.children.entries());try{for(l.s();!(o=l.n()).done;){var u=(0,r.default)(o.value,2),c=u[0],h=u[1];e(h,n.children[c])}}catch(d){l.e(d)}finally{l.f()}};return o(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++){var r=e(t[i]);r&&n.push(r)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[v.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load(d.LoaderUtils.resolveURL(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){var r=W[i.type],a=z[i.componentType],o=!0===i.normalized,s=new a(i.count*r);return Promise.resolve(new d.BufferAttribute(s,r,o))}var l=[];return void 0!==i.bufferView?l.push(this.getDependency("bufferView",i.bufferView)):l.push(null),void 0!==i.sparse&&(l.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(l).then((function(e){var r,a,o=e[0],s=W[i.type],l=z[i.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,h=i.byteOffset||0,f=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;if(f&&f!==c){var v=Math.floor(h/f),m="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count,g=t.cache.get(m);g||(r=new l(o,v*f,i.count*f/u),g=new d.InterleavedBuffer(r,f/u),t.cache.add(m,g)),a=new d.InterleavedBufferAttribute(g,s,h%f/u,p)}else r=null===o?new l(i.count*s):new l(o,h,i.count*s),a=new d.BufferAttribute(r,s,p);if(void 0!==i.sparse){var y=W.SCALAR,_=z[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,M=new _(e[1],x,i.sparse.count*y),w=new l(e[2],b,i.sparse.count*s);null!==o&&(a=new d.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var S=0,A=M.length;S<A;S++){var T=M[S];if(a.setX(T,w[S*s]),s>=2&&a.setY(T,w[S*s+1]),s>=3&&a.setZ(T,w[S*s+2]),s>=4&&a.setW(T,w[S*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,i=t.textures[e],r=i.source,a=t.images[r],o=this.textureLoader;if(a.uri){var s=n.manager.getHandler(a.uri);null!==s&&(o=s)}return this.loadTextureImage(e,r,o)}},{key:"loadTextureImage",value:function(e,t,n){var i=this,r=this.json,a=r.textures[e],o=r.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"";var n=r.samplers||{},s=n[a.sampler]||{};return t.magFilter=H[s.magFilter]||d.LinearFilter,t.minFilter=H[s.minFilter]||d.LinearMipmapLinearFilter,t.wrapS=V[s.wrapS]||d.RepeatWrapping,t.wrapT=V[s.wrapT]||d.RepeatWrapping,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var a=i.images[e],o=self.URL||self.webkitURL,s=a.uri||"",l=!1;if(void 0!==a.bufferView)s=n.getDependency("bufferView",a.bufferView).then((function(e){l=!0;var t=new Blob([e],{type:a.mimeType});return s=o.createObjectURL(t),s}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var u=Promise.resolve(s).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new d.Texture(e);t.needsUpdate=!0,n(t)}),t.load(d.LoaderUtils.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){return!0===l&&o.revokeObjectURL(s),e.userData.mimeType=a.mimeType||ie(a.uri),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e}));return this.sourceCache[e]=u,u}},{key:"assignTexture",value:function(e,t,n,i){var r=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[v.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[v.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=r.associations.get(a);a=r.extensions[v.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),r.associations.set(a,s)}}return void 0!==i&&(a.encoding=i),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new d.PointsMaterial,d.Material.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new d.LineBasicMaterial,d.Material.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(l,u)),n=u}if(i||r||a){var c="ClonedMaterial:"+n.uuid+":";i&&(c+="derivative-tangents:"),r&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),r&&(h.vertexColors=!0),a&&(h.flatShading=!0),i&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return d.MeshStandardMaterial}},{key:"loadMaterial",value:function(e){var t,n=this,i=this.json,r=this.extensions,a=i.materials[e],o={},s=a.extensions||{},l=[];if(s[v.KHR_MATERIALS_UNLIT]){var u=r[v.KHR_MATERIALS_UNLIT];t=u.getMaterialType(),l.push(u.extendParams(o,a,n))}else{var c=a.pbrMetallicRoughness||{};if(o.color=new d.Color(1,1,1),o.opacity=1,Array.isArray(c.baseColorFactor)){var h=c.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}void 0!==c.baseColorTexture&&l.push(n.assignTexture(o,"map",c.baseColorTexture,d.sRGBEncoding)),o.metalness=void 0!==c.metallicFactor?c.metallicFactor:1,o.roughness=void 0!==c.roughnessFactor?c.roughnessFactor:1,void 0!==c.metallicRoughnessTexture&&(l.push(n.assignTexture(o,"metalnessMap",c.metallicRoughnessTexture)),l.push(n.assignTexture(o,"roughnessMap",c.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=d.DoubleSide);var f=a.alphaMode||q.OPAQUE;if(f===q.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,f===q.MASK&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==d.MeshBasicMaterial&&(l.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new d.Vector2(1,1),void 0!==a.normalTexture.scale)){var p=a.normalTexture.scale;o.normalScale.set(p,p)}return void 0!==a.occlusionTexture&&t!==d.MeshBasicMaterial&&(l.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==d.MeshBasicMaterial&&(o.emissive=(new d.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==d.MeshBasicMaterial&&l.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,d.sRGBEncoding)),Promise.all(l).then((function(){var i=new t(o);return a.name&&(i.name=a.name),K(i,a),n.associations.set(i,{materials:e}),a.extensions&&Z(r,i,a),i}))}},{key:"createUniqueName",value:function(e){for(var t=d.PropertyBinding.sanitizeNodeName(e||""),n=t,i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[v.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return se(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o],u=ee(l),c=i[u];if(c)a.push(c.promise);else{var h=void 0;h=l.extensions&&l.extensions[v.KHR_DRACO_MESH_COMPRESSION]?r(l):se(new d.BufferGeometry,l,t),i[u]={primitive:l,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,i=this.extensions,r=n.meshes[e],a=r.primitives,o=[],s=0,l=a.length;s<l;s++){var u=void 0===a[s].material?Y(this.cache):this.getDependency("material",a[s].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],l=[],u=0,c=s.length;u<c;u++){var h=s[u],f=a[u],p=void 0,v=o[u];if(f.mode===U.TRIANGLES||f.mode===U.TRIANGLE_STRIP||f.mode===U.TRIANGLE_FAN||void 0===f.mode)p=!0===r.isSkinnedMesh?new d.SkinnedMesh(h,v):new d.Mesh(h,v),!0!==p.isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),f.mode===U.TRIANGLE_STRIP?p.geometry=le(p.geometry,d.TriangleStripDrawMode):f.mode===U.TRIANGLE_FAN&&(p.geometry=le(p.geometry,d.TriangleFanDrawMode));else if(f.mode===U.LINES)p=new d.LineSegments(h,v);else if(f.mode===U.LINE_STRIP)p=new d.Line(h,v);else if(f.mode===U.LINE_LOOP)p=new d.LineLoop(h,v);else{if(f.mode!==U.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);p=new d.Points(h,v)}Object.keys(p.geometry.morphAttributes).length>0&&$(p,r),p.name=t.createUniqueName(r.name||"mesh_"+e),K(p,r),f.extensions&&Z(i,p,f),t.assignFinalMaterial(p),l.push(p)}for(var m=0,g=l.length;m<g;m++)t.associations.set(l[m],{meshes:e,primitives:m});if(1===l.length)return l[0];var y=new d.Group;t.associations.set(y,{meshes:e});for(var _=0,x=l.length;_<x;_++)y.add(l[_]);return y}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new d.PerspectiveCamera(d.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new d.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),K(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],i=0,r=t.joints.length;i<r;i++)n.push(this.getDependency("node",t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),i=e,r=[],a=[],o=0,s=i.length;o<s;o++){var l=i[o];if(l){r.push(l);var u=new d.Matrix4;null!==n&&u.fromArray(n.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new d.Skeleton(r,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json,n=t.animations[e],i=[],r=[],a=[],o=[],s=[],l=0,u=n.channels.length;l<u;l++){var c=n.channels[l],h=n.samplers[c.sampler],f=c.target,p=f.node,v=void 0!==n.parameters?n.parameters[h.input]:h.input,m=void 0!==n.parameters?n.parameters[h.output]:h.output;i.push(this.getDependency("node",p)),r.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",m)),o.push(h),s.push(f)}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(t){for(var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=[],u=function(e,t){var n=i[e],u=r[e],c=a[e],h=o[e],f=s[e];if(void 0===n)return"continue";n.updateMatrix();var p=void 0;switch(J[f.path]){case J.weights:p=d.NumberKeyframeTrack;break;case J.rotation:p=d.QuaternionKeyframeTrack;break;case J.position:case J.scale:default:p=d.VectorKeyframeTrack;break}var v=n.name?n.name:n.uuid,m=void 0!==h.interpolation?X[h.interpolation]:d.InterpolateLinear,g=[];J[f.path]===J.weights?n.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(v);var y=c.array;if(c.normalized){for(var _=ne(y.constructor),x=new Float32Array(y.length),b=0,M=y.length;b<M;b++)x[b]=y[b]*_;y=x}for(var w=0,S=g.length;w<S;w++){var A=new p(g[w]+"."+J[f.path],u.array,y,m);"CUBICSPLINE"===h.interpolation&&(A.createInterpolant=function(e){var t=this instanceof d.QuaternionKeyframeTrack?G:F;return new t(this.times,this.values,this.getValueSize()/3,e)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(A)}},c=0,h=i.length;c<h;c++)u(c,h);var f=n.name?n.name:"animation_"+e;return new d.AnimationClip(f,void 0,l)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,i=this,r=t.nodes[e],a=r.name?i.createUniqueName(r.name):"";return function(){var t=[],n=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==r.camera&&t.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if(o=!0===r.isBone?new d.Bone:t.length>1?new d.Group:1===t.length?t[0]:new d.Object3D,o!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(r.name&&(o.userData.name=r.name,o.name=a),K(o,r),r.extensions&&Z(n,o,r),void 0!==r.matrix){var u=new d.Matrix4;u.fromArray(r.matrix),o.applyMatrix4(u)}else void 0!==r.translation&&o.position.fromArray(r.translation),void 0!==r.rotation&&o.quaternion.fromArray(r.rotation),void 0!==r.scale&&o.scale.fromArray(r.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=e,o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,i=this.json.scenes[e],a=this,o=new d.Group;i.name&&(o.name=a.createUniqueName(i.name)),K(o,i),i.extensions&&Z(n,o,i);for(var l=i.nodes||[],u=[],c=0,h=l.length;c<h;c++)u.push(ae(l[c],o,t,a));return Promise.all(u).then((function(){var e=function(e){var t,n=new Map,i=(0,s.default)(a.associations);try{for(i.s();!(t=i.n()).done;){var o=(0,r.default)(t.value,2),l=o[0],u=o[1];(l instanceof d.Material||l instanceof d.Texture)&&n.set(l,u)}}catch(c){i.e(c)}finally{i.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n};return a.associations=e(o),o}))}}]),e}();function ae(e,t,n,i){var r=n.nodes[e];return i.getDependency("node",e).then((function(e){return void 0===r.skin?e:i.getDependency("skin",r.skin).then((function(t){return e.traverse((function(e){e.isSkinnedMesh&&e.bind(t,e.matrixWorld)})),e}))})).then((function(e){t.add(e);var a=[];if(r.children)for(var o=r.children,s=0,l=o.length;s<l;s++){var u=o[s];a.push(ae(u,e,n,i))}return Promise.all(a)}))}function oe(e,t,n){var i=t.attributes,r=new d.Box3;if(void 0!==i.POSITION){var a=n.json.accessors[i.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(r.set(new d.Vector3(o[0],o[1],o[2]),new d.Vector3(s[0],s[1],s[2])),a.normalized){var l=ne(z[a.componentType]);r.min.multiplyScalar(l),r.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new d.Vector3,h=new d.Vector3,f=0,p=u.length;f<p;f++){var v=u[f];if(void 0!==v.POSITION){var m=n.json.accessors[v.POSITION],g=m.min,y=m.max;if(void 0!==g&&void 0!==y){if(h.setX(Math.max(Math.abs(g[0]),Math.abs(y[0]))),h.setY(Math.max(Math.abs(g[1]),Math.abs(y[1]))),h.setZ(Math.max(Math.abs(g[2]),Math.abs(y[2]))),m.normalized){var _=ne(z[m.componentType]);h.multiplyScalar(_)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}e.boundingBox=r;var x=new d.Sphere;r.getCenter(x.center),x.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=x}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function se(e,t,n){var i=t.attributes,r=[];function a(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(var o in i){var s=j[o]||o.toLowerCase();s in e.attributes||r.push(a(i[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(l)}return K(e,t),oe(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?Q(e,t.targets,n):e}))}function le(e,t){var n=e.getIndex();if(null===n){var i=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<r.count;a++)i.push(a);e.setIndex(i),n=e.getIndex()}var o=n.count-2,s=[];if(t===d.TriangleFanDrawMode)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}},f1b0:function(e,t,n){"use strict";function i(e){if(e&&"undefined"!==typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function r(e,t){var n=e.__state.conversionName.toString(),i=Math.round(e.r),r=Math.round(e.g),a=Math.round(e.b),o=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){var c=e.hex.toString(16);while(c.length<6)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+i+","+r+","+a+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+a+","+o+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+a+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+a+","+o+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+a+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+a+",a:"+o+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+o+"}":"unknown format"}n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("4160"),n("c975"),n("fb6a"),n("a434"),n("e439"),n("3410"),n("b64b"),n("131a"),n("d3b7"),n("acd8"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("159b"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GUI=t.gui=t.dom=t.controllers=t.color=void 0;var a=Array.prototype.forEach,o=Array.prototype.slice,s={BREAK:{},extend:function(e){return this.each(o.call(arguments,1),(function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(o.call(arguments,1),(function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=o.call(arguments);return function(){for(var t=o.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(a&&e.forEach&&e.forEach===a)e.forEach(t,n);else if(e.length===e.length+0){var i=void 0,r=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i=void 0;return function(){var r=this,a=arguments;function o(){i=null,n||e.apply(r,a)}var s=n||!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(r,a)}},toArray:function(e){return e.toArray?e.toArray():o.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},l=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:s.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b)&&s.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v)&&s.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],u=void 0,c=void 0,h=function(){c=!1;var e=arguments.length>1?s.toArray(arguments):arguments[0];return s.each(l,(function(t){if(t.litmus(e))return s.each(t.conversions,(function(t,n){if(u=t.read(e),!1===c&&!1!==u)return c=u,u.conversionName=n,u.conversion=t,s.BREAK})),s.BREAK})),c},d=void 0,f={hsv_to_rgb:function(e,t,n){var i=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),a=n*(1-t),o=n*(1-r*t),s=n*(1-(1-r)*t),l=[[n,s,a],[o,n,a],[a,n,s],[a,o,n],[s,a,n],[n,a,o]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var i=Math.min(e,t,n),r=Math.max(e,t,n),a=r-i,o=void 0,s=void 0;return 0===r?{h:NaN,s:0,v:0}:(s=a/r,o=e===r?(t-n)/a:t===r?2+(n-e)/a:4+(e-t)/a,o/=6,o<0&&(o+=1),{h:360*o,s:s,v:r/255})},rgb_to_hex:function(e,t,n){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),i=this.hex_with_component(i,0,n),i},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(d=8*t)|e&~(255<<d)}},p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},y=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},x=function(){function e(){if(v(this,e),this.__state=h.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(e,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function b(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||x.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(x.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function M(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||x.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(x.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}x.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=f.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");s.extend(e.__state,f.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},x.recalculateHSV=function(e){var t=f.rgb_to_hsv(e.r,e.g,e.b);s.extend(e.__state,{s:t.s,v:t.v}),s.isNaN(t.h)?s.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},x.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(x.prototype,"r",2),b(x.prototype,"g",1),b(x.prototype,"b",0),M(x.prototype,"h"),M(x.prototype,"s"),M(x.prototype,"v"),Object.defineProperty(x.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(x.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=f.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var w=function(){function e(t,n){v(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),S={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},A={};s.each(S,(function(e,t){s.each(e,(function(e){A[e]=t}))}));var T=/(\d+(\.\d+)?)px/;function C(e){if("0"===e||s.isUndefined(e))return 0;var t=e.match(T);return s.isNull(t)?0:parseFloat(t[1])}var E={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var i=n,r=t;s.isUndefined(r)&&(r=!0),s.isUndefined(i)&&(i=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,i){var r=n||{},a=A[t];if(!a)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(a);switch(a){case"MouseEvents":var l=r.x||r.clientX||0,u=r.y||r.clientY||0;o.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=o.initKeyboardEvent||o.initKeyEvent;s.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:o.initEvent(t,r.bubbles||!1,r.cancelable||!0);break}s.defaults(o,i),e.dispatchEvent(o)},bind:function(e,t,n,i){var r=i||!1;return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),E},unbind:function(e,t,n,i){var r=i||!1;return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),E},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return E},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}else e.className=void 0;return E},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return C(t["border-left-width"])+C(t["border-right-width"])+C(t["padding-left"])+C(t["padding-right"])+C(t.width)},getHeight:function(e){var t=getComputedStyle(e);return C(t["border-top-width"])+C(t["border-bottom-width"])+C(t["padding-top"])+C(t["padding-bottom"])+C(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},k=function(e){function t(e,n){v(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;function a(){r.setValue(!r.__prev)}return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),E.bind(i.__checkbox,"change",a,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return y(t,e),m(t,[{key:"setValue",value:function(e){var n=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(w),L=function(e){function t(e,n,i){v(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=i,o=r;if(r.__select=document.createElement("select"),s.isArray(a)){var l={};s.each(a,(function(e){l[e]=e})),a=l}return s.each(a,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),o.__select.appendChild(n)})),r.updateDisplay(),E.bind(r.__select,"change",(function(){var e=this.options[this.selectedIndex].value;o.setValue(e)})),r.domElement.appendChild(r.__select),r}return y(t,e),m(t,[{key:"setValue",value:function(e){var n=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return E.isActive(this.__select)?this:(this.__select.value=this.getValue(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(w),R=function(e){function t(e,n){v(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;function a(){r.setValue(r.__input.value)}function o(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),E.bind(i.__input,"keyup",a),E.bind(i.__input,"change",a),E.bind(i.__input,"blur",o),E.bind(i.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return y(t,e),m(t,[{key:"updateDisplay",value:function(){return E.isActive(this.__input)||(this.__input.value=this.getValue()),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(w);function B(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var P=function(e){function t(e,n,i){v(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=i||{};return r.__min=a.min,r.__max=a.max,r.__step=a.step,s.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=B(r.__impliedStep),r}return y(t,e),m(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=B(e),this}}]),t}(w);function I(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var D=function(e){function t(e,n,i){v(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));r.__truncationSuspended=!1;var a=r,o=void 0;function l(){var e=parseFloat(a.__input.value);s.isNaN(e)||a.setValue(e)}function u(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(){u()}function h(e){var t=o-e.clientY;a.setValue(a.getValue()+t*a.__impliedStep),o=e.clientY}function d(){E.unbind(window,"mousemove",h),E.unbind(window,"mouseup",d),u()}function f(e){E.bind(window,"mousemove",h),E.bind(window,"mouseup",d),o=e.clientY}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),E.bind(r.__input,"change",l),E.bind(r.__input,"blur",c),E.bind(r.__input,"mousedown",f),E.bind(r.__input,"keydown",(function(e){13===e.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,u())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return y(t,e),m(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():I(this.getValue(),this.__precision),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(P);function O(e,t,n,i,r){return i+(e-t)/(n-t)*(r-i)}var F=function(e){function t(e,n,i,r,a){v(this,t);var o=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:i,max:r,step:a})),s=o;function l(e){document.activeElement.blur(),E.bind(window,"mousemove",u),E.bind(window,"mouseup",c),u(e)}function u(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(O(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function c(){E.unbind(window,"mousemove",u),E.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function h(e){1===e.touches.length&&(E.bind(window,"touchmove",d),E.bind(window,"touchend",f),d(e))}function d(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(O(t,n.left,n.right,s.__min,s.__max))}function f(){E.unbind(window,"touchmove",d),E.unbind(window,"touchend",f),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),E.bind(o.__background,"mousedown",l),E.bind(o.__background,"touchstart",h),E.addClass(o.__background,"slider"),E.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return y(t,e),m(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(P),N=function(e){function t(e,n,i){v(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,E.bind(r.__button,"click",(function(e){return e.preventDefault(),a.fire(),!1})),E.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return y(t,e),m(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(w),G=function(e){function t(e,n){v(this,t);var i=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.__color=new x(i.getValue()),i.__temp=new x(0);var r=i;i.domElement=document.createElement("div"),E.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",E.bind(i.__input,"keydown",(function(e){13===e.keyCode&&d.call(this)})),E.bind(i.__input,"blur",d),E.bind(i.__selector,"mousedown",(function(){E.addClass(this,"drag").bind(window,"mouseup",(function(){E.removeClass(r.__selector,"drag")}))})),E.bind(i.__selector,"touchstart",(function(){E.addClass(this,"drag").bind(window,"touchend",(function(){E.removeClass(r.__selector,"drag")}))}));var a=document.createElement("div");function o(e){p(e),E.bind(window,"mousemove",p),E.bind(window,"touchmove",p),E.bind(window,"mouseup",u),E.bind(window,"touchend",u)}function l(e){m(e),E.bind(window,"mousemove",m),E.bind(window,"touchmove",m),E.bind(window,"mouseup",c),E.bind(window,"touchend",c)}function u(){E.unbind(window,"mousemove",p),E.unbind(window,"touchmove",p),E.unbind(window,"mouseup",u),E.unbind(window,"touchend",u),f()}function c(){E.unbind(window,"mousemove",m),E.unbind(window,"touchmove",m),E.unbind(window,"mouseup",c),E.unbind(window,"touchend",c),f()}function d(){var e=h(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function f(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,i=n.clientX,a=n.clientY,o=(i-t.left)/(t.right-t.left),s=1-(a-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),o>1?o=1:o<0&&(o=0),r.__color.v=s,r.__color.s=o,r.setValue(r.__color.toOriginal()),!1}function m(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,i=n.clientY,a=1-(i-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),r.__color.h=360*a,r.setValue(r.__color.toOriginal()),!1}return s.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),s.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),s.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),s.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),s.extend(a.style,{width:"100%",height:"100%",background:"none"}),z(a,"top","rgba(0,0,0,0)","#000"),s.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),H(i.__hue_field),s.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),E.bind(i.__saturation_field,"mousedown",o),E.bind(i.__saturation_field,"touchstart",o),E.bind(i.__field_knob,"mousedown",o),E.bind(i.__field_knob,"touchstart",o),E.bind(i.__hue_field,"mousedown",l),E.bind(i.__hue_field,"touchstart",l),i.__saturation_field.appendChild(a),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return y(t,e),m(t,[{key:"updateDisplay",value:function(){var e=h(this.getValue());if(!1!==e){var t=!1;s.each(x.COMPONENTS,(function(n){if(!s.isUndefined(e[n])&&!s.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&s.extend(this.__color.__state,e)}s.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;s.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,z(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),s.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),t}(w),U=["-moz-","-o-","-webkit-","-ms-",""];function z(e,t,n,i){e.style.background="",s.each(U,(function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "}))}function H(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var V={load:function(e,t){var n=t||document,i=n.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,n.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){var n=t||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(a){}}},W='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',j=function(e,t){var n=e[t];return s.isArray(arguments[2])||s.isObject(arguments[2])?new L(e,t,arguments[2]):s.isNumber(n)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?s.isNumber(arguments[4])?new F(e,t,arguments[2],arguments[3],arguments[4]):new F(e,t,arguments[2],arguments[3]):s.isNumber(arguments[4])?new D(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new D(e,t,{min:arguments[2],max:arguments[3]}):s.isString(n)?new R(e,t):s.isFunction(n)?new N(e,t,""):s.isBoolean(n)?new k(e,t):null};function J(e){setTimeout(e,1e3/60)}var X=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||J,q=function(){function e(){v(this,e),this.backgroundElement=document.createElement("div"),s.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),E.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),s.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;E.bind(this.backgroundElement,"click",(function(){t.hide()}))}return m(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),s.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",E.unbind(e.domElement,"webkitTransitionEnd",t),E.unbind(e.domElement,"transitionend",t),E.unbind(e.domElement,"oTransitionEnd",t)};E.bind(this.domElement,"webkitTransitionEnd",t),E.bind(this.domElement,"transitionend",t),E.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-E.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-E.getHeight(this.domElement)/2+"px"}}]),e}(),Y=i(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");V.inject(Y);var Z="dg",K=72,Q=20,$="Default",ee=function(){try{return!!window.localStorage}catch(e){return!1}}(),te=void 0,ne=!0,ie=void 0,re=!1,ae=[],oe=function e(t){var n=this,i=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),E.addClass(this.domElement,Z),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=s.defaults(i,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),i=s.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),s.isUndefined(i.load)?i.load={preset:$}:i.preset&&(i.load.preset=i.preset),s.isUndefined(i.parent)&&i.hideable&&ae.push(this),i.resizable=s.isUndefined(i.parent)&&i.resizable,i.autoPlace&&s.isUndefined(i.scrollable)&&(i.scrollable=!0);var r=ee&&"true"===localStorage.getItem(fe(this,"isLocal")),a=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(e){n.parent?n.getRoot().preset=e:i.load.preset=e,xe(this),n.revert()}},width:{get:function(){return i.width},set:function(e){i.width=e,ye(n,e)}},name:{get:function(){return i.name},set:function(e){i.name=e,o&&(o.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(t){i.closed=t,i.closed?E.addClass(n.__ul,e.CLASS_CLOSED):E.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return r},set:function(e){ee&&(r=e,e?E.bind(window,"unload",a):E.unbind(window,"unload",a),localStorage.setItem(fe(n,"isLocal"),e))}}}),s.isUndefined(i.parent)){if(this.closed=i.closed||!1,E.addClass(this.domElement,e.CLASS_MAIN),E.makeSelectable(this.domElement,!1),ee&&r){n.useLocalStorage=!0;var l=localStorage.getItem(fe(this,"gui"));l&&(i.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,E.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),i.closeOnTop?(E.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(E.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),E.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===i.closed&&(i.closed=!0);var u=document.createTextNode(i.name);E.addClass(u,"controller-name"),o=se(n,u);var c=function(e){return e.preventDefault(),n.closed=!n.closed,!1};E.addClass(this.__ul,e.CLASS_CLOSED),E.addClass(o,"title"),E.bind(o,"click",c),i.closed||(this.closed=!1)}function h(){var e=n.getRoot();e.width+=1,s.defer((function(){e.width-=1}))}i.autoPlace&&(s.isUndefined(i.parent)&&(ne&&(ie=document.createElement("div"),E.addClass(ie,Z),E.addClass(ie,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ie),ne=!1),ie.appendChild(this.domElement),E.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ye(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},E.bind(window,"resize",this.__resizeHandler),E.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),E.bind(this.__ul,"transitionend",this.__resizeHandler),E.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&ge(this),a=function(){ee&&"true"===localStorage.getItem(fe(n,"isLocal"))&&localStorage.setItem(fe(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,i.parent||h()};function se(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,n):e.__ul.appendChild(i),e.onResize(),i}function le(e){E.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&E.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function ue(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ce(e,t,n){if(n.__li=t,n.__gui=e,s.extend(n,{options:function(t){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),de(e,n.object,n.property,{before:i,factoryArgs:[s.toArray(arguments)]})}if(s.isArray(t)||s.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),de(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof F){var i=new D(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});s.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],r=i[e];n[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(i,e),t.apply(n,e)}})),E.addClass(t,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof D){var r=function(t){if(s.isNumber(n.__min)&&s.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var a=de(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return a.name(i),r&&a.listen(),a}return t};n.min=s.compose(r,n.min),n.max=s.compose(r,n.max)}else n instanceof k?(E.bind(t,"click",(function(){E.fakeEvent(n.__checkbox,"click")})),E.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof N?(E.bind(t,"click",(function(){E.fakeEvent(n.__button,"click")})),E.bind(t,"mouseover",(function(){E.addClass(n.__button,"hover")})),E.bind(t,"mouseout",(function(){E.removeClass(n.__button,"hover")}))):n instanceof G&&(E.addClass(t,"color"),n.updateDisplay=s.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=s.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&ue(e.getRoot(),!0),t}),n.setValue)}function he(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[t.property]=t,n.load&&n.load.remembered){var a=n.load.remembered,o=void 0;if(a[e.preset])o=a[e.preset];else{if(!a[$])return;o=a[$]}if(o[i]&&void 0!==o[i][t.property]){var s=o[i][t.property];t.initialValue=s,t.setValue(s)}}}}function de(e,t,n,i){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new G(t,n);else{var a=[t,n].concat(i.factoryArgs);r=j.apply(e,a)}i.before instanceof w&&(i.before=i.before.__li),he(e,r),E.addClass(r.domElement,"c");var o=document.createElement("span");E.addClass(o,"property-name"),o.innerHTML=r.property;var s=document.createElement("div");s.appendChild(o),s.appendChild(r.domElement);var l=se(e,s,i.before);return E.addClass(l,oe.CLASS_CONTROLLER_ROW),r instanceof G?E.addClass(l,"color"):E.addClass(l,p(r.getValue())),ce(e,l,r),e.__controllers.push(r),r}function fe(e,t){return document.location.href+"."+t}function pe(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ve(e,t){t.style.display=e.useLocalStorage?"block":"none"}function me(e){var t=e.__save_row=document.createElement("li");E.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),E.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",E.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",E.addClass(i,"button"),E.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",E.addClass(r,"button"),E.addClass(r,"save-as");var a=document.createElement("span");a.innerHTML="Revert",E.addClass(a,"button"),E.addClass(a,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?s.each(e.load.remembered,(function(t,n){pe(e,n,n===e.preset)})):pe(e,$,!1),E.bind(o,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(o),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(a),ee){var l=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block","true"===localStorage.getItem(fe(e,"isLocal"))&&u.setAttribute("checked","checked"),ve(e,l),E.bind(u,"change",(function(){e.useLocalStorage=!e.useLocalStorage,ve(e,l)}))}var h=document.getElementById("dg-new-constructor");E.bind(h,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||te.hide()})),E.bind(n,"click",(function(){h.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),te.show(),h.focus(),h.select()})),E.bind(i,"click",(function(){e.save()})),E.bind(r,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),E.bind(a,"click",(function(){e.revert()}))}function ge(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function i(){E.removeClass(e.__closeButton,oe.CLASS_DRAG),E.unbind(window,"mousemove",n),E.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),t=r.clientX,E.addClass(e.__closeButton,oe.CLASS_DRAG),E.bind(window,"mousemove",n),E.bind(window,"mouseup",i),!1}e.__resize_handle=document.createElement("div"),s.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),E.bind(e.__resize_handle,"mousedown",r),E.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function ye(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function _e(e,t){var n={};return s.each(e.__rememberedObjects,(function(i,r){var a={},o=e.__rememberedObjectIndecesToControllers[r];s.each(o,(function(e,n){a[n]=t?e.initialValue:e.getValue()})),n[r]=a})),n}function xe(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function be(e){0!==e.length&&X.call(window,(function(){be(e)})),s.each(e,(function(e){e.updateDisplay()}))}oe.toggleHide=function(){re=!re,s.each(ae,(function(e){e.domElement.style.display=re?"none":""}))},oe.CLASS_AUTO_PLACE="a",oe.CLASS_AUTO_PLACE_CONTAINER="ac",oe.CLASS_MAIN="main",oe.CLASS_CONTROLLER_ROW="cr",oe.CLASS_TOO_TALL="taller-than-window",oe.CLASS_CLOSED="closed",oe.CLASS_CLOSE_BUTTON="close-button",oe.CLASS_CLOSE_TOP="close-top",oe.CLASS_CLOSE_BOTTOM="close-bottom",oe.CLASS_DRAG="drag",oe.DEFAULT_WIDTH=245,oe.TEXT_CLOSED="Close Controls",oe.TEXT_OPEN="Open Controls",oe._keydownHandler=function(e){"text"===document.activeElement.type||e.which!==K&&e.keyCode!==K||oe.toggleHide()},E.bind(window,"keydown",oe._keydownHandler,!1),s.extend(oe.prototype,{add:function(e,t){return de(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return de(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;s.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ie.removeChild(this.domElement);var e=this;s.each(this.__folders,(function(t){e.removeFolder(t)})),E.unbind(window,"keydown",oe._keydownHandler,!1),le(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new oe(t);this.__folders[e]=n;var i=se(this,n.domElement);return E.addClass(i,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],le(e);var t=this;s.each(e.__folders,(function(t){e.removeFolder(t)})),s.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=E.getOffset(e.__ul).top,n=0;s.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=E.getHeight(t))})),window.innerHeight-t-Q<n?(E.addClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-Q+"px"):(E.removeClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&s.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:s.debounce((function(){this.onResize()}),50),remember:function(){if(s.isUndefined(te)&&(te=new q,te.domElement.innerHTML=W),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;s.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&me(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&ye(this,this.width)},getRoot:function(){var e=this;while(e.parent)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=_e(this)),e.folders={},s.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=_e(this),ue(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[$]=_e(this,!0)),this.load.remembered[e]=_e(this),this.preset=e,pe(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){s.each(this.__controllers,(function(t){this.getRoot().load.remembered?he(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),s.each(this.__folders,(function(e){e.revert(e)})),e||ue(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&be(this.__listening)},updateDisplay:function(){s.each(this.__controllers,(function(e){e.updateDisplay()})),s.each(this.__folders,(function(e){e.updateDisplay()}))}});var Me={Color:x,math:f,interpret:h};t.color=Me;var we={Controller:w,BooleanController:k,OptionController:L,StringController:R,NumberController:P,NumberControllerBox:D,NumberControllerSlider:F,FunctionController:N,ColorController:G};t.controllers=we;var Se={dom:E};t.dom=Se;var Ae={GUI:oe};t.gui=Ae;var Te=oe;t.GUI=Te;var Ce={color:Me,controllers:we,dom:Se,gui:Ae,GUI:Te},Ee=Ce;t.default=Ee},f2bc:function(e,t,n){"use strict";n.r(t);var i=n("11cd"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},f4b3:function(e,t,n){"use strict";var i=n("23e7"),r=n("d039"),a=n("7b0b"),o=n("c04e"),s=r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));i({target:"Date",proto:!0,forced:s},{toJSON:function(e){var t=a(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},f5ff:function(e,t,n){"use strict";n.r(t);var i=n("4e5b"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},f748:function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},fa95:function(e,t,n){"use strict";function i(e){return-1!==Function.toString.call(e).indexOf("[native code]")}n("c975"),n("d3b7"),n("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},fb2c:function(e,t,n){var i=n("74e8");i("Uint32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},fc78:function(e,t,n){"use strict";n.r(t);var i=n("a765"),r=n("326f");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("e7bc");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"c496bc48",null,!1,i["a"],o);t["default"]=l.exports},fcf8:function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{isDot:{type:Boolean,default:uni.$u.props.badge.isDot},value:{type:[Number,String],default:uni.$u.props.badge.value},show:{type:Boolean,default:uni.$u.props.badge.show},max:{type:[Number,String],default:uni.$u.props.badge.max},type:{type:String,default:uni.$u.props.badge.type},showZero:{type:Boolean,default:uni.$u.props.badge.showZero},bgColor:{type:[String,null],default:uni.$u.props.badge.bgColor},color:{type:[String,null],default:uni.$u.props.badge.color},shape:{type:String,default:uni.$u.props.badge.shape},numberType:{type:String,default:uni.$u.props.badge.numberType},offset:{type:Array,default:uni.$u.props.badge.offset},inverted:{type:Boolean,default:uni.$u.props.badge.inverted},absolute:{type:Boolean,default:uni.$u.props.badge.absolute}}};t.default=i},fd1c:function(e,t,n){"use strict";var i=n("00c5"),r=n.n(i);r.a},fd87:function(e,t,n){var i=n("74e8");i("Int8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))}}]);